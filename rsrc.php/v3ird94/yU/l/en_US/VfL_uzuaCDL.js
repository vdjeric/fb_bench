if (self.CavalryLogger) { CavalryLogger.start_js(["YifPd"]); }

__d("LiveMapCache",[],(function a(b,c,d,e,f,g){f.exports={TACO_LEVEL_0:0,TACO_LEVEL_1:1,TACO_LEVEL_2:2};}),null);
__d("LiveMapClickEventSource",[],(function a(b,c,d,e,f,g){f.exports={MAP_MARKER:"map_marker",GRID_ITEM:"grid_item",GRID_PLAYER:"grid_player",SIDEBAR_ITEM:"sidebar_item",SIDEBAR_PLAYER:"sidebar_player",TOOLTIP_PLAYER:"tooltip_player"};}),null);
__d("LiveMapPACEvent",[],(function a(b,c,d,e,f,g){f.exports={FILTERED:"filtered"};}),null);
__d("LiveMapViewChangeSource",[],(function a(b,c,d,e,f,g){f.exports={MAP_SIDEBAR_LINK:"map_sidebar_link",GRID_TEXT_LINK:"grid_text_link"};}),null);
__d("PublicCurrentlyLiveWithLocationVideosCache",[],(function a(b,c,d,e,f,g){f.exports={TACO_LEVEL_0:0,TACO_LEVEL_1:1,TACO_LEVEL_2:2,LOKI:100};}),null);
__d("PublicLiveMapEvent",[],(function a(b,c,d,e,f,g){f.exports={JS_LOADED:"js_loaded",APP_MOUNTED:"app_mounted",INITIAL_DATA_FETCHED:"initial_data_fetched",PUBLIC_CIRCLES_RENDERED:"public_circles_rendered",CIRCLE_CLICKED:"circle_clicked",VIEW_MODE_CHANGE:"view_mode_change",AUTOPLAY_VIDEO_CLOSED:"autoplay_video_closed",GO_LIVE_BUTTON_CLICKED:"go_live_button_clicked"};}),null);
__d("VectorMapTileSet",[],(function a(b,c,d,e,f,g){f.exports={LIVE_MAP:1,LIVE_MAP_DEV:2};}),null);
__d('LiveMapPACTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LiveMapPACLoggerConfig',this.$LiveMapPACTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LiveMapPACLoggerConfig',this.$LiveMapPACTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$LiveMapPACTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$LiveMapPACTypedLogger1=babelHelpers['extends']({},this.$LiveMapPACTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$LiveMapPACTypedLogger1.event=j;return this;};h.prototype.setVC=function(j){this.$LiveMapPACTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$LiveMapPACTypedLogger1.video_id=j;return this;};var i={event:true,vc:true,video_id:true};f.exports=h;}),null);
__d('PublicLiveMapInteractionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PublicLiveMapInteractionsLoggerConfig',this.$PublicLiveMapInteractionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PublicLiveMapInteractionsLoggerConfig',this.$PublicLiveMapInteractionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PublicLiveMapInteractionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PublicLiveMapInteractionsTypedLogger1=babelHelpers['extends']({},this.$PublicLiveMapInteractionsTypedLogger1,j);return this;};h.prototype.setClickSource=function(j){this.$PublicLiveMapInteractionsTypedLogger1.click_source=j;return this;};h.prototype.setEvent=function(j){this.$PublicLiveMapInteractionsTypedLogger1.event=j;return this;};h.prototype.setMapZoom=function(j){this.$PublicLiveMapInteractionsTypedLogger1.map_zoom=j;return this;};h.prototype.setTimeSpentID=function(j){this.$PublicLiveMapInteractionsTypedLogger1.time_spent_id=j;return this;};h.prototype.setVideoID=function(j){this.$PublicLiveMapInteractionsTypedLogger1.video_id=j;return this;};h.prototype.setViewChangeSource=function(j){this.$PublicLiveMapInteractionsTypedLogger1.view_change_source=j;return this;};h.prototype.setViewerCount=function(j){this.$PublicLiveMapInteractionsTypedLogger1.viewer_count=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$PublicLiveMapInteractionsTypedLogger1=babelHelpers['extends']({},this.$PublicLiveMapInteractionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={click_source:true,event:true,map_zoom:true,time_spent_id:true,video_id:true,view_change_source:true,viewer_count:true};f.exports=h;}),null);
__d('MapboxGLAttribution.react',['mapboxgl','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={position:'bottom-left'},l={map:j.object};h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MapboxGLAttribution2=function(){this.context.map.addControl(this.$MapboxGLAttribution1,this.props.position);}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MapboxGLAttribution1=new (c('mapboxgl').AttributionControl)();if(this.context.map.loaded()){this.$MapboxGLAttribution2();}else this.context.map.once('load',this.$MapboxGLAttribution2);};m.prototype.componentWillUnmount=function(){this.context.map.removeControl(this.$MapboxGLAttribution1);};m.prototype.render=function(){return null;};m.prototype.shouldComponentUpdate=function(){return false;};m.contextTypes=l;m.defaultProps=k;f.exports=m;}),null);
__d('MapboxGLDayNight.react',['React','setInterval','clearInterval'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=180/Math.PI,l=Math.PI/180;function m(z){return z/86400000+2440587.5;}function n(z){var aa=m(z),ba=aa-2451545;return (18.697374558+24.06570982441908*ba)%24;}function o(z){var aa=z-2451545,ba=(280.46+.9857474*aa)%360,ca=(357.528+.9856003*aa)%360,da=ba+1.915*Math.sin(ca*l)+.02*Math.sin(2*ca*l),ea=1.00014-.01671*Math.cos(ca*l)-.0014*Math.cos(2*ca*l);return {sunEclipticLongitude:da,earthDistanceToSun:ea};}function p(z){var aa=z-2451545,ba=aa/36525,ca=23.43929111-ba*(46.836769/3600-ba*(.0001831/3600+ba*(.0020034/3600-ba*(5.76e-07/3600-ba*4.34e-08/3600))));return ca;}function q(z,aa){var ba=Math.atan(Math.cos(aa*l)*Math.tan(z*l))*k,ca=Math.asin(Math.sin(aa*l)*Math.sin(z*l))*k,da=Math.floor(z/90)*90,ea=Math.floor(ba/90)*90;ba+=da-ea;return {alpha:ba,delta:ca};}function r(z,aa,ba){return (ba*15+z-aa);}function s(z,aa){return (Math.atan(-Math.cos(z*l)/Math.tan(aa*l))*k);}function t(z){var aa=arguments.length<=1||arguments[1]===undefined?2:arguments[1],ba=m(z),ca=n(z),da=[],ea=o(ba),fa=p(ba),ga=q(ea.sunEclipticLongitude,fa),ha=180,ia=90;if(ga.delta<0){da.push([-ha,ia]);}else da.push([-ha,-ia]);for(var ja=0;ja<=ha*2*aa;ja++){var ka=-ha+ja/aa,la=r(ka,ga.alpha,ca),ma=s(la,ga.delta);da.push([ka,ma]);}if(ga.delta<0){da.push([ha,ia]);da.push([0,ia]);}else{da.push([ha,-ia]);da.push([0,-ia]);}return {type:'Polygon',coordinates:[da],properties:{}};}var u={outlineColor:'rgb(0, 0, 0)',opacity:.3,fillColor:'rgb(0, 0, 0)',resolution:2,layerBefore:'waterway-label'},v={map:j.object},w='day-night-overlay',x=1000*60*5;h=babelHelpers.inherits(y,c('React').PureComponent);i=h&&h.prototype;function y(z){i.constructor.call(this,z);this.$MapboxGLDayNight2=null;this.$MapboxGLDayNight3=false;this.$MapboxGLDayNight4=function(){this.$MapboxGLDayNight8();this.$MapboxGLDayNight9();if(this.props.time==null)this.$MapboxGLDayNight6();}.bind(this);this.$MapboxGLDayNight10=function(){this.$MapboxGLDayNight1=new Date();this.$MapboxGLDayNight7(this.props.resolution);}.bind(this);this.$MapboxGLDayNight1=z.time||new Date();}y.prototype.componentDidMount=function(){if(this.context.map.loaded()){this.$MapboxGLDayNight4();}else this.context.map.once('load',this.$MapboxGLDayNight4);};y.prototype.componentWillUnmount=function(){this.context.map.removeLayer(w);this.context.map.removeSource(w);this.$MapboxGLDayNight5();};y.prototype.componentWillReceiveProps=function(z){var aa=this.$MapboxGLDayNight1;if(z.time!=null){aa=z.time;this.$MapboxGLDayNight5();}else if(z.time==null&&this.props.time!=null)this.$MapboxGLDayNight6();if(z.fillColor!==this.props.fillColor)this.context.map.setPaintProperty(w,'fill-color',z.fillColor);if(z.opacity!==this.props.opacity)this.context.map.setPaintProperty(w,'fill-opacity',z.opacity);if(z.outlineColor!==this.props.outlineColor)this.context.map.setPaintProperty(w,'fill-outline-color',z.outlineColor);if(this.$MapboxGLDayNight1!==aa){this.$MapboxGLDayNight1=aa;this.$MapboxGLDayNight7(z.resolution);}else if(z.resolution!==this.props.resolution)this.$MapboxGLDayNight7(z.resolution);};y.prototype.render=function(){return null;};y.prototype.$MapboxGLDayNight8=function(){var z=t(this.$MapboxGLDayNight1,this.props.resolution);this.context.map.addSource(w,{type:'geojson',data:z});this.$MapboxGLDayNight3=true;};y.prototype.$MapboxGLDayNight9=function(){var z={id:w,source:w,type:'fill',minzoom:0,layout:{visibility:'visible'},paint:{'fill-opacity':this.props.opacity,'fill-color':this.props.fillColor,'fill-outline-color':this.props.outlineColor}};this.context.map.addLayer(z,this.props.layerBefore);};y.prototype.$MapboxGLDayNight5=function(){if(this.$MapboxGLDayNight2==null)return;c('clearInterval')(this.$MapboxGLDayNight2);this.$MapboxGLDayNight2=null;};y.prototype.$MapboxGLDayNight6=function(){this.$MapboxGLDayNight5();this.$MapboxGLDayNight2=c('setInterval')(this.$MapboxGLDayNight10,x);};y.prototype.$MapboxGLDayNight7=function(z){if(!this.$MapboxGLDayNight3)return;var aa=t(this.$MapboxGLDayNight1,z),ba=this.context.map.getSource(w);if(ba==null)return;ba.setData(aa);};y.defaultProps=u;y.contextTypes=v;f.exports=y;}),null);
__d('MapboxGLNoPitchOrRotateKeyboardHandler',[],(function a(b,c,d,e,f,g){'use strict';var h=100;function i(l){return l*(2-l);}function j(l){k.call(this);this.$MapboxGLNoPitchOrRotateKeyboardHandler1=l;this.$MapboxGLNoPitchOrRotateKeyboardHandler2=l.getCanvasContainer();this.$MapboxGLNoPitchOrRotateKeyboardHandler3=false;}j.prototype.isEnabled=function(){return this.$MapboxGLNoPitchOrRotateKeyboardHandler3;};j.prototype.enable=function(){if(this.$MapboxGLNoPitchOrRotateKeyboardHandler3)return;this.$MapboxGLNoPitchOrRotateKeyboardHandler2.addEventListener('keydown',this.$MapboxGLNoPitchOrRotateKeyboardHandler4,false);this.$MapboxGLNoPitchOrRotateKeyboardHandler3=true;};j.prototype.disable=function(){if(!this.$MapboxGLNoPitchOrRotateKeyboardHandler3)return;this.$MapboxGLNoPitchOrRotateKeyboardHandler2.removeEventListener('keydown',this.$MapboxGLNoPitchOrRotateKeyboardHandler4);this.$MapboxGLNoPitchOrRotateKeyboardHandler3=false;};j.prototype.destroy=function(){this.disable();delete this.$MapboxGLNoPitchOrRotateKeyboardHandler1;delete this.$MapboxGLNoPitchOrRotateKeyboardHandler2;delete this.$MapboxGLNoPitchOrRotateKeyboardHandler3;};var k=function l(){this.$MapboxGLNoPitchOrRotateKeyboardHandler4=function(m){if(m.altKey||m.ctrlKey||m.metaKey)return;var n=0,o=0,p=0;switch(m.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:m.preventDefault();o=-1;break;case 39:m.preventDefault();o=1;break;case 38:m.preventDefault();p=-1;break;case 40:p=1;m.preventDefault();break;}var q=this.$MapboxGLNoPitchOrRotateKeyboardHandler1,r=q.getZoom(),s={duration:300,delayEndEvents:500,easing:i,zoom:n?Math.round(r)+n*(m.shiftKey?2:1):r,offset:[-o*h,-p*h],center:q.getCenter()};q.easeTo(s,{originalEvent:m});}.bind(this);};f.exports=j;}),null);
__d('MapboxGLMap.react',['invariant','mapboxgl','MapboxGLNoPitchOrRotateKeyboardHandler','React','ReactDOM','immutable','shallowEqual','forEachDifference'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=[0,0],m={minZoom:0,maxZoom:12,trackResize:true,attributionControl:false};i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),o.call(this),q;}n.prototype.componentDidMount=function(){var p=babelHelpers['extends']({},m,this.props.options),q=new (c('mapboxgl').Map)(babelHelpers['extends']({container:c('ReactDOM').findDOMNode(this.$MapboxGLMap1),style:this.props.mapboxStyle,center:this.props.intialCenter||l,zoom:this.props.initialZoom||3,trackResize:true},p));q.on('load',this.$MapboxGLMap5);this.setState({map:q});};n.prototype.componentWillUnmount=function(){if(this.$MapboxGLMap4!=null){this.$MapboxGLMap4.destroy();this.$MapboxGLMap4=null;}if(this.state.map!=null)this.state.map.remove();this.$MapboxGLMap2=false;};n.prototype.componentWillReceiveProps=function(p){var q=this.state.map;if(!q||!this.$MapboxGLMap2)return;var r=this.props,s={};if(r.layers!==p.layers){r.layers.filter(function(x,y){return !p.layers.has(y);}).forEach(function(x,y){q.removeLayer(y);s[y]=false;});p.layers.filter(function(x,y){return !r.layers.has(y);}).forEach(function(x,y){q.addLayer(x);s[y]=true;});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&x.filter!==r.layers.get(y).filter);}).forEach(function(x,y){return q.setFilter(y,x.filter);});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&!c('shallowEqual')(x.layout,r.layers.get(y).layout));}).forEach(function(x,y){var z=babelHelpers['extends']({},r.layers.get(y).layout),aa=babelHelpers['extends']({},x.layout);c('forEachDifference')(z,aa,{onBoth:function ba(ca,da,ea){if(ca===da)return;q.setLayoutProperty(y,ea,da);s[y]=true;},onLeft:function ba(ca,da){q.setLayoutProperty(y,da,undefined);s[y]=true;},onRight:function ba(ca,da){q.setLayoutProperty(y,da,ca);s[y]=true;}});});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&!c('shallowEqual')(x.paint,r.layers.get(y).paint));}).forEach(function(x,y){var z=babelHelpers['extends']({},r.layers.get(y).paint),aa=babelHelpers['extends']({},x.paint);c('forEachDifference')(z,aa,{onBoth:function ba(ca,da,ea){if(ca===da)return;q.setPaintProperty(y,ea,da);s[y]=true;},onLeft:function ba(ca,da){q.setPaintProperty(y,da,undefined);s[y]=true;},onRight:function ba(ca,da){q.setPaintProperty(y,da,ca);s[y]=true;}});});}var t={};if(r.sources!==p.sources){r.sources.filter(function(x,y){return !p.sources.has(y);}).forEach(function(x,y){q.removeSource(y);t[y]=false;});p.sources.filter(function(x,y){return (r.sources.has(y)&&x!==r.sources.get(y));}).forEach(function(x,y){if(x.type!=='geojson')return;var z=q.getSource(y);if(z!=null){z.setData(x.data);t[y]=true;}});p.sources.filter(function(x,y){return !r.sources.has(y);}).forEach(function(x,y){q.addSource(y,x);t[y]=true;});}var u=p.eventHandlers||c('immutable').Map(),v=r.eventHandlers||c('immutable').Map();if(u!==v){v.filter(function(x,y){return x!==u.get(y);}).forEach(function(x,y){var z=this.$MapboxGLMap3.get(y,x);q.off(y,z);}.bind(this));u.filter(function(x,y){return x!==v.get(y);}).forEach(function(x,y){var z=function aa(){for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return x.apply(undefined,[q].concat(ca));};this.$MapboxGLMap3=this.$MapboxGLMap3.set(y,z);q.on(y,z);}.bind(this));}var w=Object.keys(s).length>0||Object.keys(t).length>0;if(w&&p.onSourceOrLayerUpdate!=null)p.onSourceOrLayerUpdate(q,{layers:s,sources:t});};n.prototype.shouldComponentUpdate=function(p,q){return (this.props.style!==p.style||this.props.className!==p.className||this.props.children!==p.children||this.state.map!==q.map||this.props.layers!==p.layers);};n.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className,style:this.props.style,ref:this.$MapboxGLMap6},this.state.map&&this.props.children));};n.childContextTypes={map:k.object};var o=function p(){this.state={map:null};this.$MapboxGLMap2=false;this.$MapboxGLMap3=c('immutable').Map();this.getChildContext=function(){return {map:this.state.map};}.bind(this);this.$MapboxGLMap6=function(q){this.$MapboxGLMap1=q;}.bind(this);this.$MapboxGLMap5=function(){var q=this.state.map;q!=null||h(0);this.$MapboxGLMap2=true;this.props.sources.forEach(function(v,w){q.addSource(w,v);});this.props.layers.forEach(function(v){return q.addLayer(v);});var r=this.props,s=r.disablePitch,t=r.disableRotation;if(s===true||t===true){q.dragRotate.disable();q.touchZoomRotate.disableRotation();if(this.props.options&&this.props.options.keyboard!==false){q.keyboard.disable();this.$MapboxGLMap4=new (c('MapboxGLNoPitchOrRotateKeyboardHandler'))(q);this.$MapboxGLMap4.enable();}}var u=this.props.eventHandlers;if(u)u.forEach(function(v,w){var x=function y(){for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return v.apply(undefined,[q].concat(aa));};this.$MapboxGLMap3=this.$MapboxGLMap3.set(w,x);q.on(w,x);if(w==='load')x();}.bind(this));}.bind(this);};f.exports=n;}),null);
__d('MapboxGLNavigationControl.react',['mapboxgl','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={position:'top-left'},l={map:j.object};h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MapboxGLNavigationControl2=function(){this.context.map.addControl(this.$MapboxGLNavigationControl1,this.props.position);}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MapboxGLNavigationControl1=new (c('mapboxgl').NavigationControl)();if(this.context.map.loaded()){this.$MapboxGLNavigationControl2();}else this.context.map.once('load',this.$MapboxGLNavigationControl2);};m.prototype.componentWillUnmount=function(){this.context.map.removeControl(this.$MapboxGLNavigationControl1);};m.prototype.render=function(){return null;};m.prototype.shouldComponentUpdate=function(){return false;};m.contextTypes=l;m.defaultProps=k;f.exports=m;}),null);
__d('PromiseBasedPoller',['ArbiterMixin','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=2000;h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function k(m){i.constructor.call(this);this.request=function(){this._cancelRequest();this._polling=true;if(!this._config.allowNotLoggedIn&&!l())return this._done();if(this._muted)return this;var n=false;this._cancelRequest=function(){n=true;this._cleanup();}.bind(this);if(this._isSkipIndefinitely){this._deferRequest();this._hasSkippedRequest=true;return this;}else this._hasSkippedRequest=false;if(++this._requests>this._config.maxRequests)return this._done();if(this._skip){this._skip=false;c('setTimeoutAcrossTransitions')(this._deferRequest,0);}else{if(n)return this;this._config.request(this).then(this._deferRequest,this._deferRequest).done();}return this;}.bind(this);this._deferRequest=function(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var n=this._config.interval;n=typeof n==='function'?n(this._requests):n;n=n>j?n:j;if(this._config.clearOnQuicklingEvents){this._handle=c('setTimeout')(this.request,n);}else this._handle=c('setTimeoutAcrossTransitions')(this.request,n);}else this._done();}.bind(this);this._config=babelHelpers['extends']({clearOnQuicklingEvents:true,maxRequests:Infinity,dontStart:false},m);this._handle=null;this._isSkipIndefinitely=false;this._hasSkippedRequest=false;this._requests=0;this._muted=false;this._polling=false;this._skip=false;this._cancelRequest=c('emptyFunction');if(!this._config.dontStart)this.start();}k.prototype.start=function(){if(this._polling)return this;this._requests=0;this.request();return this;};k.prototype.stop=function(){this._cancelRequest();return this;};k.prototype.mute=function(){this._muted=true;return this;};k.prototype.resume=function(){if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}if(this._isSkipIndefinitely){this._isSkipIndefinitely=false;return this.request();}return this;};k.prototype.skip=function(){this._skip=true;return this;};k.prototype.startSkipIndefinitely=function(){this._isSkipIndefinitely=true;return this;};k.prototype.stopSkipIndefinitely=function(){this._isSkipIndefinitely=false;if(this._hasSkippedRequest){return this.request();}else return this;};k.prototype.isSkipIndefinitely=function(){return this._isSkipIndefinitely;};k.prototype.reset=function(){return this.stop().start();};k.prototype.isPolling=function(){return this._polling;};k.prototype.isMuted=function(){return this._muted;};k.prototype.setInterval=function(m){if(m){this._config.interval=m;this.start();}};k.prototype.getInterval=function(){return this._config.interval;};k.prototype._cleanup=function(){if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=c('emptyFunction');this._polling=false;};k.prototype._done=function(){this._cleanup();this.inform('done',{sender:this});return this;};function l(){return c('CurrentUser').isLoggedInNow();}f.exports=k;}),null);
__d("turfInvariant",[],(function a(b,c,d,e,f,g){function h(l){if(Array.isArray(l)&&typeof l[0]==='number'&&typeof l[1]==='number'){return l;}else if(l)if(l.type==='Feature'&&l.geometry&&l.geometry.type==='Point'&&Array.isArray(l.geometry.coordinates)){return l.geometry.coordinates;}else if(l.type==='Point'&&Array.isArray(l.coordinates))return l.coordinates;throw new Error('A coordinate, feature, or point geometry is required');}function i(l,m,n){if(!m||!n)throw new Error('type and name required');if(!l||l.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+l.type);}function j(l,m,n){if(!n)throw new Error('.featureOf() requires a name');if(!l||l.type!=='Feature'||!l.geometry)throw new Error('Invalid input to '+n+', Feature with geometry required');if(!l.geometry||l.geometry.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+l.geometry.type);}function k(l,m,n){if(!n)throw new Error('.collectionOf() requires a name');if(!l||l.type!=='FeatureCollection')throw new Error('Invalid input to '+n+', FeatureCollection required');for(var o=0;o<l.features.length;o++){var p=l.features[o];if(!p||p.type!=='Feature'||!p.geometry)throw new Error('Invalid input to '+n+', Feature with geometry required');if(!p.geometry||p.geometry.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+p.geometry.type);}}f.exports.geojsonType=i;f.exports.collectionOf=k;f.exports.featureOf=j;f.exports.getCoord=h;}),null);
__d("turfBearing",["turfInvariant"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord;f.exports=function(i,j){var k=Math.PI/180,l=180/Math.PI,m=h(i),n=h(j),o=k*m[0],p=k*n[0],q=k*m[1],r=k*n[1],s=Math.sin(p-o)*Math.cos(r),t=Math.cos(q)*Math.sin(r)-Math.sin(q)*Math.cos(r)*Math.cos(p-o),u=l*Math.atan2(s,t);return u;};}),null);
__d("turfHelpers",[],(function a(b,c,d,e,f,g){function h(j,k){return {type:'Feature',properties:k||{},geometry:j};}f.exports.feature=h;f.exports.point=function(j,k){if(!Array.isArray(j))throw new Error('Coordinates must be an array');if(j.length<2)throw new Error('Coordinates must be at least 2 numbers long');return h({type:'Point',coordinates:j.slice()},k);};f.exports.polygon=function(j,k){if(!j)throw new Error('No coordinates passed');for(var l=0;l<j.length;l++){var m=j[l];if(m.length<4)throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.');for(var n=0;n<m[m.length-1].length;n++)if(m[m.length-1][n]!==m[0][n])throw new Error('First and last Position are not equivalent.');}return h({type:'Polygon',coordinates:j},k);};f.exports.lineString=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'LineString',coordinates:j},k);};f.exports.featureCollection=function(j){return {type:'FeatureCollection',features:j};};f.exports.multiLineString=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiLineString',coordinates:j},k);};f.exports.multiPoint=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiPoint',coordinates:j},k);};f.exports.multiPolygon=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiPolygon',coordinates:j},k);};f.exports.geometryCollection=function(j,k){return h({type:'GeometryCollection',geometries:j},k);};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373000,metres:6373000,kilometers:6373,kilometres:6373};f.exports.radiansToDistance=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return j*l;};f.exports.distanceToRadians=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return j/l;};f.exports.distanceToDegrees=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return (j/l)*57.2958;};}),null);
__d("turfDestination",["turfInvariant","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord,i=c('turfHelpers'),j=i.point,k=i.distanceToRadians;f.exports=function(l,m,n,o){var p=Math.PI/180,q=180/Math.PI,r=h(l),s=p*r[0],t=p*r[1],u=p*n,v=k(m,o),w=Math.asin(Math.sin(t)*Math.cos(v)+Math.cos(t)*Math.sin(v)*Math.cos(u)),x=s+Math.atan2(Math.sin(u)*Math.sin(v)*Math.cos(t),Math.cos(v)-Math.sin(t)*Math.sin(w));return j([q*x,q*w]);};}),null);
__d("turfDistance",["turfInvariant","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord,i=c('turfHelpers').radiansToDistance;f.exports=function(j,k,l){var m=Math.PI/180,n=h(j),o=h(k),p=m*(o[1]-n[1]),q=m*(o[0]-n[0]),r=m*n[1],s=m*o[1],t=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(q/2),2)*Math.cos(r)*Math.cos(s);return i(2*Math.atan2(Math.sqrt(t),Math.sqrt(1-t)),l);};}),null);
__d("turfAlong",["turfDistance","turfHelpers","turfBearing","turfDestination"],(function a(b,c,d,e,f,g){var h=c('turfDistance'),i=c('turfHelpers').point,j=c('turfBearing'),k=c('turfDestination');f.exports=function(l,m,n){var o;if(l.type==='Feature'){o=l.geometry.coordinates;}else if(l.type==='LineString'){o=l.coordinates;}else throw new Error('input must be a LineString Feature or Geometry');var p=0;for(var q=0;q<o.length;q++)if(m>=p&&q===o.length-1){break;}else if(p>=m){var r=m-p;if(!r){return i(o[q]);}else{var s=j(o[q],o[q-1])-180,t=k(o[q],r,s,n);return t;}}else p+=h(o[q],o[q+1],n);return i(o[o.length-1]);};}),null);
__d("turfLineDistance",["turfDistance","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfDistance'),i=c('turfHelpers').point;f.exports=function k(l,m){if(l.type==='FeatureCollection')return l.features.reduce(function(r,s){return r+k(s,m);},0);var n=l.type==='Feature'?l.geometry:l,o,p;if(n.type==='LineString'){return j(n.coordinates,m);}else if(n.type==='Polygon'||n.type==='MultiLineString'){o=0;for(p=0;p<n.coordinates.length;p++)o+=j(n.coordinates[p],m);return o;}else if(l.type==='MultiPolygon'){o=0;for(p=0;p<n.coordinates.length;p++)for(var q=0;q<n.coordinates[p].length;q++)o+=j(n.coordinates[p][q],m);return o;}else throw new Error('input must be a LineString, MultiLineString, '+'Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection '+'containing only those types)');};function j(k,l){var m=0,n=i(k[0]),o=i(k[0]),p;for(var q=1;q<k.length;q++){o.geometry.coordinates=k[q];m+=h(n,o,l);p=n;n=o;o=p;}return m;}}),null);
__d('LiveMapActiveStreamReducer',[],(function a(b,c,d,e,f,g){'use strict';var h={currentViewers:[],id:null,subOrigin:null},i='LiveMap/ActiveStream/SetCurrentViewers';function j(q){return {type:i,currentViewers:q};}var k='LiveMap/ActiveStream/SetActiveStream';function l(q,r){return {type:k,activeStreamID:q,subOrigin:r};}var m={createSetCurrentViewersAction:j,createSetActiveStreamAction:l};function n(q,r){return babelHelpers['extends']({},q,{currentViewers:r.currentViewers});}function o(q,r){return babelHelpers['extends']({},q,{id:r.activeStreamID,subOrigin:r.subOrigin});}function p(){var q=arguments.length<=0||arguments[0]===undefined?h:arguments[0],r=arguments[1];switch(r.type){case i:q=n(q,r);break;case k:q=o(q,r);break;}return q;}p.ActionCreators=m;f.exports=p;}),null);
__d('LiveMapMapReducer',['PublicLiveMapConstants'],(function a(b,c,d,e,f,g){'use strict';var h={mapZoomLevel:c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM+1,mapLatLngBounds:null,activeStreamPixelLocation:null,sidebarOffset:{x:0,y:0},leafletMap:null,webGLMap:null,showLoadingDialog:false,userLocation:{latitude:0,longitude:0},videosInView:[]},i='LiveMap/Map/SetVideosInView';function j(ia){return {type:i,videoIDs:ia};}var k='LiveMap/Map/SetUserLocation';function l(ia){return {type:k,userLocation:ia};}var m='LiveMap/Map/SetMapViewData';function n(ia,ja){return {type:m,bounds:ia,zoom:ja};}var o='LiveMap/Map/SetSidebarOffset';function p(ia){return {type:o,offset:babelHelpers['extends']({},ia)};}var q='LiveMap/Map/SetShowLoadingDialog';function r(ia){return {type:q,showDialog:ia};}var s='LiveMap/Map/SetLeafletMap';function t(ia){return {type:s,map:ia};}var u='LiveMap/Map/SetWebGLMap';function v(ia){return {type:u,map:ia};}var w='LiveMap/Map/SetActiveStreamPixelLocation';function x(ia){return {type:w,location:ia};}var y={createSetUserLocationAction:l,createSetMapViewDataAction:n,createSetVideosInViewAction:j,createSetSidebarOffsetAction:p,createSetShowLoadingDialogAction:r,createSetLeafletMapAction:t,createSetWebGLMapAction:v,createSetActiveStreamPixelLocationAction:x};function z(ia,ja){return babelHelpers['extends']({},ia,{userLocation:ja.userLocation});}function aa(ia,ja){return babelHelpers['extends']({},ia,{videosInView:ja.videoIDs});}function ba(ia,ja){return babelHelpers['extends']({},ia,{mapLatLngBounds:ja.bounds,mapZoomLevel:ja.zoom});}function ca(ia,ja){return babelHelpers['extends']({},ia,{sidebarOffset:ja.offset});}function da(ia,ja){return babelHelpers['extends']({},ia,{showLoadingDialog:ja.showDialog});}function ea(ia,ja){return babelHelpers['extends']({},ia,{leafletMap:ja.map});}function fa(ia,ja){return babelHelpers['extends']({},ia,{webGLMap:ja.map});}function ga(ia,ja){return babelHelpers['extends']({},ia,{activeStreamPixelLocation:ja.location});}function ha(){var ia=arguments.length<=0||arguments[0]===undefined?h:arguments[0],ja=arguments[1];switch(ja.type){case k:ia=z(ia,ja);break;case m:ia=ba(ia,ja);break;case i:ia=aa(ia,ja);break;case o:ia=ca(ia,ja);break;case q:ia=da(ia,ja);break;case s:ia=ea(ia,ja);break;case u:ia=fa(ia,ja);break;case w:ia=ga(ia,ja);break;}return ia;}ha.ActionCreators=y;f.exports=ha;}),null);
__d('LiveMapPollingReducer',['Redux'],(function a(b,c,d,e,f,g){'use strict';var h=c('Redux').combineReducers,i={},j='LiveMapPolling/Map/InitializeLevel';function k(z,aa){return {type:j,poller:z,level:aa};}var l='LiveMapPolling/Map/PauseLevel';function m(z){return {type:l,level:z};}var n='LiveMapPolling/Map/ResumeLevel';function o(z){return {type:n,level:z};}var p='LiveMapPolling/Map/StopLevel';function q(z){return {type:p,level:z};}var r={createMapInitializeLevelAction:k,createMapPauseLevelAction:m,createMapStopLevelAction:q,createMapResumeLevelAction:o};function s(z,aa){var ba;z=babelHelpers['extends']({},z,(ba={},ba[aa.level]=aa.poller,ba));return z;}function t(z,aa){var ba=z[aa];if(ba!=null)ba.startSkipIndefinitely();return z;}function u(z,aa){var ba=z[aa];if(ba!=null)ba.stopSkipIndefinitely();return z;}function v(z,aa){var ba=z[aa];if(ba!=null)ba.stop();return z;}function w(){var z=arguments.length<=0||arguments[0]===undefined?i:arguments[0],aa=arguments[1];switch(aa.type){case j:z=s(z,aa);break;case l:z=t(z,aa.level);break;case p:z=v(z,aa.level);break;case n:z=u(z,aa.level);break;}return z;}var x=babelHelpers['extends']({},r),y=h({map:w});y.ActionCreators=x;f.exports=y;}),null);
__d('LiveMapSidebarReducer',[],(function a(b,c,d,e,f,g){'use strict';var h={nowPlayingID:null,playerVolume:0,videoPlayerController:null},i='LiveMap/Sidebar/SetNowPlaying';function j(t){return {type:i,videoID:t};}var k='LiveMap/Sidebar/SetPlayerVolume';function l(t){return {type:k,volume:t};}var m='LiveMap/Sidebar/SetVideoPlayerController';function n(t){return {type:m,videoPlayerController:t};}var o={createSetSidebarNowPlayingAction:j,createSetSidebarPlayerVolumeAction:l,createSetSidebarVideoPlayerControllerAction:n};function p(t,u){return babelHelpers['extends']({},t,{playerVolume:u.volume});}function q(t,u){return babelHelpers['extends']({},t,{nowPlayingID:u.videoID});}function r(t,u){return babelHelpers['extends']({},t,{videoPlayerController:u.videoPlayerController});}function s(){var t=arguments.length<=0||arguments[0]===undefined?h:arguments[0],u=arguments[1];switch(u.type){case i:t=q(t,u);break;case k:t=p(t,u);break;case m:t=r(t,u);break;}return t;}s.ActionCreators=o;f.exports=s;}),null);
__d("BucketQuadTree",[],(function a(b,c,d,e,f,g){var h=0,i=1,j=2,k=3,l=6,m=10,n=4;function o(p,q,r){"use strict";this.$BucketQuadTree3=p.x;this.$BucketQuadTree4=p.y;this.$BucketQuadTree5=p.width;this.$BucketQuadTree6=p.height;this.$BucketQuadTree1=[];this.$BucketQuadTree2=new Array(n);this.$BucketQuadTree8=q;this.$BucketQuadTree7=r?r:0;}o.prototype.addPoint=function(p){var q,r=this;"use strict";if(!this.isPointInTreeBounds(p))return;if(this.$BucketQuadTree8){var s=this.$BucketQuadTree8,t=false;for(var u=0;u<this.$BucketQuadTree1.length;u++){var v=this.$BucketQuadTree1[u];if(s(v.data,p.data)&&v.x===p.x&&v.y===p.y){t=true;break;}}if(t)return;}if(this.$BucketQuadTree9())(function(){r.$BucketQuadTree10();var x=r;r.$BucketQuadTree1.forEach(function(y){var z=x.$BucketQuadTree11(y);x.$BucketQuadTree2[z]&&x.$BucketQuadTree2[z].addPoint(y);});r.$BucketQuadTree12();})();if(!this.hasChildren()){this.$BucketQuadTree1.push(p);}else{var w=this.$BucketQuadTree11(p);this.$BucketQuadTree2[w]&&this.$BucketQuadTree2[w].addPoint(p);}};o.prototype.removePoint=function(p){"use strict";if(!this.hasChildren()){this.$BucketQuadTree13(p);}else{var q=this.$BucketQuadTree11(p);this.$BucketQuadTree2[q]&&this.$BucketQuadTree2[q].removePoint(p);}};o.prototype.$BucketQuadTree13=function(p){"use strict";for(var q=0;q<this.$BucketQuadTree1.length;q++)if(this.$BucketQuadTree1[q]===p){this.$BucketQuadTree1.splice(q,1);break;}};o.prototype.getDataInBounds=function(p){"use strict";var q=this.getLeafsInBounds([this],p),r=[];for(var s=0;s<q.length;s++){var t=q[s]&&q[s].$BucketQuadTree1;if(t)for(var u=0;u<t.length;u++)if(this.isPointInBounds(t[u],p))r.push(t[u].data);}return r;};o.prototype.getLeafsInBounds=function(p,q){"use strict";var r=[];for(var s=0;s<p.length;s++)if(p[s]&&!p[s].hasChildren()){if(this.isTreeInBounds(p[s],q))r.push(p[s]);}else{var t=p[s]&&p[s].getChildren();if(t)r=r.concat(this.getLeafsInBounds(t,q));}return r;};o.prototype.isTreeInBounds=function(p,q){"use strict";if(p.$BucketQuadTree3>q.x2||p.$BucketQuadTree3+p.$BucketQuadTree5<q.x1||p.$BucketQuadTree4>q.y2||p.$BucketQuadTree4+p.$BucketQuadTree6<q.y1)return false;return true;};o.prototype.isPointInBounds=function(p,q){"use strict";return (p.x>=q.x1&&p.y>=q.y1&&p.x<=q.x2&&p.y<=q.y2);};o.prototype.isPointInTreeBounds=function(p){"use strict";var q=this.$BucketQuadTree3+this.$BucketQuadTree5,r=this.$BucketQuadTree4+this.$BucketQuadTree6,s={x1:this.$BucketQuadTree3,y1:this.$BucketQuadTree4,x2:q,y2:r};return this.isPointInBounds(p,s);};o.prototype.isAnyDataInBounds=function(p){"use strict";return this.$BucketQuadTree14([this],p);};o.prototype.$BucketQuadTree14=function(p,q){"use strict";var r=false;for(var s=0;s<p.length;s++){var t=p[s];if(t&&!t.hasChildren()){if(this.isTreeInBounds(t,q)){var u=t.$BucketQuadTree1;if(u)for(var v=0;v<u.length;v++)if(this.isPointInBounds(u[v],q)){r=true;break;}}}else{var w=t&&t.getChildren();if(w)r=this.$BucketQuadTree14(w,q);}if(r)break;}return r;};o.prototype.getSize=function(){"use strict";return this.$BucketQuadTree1.length;};o.prototype.hasChildren=function(){"use strict";return !!this.$BucketQuadTree2[0];};o.prototype.getChildren=function(){"use strict";if(this.hasChildren()===true){return this.$BucketQuadTree2;}else return null;};o.prototype.empty=function(){"use strict";this.$BucketQuadTree15();};o.prototype.$BucketQuadTree11=function(p){"use strict";for(var q=0;q<n;q++)if(this.$BucketQuadTree2[q]&&this.$BucketQuadTree2[q].isPointInTreeBounds(p))return q;throw new Error("point at "+p.x+", "+p.y+" out of bounds");};o.prototype.$BucketQuadTree9=function(){"use strict";return (!this.hasChildren()&&this.$BucketQuadTree1.length>=l&&this.$BucketQuadTree7<m);};o.prototype.$BucketQuadTree10=function(){"use strict";var p=Math.round(this.$BucketQuadTree5/2),q=Math.round(this.$BucketQuadTree6/2),r=new o({x:this.$BucketQuadTree3+p,y:this.$BucketQuadTree4,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),s=new o({x:this.$BucketQuadTree3,y:this.$BucketQuadTree4,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),t=new o({x:this.$BucketQuadTree3,y:this.$BucketQuadTree4+q,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),u=new o({x:this.$BucketQuadTree3+p,y:this.$BucketQuadTree4+q,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1);this.$BucketQuadTree2[h]=r;this.$BucketQuadTree2[i]=s;this.$BucketQuadTree2[j]=t;this.$BucketQuadTree2[k]=u;};o.prototype.$BucketQuadTree12=function(){"use strict";this.$BucketQuadTree1.length=0;};o.prototype.$BucketQuadTree15=function(){"use strict";for(var p=0;p<n;p++)this.$BucketQuadTree2[p]=null;};f.exports=o;}),null);
__d('SmallQueue',[],(function a(b,c,d,e,f,g){function h(){'use strict';this.$SmallQueue1=[];}h.prototype.enqueue=function(i){'use strict';this.$SmallQueue1.push(i);};h.prototype.enqueueList=function(i){'use strict';var j=this;i.forEach(function(k){j.enqueue(k);});};h.prototype.dequeue=function(){'use strict';if(this.isEmpty())return null;return this.$SmallQueue1.shift();};h.prototype.peek=function(){'use strict';if(this.isEmpty())return null;return this.$SmallQueue1[0];};h.prototype.getLength=function(){'use strict';return this.$SmallQueue1.length;};h.prototype.isEmpty=function(){'use strict';return (this.getLength()===0);};h.prototype.remove=function(i){'use strict';var j=this.$SmallQueue1.indexOf(i);if(j>-1)this.$SmallQueue1.splice(j,1);};f.exports=h;}),null);
__d('LiveMapGeoCache',['BucketQuadTree','SmallQueue'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$LiveMapGeoCache1=j;this.$LiveMapGeoCache4={};this.$LiveMapGeoCache3=new (c('SmallQueue'))();this.$LiveMapGeoCache2=new (c('BucketQuadTree'))(i);}h.prototype.add=function(i){'use strict';var j=null;if(this.$LiveMapGeoCache4[i.id]!=null)return j;if(this.$LiveMapGeoCache3.getLength()>=this.$LiveMapGeoCache1)j=this.$LiveMapGeoCache5();this.$LiveMapGeoCache3.enqueue(i.id);var k={x:i.longitude,y:i.latitude,data:i.id};this.$LiveMapGeoCache2.addPoint(k);this.$LiveMapGeoCache4[i.id]=k;return j;};h.prototype.clear=function(){'use strict';this.$LiveMapGeoCache4={};this.$LiveMapGeoCache3=new (c('SmallQueue'))();this.$LiveMapGeoCache2.empty();};h.prototype.has=function(i){'use strict';return this.$LiveMapGeoCache4[i]!=null;};h.prototype.getAllItems=function(){'use strict';return Object.keys(this.$LiveMapGeoCache4);};h.prototype.getDataInBounds=function(i){'use strict';var j={},k=this.$LiveMapGeoCache2.getDataInBounds(i);for(var l=0;l<k.length;l++){var m=k[l];j[m]=true;}return j;};h.prototype.isAnyDataInBounds=function(i){'use strict';return this.$LiveMapGeoCache2.isAnyDataInBounds(i);};h.prototype.remove=function(i){'use strict';var j=this.$LiveMapGeoCache4[i];if(j!=null){this.$LiveMapGeoCache2.removePoint(j);delete this.$LiveMapGeoCache4[i];}this.$LiveMapGeoCache3.remove(i);};h.prototype.$LiveMapGeoCache5=function(){'use strict';var i=this.$LiveMapGeoCache3.dequeue();if(i==null)return null;if(!this.$LiveMapGeoCache4[i])return null;var j=this.$LiveMapGeoCache4[i];this.$LiveMapGeoCache2.removePoint(j);delete this.$LiveMapGeoCache4[i];return i;};f.exports=h;}),null);
__d('LiveMapViewField',['invariant'],(function a(b,c,d,e,f,g,h){var i=180,j=-180;function k(l){'use strict';l.x1>=-180||h(0);l.x2<=180||h(0);this.$LiveMapViewField1=l;}k.prototype.isMinLongitudeGreaterThanMax=function(){'use strict';return this.$LiveMapViewField1.x1>this.$LiveMapViewField1.x2;};k.prototype.getSearchBounds=function(){'use strict';return this.$LiveMapViewField1;};k.prototype.getLeftSplitFor360DegreeMap=function(){'use strict';if(this.$LiveMapViewField1.x1>i)throw new Error();var l={x1:this.$LiveMapViewField1.x1,x2:i,y1:this.$LiveMapViewField1.y1,y2:this.$LiveMapViewField1.y2};return new k(l);};k.prototype.getRightSplitFor360DegreeMap=function(){'use strict';if(this.$LiveMapViewField1.x2<j)throw new Error();var l={x1:j,x2:this.$LiveMapViewField1.x2,y1:this.$LiveMapViewField1.y1,y2:this.$LiveMapViewField1.y2};return new k(l);};k.prototype.getBottomLeftBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:l.x1,x2:(l.x1+l.x2)/2,y1:l.y1,y2:(l.y1+l.y2)/2};};k.prototype.getBottomRightBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:(l.x1+l.x2)/2,x2:l.x2,y1:l.y1,y2:(l.y1+l.y2)/2};};k.prototype.getTopRightBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:(l.x1+l.x2)/2,x2:l.x2,y1:(l.y1+l.y2)/2,y2:l.y2};};k.prototype.getTopLeftBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:l.x1,x2:(l.x1+l.x2)/2,y1:(l.y1+l.y2)/2,y2:l.y2};};k.prototype.getBottomLeftMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x1)/2,n=((l.y1+l.y2)/2+l.y1)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getBottomRightMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x2)/2,n=((l.y1+l.y2)/2+l.y1)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getTopRightMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x2)/2,n=((l.y1+l.y2)/2+l.y2)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getTopLeftMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x1)/2,n=((l.y1+l.y2)/2+l.y2)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.$LiveMapViewField2=function(l,m){'use strict';if(m<=0)return l;var n=Math.floor(l*Math.pow(10,m))/Math.pow(10,m);return isNaN(n)?l:n;};f.exports=k;}),null);
__d('LiveMapVisitedLocationsGeoCache',['BucketQuadTree'],(function a(b,c,d,e,f,g){var h='marker';function i(j,k){'use strict';this.$LiveMapVisitedLocationsGeoCache3=0;this.$LiveMapVisitedLocationsGeoCache1=k;this.$LiveMapVisitedLocationsGeoCache2=new (c('BucketQuadTree'))(j);}i.prototype.add=function(j){'use strict';if(this.$LiveMapVisitedLocationsGeoCache3>=this.$LiveMapVisitedLocationsGeoCache1)this.clear();var k={x:j.long,y:j.lat,data:h};this.$LiveMapVisitedLocationsGeoCache2.addPoint(k);this.$LiveMapVisitedLocationsGeoCache3++;};i.prototype.clear=function(){'use strict';this.$LiveMapVisitedLocationsGeoCache2.empty();this.$LiveMapVisitedLocationsGeoCache3=0;};i.prototype.isAnyDataInBounds=function(j){'use strict';return this.$LiveMapVisitedLocationsGeoCache2.isAnyDataInBounds(j);};i.prototype.getDataInBounds=function(j){'use strict';return this.$LiveMapVisitedLocationsGeoCache2.getDataInBounds(j);};f.exports=i;}),null);
__d('LiveMapGeoCacheUtils',['LiveMapVisitedLocationsGeoCache','LiveMapViewField'],(function a(b,c,d,e,f,g){var h={markAreaAsVisited:function i(j,k){k.add(j.getTopLeftMidPoint());k.add(j.getTopRightMidPoint());k.add(j.getBottomLeftMidPoint());k.add(j.getBottomRightMidPoint());},isSufficientDataInView:function i(j,k){var l=j.getTopLeftBox(),m=j.getTopRightBox(),n=j.getBottomLeftBox(),o=j.getBottomRightBox(),p=k.getDataInBounds(l).length>0,q=k.getDataInBounds(m).length>0,r=k.getDataInBounds(n).length>0,s=k.getDataInBounds(o).length>0,t=p&&q&&r&&s;return t;}};f.exports=h;}),null);
__d('LiveMapVideoCacheReducer',['immutable','PublicLiveMapConstants','LiveMapVisitedLocationsGeoCache','LiveMapViewField','LiveMapGeoCache','LiveMapGeoCacheUtils','PublicCurrentlyLiveWithLocationVideosCache','LiveMapCache'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map(),i=200,j=function ra(){return new (c('LiveMapGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,i);},k=100,l=function ra(){return new (c('LiveMapVisitedLocationsGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,k);},m=Object.keys(c('PublicCurrentlyLiveWithLocationVideosCache')),n=m.map(function(ra){return c('PublicCurrentlyLiveWithLocationVideosCache')[ra];}),o=Object.keys(c('LiveMapCache')),p=o.map(function(ra){return c('LiveMapCache')[ra];}),q=p.reduce(function(ra,sa){ra[sa]={};return ra;},{}),r={blacklist:h,visitedLocationsGeoCache:l(),geoCache:j(),allVideos:h,cacheBitfields:q,specialEventForMapCache:h},s='LiveMap/VideoCache/ReceiveVideos';function t(ra,sa){return {type:s,videos:ra,level:sa};}var u='LiveMap/VideoCache/RequestVideosLokiFetch';function v(ra){return {type:u,bounds:ra};}var w='LiveMap/VideoCache/ReceiveVideosLokiFetch';function x(ra,sa){return {type:w,bounds:sa,videos:ra};}var y='LiveMap/VideoCache/GeoCachePeriodicReset';function z(ra,sa){return {type:y,videos:ra,bounds:sa};}var aa='LiveMap/VideoCache/BlacklistVideo';function ba(ra){return {type:aa,videoID:ra};}var ca='LiveMap/VideoCache/BlacklistVideo';function da(ra){return {type:ca,videoID:ra};}var ea={createRequestLokiVideosAction:v,createReceiveLokiVideosAction:x,createGeoCachePeriodicResetAction:z,createReceiveTacoCacheVideosAction:t,createBlacklistVideoAction:ba,createRemoveVideoAction:da};function fa(ra,sa,ta){for(var ua=0;ua<ta.length;ua++){var va=ta[ua];if(ra.blacklist.get(va.id))continue;ra=ia(ra,sa,va.id);var wa=ra,xa=wa.allVideos,ya=!xa.has(va.id);if(ya){xa=xa.set(va.id,va);}else{var za=babelHelpers['extends']({},ra.allVideos.get(va.id),{viewer_count:va.viewer_count});xa=xa.set(va.id,za);}ra=babelHelpers['extends']({},ra,{allVideos:xa});if(ya&&sa===c('PublicCurrentlyLiveWithLocationVideosCache').LOKI){var ab=ra,bb=ab.geoCache,cb=bb.add({id:va.id,latitude:va.location.latitude,longitude:va.location.longitude});if(cb!=null)xa=xa.remove(cb);ra=babelHelpers['extends']({},ra,{allVideos:xa,geoCache:bb});}}return ra;}function ga(ra,sa,ta){var ua,va=ta.reduce(function(xa,ya){if(ra.blacklist.get(ya.id))return xa;xa[ya.id]=true;return xa;},{}),wa=babelHelpers['extends']({},ra.cacheBitfields,(ua={},ua[sa]=va,ua));ra=babelHelpers['extends']({},ra,{cacheBitfields:wa});return ra;}function ha(ra,sa){var ta=sa.videoID,ua=ra,va=ua.geoCache,wa=ra,xa=wa.allVideos;xa=xa.remove(ta);var ya=babelHelpers['extends']({},ra.cacheBitfields);for(var za=0;za<n.length;za++){var ab=n[za];if(ab===c('PublicCurrentlyLiveWithLocationVideosCache').LOKI){va.remove(ta);}else if(ya[ab][ta]){var bb,cb=babelHelpers['extends']({},ya[ab]);delete cb[ta];ya=babelHelpers['extends']({},ya,(bb={},bb[ab]=cb,bb));}}ra=babelHelpers['extends']({},ra,{allVideos:xa,cacheBitfields:ya,geoCache:va});return ra;}function ia(ra,sa,ta){var ua=ra,va=ua.geoCache,wa=babelHelpers['extends']({},ra.cacheBitfields);for(var xa=0;xa<n.length;xa++){var ya=n[xa];if(ya===sa){continue;}else if(ya===c('PublicCurrentlyLiveWithLocationVideosCache').LOKI){va.remove(ta);}else if(wa[ya][ta]){var za,ab=babelHelpers['extends']({},wa[ya]);delete ab[ta];wa=babelHelpers['extends']({},wa,(za={},za[ya]=ab,za));}}ra=babelHelpers['extends']({},ra,{cacheBitfields:wa,geoCache:va});return ra;}function ja(ra){var sa=ra,ta=sa.allVideos;ta=ta.filter(function(ua,va){for(var wa=0;wa<p.length;wa++){var xa=p[wa];if(ra.cacheBitfields[xa][va])return true;}if(ra.geoCache.has(va))return true;return false;});ra=babelHelpers['extends']({},ra,{allVideos:ta});return ra;}function ka(ra,sa){var ta=sa.videos;ra=fa(ra,c('PublicCurrentlyLiveWithLocationVideosCache').LOKI,ta);return ra;}function la(ra,sa){var ta=sa.videos,ua=sa.bounds;ra=babelHelpers['extends']({},ra,{geoCache:j(),visitedLocationsGeoCache:l()});ra=fa(ra,c('PublicCurrentlyLiveWithLocationVideosCache').LOKI,ta);ra=ja(ra);ra=ma(ra,ua);return ra;}function ma(ra,sa){var ta=ra,ua=ta.visitedLocationsGeoCache,va=new (c('LiveMapViewField'))(sa),wa=c('LiveMapGeoCacheUtils').isSufficientDataInView(va,ua);if(wa)return ra;c('LiveMapGeoCacheUtils').markAreaAsVisited(va,ua);ra=babelHelpers['extends']({},ra,{visitedLocationsGeoCache:ua});return ra;}function na(ra,sa){var ta=sa.bounds;ra=ma(ra,ta);return ra;}function oa(ra,sa){var ta=sa.level,ua=sa.videos;ra=ga(ra,ta,ua);ra=fa(ra,ta,ua);ra=ja(ra);return ra;}function pa(ra,sa){var ta=sa.videoID,ua=ra,va=ua.geoCache,wa=ua.allVideos,xa=ua.blacklist,ya=ua.cacheBitfields;xa=xa.set(ta,true);wa=wa.remove(ta);ya=babelHelpers['extends']({},ya);for(var za=0;za<n.length;za++){var ab=n[za];if(ab===c('PublicCurrentlyLiveWithLocationVideosCache').LOKI){va.remove(ta);}else if(ya[ab][ta]){var bb,cb=babelHelpers['extends']({},ya[ab]);delete cb[ta];ya=babelHelpers['extends']({},ya,(bb={},bb[ab]=cb,bb));}}ra=babelHelpers['extends']({},ra,{cacheBitfields:ya,geoCache:va,blacklist:xa,allVideos:wa});return ra;}function qa(){var ra=arguments.length<=0||arguments[0]===undefined?r:arguments[0],sa=arguments[1];switch(sa.type){case s:ra=oa(ra,sa);break;case w:ra=ka(ra,sa);break;case y:ra=la(ra,sa);break;case u:ra=na(ra,sa);break;case aa:ra=pa(ra,sa);break;case ca:ra=ha(ra,sa);}return ra;}qa.ActionCreators=ea;f.exports=qa;}),null);
__d('LiveMapVideoPlayerReducer',[],(function a(b,c,d,e,f,g){'use strict';var h={channelPlayerOpenVideoID:null,channelPlayerUsingTooltipVideo:false,listViewTooltipVideoPlayerController:null,mapTooltipVideoPlayerController:null,channelID:null},i='LiveMap/VideoPlayer/SetChannelID';function j(z){return {type:i,channelID:z};}var k='LiveMap/VideoPlayer/SetChannelPlayerUsingTooltipVideo';function l(z){return {type:k,channelPlayerUsingTooltipVideo:z};}var m='LiveMap/VideoPlayer/SetListViewTooltipVideoPlayerController';function n(z){return {type:m,videoPlayerController:z};}var o='LiveMap/VideoPlayer/SetMapTooltipVideoPlayerController';function p(z){return {type:o,videoPlayerController:z};}var q='LiveMap/VideoPlayer/SetChannelPlayerOpenVideoID';function r(z){return {type:q,videoID:z};}var s={createSetChannelIDAction:j,createSetChannelPlayerUsingTooltipVideoAction:l,createSetListViewTooltipVideoPlayerControllerAction:n,createSetMapTooltipVideoPlayerControllerAction:p,createSetChannelPlayerOpenVideoIDAction:r};function t(z,aa){return babelHelpers['extends']({},z,{channelID:aa.channelID});}function u(z,aa){return babelHelpers['extends']({},z,{channelPlayerUsingTooltipVideo:aa.channelPlayerUsingTooltipVideo});}function v(z,aa){return babelHelpers['extends']({},z,{listViewTooltipVideoPlayerController:aa.videoPlayerController});}function w(z,aa){return babelHelpers['extends']({},z,{mapTooltipVideoPlayerController:aa.videoPlayerController});}function x(z,aa){return babelHelpers['extends']({},z,{channelPlayerOpenVideoID:aa.videoID});}function y(){var z=arguments.length<=0||arguments[0]===undefined?h:arguments[0],aa=arguments[1];switch(aa.type){case i:z=t(z,aa);break;case k:z=u(z,aa);break;case m:z=v(z,aa);break;case o:z=w(z,aa);break;case q:z=x(z,aa);break;}return z;}y.ActionCreators=s;f.exports=y;}),null);
__d('LiveMapRootReducer',['LiveMapPollingReducer','LiveMapVideoCacheReducer','LiveMapMapReducer','LiveMapVideoPlayerReducer','LiveMapActiveStreamReducer','LiveMapSidebarReducer','Redux'],(function a(b,c,d,e,f,g){var h=c('Redux').combineReducers,i=h({polling:c('LiveMapPollingReducer'),videoCache:c('LiveMapVideoCacheReducer'),map:c('LiveMapMapReducer'),videoPlayer:c('LiveMapVideoPlayerReducer'),activeStream:c('LiveMapActiveStreamReducer'),sidebar:c('LiveMapSidebarReducer')});f.exports=i;}),null);
__d('LiveMapReduxStore',['Redux','ReduxThunk','LiveMapRootReducer'],(function a(b,c,d,e,f,g){'use strict';var h=c('Redux').createStore,i=c('Redux').applyMiddleware,j=function m(n){return function(o){return function(p){var q=o(p);return q;};};},k=[c('ReduxThunk')],l=h(c('LiveMapRootReducer'),i.apply(undefined,k));f.exports=l;}),null);
__d('LiveMapMapActions',['LiveMapMapReducer','LiveMapCache','PublicLiveMapConstants'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapMapReducer').ActionCreators,i=h.createSetVideosInViewAction,j=h.createSetLeafletMapAction,k=h.createSetWebGLMapAction,l=h.createSetSidebarOffsetAction,m=h.createSetShowLoadingDialogAction,n=h.createSetUserLocationAction,o=h.createSetMapViewDataAction,p=h.createSetActiveStreamPixelLocationAction;function q(w,x){var y=w.longitude,z=w.latitude;return (x.getWest()<=y&&y<=x.getEast()&&x.getSouth()<=z&&z<=x.getNorth());}function r(w,x){return function(y,z){y(o(x,w));y(v());y(s());};}function s(){return function(w,x){var y=x();if(y.map.webGLMap!=null)return;var z=y.map.leafletMap;if(z==null){w(i([]));return;}var aa=y.map.mapLatLngBounds;if(aa==null){w(i([]));return;}var ba=y.map.mapZoomLevel,ca=y.videoCache.cacheBitfields[c('LiveMapCache').TACO_LEVEL_0],da=babelHelpers['extends']({},ca);if(ba>=4){var ea=y.videoCache.cacheBitfields[c('LiveMapCache').TACO_LEVEL_1];da=babelHelpers['extends']({},da,ea);}if(ba>=5){var fa=y.videoCache.cacheBitfields[c('LiveMapCache').TACO_LEVEL_2];da=babelHelpers['extends']({},da,fa);}if(ba>=c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC){var ga={x1:aa.getWest(),x2:aa.getEast(),y1:aa.getSouth(),y2:aa.getNorth()},ha=y.videoCache.geoCache.getDataInBounds(ga);da=babelHelpers['extends']({},da,ha);}var ia=y.videoCache.blacklist,ja=Object.keys(da).filter(function(ka){var la=y.videoCache.allVideos.get(ka);if(la==null)return false;if(ia.get(ka))return false;var ma=la.location,na=ma.latitude,oa=ma.longitude,pa=oa<0?oa+360:oa-360,qa={latitude:na,longitude:oa},ra={latitude:na,longitude:pa};return (q(qa,aa)||q(ra,aa));});w(i(ja));};}function t(){return function(w,x){var y=x(),z=y.map.leafletMap;if(z==null)return null;var aa=y.activeStream.id;if(aa==null)return w(p(null));var ba=y.videoCache.allVideos.get(aa);if(ba==null)return w(p(null));var ca=y.map.mapLatLngBounds;if(ca==null)return w(p(null));var da=ba.location,ea=da.latitude,fa=da.longitude,ga=fa<0?fa+360:fa-360,ha=void 0,ia={latitude:ea,longitude:ga};if(q(ba.location,ca)){ha=z.latLngToContainerPoint([ba.location.latitude,ba.location.longitude]);}else if(q(ia,ca)){ha=z.latLngToContainerPoint([ba.location.latitude,ga]);}else ha=z.latLngToContainerPoint([ba.location.latitude,ba.location.longitude]);return w(p(ha));};}function u(){return function(w,x){var y=x(),z=y.map.webGLMap;if(z==null)return null;var aa=y.activeStream.id;if(aa==null)return w(p(null));var ba=y.videoCache.allVideos.get(aa);if(ba==null)return w(p(null));var ca=z.getBounds(),da=ba.location,ea=da.latitude,fa=da.longitude,ga=void 0;if(fa>=ca.getWest()&&fa<=ca.getEast()){ga=z.project([fa,ea]);}else if(fa>ca.getEast()){fa+=Math.floor((ca.getWest()+180)/360)*360;if(fa<ca.getWest())fa+=360;ga=z.project([fa,ea]);}else if(fa<ca.getWest()){fa+=Math.floor((ca.getEast()+180)/360)*360;if(fa>ca.getEast())fa-=360;ga=z.project([fa,ea]);}return w(p(ga));};}function v(){return function(w,x){var y=null;if(x().map.leafletMap!=null){y=w(t());}else if(x().map.webGLMap!=null)y=w(u());if(y==null)y=w(p(null));return y;};}f.exports={updateRenderedStreamsForLeaflet:s,setUserLocation:n,setVideosInView:i,setLeafletMap:j,setWebGLMap:k,setActiveStreamPixelLocation:v,setMapViewData:r,setSidebarOffset:l,setShowLoadingDialog:m};}),null);
__d("XLiveMapsVideoAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/videos\/viewers\/",{video_id:{type:"String",required:true},live_viewers_count:{type:"Int",required:true}});}),null);
__d('LiveMapActiveStreamActions',['AsyncRequest','PublicLiveMapConfig','PublicLiveMapConstants','XLiveMapsVideoAsyncController','LiveMapSidebarActions','LiveMapActiveStreamReducer','LiveMapMapActions','setTimeout','clearTimeout'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapActiveStreamReducer').ActionCreators,i=c('LiveMapMapActions').setActiveStreamPixelLocation,j=c('PublicLiveMapConfig').min_viewers_to_display_viewers,k=c('PublicLiveMapConstants').NUMBER_OF_VIEWERS_TO_SHOW,l=null,m=null,n=null;function o(){if(l!=null){l.abort();l=null;}}function p(){return function(w,x){var y=x().activeStream.id;if(y==null)return;o();w(h.createSetCurrentViewersAction([]));var z=c('XLiveMapsVideoAsyncController').getURIBuilder().setString('video_id',y).setInt('live_viewers_count',k).getURI();l=new (c('AsyncRequest'))().setURI(z).setMethod('GET').setReadOnly(true).setHandler(function(aa){var ba=aa.payload;l=null;if(ba&&ba.lat_longs)w(h.createSetCurrentViewersAction(ba.lat_longs));});l.send();};}function q(w,x){return function(y,z){t();if(z().videoPlayer.channelPlayerUsingTooltipVideo)return;y(h.createSetActiveStreamAction(w,x));y(h.createSetCurrentViewersAction([]));y(i());var aa=z().videoCache.allVideos.get(w);if(aa.viewer_count>=j)y(p());y(c('LiveMapSidebarActions').onTooltipOrChannelVideoChange());};}function r(){return function(w,x){t();if(x().videoPlayer.channelPlayerUsingTooltipVideo)return;w(h.createSetActiveStreamAction(null,null));w(h.createSetCurrentViewersAction([]));w(i());o();w(c('LiveMapSidebarActions').onTooltipOrChannelVideoChange());};}function s(){if(m!=null){c('clearTimeout')(m);m=null;}}function t(){if(n!=null){c('clearTimeout')(n);n=null;}}function u(w,x){var y=arguments.length<=2||arguments[2]===undefined?c('PublicLiveMapConstants').HOVER_INTENT_TIMEOUT_MS:arguments[2];return function(z,aa){s();t();m=c('setTimeout')(function(){z(q(w,x));},y);};}function v(){var w=arguments.length<=0||arguments[0]===undefined?c('PublicLiveMapConstants').DEBOUNCE_TIMER_MS:arguments[0];return function(x){if(n!=null)return;t();s();n=c('setTimeout')(function(){x(r());},w);};}f.exports={setActiveStream:q,resetActiveStream:r,clearSetActiveStreamTimeout:s,clearRemoveActiveStreamTimeout:t,setActiveStreamTimeout:u,resetActiveStreamTimeout:v};}),null);
__d('LiveMapChannelPlayerActions',['invariant','VideoChannel','VideoChannelController','setImmediate','LiveMapSidebarActions','VideoPlayerReason','LiveMapActiveStreamActions','LiveMapVideoPlayerReducer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('LiveMapActiveStreamActions').resetActiveStream,j=c('LiveMapVideoPlayerReducer').ActionCreators.createSetChannelPlayerUsingTooltipVideoAction,k=c('LiveMapVideoPlayerReducer').ActionCreators,l=k.createSetChannelPlayerOpenVideoIDAction,m='live_map';function n(t,u,v,w){return function(x,y){var z=y().videoPlayer.channelID;if(z==null)return;if(c('VideoChannel').get()){c('VideoChannel').get().getDialog().hide();c('setImmediate')(function(){return x(n(t,u,v,w));});return;}var aa=null;if(u!=null&&!u.isPlayerVersion('silvercity'))aa=u;c('VideoChannel').set(new (c('VideoChannelController'))(z,m,t,aa,null,function(){x(l(null));x(c('LiveMapSidebarActions').onTooltipOrChannelVideoChange());if(v)x(v());}));x(l(t));if(w!=null)x(w(aa!=null));};}function o(){return function(t,u){var v=u().sidebar.nowPlayingID;if(v==null)return;var w=u().sidebar.videoPlayerController;if(w==null)return;w.play(c('VideoPlayerReason').USER);};}function p(){return function(t,u){var v=u().sidebar.nowPlayingID;if(v==null)return;var w=u().sidebar.videoPlayerController;if(w!=null){var x=w.getVolume();if(x===0)w.setVolume(.75);}t(n(v,w,o));};}function q(t){return function(u,v){if(t){u(j(true));}else{u(j(false));u(i());}};}function r(){return function(t,u){t(j(false));t(i());};}function s(){return function(t,u){var v=u(),w=v.activeStream.id;if(w==null)return;var x=v.videoPlayer.mapTooltipVideoPlayerController;if(x==null)return;t(n(w,x,r,q));};}f.exports={openChannelPlayer:n,openChannelPlayerForSidebarVideo:p,openChannelPlayerForMapTooltip:s};}),null);
__d('LiveMapSelectorUtils',['ReduxReselect'],(function a(b,c,d,e,f,g){'use strict';var h=c('ReduxReselect').createSelector;function i(j,k){return h(j,k);}f.exports={createSelector:i};}),null);
__d('LiveMapSidebarSelectors',['LiveMapSelectorUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapSelectorUtils').createSelector,i=function o(p){return p.sidebar.nowPlayingID;},j=function o(p){return p.activeStream.id;},k=function o(p){return p.videoPlayer.channelPlayerOpenVideoID;},l=function o(p){return p.sidebar.playerVolume;},m=h([l,i,j,k],function(o,p,q,r){if(p==null)return o;if(q!=null&&q!==p)return 0;if(r!=null&&r!==p)return 0;return o;}),n=h([i,j,k],function(o,p,q){if(o==null)return false;if(p!=null&&p!==o)return true;if(q!=null&&q!==o)return true;return false;});f.exports={getNowPlayingID:i,getSidebarVideoVolume:m,getAbortLoadingSidebarVideo:n};}),null);
__d("XLiveMapSidebarChannelAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/sidebar\/channel\/",{limit:{type:"Int"},img_size:{type:"Int"}});}),null);
__d('LiveMapSidebarActions',['LiveMapSidebarReducer','LiveMapSidebarSelectors','AsyncRequest','VideoPlayerStates','VideoPlayerReason','XLiveMapSidebarChannelAsyncController','VideoPlayerExperiments','LiveMapChannelPlayerActions','throttle'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapSidebarReducer').ActionCreators,i=[c('VideoPlayerStates').PAUSED,c('VideoPlayerStates').LOADING,c('VideoPlayerStates').PLAYING,c('VideoPlayerStates').READY],j=h.createSetSidebarPlayerVolumeAction;function k(){return function(s,t){var u=t(),v=u.sidebar.videoPlayerController;if(v==null)return;var w=c('LiveMapSidebarSelectors').getAbortLoadingSidebarVideo(u),x=c('LiveMapSidebarSelectors').getSidebarVideoVolume(u);v.setVolume(x);if(w&&c('VideoPlayerExperiments').liveMapAbortLoading){v.pause(c('VideoPlayerReason').VIDEO_DATA_SWITCH);v.abortLoading();}else if(!w&&v.isState(c('VideoPlayerStates').PAUSED))v.play(c('VideoPlayerReason').VIDEO_DATA_SWITCH);};}function l(s){return function(t,u){var v=u(),w=v.videoPlayer.channelPlayerOpenVideoID,x=v.activeStream.id,y=v.sidebar.nowPlayingID;if(w!=null&&w!==y)return;if(x!=null&&x!==y)return;var z=s.isMuted()?0:s.getVolume();t(j(z));};}function m(s){return function(t,u){if(!s.isFullscreen()&&!s.getIsInChannel()&&i.includes(s.getState()))t(c('LiveMapChannelPlayerActions').openChannelPlayerForSidebarVideo());};}function n(s){return function(t,u){var v=s,w=u().sidebar.videoPlayerController;if(v!=null){v.setVolume(u().sidebar.playerVolume);if(w!=null){w.removeAllListeners('clickVideo');w.removeAllListeners('changeVolume');w.removeAllListeners('muteVideo');w.removeAllListeners('unmuteVideo');}v.addListener('clickVideo',function(){return t(m(v));});v.addListener('changeVolume',c('throttle')(function(){return t(l(v));},100));v.addListener('muteVideo',function(){return t(l(v));});v.addListener('unmuteVideo',function(){return t(l(v));});}t(h.createSetSidebarVideoPlayerControllerAction(v));};}function o(s){return function(t,u){var v=u().sidebar.videoPlayerController;if(v!=null)if(v.getIsInChannel())return;t(h.createSetSidebarNowPlayingAction(s));};}function p(s){return function(t,u){var v=u().sidebar.videoPlayerController;if(v==null)return;var w=v.getState();if(w===c('VideoPlayerStates').FINISHED||w===c('VideoPlayerStates').FALLBACK)for(var x=0;x<s.videos.length;x++){var y=s.videos[x];if(y&&y.isLive&&y.videoID!==v.getVideoID()){t(o(y.videoID));return;}}};}function q(){return function(s){var t=c('XLiveMapSidebarChannelAsyncController').getURIBuilder().setInt('limit',1).getURI(),u=new (c('AsyncRequest'))().setURI(t).setMethod('GET').setReadOnly(true).setHandler(function(v){var w=v.payload;if(w.videos.length<1)return;var x=w.videos[0];if(x.isLive!==true)return;s(o(x.videoID));});u.send();};}function r(){return function(s,t){var u=c('XLiveMapSidebarChannelAsyncController').getURIBuilder().setInt('limit',2).getURI(),v=new (c('AsyncRequest'))().setURI(u).setMethod('GET').setReadOnly(true).setHandler(function(w){var x=w.payload;if(x.videos[0]&&x.videos[0].isLive||x.videos[1]&&x.videos[1].isLive){s(p(x));return;}var y=5000,z=t().sidebar.videoPlayerController;if(z==null)return;var aa=z.getState();if(aa===c('VideoPlayerStates').FINISHED||aa===c('VideoPlayerStates').FALLBACK)setTimeout(function(){return s(r());},y);});v.send();};}f.exports={onTooltipOrChannelVideoChange:k,initializeChannelVideo:q,replaceCompletedChannelVideo:r,setSidebarNowPlaying:o,setSidebarVideoPlayerController:n};}),null);
__d('LiveMapRelayParallelGraphQLBatchNetworkLayer',['invariant','RelayGraphQLBatchNetworkLayer','debounceCore','guid','Map','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=1,l=6;i=babelHelpers.inherits(m,c('RelayGraphQLBatchNetworkLayer'));j=i&&i.prototype;function m(n){j.constructor.call(this);this.$LiveMapRelayParallelGraphQLBatchNetworkLayer4=function(){if(this.$LiveMapRelayParallelGraphQLBatchNetworkLayer3)return;this.$LiveMapRelayParallelGraphQLBatchNetworkLayer3=true;c('setImmediate')(function(){this.$LiveMapRelayParallelGraphQLBatchNetworkLayer5(this.$LiveMapRelayParallelGraphQLBatchNetworkLayer2.shift());this.$LiveMapRelayParallelGraphQLBatchNetworkLayer3=false;if(this.$LiveMapRelayParallelGraphQLBatchNetworkLayer2.length)this.$LiveMapRelayParallelGraphQLBatchNetworkLayer4();}.bind(this));}.bind(this);n>=k&&n<=l||h(0);this.$LiveMapRelayParallelGraphQLBatchNetworkLayer1=n;this.$LiveMapRelayParallelGraphQLBatchNetworkLayer2=[];this.$LiveMapRelayParallelGraphQLBatchNetworkLayer3=false;this.$LiveMapRelayParallelGraphQLBatchNetworkLayer4=c('debounceCore')(this.$LiveMapRelayParallelGraphQLBatchNetworkLayer4,800);}m.prototype.sendQueries=function(n){var o=[],p=new (c('Map'))();n.forEach(function(s){var t=s.getQuery();if(t.isDeferred()){typeof t.getBatchCall==='function'||h(0);var u=t.getBatchCall();if(u){var v=p.get(u.sourceQueryID);Array.isArray(v)||h(0);v.push(s);}else{var w='indie-deferred-query:'+c('guid')();o.push(w);p.set(w,[s]);}}else{var x=s.getID();o.push(x);p.set(x,[s]);}});var q=new Array(this.$LiveMapRelayParallelGraphQLBatchNetworkLayer1).fill([]),r=Math.ceil(o.length/this.$LiveMapRelayParallelGraphQLBatchNetworkLayer1);q=q.map(function(s){var t=0;while(o.length&&t<r){var u=o.pop(),v=p.get(u);Array.isArray(v)||h(0);s=s.concat(v);t++;}return s;});o.length===0||h(0);this.$LiveMapRelayParallelGraphQLBatchNetworkLayer2=this.$LiveMapRelayParallelGraphQLBatchNetworkLayer2.concat(q.filter(function(s){return s.length;}));this.$LiveMapRelayParallelGraphQLBatchNetworkLayer4();};m.prototype.$LiveMapRelayParallelGraphQLBatchNetworkLayer5=function(n){j.sendQueries.call(this,n);};m.MIN_XHR_ALLOWED=k;m.MAX_XHR_ALLOWED=l;f.exports=m;}),null);
__d('LiveMapVideoCacheActions',['Promise','LiveMapVideoCacheReducer','LiveMapPollingReducer','PublicCurrentlyLiveWithLocationVideosCache','LiveMapCache','PublicLiveMapConfig','PublicLiveMapConstants','PromiseBasedPoller','Relay','LeafletUtils','LiveMapViewField','LiveMapGeoCacheUtils','LiveMapMapActions','LiveMapRelayParallelGraphQLBatchNetworkLayer','fromGraphQL','memoizeWithArgs'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapVideoCacheReducer').ActionCreators,i=c('LiveMapPollingReducer').ActionCreators;c('Relay').injectNetworkLayer(new (c('LiveMapRelayParallelGraphQLBatchNetworkLayer'))(c('LiveMapRelayParallelGraphQLBatchNetworkLayer').MAX_XHR_ALLOWED));var j=4000,k=Math.max(j,c('PublicLiveMapConfig').poll_interval_ms),l=12000,m=8,n=100,o=c('memoizeWithArgs')(function(ga,ha){var ia={level:'TACO_LEVEL_'+ga,video_count:ha,force_location_check:true};return c('fromGraphQL').Query(function(ja){return {calls:[{kind:'Call',metadata:{type:'PublicCurrentlyLiveWithLocationVideosQueryArguments!'},name:'query',value:c('Relay').QL.__var(ja)}],children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'viewer_count',fieldName:'live_viewer_count_read_only',kind:'Field',metadata:{},type:'Int'},{alias:'location',children:[{fieldName:'latitude',kind:'Field',metadata:{},type:'Float'},{fieldName:'longitude',kind:'Field',metadata:{},type:'Float'}],fieldName:'fuzzed_estimated_location',kind:'Field',metadata:{canHaveSubselections:true},type:'Location'}],fieldName:'nodes',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isPlural:true},type:'Video'}],fieldName:'videos',kind:'Field',metadata:{canHaveSubselections:true},type:'PublicCurrentlyLiveWithLocationVideosResultsConnection'}],fieldName:'public_currently_live_with_location_videos',kind:'Query',metadata:{identifyingArgName:'query',identifyingArgType:'PublicCurrentlyLiveWithLocationVideosQueryArguments!'},name:'LiveMapVideoCacheActions',type:'PublicCurrentlyLiveWithLocationVideosQuery'};}(ia));},function(){for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];return ha.join(',');}),p=c('memoizeWithArgs')(function(ga,ha,ia){var ja={level:'LOKI',video_count:ga,bounds:{north:ia.north,south:ia.south,east:ia.east,west:ia.west},max_viewers:ha,force_location_check:true};return c('fromGraphQL').Query(function(ka){return {calls:[{kind:'Call',metadata:{type:'PublicCurrentlyLiveWithLocationVideosQueryArguments!'},name:'query',value:c('Relay').QL.__var(ka)}],children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'viewer_count',fieldName:'live_viewer_count_read_only',kind:'Field',metadata:{},type:'Int'},{alias:'location',children:[{fieldName:'latitude',kind:'Field',metadata:{},type:'Float'},{fieldName:'longitude',kind:'Field',metadata:{},type:'Float'}],fieldName:'fuzzed_estimated_location',kind:'Field',metadata:{canHaveSubselections:true},type:'Location'}],fieldName:'nodes',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isPlural:true},type:'Video'}],fieldName:'videos',kind:'Field',metadata:{canHaveSubselections:true},type:'PublicCurrentlyLiveWithLocationVideosResultsConnection'}],fieldName:'public_currently_live_with_location_videos',kind:'Query',metadata:{identifyingArgName:'query',identifyingArgType:'PublicCurrentlyLiveWithLocationVideosQueryArguments!'},name:'LiveMapVideoCacheActions',type:'PublicCurrentlyLiveWithLocationVideosQuery'};}(ja));},function(){for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];return ha.join(',');});function q(ga,ha,ia){return function(ja,ka){var la={west:ha.x1,east:ha.x2,south:ha.y1,north:ha.y2};ja(h.createRequestLokiVideosAction(ha));var ma=p(ga,ia,la);c('Relay').Store.forceFetch({query:ma},function(na){if(!na.done)return;var oa=c('Relay').Store.readQuery(ma)[0];if(!oa||!oa.videos||!oa.videos.nodes)return;var pa=oa.videos.nodes.filter(function(qa){return (qa!=null&&qa.id!=null&&qa.location!=null&&qa.viewer_count!=null);});ja(h.createReceiveLokiVideosAction(pa,ha));if(ka().map.leafletMap)ja(c('LiveMapMapActions').updateRenderedStreamsForLeaflet());});};}function r(ga,ha){return function(ia,ja){var ka=new (c('PromiseBasedPoller'))({interval:k,allowNotLoggedIn:true,request:function la(){var ma=o(ga,ha),na=new (c('Promise'))(function(oa,pa){c('Relay').Store.forceFetch({query:ma},function(qa){if(qa.error!=null){pa(qa.error);return;}else if(!qa.done)return;var ra=c('Relay').Store.readQuery(ma)[0];if(!ra||!ra.videos||!ra.videos.nodes){pa({message:'Query came back blank'});return;}var sa=ra.videos.nodes.filter(function(ta){return (ta!=null&&ta.id!=null&&ta.location!=null&&ta.viewer_count!=null);});ia(h.createReceiveTacoCacheVideosAction(sa,ga));if(ja().map.leafletMap)ia(c('LiveMapMapActions').updateRenderedStreamsForLeaflet());oa();});});return na;}});return ka;};}function s(ga,ha){return function(ia,ja){var ka=ia(r(ga,ha));ia(i.createMapInitializeLevelAction(ka,ga));};}function t(ga,ha,ia){return function(ja,ka){var la=new (c('PromiseBasedPoller'))({interval:l,allowNotLoggedIn:true,request:function ma(na){var oa=ka(),pa=oa.map.mapLatLngBounds;if(pa==null)return c('Promise').resolve();var qa=pa?c('LeafletUtils').wrapLongitude(pa.getEast()):0,ra=pa?c('LeafletUtils').wrapLongitude(pa.getWest()):0,sa=pa?pa.getSouth():0,ta=pa?pa.getNorth():0,ua={x1:ra,x2:qa,y1:sa,y2:ta},va=new (c('LiveMapViewField'))(ua);if(va.isMinLongitudeGreaterThanMax())ua=va.getLeftSplitFor360DegreeMap().getSearchBounds();var wa={west:ua.x1,east:ua.x2,south:ua.y1,north:ua.y2},xa=p(ga,ia,wa),ya=new (c('Promise'))(function(za,ab){c('Relay').Store.forceFetch({query:xa},function(bb){if(bb.error!=null){ab(bb.error);return;}else if(!bb.done)return;var cb=c('Relay').Store.readQuery(xa)[0];if(cb==null){ab({message:'Query came back blank'});return;}var db=cb.videos.nodes.filter(function(eb){return (eb!=null&&eb.id!=null&&eb.location!=null&&eb.viewer_count!=null);});ja(h.createGeoCachePeriodicResetAction(db,ua));if(ka().map.leafletMap)ja(c('LiveMapMapActions').updateRenderedStreamsForLeaflet());za();});});return ya;}});ja(i.createMapInitializeLevelAction(la,c('PublicCurrentlyLiveWithLocationVideosCache').LOKI));return la;};}function u(ga){return i.createMapPauseLevelAction(ga);}function v(){return function(ga){var ha=Object.keys(c('PublicCurrentlyLiveWithLocationVideosCache'));for(var ia=0;ia<ha.length;ia++){var ja=c('PublicCurrentlyLiveWithLocationVideosCache')[ia];ga(u(ja));}};}function w(ga){return i.createMapResumeLevelAction(ga);}function x(){return function(ga,ha){var ia=Object.keys(c('PublicCurrentlyLiveWithLocationVideosCache'));for(var ja=0;ja<ia.length;ja++){var ka=c('PublicCurrentlyLiveWithLocationVideosCache')[ja];ga(w(ka));}ga(aa(ha().map.mapZoomLevel));};}function y(ga){return i.createMapStopLevelAction(ga);}function z(){return function(ga){var ha=Object.keys(c('PublicCurrentlyLiveWithLocationVideosCache'));for(var ia=0;ia<ha.length;ia++){var ja=c('PublicCurrentlyLiveWithLocationVideosCache')[ia];ga(y(ja));}};}function aa(ga){return function(ha){if(ga<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.LEVEL_2){ha(u(c('PublicCurrentlyLiveWithLocationVideosCache').TACO_LEVEL_2));}else ha(w(c('PublicCurrentlyLiveWithLocationVideosCache').TACO_LEVEL_2));if(ga<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC){ha(u(c('PublicCurrentlyLiveWithLocationVideosCache').LOKI));}else ha(w(c('PublicCurrentlyLiveWithLocationVideosCache').LOKI));};}function ba(){return function(ga){ga(s(c('LiveMapCache').TACO_LEVEL_0,c('PublicLiveMapConstants').POLLING_VIDEO_COUNT.LEVEL_0));ga(s(c('LiveMapCache').TACO_LEVEL_1,c('PublicLiveMapConstants').POLLING_VIDEO_COUNT.LEVEL_1));ga(s(c('LiveMapCache').TACO_LEVEL_2,c('PublicLiveMapConstants').POLLING_VIDEO_COUNT.LEVEL_2));ga(t(c('PublicLiveMapConstants').POLLING_VIDEO_COUNT.DYNAMIC,c('PublicLiveMapConstants').MIN_VIEWERS_FOR_DYNAMIC_FETCH,c('PublicLiveMapConstants').MAX_VIEWERS_FOR_DYNAMIC_FETCH));if(c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.LEVEL_2)ga(u(c('PublicCurrentlyLiveWithLocationVideosCache').TACO_LEVEL_2));if(c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC)ga(u(c('PublicCurrentlyLiveWithLocationVideosCache').LOKI));};}function ca(ga){return function(ha,ia){if(ga.isMinLongitudeGreaterThanMax()){ha(ca(ga.getLeftSplitFor360DegreeMap()));ha(ca(ga.getRightSplitFor360DegreeMap()));return;}var ja=ia(),ka=ja.videoCache.visitedLocationsGeoCache,la=c('LiveMapGeoCacheUtils').isSufficientDataInView(ga,ka);if(!la)return;ha(q(n,ga.getSearchBounds(),m));};}function da(){return function(ga,ha){var ia=ha(),ja=ia.map.mapZoomLevel,ka=ia.map.mapLatLngBounds;if(ka==null)return;var la=ja>c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC;if(!la)return;var ma={x1:c('LeafletUtils').wrapLongitude(ka.getWest()),x2:c('LeafletUtils').wrapLongitude(ka.getEast()),y1:ka.getSouth(),y2:ka.getEast()},na=new (c('LiveMapViewField'))(ma);ga(ca(na));};}var ea=h.createBlacklistVideoAction,fa=h.createRemoveVideoAction;f.exports={pauseAllMapPolling:v,resumePollerAtLevel:w,stopPollerAtLevel:y,blacklistVideo:ea,removeVideo:fa,updatePollerForZoom:aa,initializeAllMapPolling:ba,resumeMapPolling:x,stopAllMapPolling:z,dynamicGeoFetch:da};}),null);
__d('LiveMapVideoPlayerActions',['LiveMapVideoPlayerReducer'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapVideoPlayerReducer').ActionCreators,i=h.createSetChannelIDAction,j=h.createSetListViewTooltipVideoPlayerControllerAction,k=h.createSetMapTooltipVideoPlayerControllerAction;f.exports={setChannelID:i,setListViewTooltipVideoPlayerController:j,setMapTooltipVideoPlayerController:k};}),null);
__d('LiveMapClickEventLogger',['ComposerSourceSurface','PublicLiveMapEvent','PublicLiveMapInteractionsTypedLogger','LiveMapClickEventSource','LiveMapViewChangeSource','LiveVideoBroadcastFunnelLogger','pageID'],(function a(b,c,d,e,f,g){var h={logVideoClickEvent:function i(j,k){if(!j)return;switch(k){case c('LiveMapClickEventSource').MAP_MARKER:j.clickSource=c('LiveMapClickEventSource').MAP_MARKER;break;case c('LiveMapClickEventSource').TOOLTIP_PLAYER:j.clickSource=c('LiveMapClickEventSource').TOOLTIP_PLAYER;break;case c('LiveMapClickEventSource').SIDEBAR_ITEM:j.clickSource=c('LiveMapClickEventSource').SIDEBAR_ITEM;break;case c('LiveMapClickEventSource').SIDEBAR_PLAYER:j.clickSource=c('LiveMapClickEventSource').SIDEBAR_PLAYER;break;case c('LiveMapClickEventSource').GRID_ITEM:j.clickSource=c('LiveMapClickEventSource').GRID_ITEM;break;default:j.clickSource=c('LiveMapClickEventSource').MAP_MARKER;}new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').CIRCLE_CLICKED).setTimeSpentID(c('pageID')).setVideoID(j.videoID).setMapZoom(j.mapZoom).setViewerCount(j.viewerCount).setClickSource(j.clickSource).log();},logViewModeChangeEvent:function i(j){if(!j)return;new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').VIEW_MODE_CHANGE).setTimeSpentID(c('pageID')).setViewChangeSource(j).log();},logCloseAutoplayVideoClickEvent:function i(){new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').AUTOPLAY_VIDEO_CLOSED).setTimeSpentID(c('pageID')).log();},logGoLiveButtonClickEvent:function i(){c('LiveVideoBroadcastFunnelLogger').startFromLiveMapAndSelectLiveAttachment();new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').GO_LIVE_BUTTON_CLICKED).setTimeSpentID(c('pageID')).log();},logMapMarkerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').MAP_MARKER);},logSidebarItemClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').SIDEBAR_ITEM);},logSidebarPlayerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').SIDEBAR_PLAYER);},logTooltipPlayerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').TOOLTIP_PLAYER);},logGridItemClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').GRID_ITEM);},logViewChangeFromMapSidebarLink:function i(){h.logViewModeChangeEvent(c('LiveMapViewChangeSource').MAP_SIDEBAR_LINK);},logViewChangeFromGridTextLink:function i(){h.logViewModeChangeEvent(c('LiveMapViewChangeSource').GRID_TEXT_LINK);},logCloseSidebarAutoplayVideo:function i(){h.logCloseAutoplayVideoClickEvent();},logGoLiveButtonClicked:function i(){h.logGoLiveButtonClickEvent();}};f.exports=h;}),null);
__d("XLiveMapGoLiveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/live_map\/dialog\/go_live\/",{__asyncDialog:{type:"Int"}});}),null);
__d('LiveMapGoLiveButton.react',['AsyncDialog','AsyncRequest','Button.react','LiveMapClickEventLogger','React','XLiveMapGoLiveController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('Button.react'),{label:this.props.label,use:'confirm',onClick:this.$LiveMapGoLiveButton1,size:'large'}));};j.prototype.$LiveMapGoLiveButton1=function(){var k=c('XLiveMapGoLiveController').getURIBuilder().getURI();c('LiveMapClickEventLogger').logGoLiveButtonClicked();c('AsyncDialog').send(new (c('AsyncRequest'))(k));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoCompnentWithFluentUFISupport.react',['React','UFIVideoPlayerRegistry','VideoComponent'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.enable=function(k){c('UFIVideoPlayerRegistry').registerVideoPlayerController(k);};j.prototype.disable=function(){};j.prototype.render=function(){return null;};function j(){h.apply(this,arguments);}f.exports=c('VideoComponent').createContainer(j);}),null);
__d('VideoComponentClickForMore.react',['cx','fbt','React','VideoClickForMoreOverlay','VideoComponent','VideoPlayerUIComponentDrawer','VideoRenderingUtils','nullthrows','shallowCompare'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$VideoComponentClickForMore2=function(n){this.setState({height:n});}.bind(this);this.$VideoComponentClickForMore3=function(){c('nullthrows')(this.vpc).clickVideo();}.bind(this);this.state={height:this.$VideoComponentClickForMore1()};this.vpc=null;}l.prototype.$VideoComponentClickForMore1=function(){return c('VideoRenderingUtils').isEmbeddedControlRedesign()?c('VideoClickForMoreOverlay').REDESIGN_HEIGHT:c('VideoClickForMoreOverlay').DEFAULT_HEIGHT;};l.prototype.enable=function(m){this.vpc=m;this.drawer=m.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.ClickForMore,this.$VideoComponentClickForMore1());this.drawer.addListener('reposition',this.$VideoComponentClickForMore2);};l.prototype.disable=function(){this.drawer&&this.drawer.release();this.drawer=null;};l.prototype.shouldComponentUpdate=function(m,n){return c('shallowCompare')(this,m,n);};l.prototype.render=function(){var m=this.drawer,n=this.vpc;if(!m||!n)return null;var o=n.getOption('VideoControls','areControlsVisible'),p=n.getState();if(p!=='playing'||!o){m.release();return null;}m.reserve();return c('React').createElement('div',{className:"_3htz"+(' '+"_4i5p")+('')+(c('VideoRenderingUtils').isEmbeddedControlRedesign()?' '+"_2is6":''),onClick:this.$VideoComponentClickForMore3,role:'button',style:{bottom:this.state.height+'px'},tabIndex:'0'},i._("Click for more"));};f.exports=c('VideoComponent').createContainer(l,{observedVpcEvents:['VideoControls/visibilityUpdate','stateChange']});}),null);
__d('VideoComponentContextMenu.react',['React','Relay','VideoComponent','VideoContextMenu','VideoPlayerHTML5Experiments','VideoPlayerVersions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentWillReceiveProps=function(k){var l=this.contextMenu;if(l&&k.video&&k.video!==this.props.video)l.setPermalinkURL(k.video.permalinkUrl);};j.prototype.enable=function(k){if(!this.refs.container)return;if(k.getPlayerVersion()===c('VideoPlayerVersions').PLEASANTVILLE)this.contextMenu=new (c('VideoContextMenu'))(k,this.refs.container,{permalinkURL:''});};j.prototype.disable=function(){};j.prototype.render=function(){return c('React').createElement('div',{ref:'container'});};function j(){h.apply(this,arguments);}f.exports=c('VideoComponent').createContainer(j,{suppressMount:function k(){return !c('VideoPlayerHTML5Experiments').useCustomContextMenu;},relayVideoConfig:{fragments:{video:function k(){return function(){return {children:[{alias:'permalinkUrl',fieldName:'permalink_url',kind:'Field',metadata:{},type:'Url'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentContextMenu_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoPlayerDisturbingThumbnail.react',['cx','fbt','React','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_20m9",this.props.className)},c('React').createElement('div',{className:"_1cqx"},c('React').createElement(c('XUIText.react'),{className:"_2ps6 _jxj",display:'block',size:'xlarge',weight:'bold'},c('React').createElement('span',{className:"_20ma"},i._("Warning")),'-',i._("Graphic Video")),c('React').createElement(c('XUIText.react'),{display:'block',size:'medium'},i._("Videos that contain graphic content can shock, offend and upset.")),c('React').createElement(c('XUIText.react'),{display:'block',size:'medium'},i._("Are you sure you want to see this?")))));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('VideoComponentCover.react',['cx','Image.react','React','ReactDOM','Relay','VideoComponent','VideoCover','VideoPlayerDisturbingThumbnail.react','VideoPlayerExperiments','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.componentWillReceiveProps=function(l){var m=this.videoCover;if(m&&l.video&&l.video!==this.props.video)m.setSnowLiftURI(l.video.permalinkUrl);};k.prototype.render=function(){if(this.props.video&&this.props.video.isDisturbing)return (c('React').createElement(c('VideoPlayerDisturbingThumbnail.react'),{ref:'root',className:"_1445"}));return (c('React').createElement('div',{ref:'root',className:c('joinClasses')(this.props.className,"_m54"+(!c('VideoPlayerExperiments').useBlurredBars?' '+"_5z3s":'')+(' '+"_1jto"))},this.renderCover()));};k.prototype.renderCover=function(){var l=this.props.video,m=l?l.image.uri:null;return (c('React').createElement(c('Image.react'),{ref:'img',className:"_1445"+(this.$VideoComponentCover1()?' '+"_4ndd":'')+(this.$VideoComponentCover1()?' '+"_2sy9":''),src:m}));};k.prototype.enable=function(l){this.videoCover=new (c('VideoCover'))(l,c('ReactDOM').findDOMNode(this.refs.root),[c('ReactDOM').findDOMNode(this.refs.img)],null,{showAfterFallback:this.props.showAfterFallback,hiddenAfterFinish:this.props.hiddenAfterFinish,showWhileBuffering:this.props.showWhileBuffering});};k.prototype.disable=function(){this.videoCover=null;};k.prototype.$VideoComponentCover1=function(){return false;};k.defaultProps={clickToSnowLift:false,hiddenAfterFinish:false,hideControlsOnAutoplay:false,showAfterFallback:false,showWhileBuffering:false,useElementDimension:false,resizeMode:'auto'};f.exports=c('VideoComponent').createContainer(k,{relayVideoConfig:{fragments:{video:function l(m){return function(){return {children:[{alias:'permalinkUrl',fieldName:'permalink_url',kind:'Field',metadata:{},type:'Url'},{alias:'isDisturbing',fieldName:'is_disturbing',kind:'Field',metadata:{},type:'Boolean'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentCover_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoDebugDashManifestView.react',['cx','React','TooltipLink.react','VideoDebugOverlay'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={streamInterruptAt:'rgba(227,26,28,0.7)',commercialBreakAt:'rgba(127,188,65,0.7)',endedAt:'rgba(0,0,0,0.7)',timelineGapAt:'rgba(255,50,50,0.7)',timelineOverlapAt:'rgba(255,255,255,0.7)'},l=10,m=10,n=2/15,o=1+2*n,p=.25;i=babelHelpers.inherits(q,c('React').Component);j=i&&i.prototype;function q(r){j.constructor.call(this,r);this.eventInView=function(event){return event.time<this.tMax&&event.time>=this.tMin;}.bind(this);this.rangeInView=function(s){return s.startTime<this.tMax&&s.endTime>=this.tMin-p;}.bind(this);this.renderTimeline=function(s,t){var u=['v','a'][t],v=s.map(this.renderSegment.bind(null,u)),w=o*t;return c('React').createElement('g',{key:'track-'+t,transform:'translate(0,'+w+')'},v);}.bind(this);this.renderSegment=function(s,t,u){var v=t.startTime,w=t.debugInfo,x=w&&w.delta>0?w.endTime:t.endTime,y=x-v,z=this.props.getSegmentClass(this.props.segmentStates,t,s);return (c('React').createElement('rect',{key:'segment-'+u,className:z,x:v,width:y,height:'1'}));}.bind(this);this.renderBufferHealth=function(s,t){var u=t*o-n;return c('React').createElement('g',{key:'buffer'+t,transform:'translate(0,'+u+')'},s.filter(this.rangeInView).map(this.renderBufferRange));}.bind(this);this.renderMomentEvent=function(s,t){var u=s.type,v=s.time,w={key:t+'-'+u+'-'+v,stroke:k[u]};return c('React').createElement('line',babelHelpers['extends']({x1:v,x2:v,y1:this.yMin,y2:this.yMax},w));}.bind(this);this.getVisibleSegments=function(s){return s.filter(this.rangeInView);}.bind(this);}q.prototype.renderBufferRange=function(r,s){var t=r.gap,u=r.startTime,v=r.endTime,w=t?"_4yqh":"_4yqi";return c('React').createElement('line',{key:'buffer-'+s,className:w,x1:u,x2:v});};q.prototype.renderDurationEvent=function(r,s){var t=r.type,u=r.track,v=r.startTime,w=r.endTime,x=o*u,y=x+1,z=v-p,aa=v+p,ba=w+p,ca=w-p,da={d:'M'+z+' '+x+'L'+aa+' '+y+'H'+ba+'L'+ca+' '+x,key:s+'-'+t+'-'+v+'-'+w,fill:k[t],stroke:k[t]};return c('React').createElement('path',da);};q.prototype.renderMaxLength=function(r,s){if(!r)return null;return c('React').createElement(c('TooltipLink.react'),{key:'length-'+s,display:'inline',href:'#',className:"_2io3",tooltip:'Length of the largest buffered segment shown in this track'},r.toFixed(3),'s');};q.prototype.getLongestSegmentLength=function(r){return r.reduce(function(s,t){var u=t.startTime,v=t.endTime;return Math.max(s,v-u);},0);};q.prototype.computeViewBox=function(r,s){var t=this.props.segmentArrays.length;this.tMin=r-l;this.tMax=r+m;this.yMin=-2*n;this.yMax=t+2*n*s;return this.tMin+' '+this.yMin+' '+(l+m)+' '+this.yMax;};q.prototype.render=function(){var r=this.props,s=r.segmentArrays,t=r.playbackPosition;if(!s)return null;var u=this.props.getSourceBufferHealth(),v=this.computeViewBox(t,u.length),w=s.map(this.getVisibleSegments),x=w.map(this.getLongestSegmentLength),y=c('React').createElement('line',{x1:t,x2:t,y1:this.yMin,y2:this.yMax,stroke:'#000'}),z=this.props.timelineEvents.filter(this.eventInView),aa=this.props.timelineRanges.filter(this.rangeInView);for(var ba=0,ca;ca=w[ba];ba++)for(var da=ca,ea=Array.isArray(da),fa=0,da=ea?da:da[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ga;if(ea){if(fa>=da.length)break;ga=da[fa++];}else{fa=da.next();if(fa.done)break;ga=fa.value;}var ha=ga,ia=ha.debugInfo;if(ia){var ja=ia.delta,ka=void 0,la=void 0,ma=void 0;if(ja>0){ka='timelineGapAt';la=ia.endTime;ma=ia.endTime+ja;}else{ka='timelineOverlapAt';la=ia.endTime+ja;ma=ia.endTime;}aa.push({type:ka,track:ba,startTime:la,endTime:ma});}}return (c('React').createElement('div',{className:"_2iob"},c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',className:"_2iof",tooltip:'The vertical line marks the current playhead position. '+'To the left of it, a '+l+'s window of past segments. '+'Afterwards, the next upcoming '+m+'s of known segments.'},'Video:',c('React').createElement('br',null),'Audio:'),c('React').createElement('div',{className:"_2iog"},x.map(this.renderMaxLength)),c('React').createElement('svg',{className:"_2ioh",viewBox:v,strokeWidth:n},w.map(this.renderTimeline),z.map(this.renderMomentEvent),aa.map(this.renderDurationEvent),y,u.map(this.renderBufferHealth))));};f.exports=q;}),null);
__d('VDOPropertyUpdater',[],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){function h(i,j,k){'use strict';this.parent=j;this.property=i;this.initValue=k;}h.prototype.safeValue=function(i){'use strict';return i===undefined?this.initValue:i;};h.prototype.get=function(i){'use strict';return this.parent.getProp(i||this.property);};h.prototype.replace=function(i){'use strict';this.parent.replace(this.property,this.safeValue(i));};h.prototype.update=function(i,j){'use strict';this.parent.update(this.property,i,this.safeValue(j));};return h;}();}),null);
__d('VDOIdentityHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,k,l);this.recordEvent=function(n,o){this.history[n]=this.safeValue(o);}.bind(this);this.recordProperty=this.recordEvent;this.history=[];this.initValue=m;}j.prototype.previous=function(k,l){'use strict';this.replace(this.history[l]);};j.prototype.next=function(k){'use strict';this.replace(this.history[k]);};j.prototype.last=function(){'use strict';return this.safeValue(this.history[this.history.length-1]);};return j;}();}),null);
__d('VDOSegmentArraysHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);this.indexDiffs=[];}j.prototype.recordEvent=function(k,l){'use strict';this.indexDiffs[k]=this.computeSegmentDiffToLog(l);};j.prototype.computeSegmentDiffToLog=function(k){'use strict';var l=k;if(this.segmentIndexEndTimes)l=k.map(function(m,n){var o=this.segmentIndexEndTimes[n];if(o==null)return m;var p=m.length;while(--p>=0)if(m[p].endTime<=o){p++;break;}return m.slice(p);}.bind(this));this.segmentIndexEndTimes=this.extractEndTimes(k);return l;};j.prototype.extractEndTimes=function(k){'use strict';var l=k.map(function(m){return m[m.length-1];});return l.filter(function(m){return m;}).map(function(m){var n=m.endTime;return n;});};j.prototype.previous=function(k,l){'use strict';var m=this.indexDiffs[k];if(m){var n=this.get();for(var o=0;o<m.length;o++){var p=m[o].length;if(!p)continue;var q=n[o];m[o]=q.splice(q.length-p,p);}this.updateLivehead(n);}};j.prototype.next=function(k){'use strict';var l=this.indexDiffs[k];if(l){var m=this.get();for(var n=0;n<l.length;n++){var o=m[n];o.push.apply(o,l[n]);}this.updateLivehead(m);}};j.prototype.updateLivehead=function(k){'use strict';var l=this.extractEndTimes(k);if(l.length)this.parent.replace('liveheadPosition',Math.min.apply(Math,l));};return j;}();}),null);
__d('VDOSegmentStatesHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);this.segmentStates=[];this.segmentIDs=[];}j.prototype.recordEvent=function(k,l){'use strict';var m=l[0],n=l[1];this.segmentIDs[k]=m;this.segmentStates[k]=n;};j.prototype.previous=function(k,l){'use strict';var m=this.segmentIDs[k];if(m){var n=l<0?-1:this.segmentIDs.lastIndexOf(m,l);this.update(m,n===-1?0:this.segmentStates[n]);}};j.prototype.next=function(k){'use strict';var l=this.segmentIDs[k];if(l)this.update(l,this.segmentStates[k]);};return j;}();}),null);
__d('VDOSparseHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,k,l,m);this.recordEvent=function(n,o){if(this.isUpdate(o)){this.history[n]=o;this.mostRecent=o;}}.bind(this);this.recordProperty=this.recordEvent;this.getAllUntil=function(n){var o=[];for(var p in this.history)if(Number(p)<=n)o.push(this.history[p]);return o;}.bind(this);this.history={};this.initValue=m;this.mostRecent=undefined;}j.prototype.isUpdate=function(k){'use strict';return this.mostRecent!==k;};j.prototype.previous=function(k,l){'use strict';var m=-1;for(var n in this.history){if(Number(n)>l)break;m=Number(n);}if(m>=0)this.replace(this.history[m]);};j.prototype.next=function(k){'use strict';if(k in this.history)this.replace(this.history[k]);};return j;}();}),null);
__d('VDOSourceBufferHealthHistory',['VDOSparseHistory'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=function k(l){if(l==null||typeof l!=='object')return l;if(Array.isArray(l))return l.map(k);var m={};for(var n in l)m[n]=k(l[n]);return m;};f.exports=(i=h=function(){var k,l;k=babelHelpers.inherits(m,c('VDOSparseHistory'));l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o,p);this.recordEvent=function(q,r){var s,t=this,u=r(),v=this.isUpdate(u);window.updates=!!v+(window.updates||0);if(v)(function(){var w=j(u);t.history[q]=function(){return w;};t.mostRecent=w;})();}.bind(this);this.recordProperty=this.recordEvent;}m.prototype.isUpdate=function(n){'use strict';var o=this.mostRecent;if(n&&!o)return true;if(n.length!==this.mostRecent.length)return true;for(var p=0;p<n.length;p++){var q=n[p],r=o[p];if(!!q!==!!r)return true;var s=q.length;if(s!==r.length)return true;if(!s)continue;var t=q[s-1].endTime,u=r[s-1].endTime;if(t!==u)return true;}return false;};return m;}(),h.deepClone=j,i);}),null);
__d('VideoDebugHistory',['VDOIdentityHistory','VDOSegmentStatesHistory','VDOSegmentArraysHistory','VDOSourceBufferHealthHistory','VDOSparseHistory'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){if(typeof j==='function'){j=j();return function(){return j;};}if(j==null||typeof j!=='object')return j;if(Array.isArray(j))return j.slice();return Object.assign({},j);};f.exports=function(){function i(j){'use strict';this.frozenProps={};this.$VideoDebugHistory1=j;this.history=[];this.offset=Infinity;this.reconstructors={lastError:new (c('VDOIdentityHistory'))('lastError',this),stallTime:new (c('VDOSparseHistory'))('stallTime',this,0),playerState:new (c('VDOIdentityHistory'))('playerState',this,'loading'),playbackPosition:new (c('VDOIdentityHistory'))('playbackPosition',this,0),lastMpdFetchDuration:new (c('VDOSparseHistory'))('lastMpdFetchDuration',this),mpdUpdatePollCount:new (c('VDOSparseHistory'))('mpdUpdatePollCount',this),segmentStates:new (c('VDOSegmentStatesHistory'))('segmentStates',this),segmentArrays:new (c('VDOSegmentArraysHistory'))('segmentArrays',this),getSourceBufferHealth:new (c('VDOSourceBufferHealthHistory'))('getSourceBufferHealth',this),lastLogEvent:new (c('VDOSparseHistory'))('lastLogEvent',this)};}i.prototype.freezeProps=function(){'use strict';this.offset=this.history.length;var j=this.$VideoDebugHistory1();for(var k in j)j[k]=h(j[k]);this.frozenProps=j;return this.offset;};i.prototype.record=function(event,j,k){'use strict';var l=this.history.length;this.history.push(k);for(var m in this.reconstructors){var n=this.reconstructors[m],o=event[m],p=j[m];if(o!==undefined&&'recordEvent' in n){n.recordEvent(l,o,j);}else if(p!==undefined&&'recordProperty' in n)n.recordProperty(l,p,j);}};i.prototype.getProps=function(){'use strict';return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length});};i.prototype.prev=function(){'use strict';var j=Math.min(this.offset,this.history.length),k=j-1;if(k<0)return -Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.previous(j,k);}this.frozenProps.historyEventType=this.history[k];return this.offset=k;};i.prototype.next=function(){'use strict';var j=Math.min(this.offset,this.history.length),k=j+1;if(k>this.history.length)return Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.next(k);}this.frozenProps.historyEventType=this.history[k];return this.offset=k;};i.prototype.goto=function(j){'use strict';var k=this.reconstructors.playbackPosition.last(),l=j>k,m=0;while(this.frozenProps.playbackPosition>j&&isFinite(m))m=this.prev();while(this.frozenProps.playbackPosition<j&&isFinite(m))m=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(j,k));return l?Infinity:m;};i.prototype.getProp=function(j){'use strict';return this.frozenProps[j];};i.prototype.replace=function(j,k){'use strict';this.frozenProps[j]=k;};i.prototype.update=function(j,k,l){'use strict';this.frozenProps[j][k]=l;};return i;}();}),null);
__d('exposeVideoDebug',['React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j,k){var l=j.getDebug,m=j.videoID,n=j.loggedError,o=j.lastError,p=l(),q=p.VideoPlayerController,r=p.VideoDebugParent,s=p.VideoDebugOverlay,t=p.VideoBufferGaps,u=p.ComboBufferGaps,v=p.AudioBufferGaps,w=r.getProps(),x=w.segmentArrays,y=x||[],z=y[0],aa=y[1],ba=q.getVideoAPI(),ca=ba.getDOMElement(),da=ba.getDebug(),ea=da.VideoPlayerHTML5Shaka,fa={},ga={};if(ea){fa=ea.getDebug();var ha=fa,ia=ha.ShakaPlayer;if(ia){ga=ia.getDebug();!ga.identifiersIntact;}}var ja={vid:'videoID',vel:'VideoElement',mpd:'getManifest',abr:'AbrManager',bwe:'BandwidthEstimator',src:'VideoSource',vss:'VideoSourceStream',vsi:'VideoSegmentIndex',vbm:'VideoBufferManager',vsb:'VideoSourceBuffer',vbg:'VideoBufferGaps',cbg:'ComboBufferGaps',ass:'AudioSourceStream',asi:'AudioSegmentIndex',abm:'AudioBufferManager',asb:'AudioSourceBuffer',abg:'AudioBufferGaps',tss:'TextSourceStream',sha:'ShakaPlayer',h5s:'VideoPlayerHTML5Shaka',h5a:'VideoPlayerHTML5Api',vpc:'VideoPlayerController',vdp:'VideoDebugParent',vdo:'VideoDebugOverlay',lpe:'LoggedPlayerError',err:'PlayerError'},ka=babelHelpers['extends']({videoID:m,VideoElement:ca,VideoBufferGaps:t,ComboBufferGaps:u,AudioBufferGaps:v,VideoSegmentIndex:z,AudioSegmentIndex:aa},fa,ga,{VideoPlayerHTML5Shaka:ea,VideoPlayerHTML5Api:ba,VideoPlayerController:q,VideoDebugParent:r,VideoDebugOverlay:s,LoggedPlayerError:n,PlayerError:o,ns:function la(){var ma=arguments.length<=0||arguments[0]===undefined?window:arguments[0];console.group('videoDebug [videoID '+m+']');for(var na in ja){var oa=ja[na],pa=ka[oa];if(pa!==undefined){ma[na]=pa;window.console.log(na+' = '+oa);}}console.groupEnd();return ka;}});window.videoDebug=ka;if(k)ka.ns();};f.exports=h;}),null);
__d('VideoDebugOverlay',['cx','CSS','KeyboardShortcuts','React','ReactDOM','SubscriptionsHandler','URI','VideoDebugHistory','VideoDebugOverlay.react','VideoPlayerReason','cancelAnimationFrame','clearTimeout','exposeVideoDebug','getActiveElement','requestAnimationFrame','setTimeout'],(function a(b,c,d,e,f,g,h){var i=0,j=1,k=2,l=['SegmentUnknown','SegmentFetching','SegmentFetched','SegmentFailed','SegmentAppended'],m=["_2io2","_19ur","_19us","_19ut","_37la"];function n(o,p,q){'use strict';this.inFocusAndAltKey=function(r,s){if(!r.altKey||s!=='onkeydown'||r.ctrlKey||r.metaKey)return false;var t=this.$VideoDebugOverlay2,u=c('getActiveElement')();return u.contains(t)||t.contains(u);}.bind(this);this.toggleMute=function(event){var r=this.$VideoDebugOverlay13;if(r.isMuted()){r.unmute();}else r.mute();}.bind(this);this.togglePause=function(event){var r=this.$VideoDebugOverlay13;if(r.isState('playing')){r.pause(c('VideoPlayerReason').USER);}else r.play(c('VideoPlayerReason').USER);}.bind(this);this.onExpose=function(event){c('exposeVideoDebug')(this.getProps(),!!event.shiftKey);}.bind(this);this.onFreeze=function(event){if(this.$VideoDebugOverlay9){return this.resume();}else return this.freeze();}.bind(this);this.onHistoryRew=function(event){if(event.shiftKey)return this.goto(-Infinity);return this.prev();}.bind(this);this.onHistoryFwd=function(event){if(event.shiftKey){this.goto(Infinity);return this.resume();}return this.next();}.bind(this);this.onLivePoll=function(){if(this.$VideoDebugOverlay18)c('clearTimeout')(this.$VideoDebugOverlay18);this.$VideoDebugOverlay18=c('setTimeout')(function(){this.$VideoDebugOverlay18=null;}.bind(this),1000);}.bind(this);this.onShakaDebug=function(r){var s=r.type,event=r.event,t=null;switch(s){case 'MPDFetchDuration':var u=event;this.$VideoDebugOverlay5.lastMpdFetchDuration=u;t={lastMpdFetchDuration:u};break;case 'InitialSegmentIndexes':t=this.onSegmentIndexes(event,true);break;case 'SegmentIndexesUpdated':t=this.onSegmentIndexes(event,false);break;case 'SegmentFetching':case 'SegmentFetched':case 'SegmentFailed':case 'SegmentAppended':t=this.onSegmentEvent(s,event);break;case 'streamInterruptAt':case 'commercialBreakAt':case 'endedAt':this.addTimelineMark(s,event);break;case 'streamResumedAt':this.removeTimelineMark('streamInterruptAt',event);break;default:return;}if(t)this.record(s,t);}.bind(this);this.onVpcLogEvent=function(event){this.$VideoDebugOverlay5.lastLogEvent=event;this.$VideoDebugOverlay5.getLogEventsUntil=this.$VideoDebugOverlay4.reconstructors.lastLogEvent.getAllUntil;this.record(event.event,{lastLogEvent:event});}.bind(this);this.getSourceBufferHealth=function(){this.$VideoDebugOverlay10[j]=this.$VideoDebugOverlay13.getVideoNode();return this.$VideoDebugOverlay10.map(this.$VideoDebugOverlay19);}.bind(this);this.$VideoDebugOverlay19=function(r,s){var t=[];if(!r)return t;var u=void 0,v=void 0;try{u=r.buffered;v=u.length;}catch(w){return t;}for(var x=0;x<v;x++)t.push({gap:false,startTime:u.start(x),endTime:u.end(x)});for(var y=1;y<v;y++){var z={gap:true,startTime:t[y-1].endTime,endTime:t[y].startTime};t.push(z);this.$VideoDebugOverlay11[s][z.startTime]=z;}return t;}.bind(this);this.toggleHidden=function(){return this.setHidden(!this.getHidden());}.bind(this);this.getHidden=function(){return this.$VideoDebugOverlay20;}.bind(this);this.setHidden=function(r){this.$VideoDebugOverlay20=r;if(this.$VideoDebugOverlay20){this.stopAnimating();}else this.startAnimating();c('CSS').conditionClass(this.$VideoDebugOverlay2,'hidden_elem',this.$VideoDebugOverlay20);}.bind(this);this.getDebug=function(){return {VideoPlayerController:this.$VideoDebugOverlay13,VideoDebugOverlay:this.vdo,VideoDebugParent:this,VideoBufferGaps:this.$VideoDebugOverlay11[i],ComboBufferGaps:this.$VideoDebugOverlay11[j],AudioBufferGaps:this.$VideoDebugOverlay11[k]};}.bind(this);this.getProps=function(){var r=this.$VideoDebugOverlay13;if(!r)return null;var s=r.getDebugInfo(),t=s.currentVideo,u=s.player;return Object.assign({},this.$VideoDebugOverlay5,{videoID:r.getVideoID(),playbackPosition:r.getCurrentTimePosition(),playbackDuration:r.getPlaybackDuration(),isSpherical:r.isSpherical(),streamType:t.streamType,projection:t.projection,isLiveStream:t.isLiveStream,isHD:t.isHD,hasHD:t.hasHD,tagSD:t.tagSD,tagHD:t.tagHD,hasSubtitles:t.hasSubtitles,isRateLimited:t.isRateLimited,hasRateLimit:t.hasRateLimit,liveManifestUrl:t.liveManifestUrl,streamId:t.streamId,hasSpatialAudio:r.getOption('SphericalVideoSpatialAudioController','hasSpatialAudio'),initializationTime:u.initializationTime,initializationTimestamp:u.initializationTimestamp,playerVersion:u.version,stallCount:u.stallCount,stallTime:u.stallTime,interruptCount:u.interruptCount,interruptTime:u.interruptTime,loggedError:u.loggedError,lastError:u.lastError,droppedFrames:u.droppedFrames,totalFrames:u.totalFrames,getDebug:this.getDebug,playerState:this.$VideoDebugOverlay17(),isPolling:!!this.$VideoDebugOverlay18,getSegmentClass:n.getSegmentClass});}.bind(this);this.$VideoDebugOverlay21=function(r){this.vdo=r;}.bind(this);this.$VideoDebugOverlay2=o;this.$VideoDebugOverlay3=p;this.$VideoDebugOverlay4=new (c('VideoDebugHistory'))(this.getProps);this.$VideoDebugOverlay5=this.$VideoDebugOverlay6();this.$VideoDebugOverlay7();this.$VideoDebugOverlay8=null;this.$VideoDebugOverlay9=false;this.setHidden(q.hidden);this.$VideoDebugOverlay1=q.timeBetweenRender;}n.prototype.$VideoDebugOverlay7=function(){'use strict';this.$VideoDebugOverlay10=[null,null,null];this.$VideoDebugOverlay11=[{},{},{}];};n.prototype.$VideoDebugOverlay6=function(){'use strict';var o=this.$VideoDebugOverlay3,p=o.autoplayReason,q=o.autoplayReasonReadable;return {autoplayReason:p,autoplayReasonReadable:q,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function r(){return [];},yaw:0,pitch:0};};n.prototype.disable=function(){'use strict';this.setHidden(true);this.$VideoDebugOverlay12.release();this.$VideoDebugOverlay13.unregisterOption('DebugOverlay','hidden');};n.prototype.enable=function(o){var p;'use strict';this.$VideoDebugOverlay13=o;this.$VideoDebugOverlay12=new (c('SubscriptionsHandler'))();(p=this.$VideoDebugOverlay12).addSubscriptions.apply(p,[o.addListener('VideoWithLiveBroadcast/poll',this.onLivePoll),o.addListener('debug/shakaEvent',this.onShakaDebug),o.addListener('debug/vpcLogEvent',this.onVpcLogEvent),o.addListener('streamInterrupted',function(){this.$VideoDebugOverlay14('interrupted');}.bind(this)),o.addListener('streamResumed',function(){this.$VideoDebugOverlay14(null);}.bind(this)),o.addListener('buffering',function(){this.$VideoDebugOverlay14('buffering');}.bind(this)),o.addListener('buffered',function(){this.$VideoDebugOverlay14(null);}.bind(this)),o.addListener('abortedLoading',function(){this.$VideoDebugOverlay14('aborted');}.bind(this)),o.addListener('restoringAfterAbort',function(){this.$VideoDebugOverlay14('restoring');this.$VideoDebugOverlay5=this.$VideoDebugOverlay6();this.$VideoDebugOverlay7();}.bind(this)),o.addListener('restoredAfterAbort',function(){this.$VideoDebugOverlay14(null);}.bind(this)),o.addListener('bufferingChanged',function(){var q=o.getDebugInfo(),r=q.player,event={stallTime:r.stallTime},s={playbackPosition:o.getCurrentTimePosition()};this.$VideoDebugOverlay4.record(event,s,'bufferingChanged');}.bind(this)),o.addListener('viewportChange',function(q,r){this.$VideoDebugOverlay5.yaw=q;this.$VideoDebugOverlay5.pitch=r;}.bind(this))].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));o.registerOption('DebugOverlay','hidden',this.getHidden,this.setHidden);if(this.$VideoDebugOverlay15(o.getVideoID()))this.setHidden(false);};n.prototype.registerKeys=function(o){'use strict';var p=[],q={baseFilters:[this.inFocusAndAltKey],allowDefault:true};for(var r in o)p.push(c('KeyboardShortcuts').register(r,o[r],q));return p;};n.prototype.$VideoDebugOverlay15=function(o){'use strict';var p=c('URI').getRequestURI().getQueryData(),q=p.vid;switch(q){case undefined:return false;case null:return true;default:return q.split(/\D+/g).indexOf(o)!==-1;}};n.prototype.$VideoDebugOverlay14=function(o){'use strict';this.$VideoDebugOverlay16=o;};n.prototype.$VideoDebugOverlay17=function(){'use strict';var o=this.$VideoDebugOverlay13.getState();if(this.$VideoDebugOverlay16)o+=' ('+this.$VideoDebugOverlay16+')';return o;};n.prototype.addTimelineMark=function(o,p){'use strict';var event={type:o,time:p};this.removeTimelineMark(event);var q=this.$VideoDebugOverlay5.timelineEvents;q.push(event);return p;};n.prototype.removeTimelineMark=function(o,p){'use strict';var q=this.$VideoDebugOverlay5.timelineEvents;for(var r=0;r<q.length;r++){var event=q[r];if(event.type===o&&event.time===p){q.splice(r,1);return true;}}return false;};n.prototype.record=function(o,p,q){'use strict';var r=this.$VideoDebugOverlay13;q=q||{};p=p||{};this.$VideoDebugOverlay4.record(p,Object.assign(q,this.$VideoDebugOverlay5,{playerState:this.$VideoDebugOverlay17(),playbackPosition:r.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),o);};n.getSegmentId=function(o,p){'use strict';return p+o.startTime;};n.getSegmentClass=function(o,p,q){'use strict';var r=n.getSegmentId(p,q);return m[o[r]||0];};n.prototype.onSegmentEvent=function(o,event){'use strict';var p=event.type,q=event.segment,r=event.sourceBuffer,s=n.getSegmentId(q,p),t=l.indexOf(o);this.$VideoDebugOverlay5.segmentStates[s]=t;switch(p){case 'v':this.$VideoDebugOverlay10[i]=r;break;case 'a':this.$VideoDebugOverlay10[k]=r;break;}return {segmentStates:[s,t]};};n.prototype.onSegmentIndexes=function(o,p){'use strict';var q=p||o.some(function(v){return v.lastPollHadChanges();}),r=o.map(function(v){return v.getSegments();});if(q){var s=this.$VideoDebugOverlay5.lastMpdChangesTime;this.$VideoDebugOverlay5.prevMpdChangesTime=s;this.$VideoDebugOverlay5.lastMpdChangesTime=Date.now();this.$VideoDebugOverlay5.mpdUpdatePollCount=0;}else this.$VideoDebugOverlay5.mpdUpdatePollCount+=1;this.$VideoDebugOverlay5.segmentArrays=r;var t=r.map(function(v){return v[v.length-1];}).filter(function(v){return v;}).map(function(v){var w=v.endTime;return w;});if(t.length)this.$VideoDebugOverlay5.liveheadPosition=Math.min.apply(Math,t);var u=this.$VideoDebugOverlay5.mpdUpdatePollCount;return {segmentArrays:r,mpdUpdatePollCount:u};};n.prototype.isHidden=function(){'use strict';return this.$VideoDebugOverlay20;};n.prototype.startAnimating=function(){'use strict';if(this.$VideoDebugOverlay8)return;var o=function(){this.renderOverlay();if(this.$VideoDebugOverlay1){this.$VideoDebugOverlay8=c('setTimeout')(o,this.$VideoDebugOverlay1);}else this.$VideoDebugOverlay8=c('requestAnimationFrame')(o);}.bind(this);o();};n.prototype.stopAnimating=function(){'use strict';var o=this.$VideoDebugOverlay8;if(this.$VideoDebugOverlay8){if(this.$VideoDebugOverlay1){c('clearTimeout')(this.$VideoDebugOverlay8);}else c('cancelAnimationFrame')(this.$VideoDebugOverlay8);this.$VideoDebugOverlay8=null;}return o;};n.prototype.prev=function(){'use strict';this.freeze();this.$VideoDebugOverlay4.prev();};n.prototype.next=function(){'use strict';this.freeze();var o=this.$VideoDebugOverlay4.next();if(!isFinite(o))this.resume();};n.prototype.goto=function(o){'use strict';this.freeze();this.$VideoDebugOverlay4.goto(o);};n.prototype.freeze=function(){'use strict';if(!this.$VideoDebugOverlay9){this.$VideoDebugOverlay4.freezeProps();this.$VideoDebugOverlay9=true;}};n.prototype.resume=function(){'use strict';this.$VideoDebugOverlay9=false;};n.prototype.getPropsToRender=function(){'use strict';return this.$VideoDebugOverlay9?this.$VideoDebugOverlay4.getProps():this.getProps();};n.prototype.renderOverlay=function(){'use strict';var o=!this.$VideoDebugOverlay20&&this.getPropsToRender();if(o)c('ReactDOM').render(c('React').createElement(c('VideoDebugOverlay.react'),babelHelpers['extends']({ref:this.$VideoDebugOverlay21},o)),this.$VideoDebugOverlay2);};f.exports=n;}),null);
__d('VideoDebugItem.react',['cx','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props.children,m=null;if(this.props.column==='right')m="_s5q";var n=this.props.label;if(this.props.tooltip)n=c('React').createElement(c('TooltipLink.react'),this.props,n);return c('React').createElement('div',{className:m},c('React').createElement('b',null,n),': ',l);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('VideoDebugDashMpdLag.react',['React','VideoDebugItem.react','TooltipLink.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentWillReceiveProps=function(k){var l=k.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:l});};j.prototype.shouldComponentUpdate=function(k,l){return l.mpdPoll;};j.prototype.$VideoDebugDashMpdLag1=function(k){return (k/1000).toFixed(3)+'s';};j.prototype.render=function(){var k=this.props,l=k.lastMpdFetchDuration,m=k.lastMpdChangesTime;if(!l)return null;var n=this.$VideoDebugDashMpdLag1(Date.now()-m),o='We saw no new segments in this number of MPD polls.\n'+(l?'Last poll with news was '+n+' ago.':'It has been '+n+' without news, since we started polling.'),p=null,q=this.props.prevMpdChangesTime;if(q){p=this.$VideoDebugDashMpdLag1(m-q);p=': '+p;}return (c('React').createElement('div',null,c('React').createElement(c('VideoDebugItem.react'),{label:'MPD load time',column:'right',tooltip:'Load time of the most recent dash manifest'},l.toFixed(3),'s'),c('React').createElement(c('VideoDebugItem.react'),{label:'MPD polls',href:this.props.liveManifestUrl||null,tooltip:'Number of recent dash manifest polls without news,\n'+'and the time last poll for new segments took.'},c('React').createElement(c('TooltipLink.react'),{tooltip:o},this.props.mpdUpdatePollCount),p)));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoDebugDashRepresentation.react',['React','TooltipLink.react','VideoDebugItem.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.idToolLink=function(k){return 'https://our.intern.facebook.com/intern/id2/'+k+'/';};j.prototype.render=function(){var k=this.props.streamId;if(!k)return null;var l=k,m=k.replace(/vd?$/,'');if(/^\d+$/.test(m))l=c('React').createElement(c('TooltipLink.react'),{target:'_blank',display:'inline',tooltip:'Show VideoEncoding of the playing representation id',href:this.idToolLink(m)},l);return (c('React').createElement(c('VideoDebugItem.react'),{label:'DASH Representation'},l));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoDebugExposeVideoDebug.react',['cx','React','TooltipLink.react','exposeVideoDebug'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$VideoDebugExposeVideoDebug1=function(event){event.preventDefault();c('exposeVideoDebug')(this.props,!!event.shiftKey);}.bind(this),m;}k.prototype.render=function(){return (c('React').createElement(c('TooltipLink.react'),{display:'inline',className:"_5jy",style:{right:'15px'},onClick:this.$VideoDebugExposeVideoDebug1,tooltip:'Expose a videoDebug object for this video to js devtools.\n'+'(Shift-click to break out independent globals immediately.)'},'js'));};f.exports=k;}),null);
__d('VideoDebugFlag.react',['cx','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props,m=l.tooltip,n=l.active,o=l.available,p="_45za",q=this.renderDot(n,o),r=this.props.label;if(m)r=c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',tooltip:m},r);return c('React').createElement('li',{className:p},c('React').createElement('b',null,r),': ',q);};k.prototype.renderDot=function(l,m){'use strict';var n={color:l?'green':m?'red':'gray'};return (c('React').createElement('span',{className:"_45zb",style:n},'\u25CF'));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('VideoDebugLogMessages.react',['cx','React','VideoDebugItem.react','VideoPlayerLoggerEvent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=' \uD83D\uDE1E';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderOption=function(r,s){var event=r.event;if(event===c('VideoPlayerLoggerEvent').PAUSED||event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING)event=event.toUpperCase();var t=r.logData,u=t.time_ms,v=t.recent_stalls_count,w=this.props.initializationTimestamp,x=((u-w)/1000).toFixed(3),y=v?k:null;return c('React').createElement('option',{key:s,value:s},x,'s: ',event,y);}.bind(this),this.$VideoDebugLogMessages2=function(event){var r=this.$VideoDebugLogMessages3(),s=r[Number(event.target.value)];console.group('log = %s event',s.event);console.groupEnd();}.bind(this),n;}l.prototype.shouldComponentUpdate=function(m){return this.$VideoDebugLogMessages1!==m.lastLogEvent;};l.prototype.$VideoDebugLogMessages3=function(){var m=this.props,n=m.getLogEventsUntil,o=m.atHistoryEntry,p=o==null?Infinity:o;return n(p);};l.prototype.render=function(){var m=this.$VideoDebugLogMessages3(),n=m.length-1;this.$VideoDebugLogMessages1=m[n];var o=void 0;if(m.length)o=c('React').createElement('select',{value:n,className:"_4a8p",onChange:this.$VideoDebugLogMessages2},m.map(this.renderOption));return c('React').createElement(c('VideoDebugItem.react'),{label:'Log'},o);};f.exports=l;}),null);
__d('VideoDebugScubaEventsLink.react',['CurrentUser','React','URI','TooltipLink.react','VideoDebugItem.react','formatDate'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.getScubaUrl=function(k,l,m){function n(p){var q=new Date(p);return c('formatDate')(q,'Y-m-d H:i:s',{skipPatternLocalization:true});}var o={cols:['time_ms','time_ms_begin','event_name','userid','video_id','time_ms_done','stall_time'],derivedCols:[],num_samples:'100',dimensions:['event_name'],startcol:'time_ms_begin',endcol:'time_ms_done',colorcol:'event_name',bordercol:'event_name',ordercol:'time_ms_begin',labelcol:'__number',unit:'Auto',aggregate:'',start:n(m-5000),end:'now',modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+k+'"]']},video_id:{eq:['["'+l+'"]']}},c_constraints:{},b_constraints:{}};return new (c('URI'))('https://our.intern.facebook.com/intern/scuba/query/').setQueryData({dataset:'video_player_log',view:'TimelineBreakdown',drillstate:JSON.stringify(o)}).toString();};j.prototype.shouldComponentUpdate=function(k){var l=this.props.atHistoryEntry!==null;if(l)return (k.atHistoryEntry!==this.props.atHistoryEntry||k.historyLength!==this.props.historyLength);return !!k.atHistoryEntry;};j.prototype.render=function(){var k=this.props.videoID,l=null;if(this.props.isLiveStream){var m=c('React').createElement(c('TooltipLink.react'),{display:'inline',href:new (c('URI'))('https://our.intern.facebook.com/intern/facecast/debug/').setQueryData({video_broadcast_id:k}).toString(),tooltip:'Debug in Facecast'},'FC');l=c('React').createElement('span',null,' [',m,']');}var n=this.props.initializationTimestamp,o={href:this.getScubaUrl(c('CurrentUser').getID(),k,n),tooltip:'Show scuba video_player_log events timeline for this video',target:'_blank',label:'Video'},p=null,q=this.props,r=q.atHistoryEntry,s=q.historyLength;if(r!=null)p=c('React').createElement('span',null,c('React').createElement('b',null,' frozen at'),' ',r,'/',s);return c('React').createElement(c('VideoDebugItem.react'),o,k,l,p);};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoDebugOverlay.react',['cx','React','TooltipLink.react','VideoDebugDashRepresentation.react','VideoDebugDashManifestView.react','VideoDebugDashMpdLag.react','VideoDebugExposeVideoDebug.react','VideoDebugFlag.react','VideoDebugItem.react','VideoDebugLogMessages.react','VideoDebugScubaEventsLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$VideoDebugOverlay1=function(l){'use strict';return Number(l||0).toFixed(3)+'s';};k.prototype.$VideoDebugOverlay2=function(l,m){'use strict';return Math.floor(l)+' / '+Math.floor(m);};k.prototype.render=function(){'use strict';var l=null;if(this.props.streamType==='dash'){l=c('React').createElement(c('VideoDebugDashRepresentation.react'),{streamId:this.props.streamId});}else{var m=this.props,n=m.tagSD,o=m.tagHD;if(o){l=n+' (SD) / '+o+' (HD)';}else l=n+' (SD)';l=c('React').createElement(c('VideoDebugItem.react'),{label:'Encoding'},l);}var p=!!this.props.segmentArrays,q='The current time of the video.';if(p)q+=' (The black bar in the graph.)';var r=null,s=this.props,t=s.liveheadPosition,u=s.playbackPosition;if(t&&this.props.isLiveStream){var v=this.$VideoDebugOverlay1(t-u);r=c('React').createElement(c('VideoDebugItem.react'),{label:'Livehead \u0394',column:'right',tooltip:'How much ahead of the playhead the current livehead is. '+'In the graph below, that amounts to the time between the '+'playhead (the black bar) and the end of the final segment.'},v);}else r=c('React').createElement(c('VideoDebugItem.react'),{label:'Duration',column:'right'},this.$VideoDebugOverlay1(this.props.playbackDuration));var w=null;if(this.props.isLiveStream&&this.props.streamType=='dash')w=c('React').createElement(c('VideoDebugDashMpdLag.react'),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime});var x=this.props.lastError;if(x){var y=x,z=y.error,aa=y.message;x=c('React').createElement(c('VideoDebugItem.react'),{label:'Error'},z,': ',aa);}var ba=this.props,ca=ba.atHistoryEntry,da=ba.historyEventType,ea=ca!=null?"isFrozen":null,fa=null;if(da){fa=c('React').createElement(c('VideoDebugItem.react'),{label:'History event'},da);}else fa=c('React').createElement(c('VideoDebugItem.react'),{label:'Autoplay reason'},c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',tooltip:this.props.autoplayReasonReadable},this.props.autoplayReason));var ga=c('React').createElement(c('VideoDebugItem.react'),{label:'Projection'},this.props.projection);if(this.props.isSpherical)ga=c('React').createElement('div',null,c('React').createElement(c('VideoDebugItem.react'),{label:'Yaw / Pitch',tooltip:'The yaw / pitch orientation of the video'},this.$VideoDebugOverlay2(this.props.yaw,this.props.pitch)),ga);return (c('React').createElement('div',{className:ea},c('React').createElement(c('TooltipLink.react'),{target:'_blank',display:'inline',className:"_5jy",href:'https://our.intern.facebook.com/intern/dex/video-debug-overlay/',tooltip:'See the DEX about how to read this overlay'},'?'),c('React').createElement(c('VideoDebugExposeVideoDebug.react'),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),c('React').createElement(c('VideoDebugScubaEventsLink.react'),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream}),fa,c('React').createElement(c('VideoDebugLogMessages.react'),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),x,c('React').createElement(c('VideoDebugItem.react'),{label:'State',column:'right'},this.props.playerState),c('React').createElement(c('VideoDebugItem.react'),{label:'Player'},this.props.playerVersion),c('React').createElement(c('VideoDebugItem.react'),{label:'Stalls',column:'right'},this.props.stallCount,': ',this.$VideoDebugOverlay1(this.props.stallTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Init time'},this.$VideoDebugOverlay1(this.props.initializationTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Interrupts',column:'right'},this.props.interruptCount,': ',this.$VideoDebugOverlay1(this.props.interruptTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Stream Type'},this.props.streamType),c('React').createElement(c('VideoDebugItem.react'),{label:'Dropped frames',column:'right'},this.props.droppedFrames),c('React').createElement(c('VideoDebugItem.react'),{label:'Total frames'},this.props.totalFrames),ga,l,c('React').createElement('ul',null,c('React').createElement(c('VideoDebugFlag.react'),{label:'HD',active:this.props.isHD,available:this.props.hasHD,tooltip:'High Definition. Indicates if the video '+'has an HD stream and if it is playing.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'Live',active:this.props.isLiveStream,tooltip:'Indicates if this is a Live stream.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'CVC Poller',active:this.props.isPolling,available:this.props.isLiveStream,tooltip:'Concurrent Viewer Count Poller. Indicates if a poll request '+'was sent recently. This should blink at a ~3 sec inteval.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'RL',active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:'Rate Limit. Indicates if the server '+'is rate limiting the video stream.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'ST',active:this.props.hasSubtitles,tooltip:'Subtitles. Indicates if the video has subtitles.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'SA',active:this.props.hasSpatialAudio,tooltip:'Spatial Audio. Indicates if the video has spatial audio.'})),r,c('React').createElement(c('VideoDebugItem.react'),{label:'Playhead',tooltip:q},this.$VideoDebugOverlay1(u)),c('React').createElement(c('VideoDebugDashManifestView.react'),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:u,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass}),w));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('VideoComponentDebugOverlay.react',['cx','React','ReactDOM','VideoComponent','VideoDebugOverlay','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.enable=function(l){this.debugOverlay=new (c('VideoDebugOverlay'))(c('ReactDOM').findDOMNode(this.refs.videoDebugOverlay),{autoplayReason:this.props.autoplayReason,autoplayReasonReadable:'?'},{hidden:true});this.debugOverlay.enable(l);};k.prototype.disable=function(){this.debugOverlay.setHidden(true);this.debugOverlay.disable();};k.prototype.render=function(){return (c('React').createElement('div',{ref:'videoDebugOverlay',className:"_5m64"+(' '+"_1jto")+(' '+"_3htz")+(' '+"hidden_elem")}));};f.exports=c('VideoComponent').createContainer(k,{suppressMount:function l(){return !c('VideoPlayerShakaExperiments').enableVideoDebug;}});}),null);
__d('VideoComponentErrorOverlay.react',['cx','fbt','Link.react','React','ReactDOM','VideoComponent','VideoErrorOverlay','VideoPlayerReactConfig'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.enable=function(m){new (c('VideoErrorOverlay'))(m,c('ReactDOM').findDOMNode(this.refs.title),c('ReactDOM').findDOMNode(this.refs.msg),c('ReactDOM').findDOMNode(this.refs.link));};l.prototype.disable=function(){};l.prototype.render=function(){var m=c('VideoPlayerReactConfig').outdatedBrowser,n=m?i._("To watch the video, please upgrade your web browser."):null,o=c('React').createElement('div',{ref:'title',className:"_4ctr"},i._("Something Went Wrong")),p=c('React').createElement('div',{ref:'msg'},i._("Sorry, we're having trouble playing this video."),n),q=m?'/unsupportedbrowser':'https://www.facebook.com/help/396404120401278/list',r=c('React').createElement(c('Link.react'),{ref:'link',className:"_4cts",href:q},i._("Learn More"));return (c('React').createElement('div',{className:"_4ctp _1jto _3htz"},c('React').createElement('div',{className:"_4ctq"},o,p,c('React').createElement('div',{className:"_5hdy"},r))));};function l(){j.apply(this,arguments);}f.exports=c('VideoComponent').createContainer(l);}),null);
__d("XLiveMapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/livemap\/",{rest:{type:"String"},ref:{type:"Enum",enumType:1},video_id:{type:"FBID"}});}),null);
__d('VideoComponentLiveEndScreen.react',['cx','fbt','CenteredContainer.react','Image.react','Link.react','LiveMapEntryPointsEnum','LiveMapEntryPointsLoggerController','LiveMapGK','React','Relay','SubscriptionsHandler','VideoComponent','VideoPlayerExperiments','XLiveMapController','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=70;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$VideoComponentLiveEndScreen1=function(){if(this.$VideoComponentLiveEndScreen2())c('LiveMapEntryPointsLoggerController').logEndscreenImpression();}.bind(this);this.vpc=null;this.subscriptions=new (c('SubscriptionsHandler'))();}m.prototype.enable=function(n){this.vpc=n;this.subscriptions.engage();this.subscriptions.addSubscriptions(n.addListener('finishPlayback',this.$VideoComponentLiveEndScreen1));n.registerOption('VideoLiveEndscreen','enabled',function(){return true;});};m.prototype.disable=function(){this.subscriptions.release();};m.prototype.render=function(){var n=this.props,o=this.vpc;if(!n.video||!o||o.getState()!=='finished')return null;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1uwa")},c('React').createElement('div',{className:"_5sjs"}),c('React').createElement(c('CenteredContainer.react'),{vertical:true,className:"_2q2t"},c('React').createElement('div',{className:"_1uwb"},c('React').createElement('div',{className:"_39rw"},this.$VideoComponentLiveEndScreen3(this.props.video))))));};m.prototype.$VideoComponentLiveEndScreen3=function(n){var o=n.liveEndText,p=n.liveEndFollowPromptText,q=n.owner,r=n.isLiveAudioFormat,s=c('React').createElement(c('Image.react'),{className:"_3-96",src:q.profilePicture.uri,width:l,height:l}),t=i._("This live video has ended."),u=i._("This live audio has ended."),v=r&&c('VideoPlayerExperiments').liveAudioViewer?u:t,w=c('React').createElement('div',{className:"_39ry"},s,c('React').createElement('div',{className:"_39rz"},v),c('React').createElement('div',null,c('React').createElement('div',null,o?o.text:'',c('React').createElement('div',null,p?p.text:'')),this.$VideoComponentLiveEndScreen4()));return w;};m.prototype.$VideoComponentLiveEndScreen4=function(){if(this.$VideoComponentLiveEndScreen2()){var n=c('XLiveMapController').getURIBuilder().setEnum('ref',c('LiveMapEntryPointsEnum').TRENDING).getURI(),o=c('React').createElement('div',{className:"_2pig"},c('React').createElement(c('Link.react'),{href:n,className:"_39g5"},c('React').createElement('div',{className:"_1svp"},i._("Explore more live videos."))));return o;}return null;};m.prototype.$VideoComponentLiveEndScreen2=function(){return c('LiveMapGK').live_map_public&&c('LiveMapGK').livemap_on_live_endscreen;};f.exports=c('VideoComponent').createContainer(m,{suppressMount:function n(o){return o.getStreamType()==='progressive';},observedVpcEvents:['beginPlayback','finishPlayback','playRequested'],relayVideoConfig:{fragments:{video:function n(){return function(o,p){return {children:[{alias:'liveEndText',children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'live_end_text',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{alias:'liveEndFollowPromptText',children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'live_end_follow_prompt_text',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{alias:'isLiveAudioFormat',fieldName:'is_live_audio_format',kind:'Field',metadata:{},type:'Boolean'},{children:[{alias:'profilePicture',calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:c('Relay').QL.__var(o)},{kind:'Call',metadata:{type:'Int'},name:'height',value:c('Relay').QL.__var(p)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveEndScreen_react_VideoRelayQL',type:'Video'};}(l,l);}}}});}),null);
__d('VideoComponentLiveInterruptedScreen.react',['cx','fbt','CenteredContainer.react','ChannelManager','React','Relay','VideoComponent','VideoPlayerExperiments','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;c('ChannelManager').startChannelManager();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.vpc=null;}l.prototype.enable=function(m){this.vpc=m;};l.prototype.disable=function(){};l.prototype.render=function(){if(!this.vpc||!this.vpc.isStreamInterrupted())return null;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1uwa")},c('React').createElement('div',{className:"_4qn1"}),c('React').createElement(c('CenteredContainer.react'),{vertical:true,className:"_2q2t"},c('React').createElement('div',{className:"_1uwb"},c('React').createElement('div',{className:"_39rw"},this.$VideoComponentLiveInterruptedScreen1())))));};l.prototype.$VideoComponentLiveInterruptedScreen1=function(){var m=i._("Live Video Interrupted"),n=i._("Live Audio Interrupted"),o=this.props.video&&this.props.video.isLiveAudioFormat&&c('VideoPlayerExperiments').liveAudioViewer,p=o?n:m;return (c('React').createElement('div',{className:"_39ry"},c('React').createElement('div',{className:"_39rz"},p),c('React').createElement('div',{className:"_4qn3"},i._("The broadcast has been paused. It should resume shortly."))));};f.exports=c('VideoComponent').createContainer(l,{suppressMount:function m(n){return n.getStreamType()==='progressive';},observedVpcEvents:['streamInterrupted','streamResumed'],relayVideoConfig:{fragments:{video:function m(){return function(){return {children:[{alias:'isLiveAudioFormat',fieldName:'is_live_audio_format',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveInterruptedScreen_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoComponentLiveVideoIndicator.react',['cx','fbt','DOMContainer.react','React','Relay','VideoBroadcastStatus','VideoComponent','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={viewCountNode:null};}l.prototype.enable=function(m){m.addListener('VideoWithLiveBroadcast/viewCountChange',function(n){this.setState({viewCountNode:n});}.bind(this));};l.prototype.disable=function(){};l.prototype.render=function(){if(!this.props.video)return null;var m=this.props.video.broadcastStatus,n=m===c('VideoBroadcastStatus').LIVE;if(m===c('VideoBroadcastStatus').PREVIEW)return this.renderPreview();var o=null;if(this.state.viewCountNode)o=c('React').createElement(c('DOMContainer.react'),null,this.state.viewCountNode);return (c('React').createElement('div',{className:c('joinClasses')("_3htz"+(' '+"_5pe_")+(' '+"_530p")+(' '+"_4ubd")+(' '+"_2lwf")+(n?' '+"_3rno":''))},c('React').createElement('div',{className:"_5pe-"},c('React').createElement('span',{className:"_5pf0"},i._("LIVE"))),o));};l.prototype.renderPreview=function(){return (c('React').createElement('div',{className:"_5vj"},c('React').createElement('div',{className:"_5vm"},c('React').createElement('span',{className:"_5vo"},i._("PREVIEW")))));};f.exports=c('VideoComponent').createContainer(l,{relayVideoConfig:{fragments:{video:function m(){return function(){return {children:[{alias:'broadcastStatus',fieldName:'broadcast_status',kind:'Field',metadata:{},type:'VideoBroadcastStatus'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveVideoIndicator_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoComponentWithFallbackMode.react',['React','VideoComponent','VideoWithFallbackMode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.enable=function(k){new (c('VideoWithFallbackMode'))(k,{fallbackTimeoutMs:this.props.fallbackTimeoutMs});};j.prototype.disable=function(){};j.prototype.render=function(){return null;};function j(){h.apply(this,arguments);}j.defaultProps={fallbackTimeoutMs:10000};f.exports=c('VideoComponent').createContainer(j);}),null);
__d('VideoComponentWithLiveBroadcast.react',['React','Relay','VideoBroadcastStatus','VideoComponent','VideoWithLiveBroadcast'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);}j.prototype.componentWillReceiveProps=function(k){if(k.video&&k.video!==this.props.video&&k.video.broadcastStatus===c('VideoBroadcastStatus').LIVE)this.liveBroadCast=new (c('VideoWithLiveBroadcast'))(this.vpc);};j.prototype.disable=function(k){var l=this.liveBroadCast;if(l){l.leave();this.liveBroadCast=null;}};j.prototype.enable=function(k){this.vpc=k;};j.prototype.render=function(){return null;};f.exports=c('VideoComponent').createContainer(j,{relayVideoConfig:{fragments:{video:function k(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'broadcastStatus',fieldName:'broadcast_status',kind:'Field',metadata:{},type:'VideoBroadcastStatus'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentWithLiveBroadcast_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d("XLiveMapTooltipVideoAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/video\/tooltip\/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},height:{type:"Int",required:true},width:{type:"Int",required:true},show_controls:{type:"Bool",defaultValue:false},video_player_source:{type:"Enum",defaultValue:"live_map",enumType:1}});}),null);
__d('PublicLiveMapVideoPlayer.react',['cssVar','cx','invariant','AsyncRequest','React','VideoCompnentWithFluentUFISupport.react','VideoComponentClickForMore.react','VideoComponentContextMenu.react','VideoComponentCover.react','VideoComponentDebugOverlay.react','VideoComponentEmbeddedControls.react','VideoComponentErrorOverlay.react','VideoComponentLiveEndScreen.react','VideoComponentLiveInterruptedScreen.react','VideoComponentLiveVideoIndicator.react','VideoComponentPlayButton.react','VideoComponentWithFallbackMode.react','VideoComponentWithLiveBroadcast.react','VideoDataContainer.react','VideoPlayer.react','VideoPlayerLoggerSource','VideoPlayerOrigins','VideoPlayerReactExperiments','XLiveMapTooltipVideoAsyncController','AdsVideoPlayer.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={videoData:null},this.$PublicLiveMapVideoPlayer2=null,this.$PublicLiveMapVideoPlayer3=false,this.$PublicLiveMapVideoPlayer4=null,this.$PublicLiveMapVideoPlayer7=function(s){return (c('React').createElement('div',{style:{width:this.props.videoWidth,height:this.props.videoHeight,color:"#ffffff"}},c('React').createElement('div',{className:"_2pie _2pi8",style:{fontSize:16}},s.summary),c('React').createElement('div',{className:"_2pid _2pi8"},s.message)));}.bind(this),this.$PublicLiveMapVideoPlayer6=function(){if(this.$PublicLiveMapVideoPlayer3)this.$PublicLiveMapVideoPlayer5();this.$PublicLiveMapVideoPlayer10();}.bind(this),this.$PublicLiveMapVideoPlayer8=function(s){this.$PublicLiveMapVideoPlayer4=s||null;}.bind(this),this.$PublicLiveMapVideoPlayer11=function(s){this.$PublicLiveMapVideoPlayer2=s||null;}.bind(this),this.$PublicLiveMapVideoPlayer9=function(s,t,u){if(this.$PublicLiveMapVideoPlayer1)this.$PublicLiveMapVideoPlayer1.abandon();var v=c('XLiveMapTooltipVideoAsyncController').getURIBuilder().setString('video_id',u.videoID).setString('video_container_id',s).setEnum('video_player_source',this.props.videoPlayerSource).setInt('width',u.playerWidth).setInt('height',u.playerHeight).setBool('show_controls',this.props.showControls).getURI();this.$PublicLiveMapVideoPlayer1=new (c('AsyncRequest'))().setMethod('POST').setRelativeTo(t).setURI(v).setReadOnly(true);this.$PublicLiveMapVideoPlayer1.send();}.bind(this),this.$PublicLiveMapVideoPlayer10=function(){var s,t=this;this.$PublicLiveMapVideoPlayer3=true;var u=this.props.onVideoLoaded;if(u!=null)(function(){var v=t.getVideoPlayerController();v!=null||j(0);v.runOnApiReady(function(){return u(v);});})();}.bind(this),o;}m.prototype.componentWillUnmount=function(){if(this.$PublicLiveMapVideoPlayer1)this.$PublicLiveMapVideoPlayer1.abandon();if(this.$PublicLiveMapVideoPlayer3)this.$PublicLiveMapVideoPlayer5();};m.prototype.render=function(){var n=this.props,o=n.videoID,p=n.videoWidth,q=n.videoHeight,r=n.showControls;if(c('VideoPlayerReactExperiments').reactPlayer){var s=r?c('React').createElement(c('VideoComponentClickForMore.react'),null):null,t=r?c('React').createElement(c('VideoComponentEmbeddedControls.react'),{showFullscreenButton:true,hideControlsOnFinish:true}):null,u=c('VideoPlayerReactExperiments').liveMapWithFallbackMode?c('React').createElement(c('VideoComponentWithFallbackMode.react'),null):null;return c('React').createElement(c('VideoDataContainer.react'),{videoID:o,onVideoLoaded:this.$PublicLiveMapVideoPlayer6,renderError:this.$PublicLiveMapVideoPlayer7,isUnmountScheduled:this.props.isUnmountScheduled,renderAfterMpdFetch:c('VideoPlayerReactExperiments').prefetchMpdForListViewVideo&&this.props.videoPlayerSource===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW,renderLoading:function x(){return c('VideoDataContainer.react').renderSpinner(p,q);}},c('React').createElement(c('VideoPlayer.react'),{ref:this.$PublicLiveMapVideoPlayer8,isUnmountScheduled:!!this.props.isUnmountScheduled,width:p,height:q,videoData:this.state.videoData,autoplay:true,playerOrigin:c('VideoPlayerOrigins').LIVE_MAP,subOrigin:this.props.videoPlayerSource},t,c('React').createElement(c('VideoComponentWithLiveBroadcast.react'),null),c('React').createElement(c('VideoComponentCover.react'),null),c('React').createElement(c('VideoComponentPlayButton.react'),null),c('React').createElement(c('VideoComponentLiveVideoIndicator.react'),null),s,c('React').createElement(c('VideoComponentDebugOverlay.react'),null),c('React').createElement(c('VideoComponentContextMenu.react'),null),c('React').createElement(c('VideoComponentLiveEndScreen.react'),null),c('React').createElement(c('VideoComponentLiveInterruptedScreen.react'),null),c('React').createElement(c('VideoCompnentWithFluentUFISupport.react'),null),c('React').createElement(c('VideoComponentErrorOverlay.react'),null),u));}var v=null,w=c('AdsVideoPlayer.react');v=c('React').createElement(w,{videoID:o,autoPlay:true,playerWidth:p,playerHeight:q,hideCloseButton:true,loadVideoPlayer:this.$PublicLiveMapVideoPlayer9,onVideoLoaded:this.$PublicLiveMapVideoPlayer10,ref:this.$PublicLiveMapVideoPlayer11});return v;};m.prototype.getVideoPlayerController=function(){if(this.$PublicLiveMapVideoPlayer4)return this.$PublicLiveMapVideoPlayer4.vpc;if(this.$PublicLiveMapVideoPlayer2&&this.$PublicLiveMapVideoPlayer2.state&&this.$PublicLiveMapVideoPlayer2.state.playerAPI)return this.$PublicLiveMapVideoPlayer2.state.playerAPI;return null;};m.prototype.$PublicLiveMapVideoPlayer5=function(){if(this.$PublicLiveMapVideoPlayer3){this.$PublicLiveMapVideoPlayer3=false;this.props.onVideoUnloaded&&this.props.onVideoUnloaded();}};m.defaultProps={onVideoLoaded:function n(){}};f.exports=m;}),null);
__d('LiveMapTooltipVideo.relay.react',['cx','PublicLiveMapConstants','PublicLiveMapVideoPlayer.react','LiveMapClickEventLogger','React','ReactRedux','Relay','VideoPlayerLoggerSource','LiveMapVideoPlayerActions','LiveMapChannelPlayerActions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('ReactRedux').connect,l=c('LiveMapVideoPlayerActions').setMapTooltipVideoPlayerController,m=c('LiveMapChannelPlayerActions').openChannelPlayerForMapTooltip,n=c('PublicLiveMapConstants').TOOLTIP.VIDEO_DIMENSIONS;i=babelHelpers.inherits(o,c('React').PureComponent);j=i&&i.prototype;function o(s){j.constructor.call(this,s);this.$LiveMapTooltipVideo4=function(t){this.$LiveMapTooltipVideo1=t;if(this.props.onVideoLoaded)this.props.onVideoLoaded(t);this.$LiveMapTooltipVideo5();}.bind(this);this.$LiveMapTooltipVideo6=function(){this.$LiveMapTooltipVideo1=null;this.$LiveMapTooltipVideo3();this.props.onVideoUnloaded();}.bind(this);this.$LiveMapTooltipVideo7=function(){this.props.onVideoClick();this.$LiveMapTooltipVideo8({videoID:this.props.video.id,viewerCount:this.props.video.viewer_count});}.bind(this);this.$LiveMapTooltipVideo1=null;this.$LiveMapTooltipVideo2=null;}o.prototype.componentWillUnmount=function(){this.$LiveMapTooltipVideo3();};o.prototype.$LiveMapTooltipVideo3=function(){if(this.$LiveMapTooltipVideo2!=null){this.$LiveMapTooltipVideo2.remove();this.$LiveMapTooltipVideo2=null;}};o.prototype.$LiveMapTooltipVideo5=function(){var s=this.$LiveMapTooltipVideo1;if(s==null||this.$LiveMapTooltipVideo2!=null)return;this.$LiveMapTooltipVideo2=s.addListener('clickVideo',this.$LiveMapTooltipVideo7);};o.prototype.$LiveMapTooltipVideo8=function(s){c('LiveMapClickEventLogger').logTooltipPlayerClickEvent(s);};o.prototype.render=function(){var s=this.props,t=s.video,u=s.subOrigin;if(t==null)return null;return (c('React').createElement('div',{className:"_wyd"},c('React').createElement(c('PublicLiveMapVideoPlayer.react'),{videoWidth:n.TOOLTIP_SIZE,videoHeight:n.TOOLTIP_SIZE,onVideoClick:this.$LiveMapTooltipVideo7,onVideoLoaded:this.$LiveMapTooltipVideo4,onVideoUnloaded:this.$LiveMapTooltipVideo6,showControls:false,viewerCount:t.viewer_count,videoPlayerSource:u,videoID:t.id})));};var p=function s(t){var u=t.activeStream.subOrigin||c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP;return {subOrigin:u};},q=function s(t){return {onVideoClick:function u(){t(m());},onVideoLoaded:function u(v){t(l(v));},onVideoUnloaded:function u(){t(l(null));}};},r=k(p,q)(o);f.exports=c('Relay').createContainer(r,{fragments:{video:function s(t){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'viewer_count',fieldName:'live_viewer_count_read_only',kind:'Field',metadata:{},type:'Int'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoFragment',type:'Video'};}();}}});}),null);
__d('LiveMapTooltipVideoMetadata.relay.react',['ix','cx','fbt','Duration.react','Image.react','Link.react','React','Relay','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;m.prototype.render=function(){var n=this.props.video;if(n==null)return null;var o=c('React').createElement('div',{className:"_4vp5 _4vpd"},c('React').createElement(c('Link.react'),{href:n.url},n.owner.name),c('React').createElement('div',{className:"_9vn"+(n.owner.is_verified?' '+"_5dz-":'')+(n.owner.is_verified?' '+"_5dzy":'')+(n.owner.is_verified?' '+"_56_f":'')+(n.owner.is_verified_page?' '+"_5n3t":'')})),p=n.start_time?c('React').createElement(c('Duration.react'),{startTime:n.start_time*1000}):null,q=n.publisher_category!=null?c('React').createElement('div',{className:"_4vpd"+(this.props.isNowPlaying?' '+"_23wc":'')},n.publisher_category):null;return (c('React').createElement('div',{className:"_wye"},c('React').createElement('div',{className:"_4vp3"},c('React').createElement(c('Image.react'),{className:"_blr",src:n.owner.profile_picture.uri,height:64,width:64})),c('React').createElement('div',{className:"_4vp4"},c('React').createElement('div',{className:"_23w6"+(this.props.isNowPlaying?' '+"_23w7":'')},c('React').createElement('span',{className:"_23wb"}),j._("Now Playing")),o,c('React').createElement('div',{className:"_4vpc"},q,c('React').createElement('div',{className:"_4vpd"},p,' ','\u00B7',' ',c('React').createElement(c('Image.react'),{style:{verticalAlign:'top'},src:h("126242")}))))));};function m(){k.apply(this,arguments);}f.exports=c('Relay').createContainer(m,{fragments:{video:function n(o){return function(){return {children:[{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'publisher_category',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:64}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:64}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'User',type:'User'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_verified_page',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'Page',type:'Page'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{alias:'start_time',fieldName:'best_effort_time_taken',kind:'Field',metadata:{},type:'Time'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoFragment',type:'Video'};}();}}});}),null);
__d('PublicLiveMapTooltipPlacement',['immutable','PublicLiveMapConstants','LiveMapExperiments'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('PublicLiveMapConstants').TOOLTIP.VIDEO_DIMENSIONS,k={LEFT:'left',TOP:'top',RIGHT:'right'},l=c('immutable').Record({left:c('PublicLiveMapConstants').TOOLTIP.OFFSCREEN+'px',top:c('PublicLiveMapConstants').TOOLTIP.OFFSCREEN+'px',right:'auto'});h=babelHelpers.inherits(m,l);i=h&&h.prototype;function m(n){i.constructor.call(this,n);}m.prototype.setLeft=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.LEFT,o);};m.prototype.getLeft=function(){return this.left;};m.prototype.setTop=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.TOP,o);};m.prototype.getTop=function(){return this.top;};m.prototype.setRight=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.RIGHT,o);};m.prototype.getRight=function(){return this.right;};m.getPlacementForMap=function(n,o,p,q,r){var s=j.TOOLTIP_SIZE;if(q)s=0;var t=o-s-110,u=n-Math.floor(j.TOOLTIP_SIZE/2),v='auto',w=r?r.x:n;if(c('LiveMapExperiments').webgl){if(u<=w)u=w+36;}else if(u<=0)u=n+20;if(u>=p.x-j.TOOLTIP_SIZE){u='auto';v=p.x-n+20;}if(t<=0)t=o+20;return new m().setTop(t).setRight(v).setLeft(u);};m.getSidebarTooltipPlacement=function(n,o,p){var q=p+24,r=c('PublicLiveMapConstants').TOOLTIP.SIDEBAR.RIGHT,s=o-c('PublicLiveMapConstants').TOOLTIP.SIDEBAR.TOP;if(s<50)s=n;return new m().setTop(s).setLeft(q).setRight(r);};f.exports=m;}),null);
__d('LiveMapTooltip.relay.react',['cx','PublicLiveMapConfig','LiveMapTooltipVideo.relay.react','LiveMapTooltipVideoMetadata.relay.react','PublicLiveMapTooltipPlacement','React','Relay','RelayRootContainer','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m,n,o=c('PublicLiveMapConfig').tooltip_animation||'none';i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;p.prototype.render=function(){var u=this.props,v=u.video,w=u.placement;if(v==null||w==null)return null;var x="_2c0w"+(' '+"_3dp5")+(' '+"_50ij")+(o==='none'?' '+"_50ik":'')+(o==='fade'?' '+"_50in":''),y=this.props.isNowPlaying?null:c('React').createElement(c('LiveMapTooltipVideo.relay.react'),{video:v});return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,x),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,style:{left:w.getLeft(),top:w.getTop(),right:w.getRight()}},c('React').createElement('div',{className:"_4rvc clearfix"},y,c('React').createElement(c('LiveMapTooltipVideoMetadata.relay.react'),{video:v,isNowPlaying:this.props.isNowPlaying}))));};function p(){i.apply(this,arguments);}var q=c('Relay').createContainer(p,{fragments:{video:function u(v){return function(w,x){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(w),c('Relay').QL.__frag(x)]),id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoFragment',type:'Video'};}(c('LiveMapTooltipVideo.relay.react').getFragment('video'),c('LiveMapTooltipVideoMetadata.relay.react').getFragment('video'));}}});k=babelHelpers.inherits(r,c('Relay').Route);l=k&&k.prototype;function r(){k.apply(this,arguments);}r.routeName='TooltipRoute';r.path='/';r.paramDefinitions={video_id:{type:'ID',required:true}};r.queries={video:function u(v){return function(w){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'video_id'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(w)]),fieldName:'video',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'Video',type:'Video'};}(v.getFragment('video'));}};m=babelHelpers.inherits(s,c('React').PureComponent);n=m&&m.prototype;function s(u){n.constructor.call(this,u);t.call(this);var v=u.videoID!=null?new r({video_id:u.videoID}):null;this.state={route:v};}s.prototype.componentWillReceiveProps=function(u){if(u.videoID!=this.props.videoID){var v=u.videoID!=null?new r({video_id:u.videoID}):null;this.setState({route:v});}};s.prototype.renderLoading=function(){return (c('React').createElement('div',{className:"_4rvc clearfix"}));};s.prototype.render=function(){if(this.state.route==null)return null;return (c('React').createElement(c('RelayRootContainer'),{Component:q,route:this.state.route,renderLoading:this.renderLoading,renderFetched:this.renderFetched}));};var t=function u(){this.renderFetched=function(v,w){if(v.video==null)return null;var x=babelHelpers['extends']({},this.props,v);return c('React').createElement(q,x);}.bind(this);};f.exports=s;}),null);
__d('LiveMapTooltipSelectors',['ReduxReselect','PublicLiveMapTooltipPlacement'],(function a(b,c,d,e,f,g){'use strict';var h=c('ReduxReselect').createSelector,i=function r(s){return s.map.leafletMap;},j=function r(s){return s.map.webGLMap;},k=function r(s){return s.map.mapLatLngBounds;},l=function r(s){return s.map.activeStreamPixelLocation;},m=h([i,j,k],function(r,s,t){if(r!=null)return r.getSize();if(s!=null){var u=s.getContainer();return {x:u.offsetWidth,y:u.offsetHeight};}return null;}),n=function r(s){return s.sidebar.nowPlayingID;},o=function r(s){return s.activeStream.id;},p=function r(s){return s.map.sidebarOffset;},q=h([l,m,n,o,p],function(r,s,t,u,v){if(r==null)return null;if(s==null)return null;var w=u===t;return c('PublicLiveMapTooltipPlacement').getPlacementForMap(r.x,r.y,s,w,v);});f.exports={getTooltipPlacement:q};}),null);
__d('LiveMapTooltip.container.react',['ReactRedux','LiveMapTooltip.relay.react','LiveMapTooltipSelectors','LiveMapActiveStreamActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('ReactRedux').connect,i=c('LiveMapTooltipSelectors').getTooltipPlacement,j=c('LiveMapActiveStreamActions').resetActiveStream,k=c('LiveMapActiveStreamActions').clearRemoveActiveStreamTimeout,l=function o(p){var q=p.activeStream.id,r=i(p),s=q===p.sidebar.nowPlayingID;return {videoID:q,placement:r,isNowPlaying:s};},m=function o(p){return {onMouseEnter:function q(){k();},onMouseLeave:function q(){p(j());}};},n=h(l,m)(c('LiveMapTooltip.relay.react'));f.exports=n;}),null);
__d('LiveMapVideoSelectors',['ReduxReselect','PublicLiveMapConstants','Heap'],(function a(b,c,d,e,f,g){'use strict';var h=c('ReduxReselect').createSelector,i=function q(r){return r.videoCache.allVideos;},j=function q(r){return r.activeStream.id;},k=function q(r){return r.map.videosInView;},l=h([i],function(q){return q.toArray();}),m=h([i,j],function(q,r){if(r==null)return null;return q.get(r);}),n=h([k,i],function(q,r){var s=q.map(function(t){return r.get(t);}).filter(function(t){return t!=null;});return s;}),o=h([n],function(q){var r=new (c('Heap'))([].concat(q),function(u,v){return v.viewer_count<u.viewer_count;}),s=[];for(var t=0;t<c('PublicLiveMapConstants').TOP_N_TO_SHOW_IN_SIDEBAR;t++){if(r.empty())break;s.push(r.pop());}return s;}),p=h([o],function(q){return q.map(function(r){return r.id;});});f.exports={getAllVideos:i,getAllVideosArray:l,getActiveStream:m,getActiveStreamID:j,getTopVideoIDsInView:p,getTopVideosInView:o,getVideosInView:n};}),null);
__d('LeafletPolyline.react',['leaflet','LeafletPath','LeafletUtils','immutable','React','areEqual','nearlyEqualNumbers'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.coordinatesToLatLngs=function(l){return l.toSeq().map(c('LeafletUtils').toLatLng).toArray();};k.mutate=function(l,m,n){if(!k.mutateOptions(l,m.options,n.options))return false;if(n&&!c('areEqual')(n,m)&&m.popup){l.unbindPopup();l.bindPopup(m.popup.type.toLayer(m.popup.props,l));}if(!c('immutable').is(m.coordinates,n.coordinates))l.setLatLngs(k.coordinatesToLatLngs(m.coordinates));return true;};k.toLayer=function(l){var m=c('leaflet').polyline(k.coordinatesToLatLngs(l.coordinates),l.options);if(l.popup)m.bindPopup(l.popup.type.toLayer(l.popup.props,m));return m;};k.mutateOptions=function(l,m,n){var o=m||{},p=o.smoothFactor,q=o.noClip,r=babelHelpers.objectWithoutProperties(o,['smoothFactor','noClip']),s=n||{},t=s.smoothFactor,u=s.noClip,v=babelHelpers.objectWithoutProperties(s,['smoothFactor','noClip']);if(!c('LeafletPath').mutateOptions(l,r,v))return false;if(!c('nearlyEqualNumbers')(t,p)||u!==q)return false;return true;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,coordinates:j.instanceOf(c('immutable').List).isRequired,popup:j.element};f.exports=k;}),null);
__d('PublicLiveMapInfoIcon.react',['cx','fbt','ix','React','SignalsTooltipInfo.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=j("23672");function l(){return (c('React').createElement('span',{className:"_51pq"},c('React').createElement(c('SignalsTooltipInfo.react'),{iconURL:k,position:'left',message:i._("Map displays people and pages sharing to a public audience")})));}f.exports=l;}),null);
__d('PublicLiveMapFixedRadiusCircle',['leaflet'],(function a(b,c,d,e,f,g){'use strict';c('leaflet').FixedRadiusCircle=c('leaflet').CircleMarker.extend({options:{radius:10}});var h=c('leaflet').fixedRadiusCircle=function(i,j){return new (c('leaflet').FixedRadiusCircle)(i,j);};f.exports=h;}),null);
__d('PublicLiveMapMarker.react',['GeoCoordinates','LeafletLayer.react','LeafletPath','LeafletUtils','PublicLiveMapFixedRadiusCircle','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.mutate=function(l,m,n){var o=m.options||{},p=o.radius,q=n.options||{},r=q.prevRadius;if(!c('LeafletPath').mutateOptions(l,m.options,n.options))return false;c('LeafletLayer.react').mutateEventHandlers(l,m.eventHandlers,n.eventHandlers);if(m.center!==n.center)l.setLatLng(c('LeafletUtils').toLatLng(m.center));if(p!==r)l.setRadius(m.options.radius);return true;};k.toLayer=function(l){var m=c('PublicLiveMapFixedRadiusCircle')(c('LeafletUtils').toLatLng(l.center),l.options);c('LeafletLayer.react').addEventHandlers(m,l.eventHandlers);return m;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,eventHandlers:j.object,center:j.instanceOf(c('GeoCoordinates')).isRequired};f.exports=k;}),null);
__d('PublicLiveMapPage',['EventEmitter','EventEmitterWithHolding','EventHolder','performanceAbsoluteNow','PublicLiveMapEvent'],(function a(b,c,d,e,f,g){'use strict';var h={Events:c('PublicLiveMapEvent'),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l);},emit:function j(k){i.emitAndHold(k,c('performanceAbsoluteNow')());},removeCurrentListener:function j(){i.removeCurrentListener();}},i=new (c('EventEmitterWithHolding'))(new (c('EventEmitter'))(),new (c('EventHolder'))());f.exports=h;}),null);
__d("XLiveMapReportAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/map\/report\/",{});}),null);
__d('PublicLiveMapReportForm.react',['ix','cx','fbt','AsyncRequest','Image.react','LoadingIndicator.react','React','XLiveMapReportAsyncController','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogCancelButton.react','XUIDialogButton.react','XUITextInput.react','XUISelector.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('XUISelector.react').Option;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.state={issue:'borders',input:'',isSending:false,hasReport:false};}n.prototype.resetForm=function(){this.setState({issue:'borders',input:'',isSending:false,hasReport:false});};n.prototype.$PublicLiveMapReportForm1=function(event){this.setState({issue:event.value});};n.prototype.$PublicLiveMapReportForm2=function(event){this.setState({input:event.target.value});};n.prototype.$PublicLiveMapReportForm3=function(o){o.preventDefault();o.stopPropagation();var p=c('XLiveMapReportAsyncController').getURIBuilder().getURI();this.setState({isSending:true});new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({category:this.state.issue,description:this.state.input}).setHandler(function(q){this.setState({isSending:false,hasReport:true});}.bind(this)).setErrorHandler(function(){this.setState({isSending:false,hasReport:false});}.bind(this)).send();};n.prototype.$PublicLiveMapReportForm4=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Sending Feedback"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_bsd"},c('React').createElement('div',{className:"_4av- _bse"},c('React').createElement(c('LoadingIndicator.react'),{size:'large',color:'white'})))));};n.prototype.$PublicLiveMapReportForm5=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Thank you"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_4aw2"},c('React').createElement('div',{className:"_4av-"},c('React').createElement(c('Image.react'),{src:h("125780")}),c('React').createElement('p',{className:"_3-8w"},j._("Thank you."),c('React').createElement('br',null),j._("Your feedback helps us improve the Live Map."))))));};n.prototype.$PublicLiveMapReportForm6=function(){return (c('React').createElement('form',{onSubmit:this.$PublicLiveMapReportForm3.bind(this)},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Provide Map Feedback"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_4aw2"},c('React').createElement('div',{className:"_4av-"},c('React').createElement(c('Image.react'),{src:h("126708")}),c('React').createElement('p',{className:"_3-8w"},j._("Help us improve the Live Map."),c('React').createElement('br',null),j._("What's the problem with the map?")),c('React').createElement('div',null,c('React').createElement(c('XUISelector.react'),{className:"_4av_",name:'report_form_select',size:'large',value:this.state.issue,onChange:this.$PublicLiveMapReportForm1.bind(this)},c('React').createElement(m,{value:'borders'},j._("Map border is wrong")),c('React').createElement(m,{value:'labels'},j._("Labels are wrong")),c('React').createElement(m,{value:'other'},j._("Other")))),c('React').createElement('div',null,c('React').createElement(c('XUITextInput.react'),{className:"_4aw0",placeholder:j._("Can you tell us more about what needs to be changed?"),maxLength:500,height:'tall',value:this.state.input,onChange:this.$PublicLiveMapReportForm2.bind(this)}))),c('React').createElement('hr',null),c('React').createElement('p',{className:"_4aw1"},j._("Geographic data in Live Map is provided by OpenStreetMap. To report a specific video, go to the video and click \"Report Live Video.\""))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:j._("Send"),disabled:!this.state.input.trim()}))));};n.prototype.render=function(){if(!this.state.hasReport){return this.$PublicLiveMapReportForm6();}else if(this.state.isSending){return this.$PublicLiveMapReportForm4();}else return this.$PublicLiveMapReportForm5();};f.exports=n;}),null);
__d('PublicLiveMap.react',['cx','fbt','CSS','FBOverlayElement.react','FBTilesMap.react','FBTilesMapZoomOverlay.react','GeoCoordinates','immutable','leaflet','LeafletMarker.react','LeafletPolyline.react','LeafletUtils','LeafletView','Link.react','LiveMapClickEventLogger','PublicLiveMapConfig','PublicLiveMapConstants','PublicLiveMapInfoIcon.react','PublicLiveMapMarker.react','PublicLiveMapPage','PublicLiveMapReportForm.react','React','VideoChannel','VideoPlayerMetaData','VideoPlayerReactExperiments','XUIDialog.react','throttle','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM,m=c('PublicLiveMapConfig').min_zoom,n=c('PublicLiveMapConfig').max_zoom,o=c('PublicLiveMapConstants').MAP_BOUNDS,p=/@([-+]?\d+\.?\d*),([-+]?\d+\.?\d*),(\d+\.?\d*)z/i;function q(){var t=c('getViewportDimensions').withoutScrollbars().height,u=document.getElementById('pagelet_bluebar'),v=document.getElementById('fb2k_pagelet_bluebar'),w=c('PublicLiveMapConstants').FB_HEADER_HEIGHT;if(u!=null){w=u.offsetHeight;}else if(v!=null)w=v.offsetHeight;return t-w;}function r(){}j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(t){k.constructor.call(this,t);this.$PublicLiveMap8=function(){return this.refs.reportLink;}.bind(this);this.$PublicLiveMap7=function(){this.setState({reportDialogShown:true});}.bind(this);this.$PublicLiveMap9=function(v){if(!v)this.refs.reportForm.resetForm();this.setState({reportDialogShown:v});}.bind(this);this.$PublicLiveMap10=function(v){var w=v.target.options.videoID,x=v.target.options.viewerCount,y=this.state.view.zoom;if(this.$PublicLiveMap2)y=this.$PublicLiveMap2.getZoom();this.$PublicLiveMap11({videoID:w,mapZoom:y,viewerCount:x});this.props.onVideoClick(w);}.bind(this);this.$PublicLiveMap12=function(v){var w=v.target,x=w.options.videoID;if(w.bringToFront)w.bringToFront();c('CSS').removeClass(v.originalEvent.target,"_1d39");if(c('VideoPlayerReactExperiments').liveMapPrfetchMapCircleMpdOnEnter)c('VideoPlayerMetaData').genPrefetch(x,{},0,c('VideoPlayerReactExperiments').livemapPrefetchMpdTimeout);this.props.onVideoMouseEnter(x);}.bind(this);this.$PublicLiveMap13=function(v){this.props.onVideoMouseExit();}.bind(this);this.$PublicLiveMap14=function(v){if(this.$PublicLiveMap1!==true){c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.PUBLIC_CIRCLES_RENDERED);this.$PublicLiveMap1=true;}}.bind(this);this.$PublicLiveMap26=function(){if(this.state.view.zoom<n)this.setState({view:this.state.view.setZoom(this.state.view.zoom+1)});}.bind(this);this.$PublicLiveMap27=function(){if(this.state.view.zoom>m)this.setState({view:this.state.view.setZoom(this.state.view.zoom-1)});}.bind(this);this.$PublicLiveMap24=c('throttle')(function(event){if(this.$PublicLiveMap2==null){this.$PublicLiveMap2=event.target;this.props.setMap(this.$PublicLiveMap2);}var v=this.$PublicLiveMap2.getZoom(),w=this.$PublicLiveMap2.getBounds(),x=new (c('LeafletView'))({center:c('LeafletUtils').fromLatLng(this.$PublicLiveMap2.getCenter()),zoom:v}),y='@'+x.center.latitude+','+x.center.longitude+','+x.zoom+'z',z=window.location.hash||'#',aa=window.location.hash!=null&&window.location.hash.match(p)?window.location.hash.replace(p,y):''+z+y;window.history.replaceState(undefined,undefined,aa);this.setState({view:x});this.props.setMapViewport(v,w);}.bind(this),100);var u=this.$PublicLiveMap3(t.userLocation.latitude,t.userLocation.longitude).setZoom(n);this.state={view:u,reportDialogShown:false};}s.prototype.$PublicLiveMap3=function(t,u){return new (c('LeafletView'))({center:new (c('GeoCoordinates'))(t,u),zoom:l});};s.prototype.componentDidMount=function(){var t=window.location.hash||'',u=t.match(p);if(u==null){this.setState({view:this.$PublicLiveMap3(this.props.userLocation.latitude,this.props.userLocation.longitude)});return;}var v=parseFloat(u[1],10),w=parseFloat(u[2],10),x=parseInt(u[3],10),y=new (c('LeafletView'))({center:new (c('GeoCoordinates'))(v,w),zoom:Math.max(Math.min(x,n),m)});this.setState({view:y});};s.prototype.componentWillUnmount=function(){var t=c('VideoChannel').get();if(t&&t.close)t.close();};s.prototype.render=function(){return c('React').createElement('div',null,this.$PublicLiveMap4(),this.$PublicLiveMap5(),this.$PublicLiveMap6());};s.prototype.$PublicLiveMap5=function(){return c('React').createElement('span',{className:"_4g4h"},c('React').createElement(c('PublicLiveMapInfoIcon.react'),null),c('React').createElement(c('Link.react'),{ref:'reportLink',onClick:this.$PublicLiveMap7},i._("Map feedback")));};s.prototype.$PublicLiveMap6=function(){return c('React').createElement(c('XUIDialog.react'),{causalElementRef:this.$PublicLiveMap8,shown:this.state.reportDialogShown,onToggle:this.$PublicLiveMap9,fixedTopPosition:100,width:425},c('React').createElement(c('PublicLiveMapReportForm.react'),{ref:'reportForm'}));};s.prototype.$PublicLiveMap15=function(){return this.props.streamsToRender.map(function(t){return this.$PublicLiveMap16(t);}.bind(this));};s.prototype.$PublicLiveMap16=function(t){var u=t.viewer_count;if(t.markerStatus===c('PublicLiveMapConstants').MARKER_STATUS.SPECIAL_EVENT)return this.$PublicLiveMap17(t,c('PublicLiveMapConstants').SPECIAL_EVENT_MARKER);if(u>=c('PublicLiveMapConfig').popularity_levels.level_4){return this.$PublicLiveMap17(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.FOUR);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_3){return this.$PublicLiveMap17(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.THREE);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_2){return this.$PublicLiveMap17(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.TWO);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_1)return this.$PublicLiveMap17(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.ONE);return this.$PublicLiveMap18(t);};s.prototype.$PublicLiveMap18=function(t){var u={add:this.$PublicLiveMap14,click:this.$PublicLiveMap10,mouseover:this.$PublicLiveMap12,mouseout:this.$PublicLiveMap13},v=this.$PublicLiveMap19(t.location),w="_4qel"+(t.id===this.props.activeStreamID?' '+"_2813":''),x={center:v,key:t.id,options:babelHelpers['extends']({videoID:t.id,viewerCount:t.viewer_count,className:w},c('PublicLiveMapConstants').BROADCAST_MARKER_OPTIONS),eventHandlers:u};return c('React').createElement(c('PublicLiveMapMarker.react'),x);};s.prototype.$PublicLiveMap17=function(t,u){var v={add:this.$PublicLiveMap14,click:this.$PublicLiveMap10,mouseover:this.$PublicLiveMap12,mouseout:this.$PublicLiveMap13},w=t.id===this.props.activeStreamID?"_2813":'';w=c('joinClasses')(u.className,w);var x=c('leaflet').divIcon({className:w,iconSize:u.iconSize,iconAnchor:u.iconAnchor}),y=this.$PublicLiveMap19(t.location),z={coordinates:y,key:t.id,eventHandlers:v,options:{icon:x,videoID:t.id,viewerCount:t.viewer_count,riseOnHover:true}};return c('React').createElement(c('LeafletMarker.react'),z);};s.prototype.$PublicLiveMap19=function(t){var u=this.$PublicLiveMap2.getBounds(),v=t.latitude,w=t.longitude,x=w<0?w+360:w-360,y=[v,w],z=[v,x];if(u.contains(y)){return new (c('GeoCoordinates'))(v,w);}else if(u.contains(z)){return new (c('GeoCoordinates'))(v,x);}else return new (c('GeoCoordinates'))(v,w);};s.prototype.$PublicLiveMap20=function(t,u){var v="_1vxe";return c('React').createElement(c('PublicLiveMapMarker.react'),{center:t,key:u+'viewer-marker',options:babelHelpers['extends']({className:v},c('PublicLiveMapConstants').VIEWER_MARKER_OPTIONS)});};s.prototype.$PublicLiveMap21=function(t,u){var v=u.longitude,w=t.latitude,x=t.longitude,y=x-360,z=x+360,aa=Math.abs(v-x),ba=Math.abs(v-y),ca=Math.abs(v-z),da=Math.min(aa,ba,ca);switch(da){case aa:return new (c('GeoCoordinates'))(w,x);case ba:return new (c('GeoCoordinates'))(w,y);case ca:return new (c('GeoCoordinates'))(w,z);default:return new (c('GeoCoordinates'))(w,x);}};s.prototype.$PublicLiveMap22=function(t,u,v){var w="_5ja1",x=c('immutable').List([v,t]);return c('React').createElement(c('LeafletPolyline.react'),{key:u+'viewer-line',coordinates:x,options:babelHelpers['extends']({className:w},c('PublicLiveMapConstants').VIEWER_LINE_OPTIONS)});};s.prototype.$PublicLiveMap23=function(){var t=this.props,u=t.currentViewers,v=t.activeStreamLocation;if(u.length<1||!v)return null;var w=this.$PublicLiveMap19(v),x=[],y=[];u.forEach(function(z,aa){var ba=this.$PublicLiveMap21(z,w);x.push(this.$PublicLiveMap20(ba,aa));y.push(this.$PublicLiveMap22(ba,aa,w));}.bind(this));return x.concat(y);};s.prototype.$PublicLiveMap4=function(){var t=q();return c('React').createElement(c('FBTilesMap.react'),{onViewChange:r,showZoomControls:false,showReportButton:false,style:{width:'100%',height:t+'px'},view:this.state.view,ref:'map',theme:'live_maps',eventHandlers:{moveend:this.$PublicLiveMap24,zoomend:this.$PublicLiveMap24,resize:this.$PublicLiveMap24},options:{maxZoom:n,minZoom:m,maxBounds:o,bounceAtZoomLimits:false,inertia:false,zoomAnimationThreshold:1,markerZoomAnimation:false,zoomAnimation:true,worldCopyJump:true}},this.$PublicLiveMap25(),this.$PublicLiveMap15(),this.$PublicLiveMap23());};s.prototype.$PublicLiveMap25=function(){return c('React').createElement(c('FBOverlayElement.react'),{vertical:c('PublicLiveMapConstants').ZOOM_CONTROLS.vertical,horizontal:c('PublicLiveMapConstants').ZOOM_CONTROLS.horizontal},c('React').createElement(c('FBTilesMapZoomOverlay.react'),{className:"_3-8j _1yx0",onZoomIn:this.$PublicLiveMap26,onZoomOut:this.$PublicLiveMap27}));};s.prototype.$PublicLiveMap11=function(t){c('LiveMapClickEventLogger').logMapMarkerClickEvent(t);};f.exports=s;}),null);
__d('PublicLiveMapIntroNUX.react',['cx','fbt','React','SimpleNUXMessage','SimpleNUXMessageTypes','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={showIntroNUX:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').LIVE_MAP_NEW_USER_NUX)};}l.prototype.$PublicLiveMapIntroNUX1=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').LIVE_MAP_NEW_USER_NUX);this.setState({showIntroNUX:false});};l.prototype.$PublicLiveMapIntroNUX2=function(){return i._("See Who's Live Around the World");};l.prototype.$PublicLiveMapIntroNUX3=function(){return i._("The map displays people sharing to a public audience.");};l.prototype.$PublicLiveMapIntroNUX4=function(){return i._("Your location is not visible to anyone.");};l.prototype.render=function(){if(!this.state.showIntroNUX)return null;return (c('React').createElement('div',{className:"_oxf"},c('React').createElement('div',{className:"_oxg"},c('React').createElement(c('XUICloseButton.react'),{onClick:this.$PublicLiveMapIntroNUX1.bind(this),size:'medium',className:"_oxh"}),c('React').createElement('div',{className:"_oxi"},this.$PublicLiveMapIntroNUX2()),c('React').createElement('div',{className:"_oxj"},this.$PublicLiveMapIntroNUX3()),c('React').createElement('div',{className:"_oxj"},this.$PublicLiveMapIntroNUX4())),c('React').createElement('div',{className:"_53in"},c('React').createElement('i',{className:"_53io"}))));};f.exports=l;}),null);
__d('LiveMapLeafletMap.container.react',['cx','ReactRedux','PublicLiveMap.react','PublicLiveMapIntroNUX.react','LiveMapTooltip.container.react','LiveMapVideoSelectors','LiveMapMapActions','LiveMapActiveStreamActions','LiveMapChannelPlayerActions','LiveMapVideoCacheActions','React','VideoPlayerLoggerSource','VideoPlayerReactExperiments'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('ReactRedux').connect;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.$LiveMapLeafletMapContainer1=function(){if(!this.props.showsidebar)return null;return c('React').createElement(c('PublicLiveMapIntroNUX.react'),null);};l.prototype.render=function(){return (c('React').createElement('div',{className:"_4u4p"},c('React').createElement(c('PublicLiveMap.react'),this.props),c('React').createElement(c('LiveMapTooltip.container.react'),null),this.$LiveMapLeafletMapContainer1()));};function l(){i.apply(this,arguments);}function m(o){var p=o.activeStream.currentViewers,q=c('LiveMapVideoSelectors').getVideosInView(o),r=o.map.userLocation,s=o.activeStream.id,t=s?o.videoCache.allVideos.get(s).location:null;return {streamsToRender:q,currentViewers:p,activeStreamID:s,activeStreamLocation:t,userLocation:r};}function n(o){return {onVideoClick:function p(q){o(c('LiveMapActiveStreamActions').setActiveStream(q,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP));o(c('LiveMapChannelPlayerActions').openChannelPlayerForMapTooltip());},onVideoMouseEnter:function p(q){o(c('LiveMapActiveStreamActions').setActiveStreamTimeout(q,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP,c('VideoPlayerReactExperiments').liveMapCircleHoverDelay));},onVideoMouseExit:function p(){var q=c('VideoPlayerReactExperiments').liveMapCircleCloseDelay;if(q===0)q=undefined;o(c('LiveMapActiveStreamActions').resetActiveStreamTimeout(q));},setMap:function p(q){o(c('LiveMapMapActions').setLeafletMap(q));},setMapViewport:function p(q,r){o(c('LiveMapVideoCacheActions').updatePollerForZoom(q));o(c('LiveMapMapActions').setMapViewData(q,r));o(c('LiveMapVideoCacheActions').dynamicGeoFetch());}};}f.exports=k(m,n)(l);}),null);
__d("XRapidReportingDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/rapid_report\/",{context:{type:"String",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('LiveMapSidebarItem.relay.react',['cx','fbt','AsyncRequest','Image.react','ImageBlock.react','Link.react','LiveMapPACTypedLogger','LiveMapPACEvent','NFXStoryLocation','PopoverMenu.react','React','Relay','RelayRootContainer','ReactXUIMenu','TextWithEmoticons.react','VideoPlayerLoggerSource','VideoPlayerMetaData','VideoPlayerReactExperiments','XRapidReportingDialogController','joinClasses','intlSummarizeNumber'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('ReactXUIMenu').Item;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(v){k.constructor.call(this,v);this.$LiveMapSidebarItem8=function(){this.props.blacklistVideo(this.props.video.id);}.bind(this);this.$LiveMapSidebarItem9=function(){var w=JSON.stringify({reportable_ent_token:this.props.video.id,story_location:c('NFXStoryLocation').LIVE_MAP}),x=c('XRapidReportingDialogController').getURIBuilder().setString('context',w).getURI(),y=new (c('AsyncRequest'))().setURI(x);y.send();}.bind(this);this.$LiveMapSidebarItem1=null;}q.prototype.$LiveMapSidebarItem2=function(v){return v.video==null||v.video.is_live_streaming===false;};q.prototype.$LiveMapSidebarItem3=function(v){if(v.video==null)return false;return v.video.marked_as_inappropriate===true||v.video.live_map_classified_as_inappropriate===true;};q.prototype.$LiveMapSidebarItem4=function(v){new (c('LiveMapPACTypedLogger'))().setEvent(c('LiveMapPACEvent').FILTERED).setVideoID(v).log();};q.prototype.componentWillMount=function(){if(this.$LiveMapSidebarItem2(this.props)||this.$LiveMapSidebarItem3(this.props)){this.props.removeVideo(this.props.videoID);if(this.$LiveMapSidebarItem3(this.props))this.$LiveMapSidebarItem4(this.props.videoID);}};q.prototype.componentWillReceiveProps=function(v){if(this.$LiveMapSidebarItem2(v)||this.$LiveMapSidebarItem3(this.props)){this.props.removeVideo(v.videoID);if(this.$LiveMapSidebarItem3(v))this.$LiveMapSidebarItem4(this.props.videoID);}};q.prototype.$LiveMapSidebarItem5=function(v,w){if(this.$LiveMapSidebarItem1)return;if(c('VideoPlayerReactExperiments').liveMapPrfetchListViewMpdOnEnter)c('VideoPlayerMetaData').genPrefetch(w.id,{},0,c('VideoPlayerReactExperiments').livemapPrefetchMpdTimeout);this.$LiveMapSidebarItem1=setTimeout(function(){this.props.onMouseEnter(w.id,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW);this.$LiveMapSidebarItem1=null;}.bind(this),c('VideoPlayerReactExperiments').liveMapListViewOpenDelay);};q.prototype.$LiveMapSidebarItem6=function(v){if(this.$LiveMapSidebarItem1){clearTimeout(this.$LiveMapSidebarItem1);this.$LiveMapSidebarItem1=null;}if(c('VideoPlayerReactExperiments').liveMapPrfetchListViewMpdOnEnter)c('VideoPlayerMetaData').abortPrefetching(v.id);this.props.onMouseExit();};q.prototype.$LiveMapSidebarItem7=function(v){v.stopPropagation();};q.prototype.$LiveMapSidebarItem10=function(){var v=c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(p,{onclick:this.$LiveMapSidebarItem8},i._("Hide video")),c('React').createElement(p,{onclick:this.$LiveMapSidebarItem9},i._("Report live video")));return (c('React').createElement(c('PopoverMenu.react'),{alignh:'right',className:"_hvg",menu:v,onClick:this.$LiveMapSidebarItem7},c('React').createElement(c('Link.react'),{className:"_hvh"})));};q.prototype.render=function(){var v=this.props,w=v.video,x=v.eventHandlers,y=v.nowPlaying,z=babelHelpers.objectWithoutProperties(v,['video','eventHandlers','nowPlaying']);if(w==null)return null;var aa=w.message!=null&&w.message.text!=null?c('React').createElement(c('TextWithEmoticons.react'),{renderEmoji:true,renderEmoticons:true,text:w.message.text}):null,ba=w.height>w.width?"_1m-t":"_3x22";return (c('React').createElement('li',babelHelpers['extends']({},z,{className:c('joinClasses')(this.props.className,(y?"_8r6":'')+(' '+"_8r7")),onMouseEnter:function(ca){return this.$LiveMapSidebarItem5(ca,w);}.bind(this),onMouseLeave:function(){return this.$LiveMapSidebarItem6(w);}.bind(this),onClick:function ca(da){return x.click(da,w);}}),this.$LiveMapSidebarItem10(),c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('div',{className:"_3x21"},c('React').createElement(c('Image.react'),{src:w.image&&w.image.uri,className:ba})),c('React').createElement('div',null,c('React').createElement('div',{className:"_4hxo"},c('React').createElement('span',{className:"_4hxq"}),i._("Now Playing")),c('React').createElement('div',{className:"_53zt _328h"},c('React').createElement('div',{className:"_8r8"},c('React').createElement(c('Link.react'),{className:"_19qm",href:w.url},w.owner.name),c('React').createElement('div',{className:"_19rp"+(w.owner.is_verified?' '+"_5dz-":'')+(w.owner.is_verified?' '+"_5dzy":'')+(w.owner.is_verified?' '+"_56_f":'')+(w.owner.is_verified_page?' '+"_5n3t":'')})),c('React').createElement('div',{className:"_8r9 _328h"},w.publisher_category)),c('React').createElement('div',{className:"_53zv _328h"},aa),c('React').createElement('div',{className:"_8ra _328h"},c('intlSummarizeNumber')(w.viewer_count),' ',i._({"*":" viewers","268435456":" viewer"},[i.plural(w.viewer_count)]))))));};l=babelHelpers.inherits(r,c('Relay').Route);m=l&&l.prototype;function r(){l.apply(this,arguments);}r.routeName='SidebarItemRoute';r.path='/';r.paramDefinitions={video_id:{type:'ID',required:true}};r.queries={video:function v(w){return function(x){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'video_id'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(x)]),fieldName:'video',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'Video',type:'Video'};}(w.getFragment('video'));}};var s=c('Relay').createContainer(q,{fragments:{video:function v(w){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'is_live_streaming',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'live_map_classified_as_inappropriate',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'marked_as_inappropriate',kind:'Field',metadata:{},type:'Boolean'},{alias:'viewer_count',fieldName:'live_viewer_count_read_only',kind:'Field',metadata:{},type:'Int'},{fieldName:'publisher_category',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_verified_page',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'Page',type:'Page'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'User',type:'User'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:64}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:64}},{kind:'Call',metadata:{},name:'sizing',value:{kind:'CallValue',callValue:'cover-fill-cropped'}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'message',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{fieldName:'height',kind:'Field',metadata:{},type:'Int'},{fieldName:'width',kind:'Field',metadata:{},type:'Int'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoFragment',type:'Video'};}();}}});n=babelHelpers.inherits(t,c('React').PureComponent);o=n&&n.prototype;function t(v){o.constructor.call(this,v);u.call(this);this.state={route:new r({video_id:v.videoID})};}t.prototype.componentWillReceiveProps=function(v){if(v.videoID!=this.props.videoID)this.setState({route:new r({video_id:v.videoID})});};t.prototype.renderFailure=function(){return null;};t.prototype.render=function(){return (c('React').createElement(c('RelayRootContainer'),{Component:s,route:this.state.route,renderLoading:this.renderLoading,renderFetched:this.renderFetched,renderFailure:this.renderFailure}));};var u=function v(){this.renderLoading=function(){return c('React').createElement('li',{key:this.props.id,className:c('joinClasses')(this.props.className,"_8r7")},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('div',{className:"_3x21"},c('React').createElement('div',{className:"_1h09"})),c('React').createElement('div',null,c('React').createElement('div',{className:"_112q"},c('React').createElement('div',{className:"_1h09"})))));}.bind(this);this.renderFetched=function(w,x){if(w.video==null)return null;var y=babelHelpers['extends']({},this.props,w);return c('React').createElement(s,y);}.bind(this);};f.exports=t;}),null);
__d('LiveMapSidebarList.react',['cx','LiveMapClickEventLogger','LiveMapSidebarItem.relay.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$LiveMapSidebarList2=function(m,n){this.props.onSidebarItemClick(n.id);this.$LiveMapSidebarList1({videoID:n.id,viewerCount:n.viewer_count});}.bind(this);}k.prototype.$LiveMapSidebarList1=function(l){c('LiveMapClickEventLogger').logSidebarItemClickEvent(l);};k.prototype.$LiveMapSidebarList3=function(){var l={click:this.$LiveMapSidebarList2};return this.props.topVideos.map(function(m){var n=false;if(this.props.nowPlaying&&this.props.nowPlaying===m)n=true;return (c('React').createElement('div',{key:m},c('React').createElement(c('LiveMapSidebarItem.relay.react'),{videoID:m,nowPlaying:n,eventHandlers:l,onMouseEnter:this.props.onSidebarItemMouseEnter,onMouseExit:this.props.onSidebarItemMouseExit,blacklistVideo:this.props.blacklistVideo,removeVideo:this.props.removeVideo})));}.bind(this));};k.prototype.render=function(){return (c('React').createElement('div',{className:"_12_g"},c('React').createElement('div',{className:"_12_h"},c('React').createElement('ul',{className:"_u0z"},this.$LiveMapSidebarList3()))));};f.exports=k;}),null);
__d('LiveMapSidebarList.container.react',['ReactRedux','LiveMapVideoSelectors','LiveMapSidebarList.react','LiveMapSidebarActions','LiveMapVideoCacheActions','LiveMapActiveStreamActions','VideoPlayerReactExperiments','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactRedux').connect,k=c('LiveMapVideoSelectors').getTopVideoIDsInView;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;l.prototype.render=function(){return c('React').createElement(c('LiveMapSidebarList.react'),this.props);};function l(){h.apply(this,arguments);}var m=function o(p){var q=p.sidebar.nowPlayingID,r=k(p);return {nowPlaying:q,topVideos:r};},n=function o(p){return {onSidebarItemClick:function q(r){p(c('LiveMapSidebarActions').setSidebarNowPlaying(r));},onSidebarItemMouseEnter:function q(r,s){if(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay)c('LiveMapActiveStreamActions').clearRemoveActiveStreamTimeout();p(c('LiveMapActiveStreamActions').setActiveStreamTimeout(r,s));},onSidebarItemMouseExit:function q(){if(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay){p(c('LiveMapActiveStreamActions').resetActiveStreamTimeout(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay));}else p(c('LiveMapActiveStreamActions').resetActiveStream());},blacklistVideo:function q(r){p(c('LiveMapVideoCacheActions').blacklistVideo(r));},removeVideo:function q(r){p(c('LiveMapVideoCacheActions').removeVideo(r));}};};f.exports=j(m,n)(l);}),null);
__d('LiveMapSidebarVideo.relay.react',['cx','fbt','AsyncRequest','EventListener','Link.react','NFXStoryLocation','PopoverMenu.react','PublicLiveMapVideoPlayer.react','React','Relay','RelayRootContainer','ReactXUIMenu','TextWithEntities.react','VideoPlayerLoggerSource','XRapidReportingDialogController','XUIText.react','debounce'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('ReactXUIMenu').Item;j=babelHelpers.inherits(q,c('React').PureComponent);k=j&&j.prototype;function q(v){k.constructor.call(this,v);this.$LiveMapSidebarVideo4=function(){this.$LiveMapSidebarVideo5();}.bind(this);this.$LiveMapSidebarVideo6=function(x){this.$LiveMapSidebarVideo3=true;this.props.onPlayerLoaded(x);}.bind(this);this.$LiveMapSidebarVideo7=function(){var x=JSON.stringify({reportable_ent_token:this.props.video.id,story_location:c('NFXStoryLocation').LIVE_MAP}),y=c('XRapidReportingDialogController').getURIBuilder().setString('context',x).getURI(),z=new (c('AsyncRequest'))().setURI(y);z.send();}.bind(this);this.$LiveMapSidebarVideo10=function(x){this.$LiveMapSidebarVideo1=x;}.bind(this);this.state={videoContainerDimension:null};this.$LiveMapSidebarVideo3=false;var w=this;w.$LiveMapSidebarVideo4=c('debounce')(this.$LiveMapSidebarVideo4,300);}q.prototype.componentWillMount=function(){this.$LiveMapSidebarVideo2=c('EventListener').listen(window,'resize',this.$LiveMapSidebarVideo4);};q.prototype.componentWillUnmount=function(){if(this.$LiveMapSidebarVideo2!=null)this.$LiveMapSidebarVideo2.remove();};q.prototype.componentDidMount=function(){this.$LiveMapSidebarVideo5();};q.prototype.$LiveMapSidebarVideo5=function(){if(this.$LiveMapSidebarVideo1==null)return;this.setState({videoContainerDimension:this.$LiveMapSidebarVideo1.offsetWidth});};q.prototype.$LiveMapSidebarVideo8=function(v){v.stopPropagation();};q.prototype.$LiveMapSidebarVideo9=function(){var v=c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(p,{onclick:this.props.closeVideo},i._("Close video")),c('React').createElement(p,{onclick:this.$LiveMapSidebarVideo7},i._("Report live video")));return c('React').createElement(c('PopoverMenu.react'),{alignh:'right',className:"_hvg",menu:v,onClick:this.$LiveMapSidebarVideo8},c('React').createElement(c('Link.react'),{className:"_5nv0"}));};q.prototype.render=function(){var v=this.props.video,w=this.props.abortedLoading,x=false;if(!this.$LiveMapSidebarVideo3&&w)x=true;var y=null;if(v.message)y=c('React').createElement(c('TextWithEntities.react'),{text:v.message.text,ranges:v.message.ranges,renderEmoticons:true,renderEmoji:true});var z=null,aa=v.height/v.width,ba=this.state.videoContainerDimension||0,ca=aa<1?parseInt(ba*aa,10):ba;if(this.state.videoContainerDimension!=null&&!x)z=c('React').createElement(c('PublicLiveMapVideoPlayer.react'),{videoID:v.id,videoWidth:this.state.videoContainerDimension,videoHeight:ca,videoPlayerSource:c('VideoPlayerLoggerSource').LIVE_MAP_SIDEBAR,onVideoLoaded:this.$LiveMapSidebarVideo6,onVideoUnloaded:this.props.onPlayerUnloaded,showControls:true});var da=c('React').createElement('div',{className:"_7nt"},this.$LiveMapSidebarVideo9());return c('React').createElement('div',{className:"_7sj"},c('React').createElement('div',{className:"_7ns",style:{height:ca+'px'}},c('React').createElement('div',{ref:this.$LiveMapSidebarVideo10,className:"_2rv2"},z),da),c('React').createElement('div',{className:"_7sk _328h"},c('React').createElement(c('Link.react'),{href:v.url},v.owner.name),c('React').createElement('div',{className:"_9vn"+(v.owner.is_verified?' '+"_5dz-":'')+(v.owner.is_verified?' '+"_5dzy":'')+(v.owner.is_verified?' '+"_56_f":'')+(v.owner.is_verified_page?' '+"_5n3t":'')})),c('React').createElement('div',{className:"_8r9 _328h"},c('React').createElement(c('XUIText.react'),null,v.publisher_category)),c('React').createElement('div',{className:"_7sp"},y));};var r=c('Relay').createContainer(q,{fragments:{video:function v(w){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'viewer_count',fieldName:'live_viewer_count_read_only',kind:'Field',metadata:{},type:'Int'},{fieldName:'publisher_category',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:64}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:64}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'User',type:'User'},{children:[{fieldName:'is_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_verified_page',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'Page',type:'Page'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'offset',kind:'Field',metadata:{},type:'Int'},{fieldName:'length',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'entity',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Entity'},{fieldName:'entity_is_weak_reference',kind:'Field',metadata:{},type:'Boolean'}],fieldName:'ranges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'EntityAtRange'}],fieldName:'message',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{fieldName:'height',kind:'Field',metadata:{},type:'Int'},{fieldName:'width',kind:'Field',metadata:{},type:'Int'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoFragment',type:'Video'};}();}}});l=babelHelpers.inherits(s,c('Relay').Route);m=l&&l.prototype;function s(){l.apply(this,arguments);}s.routeName='SidebarVideoRoute';s.path='/';s.paramDefinitions={video_id:{type:'ID',required:true}};s.queries={video:function v(w){return function(x){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'video_id'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(x)]),fieldName:'video',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'Video',type:'Video'};}(w.getFragment('video'));}};n=babelHelpers.inherits(t,c('React').PureComponent);o=n&&n.prototype;function t(v){o.constructor.call(this,v);u.call(this);this.state={route:new s({video_id:v.videoID})};}t.prototype.componentWillReceiveProps=function(v){if(v.videoID!=this.props.videoID)this.setState({route:new s({video_id:v.videoID})});};t.prototype.renderLoading=function(){return (c('React').createElement('div',{className:"_7sj"},c('React').createElement('div',{className:"_403h"},c('React').createElement('div',{className:"_1h09"})),c('React').createElement('div',{className:"_7sk _328h"},c('React').createElement('div',{className:"_112q"},c('React').createElement('div',{className:"_1h09"}))),c('React').createElement('div',{className:"_8r9 _328h"},c('React').createElement('div',{className:"_403k"},c('React').createElement('div',{className:"_1h09"})))));};t.prototype.render=function(){return (c('React').createElement(c('RelayRootContainer'),{Component:r,route:this.state.route,renderLoading:this.renderLoading,renderFetched:this.renderFetched}));};var u=function v(){this.renderFetched=function(w,x){if(w.video==null)return null;var y=babelHelpers['extends']({},this.props,w);return c('React').createElement(r,y);}.bind(this);};f.exports=t;}),null);
__d('LiveMapSidebarVideo.container.react',['ReactRedux','LiveMapClickEventLogger','LiveMapSidebarVideo.relay.react','LiveMapSidebarActions','LiveMapSidebarSelectors','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactRedux').connect;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var n=this.props,o=n.videoID,p=babelHelpers.objectWithoutProperties(n,['videoID']);if(o==null)return null;var q=babelHelpers['extends']({videoID:o},p);return c('React').createElement(c('LiveMapSidebarVideo.relay.react'),q);};function k(){h.apply(this,arguments);}var l=function n(o){var p=c('LiveMapSidebarSelectors').getNowPlayingID(o),q=c('LiveMapSidebarSelectors').getSidebarVideoVolume(o),r=c('LiveMapSidebarSelectors').getAbortLoadingSidebarVideo(o);return {abortedLoading:r,videoID:p,volume:q};},m=function n(o){return {onPlayerLoaded:function p(q){o(c('LiveMapSidebarActions').setSidebarVideoPlayerController(q));},onPlayerUnloaded:function p(){o(c('LiveMapSidebarActions').setSidebarVideoPlayerController(null));},closeVideo:function p(){o(c('LiveMapSidebarActions').setSidebarNowPlaying(null));c('LiveMapClickEventLogger').logCloseSidebarAutoplayVideo();}};};f.exports=j(l,m)(k);}),null);
__d('LiveMapSidebar.react',['cx','fbt','EventListener','LiveMapExperiments','LiveMapSidebarList.container.react','LiveMapSidebarVideo.container.react','React','debounce'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$LiveMapSidebar3=c('debounce')(function(){var r=this.$LiveMapSidebar2;if(!r)return;var s={x:r.offsetWidth,y:r.offsetHeight};this.props.onWindowResize(s);}.bind(this)),this.$LiveMapSidebar4=function(r){this.$LiveMapSidebar2=r;}.bind(this),n;}l.prototype.componentDidMount=function(){this.$LiveMapSidebar1=c('EventListener').listen(window,'resize',this.$LiveMapSidebar3);var m=this.$LiveMapSidebar2;if(!m)return;var n={x:m.offsetWidth,y:m.offsetHeight};this.props.onWindowResize(n);};l.prototype.componentWillUncount=function(){this.$LiveMapSidebar1&&this.$LiveMapSidebar1.remove();};l.prototype.render=function(){var m=void 0,n=null;m=c('React').createElement(c('LiveMapSidebarList.container.react'),null);var o=c('LiveMapExperiments').webgl?"_4uwp":'';return (c('React').createElement('div',{className:o,ref:this.$LiveMapSidebar4},c('React').createElement('div',{className:"_7si"},c('React').createElement('div',{className:"_27ce"},c('React').createElement('div',{className:"_328i"},c('React').createElement('div',{className:"_7sr clearfix"},i._("Live Videos")),c('React').createElement(c('LiveMapSidebarVideo.container.react'),null)),m),n)));};f.exports=l;}),null);
__d('LiveMapSidebar.container.react',['ReactRedux','LiveMapSidebar.react','LiveMapMapActions','LiveMapSidebarActions','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactRedux').connect,k=c('LiveMapMapActions').setSidebarOffset,l=c('LiveMapSidebarActions').initializeChannelVideo;h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;m.prototype.componentWillMount=function(){this.props.onLoad();};m.prototype.render=function(){return c('React').createElement(c('LiveMapSidebar.react'),{onWindowResize:this.props.onWindowResize});};function m(){h.apply(this,arguments);}var n=null,o=function p(q){return {onWindowResize:function r(s){q(k(s));},onLoad:function r(){q(l());}};};f.exports=j(n,o)(m);}),null);
__d('LiveMapGLStyleConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={SOURCE_NAMES:{COMPOSITE:'composite'},FONTS:{REGULAR:'Noto Sans Regular',BOLD:'Noto Sans Bold',ITALIC:'Noto Sans Italic'},COLORS:{WATER_FILL:'#eff0f1',LAND_FILL:'#cfd1d5',STATE_BORDER:'#adb1b8',COUNTRY_BORDER:'#adb1b8',PLACE_LABEL:'hsla(0, 0, 50%, 1)',OCEAN_LABEL:'#666'}};}),null);
__d('LiveMapGLLabelStyle',['LiveMapGLStyleConstants'],(function a(b,c,d,e,f,g){'use strict';var h=c('LiveMapGLStyleConstants').FONTS,i={id:'ocean-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'ocean-labels',interactive:true,layout:{'text-font':[h.BOLD],'text-field':'{display_name}','text-max-width':7,'text-line-height':1.5,'text-padding':5,'text-letter-spacing':.25,'symbol-placement':'point','text-size':{base:1,stops:[[1,12],[4,30]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.OCEAN_LABEL,'text-opacity':.25}},j={id:'city-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-city',minzoom:4,maxzoom:16,interactive:true,filter:['==','place','city'],layout:{'text-field':'{display_name}','text-font':[h.REGULAR],'text-padding':5,'text-max-width':15,'text-transform':'none','text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[4,12],[10,18]],base:.9}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},k={id:'village-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-small',minzoom:9,maxzoom:16,interactive:true,filter:['==','place','village'],layout:{'text-field':'{display_name}','text-font':[h.REGULAR],'text-padding':5,'text-max-width':10,'text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[6,10],[14,10]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},l={id:'town-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-city',minzoom:7,maxzoom:16,interactive:true,filter:['==','place','town'],layout:{'text-field':'{display_name}','text-font':[h.REGULAR],'text-max-width':10,'text-padding':5,'text-anchor':{base:1,stops:[[0,'bottom'],[6,'center']]},'text-size':{stops:[[5,11],[12,11]],base:.9}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},m={id:'state-label',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-state',minzoom:4,maxzoom:7,interactive:true,layout:{'text-transform':'uppercase','text-field':'{display_name}','text-font':[h.REGULAR],'text-letter-spacing':.15,'text-max-width':7,'text-padding':5,'text-size':{base:1,stops:[[4,9],[7,18]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL,'text-opacity':{base:1,stops:[[0,0],[3,0],[5,.75]]}},filter:['in','is_in:country_code','US','CA']},n={id:'country-label',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'country-labels',minzoom:3,maxzoom:12,interactive:true,layout:{'text-field':'{display_name}','text-font':[h.REGULAR],'text-max-width':6,'text-padding':5,'text-size':{stops:[[1,9],[5,18]],base:.9},'text-transform':'none'},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL,'text-opacity':{base:1,stops:[[0,0],[2,0],[3,.75]]}}};f.exports={oceanLabels:i,townLabels:l,villageLabels:k,cityLabels:j,stateLabels:m,countryLabels:n};}),null);
__d('LiveMapGLBorderStyle',['LiveMapGLStyleConstants'],(function a(b,c,d,e,f,g){'use strict';var h={id:'stateBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'nestates50m-usa-can',interactive:true,minzoom:4,layout:{'line-join':'bevel'},paint:{'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-opacity':1,'line-color':c('LiveMapGLStyleConstants').COLORS.STATE_BORDER,'line-dasharray':{stops:[[0,[1,0]],[5,[1,1]]]}}},i={'line-color':c('LiveMapGLStyleConstants').COLORS.COUNTRY_BORDER,'line-opacity':1,'line-width':{base:1,stops:[[3,.75],[10,5]]}},j={id:'countryBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'osm-country-borders',interactive:true,minzoom:3,layout:{'line-join':'miter'},paint:i},k={'line-color':c('LiveMapGLStyleConstants').COLORS.COUNTRY_BORDER,'line-opacity':1,'line-width':1,'line-dasharray':[5,5]},l={id:'disputedCountryBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'osm-disputed-country-borders',interactive:true,minzoom:3,layout:{'line-join':'miter'},paint:k};f.exports={stateBorders:h,countryBorders:j,disputedCountryBorders:l};}),null);
__d('LiveMapGLWaterStyle',['LiveMapGLStyleConstants'],(function a(b,c,d,e,f,g){'use strict';var h={id:'ocean-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'ocean-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},i={id:'lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},j={id:'na-lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'na-lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},k={id:'eu-lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'eu-lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}};f.exports={oceanShapefile:h,lakeShapefile:i,naLakeShapefile:j,euLakeShapefile:k};}),null);
__d('LiveMapGLMapStyle',['LiveMapGLStyleConstants','LiveMapGLWaterStyle','LiveMapGLLabelStyle','LiveMapGLBorderStyle','CurrentLocale','TilesVectorMapConfig','VectorMapTileSet','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i=10,j=1,k=new (c('URI'))(c('TilesVectorMapConfig').URL_TEMPLATE.replace('{tile_set}',''+c('VectorMapTileSet').LIVE_MAP).replace('{version}',''+c('TilesVectorMapConfig').LIVE_MAP_VECTOR_VERSION));k.addQueryData({language:c('CurrentLocale').get()});var l=k.toString(),m=c('TilesVectorMapConfig').FONT_URL_TEMPLATE,n={id:'background',type:'background',interactive:true,layout:{},paint:{'background-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},o={id:'world-land',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'world',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.LAND_FILL}},p=[n,o,c('LiveMapGLBorderStyle').disputedCountryBorders,c('LiveMapGLBorderStyle').countryBorders,c('LiveMapGLBorderStyle').stateBorders,c('LiveMapGLWaterStyle').oceanShapefile,c('LiveMapGLWaterStyle').lakeShapefile,c('LiveMapGLWaterStyle').naLakeShapefile,c('LiveMapGLWaterStyle').euLakeShapefile,c('LiveMapGLLabelStyle').villageLabels,c('LiveMapGLLabelStyle').townLabels,c('LiveMapGLLabelStyle').cityLabels,c('LiveMapGLLabelStyle').stateLabels,c('LiveMapGLLabelStyle').countryLabels],q='<a href="http://www.openstreetmap.org/about/" target="_blank">\u00A9 OpenStreetMap contributors</a>',r={version:8,name:'LightGrey',center:[0,0],zoom:1,bearing:0,pitch:0,sources:(h={},h[c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE]={type:'vector',tiles:[l],maxzoom:i,minzoom:j,attribution:q},h),glyphs:m,layers:p};f.exports=r;}),null);
__d('LiveMapMapboxLayers',['PublicLiveMapConfig'],(function a(b,c,d,e,f,g){'use strict';var h='rgb(53, 120, 229)',i=.8,j=.25,k='#1c4f8c',l={ONE:{iconSize:6,animationMax:12},TWO:{iconSize:8,animationMax:18},THREE:{iconSize:10,animationMax:24},FOUR:{iconSize:12,animationMax:36}},m={normalLayers:{layer0:{id:'layer0',type:'circle',source:'videos',minzoom:4,paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['<','viewer_count',20]},layer1:{id:'layer1',type:'circle',source:'videos',minzoom:3,paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',20],['<','viewer_count',40]]},layer2:{id:'layer2',type:'circle',source:'videos',paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',40],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1]]},popular1:{id:'popular1',type:'circle',source:'videos',paint:{'circle-radius':l.ONE.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2]]},popular2:{id:'popular2',type:'circle',source:'videos',paint:{'circle-radius':l.TWO.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3]]},popular3:{id:'popular3',type:'circle',source:'videos',paint:{'circle-radius':l.THREE.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]]},popular4:{id:'popular4',type:'circle',source:'videos',paint:{'circle-radius':l.FOUR.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]]},viewerLines:{id:'viewerLines',type:'line',source:'viewers',layout:{'line-cap':'round','line-join':'round'},paint:{'line-width':1,'line-color':k,'line-opacity':.5}}},animationLayers:{popular1Animated:{id:'popular1Animated',type:'circle',source:'videos',paint:{'circle-radius':l.ONE.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2]],metadata:{'base-radius':l.ONE.animationMax,delay:0,duration:4000}},popular2Animated:{id:'popular2Animated',type:'circle',source:'videos',paint:{'circle-radius':l.TWO.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3]],metadata:{'base-radius':l.TWO.animationMax,delay:800,duration:4200}},popular3Animated:{id:'popular3Animated',type:'circle',source:'videos',paint:{'circle-radius':l.THREE.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]],metadata:{'base-radius':l.THREE.animationMax,delay:1500,duration:4500}},popular4Animated:{id:'popular4Animated',type:'circle',source:'videos',paint:{'circle-radius':l.FOUR.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]],metadata:{'base-radius':l.FOUR.animationMax,delay:500,duration:5000}}},highlightLayers:{activeStream:{id:'activeStream',type:'circle',source:'videos',paint:{'circle-radius':10,'circle-color':k,'circle-opacity':1},filter:['all',['==','stream_id','']]}}};f.exports=m;}),null);
__d('LiveWebGLMap.react',['cx','fbt','CubicBezier','immutable','PublicLiveMapConstants','LiveMapMapboxLayers','LeafletUtils','React','Link.react','XUIDialog.react','PublicLiveMapEvent','PublicLiveMapReportForm.react','MapboxGLMap.react','MapboxGLDayNight.react','MapboxGLAttribution.react','MapboxGLNavigationControl.react','EventListener','LiveMapGLLabelStyle','LiveMapGLMapStyle','turfAlong','turfLineDistance','setTimeout','throttle','getViewportDimensions','PublicLiveMapInteractionsTypedLogger','pageID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=8,m=/@([-+]?\d+\.?\d*),([-+]?\d+\.?\d*),(\d+\.?\d*)z/i,n=.05,o=1,p=180/o,q=1500;function r(){var da=c('getViewportDimensions').withoutScrollbars().height,ea=document.getElementById('pagelet_bluebar'),fa=document.getElementById('fb2k_pagelet_bluebar'),ga=c('PublicLiveMapConstants').FB_HEADER_HEIGHT;if(ea!=null){ga=ea.offsetHeight;}else if(fa!=null)ga=fa.offsetHeight;return da-ga;}var s='videos',t=c('immutable').Map({videos:x([]),viewers:x([])}),u=c('immutable').OrderedMap(c('LiveMapMapboxLayers').normalLayers),v=c('immutable').OrderedMap(c('LiveMapMapboxLayers').highlightLayers),w=c('immutable').OrderedMap(c('LiveMapMapboxLayers').animationLayers);function x(da){return {type:'geojson',data:{type:'FeatureCollection',features:da}};}function y(da){return {type:'Feature',geometry:{type:'Point',coordinates:[da.location.longitude,da.location.latitude]},properties:{stream_id:da.id,viewer_count:da.viewer_count}};}function z(da,ea){var fa={type:'Feature',geometry:{type:'LineString',coordinates:[[ea.longitude,ea.latitude],[da.longitude,da.latitude]]},properties:{}},ga=c('turfLineDistance')(fa,'degrees'),ha=[];for(var ia=0;ia<ga;ia+=o){var ja=ia===0?.0001:ia,ka=c('turfAlong')(fa,ja,'degrees'),la=ka.geometry.coordinates;ha.push(la);}var ma=c('turfAlong')(fa,ga,'degrees'),na=ma.geometry.coordinates;ha.push(na);fa.geometry.coordinates=ha.slice(0,1);fa.properties={arc:ha};return fa;}var aa=10;j=babelHelpers.inherits(ba,c('React').PureComponent);k=j&&j.prototype;function ba(da){k.constructor.call(this,da);ca.call(this);var ea=void 0,fa=3,ga=window.location.hash||'',ha=ga.match(m);if(ha==null){ea=[da.userLocation.longitude,da.userLocation.latitude];}else{var ia=parseFloat(ha[1],10),ja=parseFloat(ha[2],10);fa=parseInt(ha[3],10);ea=[ja,ia];}this.$LiveWebGLMap4={minZoom:2,maxZoom:10,center:ea,zoom:fa};}ba.prototype.componentDidMount=function(){this.setState({mapHeight:r()});this.$LiveWebGLMap3=c('EventListener').listen(window,'resize',this.$LiveWebGLMap9);var da=performance.now();this.$LiveWebGLMap10(da,da,0);};ba.prototype.componentWillUnmount=function(){if(this.$LiveWebGLMap3!=null)this.$LiveWebGLMap3.remove();this.$LiveWebGLMap11();if(this.$LiveWebGLMap6!=null)cancelAnimationFrame(this.$LiveWebGLMap6);this.props.setMap(null);};ba.prototype.$LiveWebGLMap14=function(da,ea,fa){var ga=da-ea,ha=fa+ga,ia=fa/q,ja=Math.floor(p*ia),ka=ha/q,la=Math.floor(p*ka);if(la!=ja)this.$LiveWebGLMap15(la);if(la<this.$LiveWebGLMap13){this.$LiveWebGLMap12=requestAnimationFrame(function(ma){return this.$LiveWebGLMap14(ma,da,ha);}.bind(this));}else this.$LiveWebGLMap6=null;};ba.prototype.$LiveWebGLMap11=function(){if(this.$LiveWebGLMap12!=null)cancelAnimationFrame(this.$LiveWebGLMap12);};ba.prototype.$LiveWebGLMap15=function(da){var ea=this.state.sources.get('viewers'),fa=ea.data.features;for(var ga=0;ga<fa.length;ga++){var ha=fa[ga],ia=ha.geometry,ja=ha.properties;if(ia==null||ja==null)continue;if(ia.coordinates.length<da)ia.coordinates=ja.arc.slice(0,da);}var ka=this.state.sources.set('viewers',babelHelpers['extends']({},ea));this.setState({sources:ka});};ba.prototype.componentWillReceiveProps=function(da){var ea,fa=this,ga,ha=this.props,ia=this.state,ja=ia.sources,ka=ia.highlightLayers,la=ia.animatedLayers,ma=ia.layers,na=false;if(ha.allStreams!==da.allStreams)ja=ja.set('videos',x(da.allStreams.map(function(oa){return y(oa);})));if(this.props.currentViewers!==da.currentViewers)(function(){var oa=da.activeStreamLocation,pa=[];fa.$LiveWebGLMap13=0;if(oa!=null)da.currentViewers.forEach(function(qa){var ra=z(qa,oa),sa=ra.properties;if(sa==null)return;this.$LiveWebGLMap13=Math.max(this.$LiveWebGLMap13,sa.arc.length);pa.push(ra);}.bind(fa));ja=ja.merge(c('immutable').Map({viewers:x(pa)}));na=true;})();if(this.props.activeStreamID!==da.activeStreamID)(function(){var oa=da.activeStreamID||'',pa=oa!==''?.2:.8;ka=ka.map(function(qa){var ra=[].concat(qa.filter);ra[1]=['==','stream_id',oa];return babelHelpers['extends']({},qa,{filter:ra});});la=la.map(function(qa){var ra=[].concat(qa.filter);ra[1]=['!=','stream_id',oa];return babelHelpers['extends']({},qa,{filter:ra});});ma=ma.map(function(qa){if(qa.type!='circle')return qa;return babelHelpers['extends']({},qa,{paint:babelHelpers['extends']({},qa.paint,{'circle-opacity':pa})});});})();if(this.state.sources!==ja||this.state.highlightLayers!=ka||this.state.animatedLayers!=la||this.state.layers!=ma)this.setState({sources:ja,highlightLayers:ka,animatedLayers:la,layers:ma},function(){if(na){var oa=performance.now();this.$LiveWebGLMap14(oa,oa,0);}}.bind(this));};ba.prototype.render=function(){return (c('React').createElement('div',null,this.$LiveWebGLMap16(),this.$LiveWebGLMap17(),this.$LiveWebGLMap18()));};ba.prototype.$LiveWebGLMap17=function(){return (c('React').createElement(c('Link.react'),{className:"_4g4h",ref:this.$LiveWebGLMap19,onClick:this.$LiveWebGLMap20},i._("Map feedback")));};ba.prototype.$LiveWebGLMap18=function(){return (c('React').createElement(c('XUIDialog.react'),{causalElementRef:this.$LiveWebGLMap21,shown:this.state.reportDialogShown,onToggle:this.$LiveWebGLMap22,fixedTopPosition:100,width:425},c('React').createElement(c('PublicLiveMapReportForm.react'),{ref:this.$LiveWebGLMap23})));};ba.prototype.$LiveWebGLMap16=function(){var da=r(),ea=this.state.animatedLayers.concat(this.state.layers).concat(this.state.highlightLayers);return (c('React').createElement('div',{style:{width:'100%',height:da+'px'},className:"_3kmv"},c('React').createElement(c('MapboxGLMap.react'),{mapboxStyle:c('LiveMapGLMapStyle'),style:{position:'absolute',top:0,bottom:0,width:'100%'},options:this.$LiveWebGLMap4,sources:this.state.sources,layers:ea,initialZoom:l,eventHandlers:this.$LiveWebGLMap24,onSourceOrLayerUpdate:this.$LiveWebGLMap25,disablePitch:true,disableRotation:true},c('React').createElement(c('MapboxGLDayNight.react'),{opacity:n,layerBefore:c('LiveMapGLLabelStyle').villageLabels.id}),c('React').createElement(c('MapboxGLAttribution.react'),{position:'bottom-right'}),c('React').createElement(c('MapboxGLNavigationControl.react'),{position:'bottom-right'}))));};ba.prototype.$LiveWebGLMap26=function(da){var ea=this.$LiveWebGLMap7.solve(da),fa=1;if(ea===0){fa=.15;}else if(ea<.25){fa=.15+.85*ea/.25;}else if(ea>=.25&&ea<=.5){fa=1;}else if(ea>.5)fa=1;var ga=0;if(ea===0){ga=0;}else if(ea<.25){ga=.25*ea/.25;}else if(ea>=.25&&ea<=.5){ga=.25;}else if(ea>.5)ga=.25-(ea-.5)/.5*.25;return {radiusTransform:fa,newOpacity:ga};};ba.prototype.$LiveWebGLMap10=function(da,ea,fa){fa+=da-ea;var ga=this.state.animatedLayers,ha=ga.map(function(ia){if(ia.type!=='circle'||!ia.metadata||ia.metadata['base-radius']==null)return ia;var ja=ia.metadata.duration,ka=ia.metadata.delay,la=fa%(ja+ka+1),ma=la-ka,na=0;if(la>ka&&la<ka+ja)na=Math.max(ma/ja,0);var oa=this.$LiveWebGLMap26(na),pa=oa.radiusTransform,qa=oa.newOpacity,ra=ia.paint['circle-opacity'],sa=ia.paint['circle-radius'],ta=ia.metadata['base-radius']*pa;if(Math.abs(qa-ra)<.01&&Math.abs(ta-sa)<.5)return ia;var ua=babelHelpers['extends']({},ia);ua.paint=babelHelpers['extends']({},ua.paint);ua.paint['circle-radius']=ta;ua.paint['circle-opacity']=qa;return ua;}.bind(this));this.$LiveWebGLMap5=(this.$LiveWebGLMap5+1)%aa;if(ga!==ha)this.setState({animatedLayers:ha});this.$LiveWebGLMap6=requestAnimationFrame(function(ia){return (this.$LiveWebGLMap10(ia,da,fa));}.bind(this));};ba.prototype.$LiveWebGLMap33=function(event,da,ea,fa){new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(event).setVideoID(da).setMapZoom(ea).setViewerCount(fa).setTimeSpentID(c('pageID')).log();};ba.prototype.$LiveWebGLMap28=function(da){var ea=da.getCenter().toArray(),fa=ea[0],ga=ea[1],ha=da.getZoom(),ia=c('LeafletUtils').wrapLongitude(parseFloat(fa.toFixed(9))),ja=parseFloat(ga.toFixed(9)),ka=parseFloat(ha.toFixed(9)),la='@'+ja+','+ia+','+ka+'z',ma=window.location.hash||'#',na=window.location.hash!=null&&window.location.hash.match(m)?window.location.hash.replace(m,la):''+ma+la;window.history.replaceState(undefined,undefined,na);};var ca=function da(){this.state={reportDialogShown:false,mapHeight:0,sources:t,layers:u,highlightLayers:v,animatedLayers:w};this.$LiveWebGLMap5=0;this.$LiveWebGLMap6=null;this.$LiveWebGLMap7=new (c('CubicBezier'))([.39,.575],[.565,1]);this.$LiveWebGLMap8=null;this.$LiveWebGLMap12=null;this.$LiveWebGLMap13=0;this.$LiveWebGLMap19=function(ea){this.$LiveWebGLMap1=ea;}.bind(this);this.$LiveWebGLMap21=function(){return this.$LiveWebGLMap1;}.bind(this);this.$LiveWebGLMap23=function(ea){this.$LiveWebGLMap2=ea;}.bind(this);this.$LiveWebGLMap20=function(){this.setState({reportDialogShown:true});}.bind(this);this.$LiveWebGLMap22=function(ea){if(!ea&&this.$LiveWebGLMap2!=null)this.$LiveWebGLMap2.resetForm();this.setState({reportDialogShown:ea});}.bind(this);this.$LiveWebGLMap9=c('throttle')(function(){this.setState({mapHeight:r()});}.bind(this),100);this.$LiveWebGLMap25=function(ea,fa){if(fa.sources[s]!=null)c('setTimeout')(function(){return this.$LiveWebGLMap27(ea);}.bind(this),50);}.bind(this);this.$LiveWebGLMap27=c('throttle')(function(ea,event){var fa=ea.transform.width,ga=ea.transform.height,ha=this.props.xOffset,ia=[[ha,0],[fa,ga]],ja=ea.queryRenderedFeatures(ia,{layers:this.state.layers.keySeq().toArray()}),ka=ja.reduce(function(){var ma=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],na=arguments[1];if(na&&na.properties&&na.properties.stream_id){var oa=na.properties.stream_id;ma[oa]=true;}return ma;},{}),la=Object.keys(ka);this.props.setStreamsInView(la);this.$LiveWebGLMap28(ea);}.bind(this),100);this.$LiveWebGLMap29=c('throttle')(function(ea,fa){var ga=ea.getZoom(),ha=ea.getBounds();this.props.setMapViewport(ga,ha);this.$LiveWebGLMap27(ea,fa);}.bind(this),100);this.$LiveWebGLMap30=c('throttle')(function(ea,fa){var ga=ea.queryRenderedFeatures(fa.point,{layers:this.state.layers.keySeq().toArray()}),ha=ga[0];if(ha==null){ea.getCanvas().style.cursor='';if(this.$LiveWebGLMap8!=null){this.$LiveWebGLMap8=null;this.props.onVideoMouseExit();}return;}ea.getCanvas().style.cursor='pointer';if(ha.properties==null||ha.properties.stream_id==null)return;var ia=ha.properties.stream_id;if(ia==null||this.props.activeStreamID===ia)return;if(this.$LiveWebGLMap8!=ia){this.$LiveWebGLMap8=ia;this.props.onVideoMouseEnter(ia);}}.bind(this),100);this.$LiveWebGLMap31=function(ea){this.props.setMap(ea);this.$LiveWebGLMap27(ea);}.bind(this);this.$LiveWebGLMap32=function(ea,fa){var ga=ea.queryRenderedFeatures(fa.point,{layers:this.state.highlightLayers.keySeq().toArray()});if(ga.length<1){this.props.onVideoMouseExit();return;}var ha=ga[0];if(ha==null||ha.properties==null||ha.properties.stream_id==null)return;var ia=ha.properties.stream_id,ja=ha.properties.viewer_count||0;this.$LiveWebGLMap33(c('PublicLiveMapEvent').CIRCLE_CLICKED,ia,-1,ja);this.props.onVideoClick(ia);}.bind(this);this.$LiveWebGLMap24=c('immutable').Map({load:this.$LiveWebGLMap31,mousemove:this.$LiveWebGLMap30,click:this.$LiveWebGLMap32,moveend:this.$LiveWebGLMap29,zoomend:this.$LiveWebGLMap29,rotateend:this.$LiveWebGLMap27,pitch:this.$LiveWebGLMap27});};f.exports=ba;}),null);
__d('LiveMapWebGLMap.container.react',['cx','ReactRedux','LiveWebGLMap.react','LiveMapTooltip.container.react','LiveMapVideoSelectors','LiveMapMapActions','LiveMapActiveStreamActions','LiveMapChannelPlayerActions','LiveMapVideoCacheActions','React','VideoPlayerLoggerSource','VideoPlayerReactExperiments'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('ReactRedux').connect;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',{className:"_4u4p"},c('React').createElement(c('LiveWebGLMap.react'),this.props),c('React').createElement(c('LiveMapTooltip.container.react'),null)));};function l(){i.apply(this,arguments);}function m(o){var p=o.activeStream.currentViewers,q=c('LiveMapVideoSelectors').getAllVideosArray(o),r=o.map.userLocation,s=o.activeStream.id,t=s?o.videoCache.allVideos.get(s).location:null,u=o.map.sidebarOffset.x;return {allStreams:q,currentViewers:p,activeStreamID:s,activeStreamLocation:t,xOffset:u,userLocation:r};}function n(o){return {onVideoClick:function p(q){o(c('LiveMapActiveStreamActions').setActiveStream(q,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_WEBGL));o(c('LiveMapChannelPlayerActions').openChannelPlayerForMapTooltip());},onVideoMouseEnter:function p(q){o(c('LiveMapActiveStreamActions').setActiveStreamTimeout(q,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_WEBGL,c('VideoPlayerReactExperiments').liveMapCircleHoverDelay));},onVideoMouseExit:function p(){var q=c('VideoPlayerReactExperiments').liveMapCircleCloseDelay;if(q===0)q=undefined;o(c('LiveMapActiveStreamActions').resetActiveStreamTimeout(q));},setMap:function p(q){o(c('LiveMapMapActions').setWebGLMap(q));},setMapViewport:function p(q,r){o(c('LiveMapVideoCacheActions').updatePollerForZoom(q));o(c('LiveMapMapActions').setMapViewData(q,r));o(c('LiveMapVideoCacheActions').dynamicGeoFetch());},setStreamsInView:function p(q){o(c('LiveMapMapActions').setVideosInView(q));}};}f.exports=k(m,n)(l);}),null);
__d('LiveMapViewRoot.react',['cx','LiveMapExperiments','LiveMapSidebar.container.react','LiveMapWebGLMap.container.react','LiveMapLeafletMap.container.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('LiveMapExperiments').webgl?c('React').createElement(c('LiveMapWebGLMap.container.react'),null):c('React').createElement(c('LiveMapLeafletMap.container.react'),null),m=c('LiveMapExperiments').webgl?"_2d0a":'';return (c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_lia"},l,c('React').createElement(c('LiveMapSidebar.container.react'),null))));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('LiveVideosRoot.react',['cx','fbt','LiveMapViewRoot.react','React','LiveMapExperiments','CurrentUser','LiveMapGoLiveButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.$LiveVideosRoot1=function(){return (c('React').createElement(c('LiveMapViewRoot.react'),babelHelpers['extends']({key:'map'},this.props)));};l.prototype.$LiveVideosRoot2=function(){if(!c('LiveMapExperiments').goLive)return null;var m=i._("Go Live");return (c('React').createElement('div',{className:"_38tz"},c('React').createElement(c('LiveMapGoLiveButton.react'),{label:m})));};l.prototype.render=function(){return (c('React').createElement('div',null,this.$LiveVideosRoot1(),this.$LiveVideosRoot2()));};f.exports=l;}),null);
__d('LiveVideosRoot.container.react',['LiveVideosRoot.react','React','ReactRedux','LiveMapVideoCacheActions','LiveMapChannelPlayerActions','LiveMapMapActions','Visibility','LiveMapVideoPlayerActions'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactRedux').connect,k=c('LiveMapVideoPlayerActions').setChannelID;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(o){i.constructor.call(this,o);this.$LiveVideosRootContainer1=[];}l.prototype.componentWillMount=function(){this.props.setChannelID(this.props.channelID);this.props.setUserLocation(this.props.userLocation);this.props.initializeMapPollers();if(this.props.videoID)this.props.openChannelPlayerForVideo(this.props.videoID);this.$LiveVideosRootContainer1.push(c('Visibility').addListener(c('Visibility').HIDDEN,this.props.pauseAllMapPolling));this.$LiveVideosRootContainer1.push(c('Visibility').addListener(c('Visibility').VISIBLE,this.props.resumeMapPolling));};l.prototype.componentWillUnmount=function(){this.props.stopMapPollers();this.$LiveVideosRootContainer1.forEach(function(o){return o.remove();});};l.prototype.render=function(){var o=babelHelpers['extends']({},this.state,this.props);return c('React').createElement(c('LiveVideosRoot.react'),o);};var m=null,n=function o(p){return {initializeMapPollers:function q(){p(c('LiveMapVideoCacheActions').initializeAllMapPolling());},openChannelPlayerForVideo:function q(r){p(c('LiveMapChannelPlayerActions').openChannelPlayer(r,null));},stopMapPollers:function q(){p(c('LiveMapVideoCacheActions').stopAllMapPolling());},pauseAllMapPolling:function q(){p(c('LiveMapVideoCacheActions').pauseAllMapPolling());},resumeMapPolling:function q(){p(c('LiveMapVideoCacheActions').resumeMapPolling());},setChannelID:function q(r){p(k(r));},setUserLocation:function q(r){p(c('LiveMapMapActions').setUserLocation(r));}};};f.exports=j(m,n)(l);}),null);
__d('LiveMapProvider.react',['LiveVideosRoot.container.react','ReactRedux','React','PublicLiveMapPage','LiveMapReduxStore'],(function a(b,c,d,e,f,g){var h,i,j=c('ReactRedux').Provider;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){'use strict';c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.JS_LOADED);i.constructor.call(this,l);}k.prototype.componentDidMount=function(){'use strict';c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.APP_MOUNTED);};k.prototype.render=function(){'use strict';return (c('React').createElement(j,{store:c('LiveMapReduxStore')},c('React').createElement(c('LiveVideosRoot.container.react'),this.props)));};f.exports=k;}),null);
__d('PublicLiveMapArtilleryClient',['Promise','Artillery','ArtilleryCategory','ArtillerySequenceType','PublicLiveMapPage'],(function a(b,c,d,e,f,g){'use strict';var h={start:function k(){if(!c('Artillery').isEnabled()||!window._cstart)return;var l=c('Artillery').getPageTrace();i(c('PublicLiveMapPage').Events.JS_LOADED,c('PublicLiveMapPage').Events.APP_MOUNTED,c('PublicLiveMapPage').Events.INITIAL_DATA_FETCHED,c('PublicLiveMapPage').Events.PUBLIC_CIRCLES_RENDERED).done(function(m){var n=m[0],o=m[1],p=m[2],q=m[3],r=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'requiring_modules',begin:window._cstart,end:n}),s=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'mounting_app',begin:n,end:o}),t=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'fetching_data',begin:o,end:p}),u=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'rendering_public_circles',begin:p,end:q}),v=l.createSequence({category:c('ArtillerySequenceType').SEQUENCE_CLIENT,description:'initialization'});v.addSegment(r,s,t,u);l.markSegment(u,'first_marker_shown');l.post();});}};function i(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];return c('Promise').all(l.map(j));}function j(k){return new (c('Promise'))(function(l){c('PublicLiveMapPage').addRetroactiveListener(k,function(m){c('PublicLiveMapPage').removeCurrentListener();l(m);});});}f.exports=h;}),null);