if (self.CavalryLogger) { CavalryLogger.start_js(["pmhcL"]); }

__d("PagePhotosTabConfig",[],(function a(b,c,d,e,f,g){f.exports={NUM_EACH_LOAD_MORE:28,NUM_FIRST_LOAD:28,NUM_FIRST_LOAD_PLACEHOLDER:4,PHOTO_SIZE:200};}),null);
__d("PhotosUploaderConst",[],(function a(b,c,d,e,f,g){f.exports={REF_ALBUM:"album",REF_EMPTY_ALBUM:"album_empty",REF_ALBUMS:"albums",REF_GROUP_ALBUMS:"group_albums",REF_EMPTY_ALBUMS:"albums_empty",REF_CENTER_STAGE:"center_stage",REF_COMPOSER:"composer",REF_DASHBOARD:"dashboard",REF_FBX_COMPOSER:"fbx_composer",REF_FBX_PROFILE:"fbx_profile",REF_FEED_TEST:"feed_test",REF_NETEGO:"netego",REF_PLUGIN:"plugin",REF_PRO_COMPOSER:"pro_composer",REF_GROUPS_COMPOSER:"groups_composer",REF_PAGES_COMPOSER:"pages_composer",REF_PROFILE:"profile",REF_UNKNOWN:"unknown_FIXME",REF_MAP:"map",REF_EDIT_ALBUM_HEADER:"edit_album_header",REF_UPLOAD_OVERLAY:"upload_overlay",REF_DRAFT_RECOVERY:"draft_recovery_dialog",REF_REACT_COMPOSER:"react_composer",REF_PORTFOLIO_PHOTOS:"portfolio_photos",REF_PORTFOLIO_PHOTOS_STREAM:"portfolio_photos_stream",REF_PORTFOLIO_STREAM_ELEMENT:"portfolio_photos_stream_element",REF_PORTFOLIO_ALBUMS:"portfolio_photos_albums",REF_PORTFOLIO_ALBUMS_ADD_MORE:"portfolio_photos_albums_add_more",REF_PORTFOLIO_ALBUM_PERMALINK:"portfolio_photos_albums",REF_PORTFOLIO_EMPTY_ALBUMS:"portfolio_photos_albums_empty",REF_PORTFOLIO_SET:"portfolio_set",REF_MEDLEY:"medley",REF_ARCHIVE:"archive",REF_M_NUX_WIZARD:"m_nux_wizard",REF_M_UPLOAD_PIC:"m_upload_pic",REF_VAULT_NOTIFICATION:"vault_notification",REF_INTERN_EXPLORER:"intern_explorer",PARAM_RETURN_URI:"return_uri",PARAM_RETURN_URI_ERROR:"return_uri_error",RESOLUTION_STANDARD:"standard",RESOLUTION_HIGH:"high"};}),null);
__d("PhotosUploadWaterfallApplications",[],(function a(b,c,d,e,f,g){f.exports={SIMPLE:"simple",HTML5:"html5",MULTI:"multi",COMPOSER:"composer",API:"api",ARCHIVE:"archive",MESSENGER:"messenger",CHAT:"chat",ATTACH_PHOTOS:"attach_photos",OMNIPICKER:"web_omnipicker"};}),null);
__d('FeedbackLikeActions',['invariant','GraphQLMutationAction','GraphQLMutationQueryCreator','Relay','fromGraphQL'],(function a(b,c,d,e,f,g,h){'use strict';function i(k,l,m){var n={id:k,does_viewer_like:m};if(l.likers&&l.likers.count!=null){var o=m?1:-1;n.likers={count:l.likers.count+o};}var p={},q=m?'feedback_like':'feedback_unlike';p[q]={feedback:n};return p;}var j={handleLikeChange:function k(l,m){var n=c('fromGraphQL').Query(function(t){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:c('Relay').QL.__var(t)}],children:[{directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'does_viewer_like',kind:'Field',metadata:{},type:'Boolean'},{children:[{fieldName:'count',kind:'Field',metadata:{},type:'Int'}],directives:[{kind:'Directive',name:'fixme_fat_interface',args:[]}],fieldName:'likers',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'LikersOfContentConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'FeedbackLikeActions',type:'Node'};}(l)),o=c('Relay').Store.readQuery(n)[0];o||h(0);if(o.does_viewer_like===m)return;var p=new (c('GraphQLMutationAction'))('feedback_like_'+l),q=i(l,o,m);p.runOptimisticAction(q);var r,s;if(m){r=c('GraphQLMutationQueryCreator').createQuery('feedback_like',{feedback:l});s=function(t){return {calls:[{kind:'Call',metadata:{},name:'feedback_like',value:{kind:'CallVariable',callVariableName:'input'}}],children:[].concat.apply([],[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(t)]),kind:'Mutation',metadata:{inputType:'FeedbackLikeData!'},name:'FeedbackLikeActions',responseType:'FeedbackLikeResponsePayload'};}(r);}else{r=c('GraphQLMutationQueryCreator').createQuery('feedback_unlike',{feedback:l});s=function(t){return {calls:[{kind:'Call',metadata:{},name:'feedback_unlike',value:{kind:'CallVariable',callVariableName:'input'}}],children:[].concat.apply([],[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(t)]),kind:'Mutation',metadata:{inputType:'FeedbackUnlikeData!'},name:'FeedbackLikeActions',responseType:'FeedbackUnlikeResponsePayload'};}(r);}p.runServerAction(s,{feedback_id:l});}};f.exports=j;}),null);
__d("Collection",[],(function a(b,c,d,e,f,g){function h(i,j){if(!i.__collection__){var k=new Function();for(var l in i.prototype)k.prototype[l]=h._call.bind(null,l);i.__collection__=k;}var m=new i.__collection__();m._elements=j;return m;}h._call=function(i){var j=Array.prototype.slice.call(arguments,1);this._elements.forEach(function(k){k[i].apply(k,j);});return this;};f.exports=h;}),null);
__d('Drag',['Event','Arbiter','DOM','Style','Vector'],(function a(b,c,d,e,f,g){var h={};h.currentDraggable=null;h.grab=function(i){if(h.currentDraggable)h._onmouseup();i.lastDragOver=null;h.attachDragEvents();h.currentDraggable=i;};h.attachDragEvents=function(){document.onselectstart=function(){document.onselectstart=null;return false;};if(h.dragEventsAttached)return;h.dragEventsAttached=true;c('Arbiter').subscribe('scroller/scroll',h._onmousemove);c('Event').listen(document,{mousemove:h._onmousemove,mouseup:h._onmouseup});};h.droppables={};h.addDroppable=function(i,j){(h.droppables[i]=h.droppables[i]||[]).push(j);};h.removeDroppable=function(i,j){h.droppables[i]=h.droppables[i].filter(function(k){return k!=j;});};h.getOffsetParent=function(i){if(c('DOM').isNodeOfType(i,['body','html']))return document.body;while((i=i.parentNode)&&i!==document.body)if(c('Style').get(i,'position')!=='static')return i;return document.body;};h._onmousemove=function(event,i){if(!h.currentDraggable)return;var j=i||c('Vector').getEventPosition(event),k=h.currentDraggable,l=h.droppables[k.namespace];if(k.namespace&&k.active&&l){var m={};l.forEach(function(s){m[s.zIndex]=s.zIndex;});var n=[];for(var o in m)n.push(m[o]);n.sort();var p=k.lastDragOver,q=null;for(var r=n.length-1;r>=0;r--)if(p&&p.dom!=null&&p.zIndex==n[r]&&p.isDraggedOver(j)){q=p;break;}else for(o=0;o<l.length;o++){if(n[r]!=l[o].zIndex)continue;if(p!=l[o]&&k.dom!=l[o].dom&&l[o].isDraggedOver(j)){q=l[o];r=-1;break;}}if(q&&q!=p){q.ondragover(k);h.currentDraggable.adjustCursorPosition();}if(q)q.ondragmove(k,j.sub(c('Vector').getElementPosition(q.dom)));k.lastDragOver=q;}h.currentDraggable._onmousemove(j);};h._onmouseup=function(i){document.onselectstart=null;if(h.currentDraggable){h.currentDraggable._ondrop();h.currentDraggable=null;}};f.exports=h;}),null);
__d('Draggable',['Event','Arbiter','Collection','DOM','Drag','Rect','Style','Vector','emptyFunction'],(function a(b,c,d,e,f,g){function h(j){'use strict';this.canvas=j;this.scrollZone=50;this.velocity=100;this.coefficient=1;}h.prototype.activate=function(){'use strict';this.activate=c('emptyFunction');this.event=c('Event').listen(document,'mousemove',this._onmousemove.bind(this));this.interval=setInterval(this._intervalHandler.bind(this),50);this.cursor=null;};h.prototype.deactivate=function(){'use strict';delete this.activate;this.event&&this.event.remove();this.event=null;clearInterval(this.interval);};h.prototype._onmousemove=function(event){'use strict';this.cursor=c('Vector').getEventPosition(event);};h.prototype._intervalHandler=function(){'use strict';if(!this.cursor)return;var j=this.canvas==document.body?c('Rect').getViewportBounds():new (c('Rect'))(this.canvas),k=new (c('Rect'))(this.cursor.y-j.t,j.r-this.cursor.x,j.b-this.cursor.y,this.cursor.x-j.l),l=new (c('Vector'))(0,0);if(k.t<k.b&&k.t<this.scrollZone){l.y=-this.scrollZone+k.t;}else if(k.b<this.scrollZone)l.y=this.scrollZone-k.b;l.y=this._doMath(l.y);if(k.l<k.r&&k.l<this.scrollZone){l.x=-this.scrollZone+k.l;}else if(k.r<this.scrollZone)l.x=this.scrollZone-k.r;l.x=this._doMath(l.x);if(l.x||l.y){l.scrollElementBy(this.canvas);if(document.body==this.canvas){var m=c('Vector').getScrollPosition();l.scrollElementBy(this.canvas);var n=c('Vector').getScrollPosition();this.cursor=this.cursor.add(n.sub(m));}else l.scrollElementBy(this.canvas);c('Arbiter').inform('scroller/scroll',this.cursor);}};h.prototype._doMath=function(j){'use strict';j=j>=0?Math.min(j,this.scrollZone):Math.max(j,-this.scrollZone);return Math.floor(Math.pow(j/this.scrollZone*this.velocity,this.coefficient));};h.findScrollParent=function(j){'use strict';var k;j=j.parentNode;while(j){if(j.scrollHeight!=j.offsetTop){k=c('Style').get(j,'overflowY');if(k=='scroll'||k=='auto')return j;}j=j.parentNode;}return document.body;};function i(j){'use strict';if(!j)throw new Error('Element should be a DOM node');if(!(this instanceof i)){if(j instanceof Array){var k=[];j.forEach(function(l){k.push(new i(l));});return new (c('Collection'))(i,k);}else return new i(j);}else{this.data={};this.handles=[];this.dom=j;this.dragFrictionCoefficient=1;this.boundingBox=null;this.useScroller=true;this.grabPctX=this.grabPctY=0;this._shouldKillEvents=true;this.addHandle(this.dom);}}i.prototype.destroy=function(){'use strict';this.handles.forEach(function(j){this.removeHandle(j.obj);}.bind(this));this.data=this.dom=null;};i.prototype.adjustCursorPosition=function(){'use strict';var j=c('Vector').getElementDimensions(this.dom);this.cursorPositionVector=new (c('Vector'))(parseInt(this.grabPctX*j.x,10),parseInt(this.grabPctY*j.y,10));};i.prototype._onclick=function(event){'use strict';if(!this._shouldKillEvents)return true;if(this.active)return c('Event').kill(event);};i.prototype._ongrab=function(j){'use strict';this.ongrab();if(this.useScroller){if(!this.scroller)this.scroller=new h(h.findScrollParent(this.dom));this.scroller.activate();}if(this.active){if(!this.oldPosition)this.oldPosition=this.dom.style.position;var k=c('Drag').getOffsetParent(this.dom);if(k!==document.body)j=j.sub(c('Vector').getElementPosition(k));this.dom.style.position=this.absolute?'absolute':'relative';j.sub(this.cursorPositionVector).setElementPosition(this.dom);}};i.prototype._onmousedown=function(event){'use strict';if(!(event.which&&event.which===1||event.button&&event.button===1))return;var j=event.getTarget();if(c('DOM').isNodeOfType(j,['input','select','textarea','object','embed']))return true;var k=c('Vector').getEventPosition(event),l=c('Vector').getElementDimensions(this.dom);this.draggableInitialVector=c('Vector').getElementPosition(this.dom);this.cursorPositionVector=k.sub(this.draggableInitialVector);this.grabPctX=l.x===0?0:this.cursorPositionVector.x/l.x;this.grabPctY=l.y===0?0:this.cursorPositionVector.y/l.y;c('Drag').grab(this,event);if(this.gutter){this.cursorInitialVector=k;}else{this._setActive(true);this._ongrab(k);}if(!this._shouldKillEvents)return true;return c('Event').kill(event);};i.prototype._onmousemove=function(j){'use strict';if(!this.active)if(j.distanceTo(this.cursorInitialVector)>=this.gutter){this._setActive(true);this._ongrab(j);}if(this.active){var k=j.sub(this.cursorPositionVector),l;if(this.boundingBox){var m=c('Rect').newFromVectors(k,c('Vector').getElementDimensions(this.dom));m=m.boundWithin(this.boundingBox);k=m.getPositionVector();if(this.boundingBox.w()===0){l=new (c('Vector'))(this.draggableInitialVector.x,k.y,'document');}else if(this.boundingBox.h()===0){l=new (c('Vector'))(k.x,this.draggableInitialVector.y,'document');}else l=k;}else l=k;var n=c('Drag').getOffsetParent(this.dom);if(n!==document.body)l=l.sub(c('Vector').getElementPosition(n));l=l.mul(this.dragFrictionCoefficient);l.setElementPosition(this.dom);this.ondrag(j);}};i.prototype._ondrop=function(){'use strict';this.scroller&&this.scroller.deactivate();if(this.active){setTimeout(function(){this._setActive(false);}.bind(this),0);this.ondrop(this.scroller&&this.scroller.cursor);if(this.lastDragOver)this.lastDragOver.ondrop(this);}};i.prototype.killDrag=function(){'use strict';this._setActive(false);c('Drag')._onmouseup();};i.prototype.forceDrop=function(){'use strict';c('Drag')._onmouseup();};i.prototype.triggerMouseDown=function(event){'use strict';this._onmousedown(event);};i.prototype.setBoundingBox=function(j){'use strict';this.boundingBox=j;return this;};i.prototype.resetPosition=function(){'use strict';this.dom.style.position=this.oldPosition;this.oldPosition=null;this.dom.style.left='';this.dom.style.top='';return this;};i.prototype.setUseAbsolute=function(j){'use strict';this.absolute=j;return this;};i.prototype.setDragHandler=function(j){'use strict';this.ondrag=j;return this;};i.prototype.setGrabHandler=function(j){'use strict';this.ongrab=j;return this;};i.prototype.setDropHandler=function(j){'use strict';this.ondrop=j;return this;};i.prototype.setGutter=function(j){'use strict';this.gutter=j;return this;};i.prototype.setNamespace=function(j){'use strict';this.namespace=j;return this;};i.prototype.setUseScroller=function(j){'use strict';this.useScroller=j;return this;};i.prototype.setAvoidKillingEvents=function(j){'use strict';this._shouldKillEvents=!j;return this;};i.prototype.setDragFrictionCoefficient=function(j){'use strict';this.dragFrictionCoefficient=j;return this;};i.prototype.addHandle=function(j){'use strict';if(this.handles.length==1&&this.handles[0].obj==this.dom)this.removeHandle(this.dom);this.handles.push({obj:j,evt:[c('Event').listen(j,'mousedown',this._onmousedown.bind(this)),c('Event').listen(j,'click',this._onclick.bind(this)),c('Event').listen(j,'drag',this._killUnlessActive.bind(this)),c('Event').listen(j,'selectstart',this._killUnlessActive.bind(this))]});return this;};i.prototype.removeHandle=function(j){'use strict';this.handles=this.handles.filter(function(k){if(k.obj!=j){return true;}else{k.evt.forEach(function(l){l.remove();});return false;}});};i.prototype.getDOM=function(){'use strict';return this.dom;};i.prototype.setKey=function(j,k){'use strict';this.data[j]=k;return this;};i.prototype.getKey=function(j){'use strict';return this.data[j];};i.prototype._setActive=function(j){'use strict';if(!this.dom)return;this.dom.activeDrag=this.active=j;for(var k=0;k<this.handles.length;k++)this.handles[k].obj.activeDrag=j;};i.prototype._killUnlessActive=function(j){'use strict';if(!this._shouldKillEvents)return;if(j.getTarget()!==document.activeElement)return j.kill();};i.prototype.ondrag=c('emptyFunction');i.prototype.ongrab=c('emptyFunction');i.prototype.ondrop=c('emptyFunction');i.prototype.gutter=0;i.prototype.handles=null;f.exports=i;}),null);
__d('Droppable',['Collection','Drag','Draggable','Vector','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';if(!i)throw new Error('Element should be a DOM node');if(!(this instanceof h)){if(i instanceof Array){var j=[];i.forEach(function(k){j.push(new h(k));});return new (c('Collection'))(h,j);}else return new h(i);}else{this.data={};this.dom=i;this.namespace=null;}}h.prototype.destroy=function(){'use strict';if(this.namespace)c('Drag').removeDroppable(this.namespace,this);this.data=this.dom=null;};h.prototype.setNamespace=function(i){'use strict';if(this.namespace)c('Drag').removeDroppable(this.namespace,this);this.namespace=i;c('Drag').addDroppable(i,this);return this;};h.prototype.setZIndex=function(i){'use strict';this.zIndex=i;return this;};h.prototype.hasPointMovedHorizontally=function(i){'use strict';var j=c('Vector').getElementPosition(this.dom);return j.x<=i.x&&this.dom.offsetWidth+j.x>i.x;};h.prototype.hasPointMovedVertically=function(i){'use strict';var j=c('Vector').getElementPosition(this.dom);return j.y<=i.y&&this.dom.offsetHeight+j.y>i.y;};h.prototype.hasPointMovedInside=function(i){'use strict';return this.hasPointMovedHorizontally(i)&&this.hasPointMovedVertically(i);};h.prototype.setDragOverHandler=function(i){'use strict';this.ondragover=i;return this;};h.prototype.setDragOverVectically=function(){'use strict';this.isDraggedOver=h.prototype.hasPointMovedVertically;return this;};h.prototype.setDragOverHorizontally=function(){'use strict';this.isDraggedOver=h.prototype.hasPointMovedHorizontally;return this;};h.prototype.setDragMoveHandler=function(i){'use strict';this.ondragmove=i;return this;};h.prototype.setDropHandler=function(i){'use strict';this.ondrop=i;return this;};h.prototype.zIndex=0;h.prototype.isDraggedOver=h.prototype.hasPointMovedInside;h.prototype.ondragover=c('emptyFunction');h.prototype.ondragmove=c('emptyFunction');h.prototype.ondrop=c('emptyFunction');h.prototype.getDOM=c('Draggable').prototype.getDOM;h.prototype.setKey=c('Draggable').prototype.setKey;h.prototype.getKey=c('Draggable').prototype.getKey;f.exports=h;}),null);
__d('SortableGroup',['Arbiter','CSS','DOM','Draggable','Droppable','Style','Vector','emptyFunction','removeFromArray'],(function a(b,c,d,e,f,g){function h(){'use strict';this.namespace='sortable'+ ++h.instanceCount;this.draggables={};this.droppables={};this.sortables={};this.linkedGroups=[];this.linkedGroups.onbeforelinkjump=c('emptyFunction');this.linkedGroups.onlinkjump=c('emptyFunction');this.rootNode=null;this.boundingBox=null;this.neverEmpty=false;this.hasEmptyMessage=false;this.isDroppable=true;this.isDraggable=true;this.useScroller=true;this.dragOverCriteria='inside';this.requireSameParent=true;this.previousIndexList=[];this.anchor=null;this.disabled=false;this.autoWidth=false;this.placeholderWidth=false;this.placeholderHeight=false;}h.prototype.addEmptyMessage=function(i,j){'use strict';var k='placeholder';if(i.parentNode!=j)c('DOM').appendContent(j,i);this.emptyMessage=i;this._initializeAdded(k,i);this.hasEmptyMessage=true;this.sortables[k]=i;this.droppables[k]=new (c('Droppable'))(i).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,k));return this;};h.prototype.setAutoWidth=function(i){'use strict';this.autoWidth=i;return this;};h.prototype.setPlaceholderWidth=function(i){'use strict';this.placeholderWidth=i;return this;};h.prototype.setPlaceholderHeight=function(i){'use strict';this.placeholderHeight=i;return this;};h.prototype.setUseScroller=function(i){'use strict';this.useScroller=i;return this;};h.prototype.setDragOverHorizontally=function(){'use strict';this.dragOverCriteria='horizontal';return this;};h.prototype.setDragOverVertically=function(){'use strict';this.dragOverCriteria='vertical';return this;};h.prototype.removeEmptyMessage=function(){'use strict';if(this.emptyMessage)c('DOM').remove(this.emptyMessage);this.hasEmptyMessage=false;this.removeSortable('placeholder');return this;};h.prototype.addSortable=function(i,j,k,l){'use strict';this._initializeAdded(i,j);this.sortables[i]=j;this.draggables[i]=new (c('Draggable'))(j).setNamespace(this.namespace).setGutter(this.gutter).setUseAbsolute(true).setUseScroller(this.useScroller).setGrabHandler(this.grabHandler.bind(this,i)).setDropHandler(this.dropHandler.bind(this,i,l)).setKey('key',i).setBoundingBox(this.boundingBox);if(k)this.draggables[i].addHandle(k);this.droppables[i]=new (c('Droppable'))(j).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,i));if(this.dragOverCriteria==='horizontal'){this.droppables[i].setDragOverHorizontally();}else if(this.dragOverCriteria==='vertical')this.droppables[i].setDragOverVectically();return this;};h.prototype.destroy=function(){'use strict';for(var i in this.droppables)this.droppables[i].destroy();for(var j in this.draggables)this.draggables[j].destroy();this.droppables=this.draggables=this.rootNode=null;c('removeFromArray')(this.linkedGroups,this);for(var k=0;k<this.linkedGroups.length;k++)this.linkedGroups[k].linkedGroups=this.linkedGroups;};h.prototype.dragOverHandler=function(i,j){'use strict';if(!this.isDroppable&&!this.anchor)return;var k=false;if(!(j in this.draggables)){this.linkedGroups.onbeforelinkjump.call(this,j);if(!this.migrateLinkedSortable(j))throw new Error('Draggable dropped onto a foreign droppable!');k=true;}var l=true,m=this.getSortables(),n=this.sortables[j],o=this.sortables[i];if(!this.anchor){var p=m.length;for(var q=0;q<p;q++)if(m[q]==o){break;}else if(m[q]==n){l=false;break;}}else o=this.anchor;this.onbeforedragover(n,o);var r=this.linkedGroups.placeholder;this.insertPlaceholder(r,o,l||this.anchor);r.parentNode.insertBefore(n,r);this.ondragover(n,o,j,i);if(k)this.linkedGroups.onlinkjump.call(this,j);};h.prototype.dropHandler=function(i,j){'use strict';if(this._checkLastRemaining()){this.draggables[i].resetPosition();return;}var k=this.linkedGroups.placeholder;c('CSS').removeClass(this.sortables[i],'drag');this.draggables[i].resetPosition();k.parentNode.insertBefore(this.sortables[i],k);k.parentNode.removeChild(k);for(var l=0;l<this.linkedGroups.length;l++)if(this.linkedGroups[l].anchor)delete this.linkedGroups[l].anchor;this.ondropcallback(i,this.sortables[i]);this.onorderchange();if(this.previousIndexList.length===0)this.previousIndexList=Object.keys(this.sortables);var m=this.previousIndexList.indexOf(i),n=this.getOrder().indexOf(i);c('Arbiter').inform('drag-and-drop/'+j,{previousIndex:m,currentIndex:n});this.previousIndexList=this.getOrder();};h.prototype.getOrder=function(){'use strict';var i=[],j=this.getSortables();for(var k=0;k<j.length;k++)for(var l in this.sortables)if(this.sortables[l]==j[k]){i.push(l);break;}return i;};h.prototype.getSortables=function(){'use strict';return this.rootNode?this.rootNode.childNodes:[];};h.prototype.grabHandler=function(i){'use strict';if(this.disabled||this._checkLastRemaining()||!this.isDraggable){this.draggables[i].killDrag();return;}this.onbeforegrabcallback(this.sortables[i],i);var j=this.linkedGroups.placeholder,k=this.sortables[i];c('CSS').setClass(j,k.className);c('CSS').addClass(j,'droppable_placeholder');c('CSS').addClass(k,'drag');c('Vector').getElementDimensions(k).setElementDimensions(j);if(this.autoWidth){c('Style').set(j,'width','auto');}else if(this.placeholderWidth)c('Style').set(j,'width',this.placeholderWidth+'px');if(this.placeholderHeight)c('Style').set(j,'height',this.placeholderHeight+'px');k.parentNode.insertBefore(j,k);this.ongrabcallback(this.sortables[i],i);if(!this.isDroppable){this.anchor=k.nextSibling;if(!this.anchor){this.anchor=c('DOM').create('div');k.parentNode.appendChild(this.anchor);}}};h.prototype.insertPlaceholder=function(i,j,k){'use strict';if(k){c('DOM').insertBefore(j,i);}else c('DOM').insertAfter(j,i);};h.prototype.keyExists=function(i){'use strict';return this.sortables[i];};h.prototype.link=function(i){'use strict';i.linkedGroups=this.linkedGroups;if(!this.linkedGroups.length)this.linkedGroups.push(this);this.linkedGroups.push(i);for(var j=0;j<this.linkedGroups.length;j++)if(this.linkedGroups[j].namespace!=this.namespace){this.linkedGroups[j].namespace=this.namespace;for(var k in this.linkedGroups[j].droppables){this.linkedGroups[j].droppables[k].setNamespace(this.namespace);var l=this.linkedGroups[j].draggables[k];l&&l.setNamespace(this.namespace);}}return this;};h.prototype.migrateLinkedSortable=function(i){'use strict';for(var j=0;j<this.linkedGroups.length;j++)if(i in this.linkedGroups[j].draggables){this.sortables[i]=this.linkedGroups[j].sortables[i];this.draggables[i]=this.linkedGroups[j].draggables[i];this.draggables[i].setGrabHandler(this.grabHandler.bind(this,i)).setDropHandler(this.dropHandler.bind(this,i));this.droppables[i]=this.linkedGroups[j].droppables[i];this.droppables[i].setDragOverHandler(this._dragOverHandlerShim.bind(this,i));delete this.linkedGroups[j].sortables[i];delete this.linkedGroups[j].draggables[i];delete this.linkedGroups[j].droppables[i];return true;}return false;};h.prototype.removeSortable=function(i){'use strict';if(i in this.sortables){if(i in this.draggables)this.draggables[i].destroy();if(i in this.droppables)this.droppables[i].destroy();delete this.draggables[i];delete this.droppables[i];delete this.sortables[i];}};h.prototype.removeAllSortables=function(){'use strict';for(var i in this.sortables)this.removeSortable(i);};h.prototype.setDisabled=function(i){'use strict';this.disabled=i;return this;};h.prototype.forceDrop=function(i){'use strict';if(i in this.sortables)this.draggables[i].forceDrop();};h.prototype.killDrag=function(i){'use strict';if(i in this.sortables)this.draggables[i].killDrag();};h.prototype.setBeforeGrabCallback=function(i){'use strict';this.onbeforegrabcallback=i;return this;};h.prototype.setBoundingBox=function(i){'use strict';this.boundingBox=i;for(var j in this.draggables)this.draggables[j].setBoundingBox(this.boundingBox);return this;};h.prototype.setBeforeDragOverCallback=function(i){'use strict';this.onbeforedragover=i;return this;};h.prototype.setDragOverCallback=function(i){'use strict';this.ondragover=i;return this;};h.prototype.setDropCallback=function(i){'use strict';this.ondropcallback=i;return this;};h.prototype.setDroppable=function(i){'use strict';this.isDroppable=i;return this;};h.prototype.setDraggable=function(i){'use strict';this.isDraggable=i;return this;};h.prototype.setGrabCallback=function(i){'use strict';this.ongrabcallback=i;return this;};h.prototype.setBeforeLinkJumpHandler=function(i){'use strict';this.linkedGroups.onbeforelinkjump=i;return this;};h.prototype.setInsertPlaceholderHandler=function(i){'use strict';this.insertPlaceholder=i;};h.prototype.setLinkJumpHandler=function(i){'use strict';this.linkedGroups.onlinkjump=i;return this;};h.prototype.setNeverEmpty=function(i){'use strict';this.neverEmpty=i;};h.prototype.setOrderChangeHandler=function(i){'use strict';this.onorderchange=i;return this;};h.prototype.setRequireSameParent=function(i,j){'use strict';this.requireSameParent=j;};h.prototype.setSortablesGetter=function(i){'use strict';this.getSortables=i;};h.prototype._checkLastRemaining=function(i){'use strict';var j=this.hasEmptyMessage?2:1;return this.neverEmpty&&this.getSortables().length==j;};h.prototype._dragOverHandlerShim=function(i,j){'use strict';this.dragOverHandler(i,j.getKey('key'));};h.prototype._initializeAdded=function(i,j){'use strict';if(this.rootNode===null){this.rootNode=j.parentNode;if(!this.linkedGroups.placeholder)this.linkedGroups.placeholder=c('DOM').create(j.tagName,{className:'dragPlaceholder',style:{padding:'0'}});}else if(this.requireSameParent&&this.rootNode!=j.parentNode)throw new Error('All sortables of a collection must share the same parentNode');if(i in this.draggables)throw new Error('All sortables must have a unique key');};h.instanceCount=0;Object.assign(h.prototype,{gutter:15,onbeforegrabcallback:c('emptyFunction'),onbeforedragover:c('emptyFunction'),ondragover:c('emptyFunction'),ondropcallback:c('emptyFunction'),ongrabcallback:c('emptyFunction'),onorderchange:c('emptyFunction')});f.exports=b.SortableGroup||h;}),null);
__d("XAlbumUploadOverlayController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/album\/uploader\/",{application:{type:"String"},xapplication:{type:"String"},owner_id:{type:"Int"},session_id:{type:"String"},qn:{type:"String"},ref:{type:"String"},privacy_row:{type:"String"},set_token:{type:"String"},target_id:{type:"Int"},album_id:{type:"Int"},num_selected:{type:"Int"}});}),null);
__d('PagePhotosTabAddPhotosGridItem.react',['ix','cx','fbt','HTML5FilePicker','Image.react','Link.react','PhotosUploaderConst','PhotosUploadWaterfallApplications','PUWApplications','React','ReactDOM','Relay','UploadSession','WaterfallIDGenerator','XAlbumUploadOverlayController','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m='photos_tab_add_album_new_photos_session_id';k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.componentDidMount=function(){var o=c('ReactDOM').findDOMNode(this.refs.addPhotosAlbumConfirmButtonID);if(o!==null){var p=new (c('HTML5FilePicker'))(o,{accept:'image/*',multiple:true,qn:m});c('UploadSession').addFilePickerToSession(m,p);}};n.prototype.render=function(){if(!this.props.album.can_upload)return null;var o=c('XAlbumUploadOverlayController').getURIBuilder().setInt('owner_id',this.props.pageID).setInt('album_id',this.props.album.id).setString('application',c('PhotosUploadWaterfallApplications').HTML5).setString('xapplication',c('PUWApplications').WEB_HTML5).setString('session_id',m).setString('qn',c('WaterfallIDGenerator').generate()).setString('ref',c('PhotosUploaderConst').REF_PORTFOLIO_PHOTOS).getURI();return (c('React').createElement('div',{className:"_2eea"},c('React').createElement('div',{className:"_5hs0"},c('React').createElement('div',{className:"_fh4"},c('React').createElement(c('Image.react'),{className:"_1a2o",height:24,src:h("116961"),width:24}),c('React').createElement('span',{className:"_1a2p _1a2o _2pir"},j._("Add Photos"))),c('React').createElement(c('Link.react'),{ajaxify:o,className:"_4f7b",href:'#',ref:'addPhotosAlbumConfirmButtonID',rel:'async-post'}))));};function n(){k.apply(this,arguments);}f.exports=c('Relay').createContainer(n,{fragments:{album:function o(){return function(){return {children:[{fieldName:'can_upload',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagePhotosTabAddPhotosGridItem_react_AlbumRelayQL',type:'Album'};}();}}});}),null);
__d('PagePhotosTabAlbumPhotosReorder',['csx','AsyncRequest','AsyncResponse','DOMQuery','SortableGroup'],(function a(b,c,d,e,f,g,h){var i={createSortableGroup:function j(k,l,m){var n=new (c('SortableGroup'))().setOrderChangeHandler(function(){new (c('AsyncRequest'))().setURI('/ajax/photos/reorder.php').setData({album_fbid:l,order:n.getOrder(),owner:k}).setErrorHandler(function(o){c('AsyncResponse').defaultErrorHandler(o);}).send();});c('DOMQuery').scry(m,"._4zc-").forEach(function(o){n.addSortable(o.getAttribute('data-token'),o);});n.setPlaceholderWidth(205);n.setPlaceholderHeight(201);}};f.exports=i;}),null);
__d('XEditablePhotoRemoveDialog.react',['cx','fbt','LayerHideOnEscape','React','XUIButton.react','XUICloseButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onHide=function(){this.props.onCancel();}.bind(this),this.onCancel=function(){this.props.onCancel();}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.refs.dialog.layer.subscribe('hide',this.onHide);};m.prototype.render=function(){'use strict';return (c('React').createElement(c('XUIDialog.react'),{ref:'dialog',shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c('LayerHideOnEscape')},key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Delete Photo"),c('React').createElement(c('XUICloseButton.react'),{className:"_51-t",label:i._("Close"),onClick:this.onCancel})),c('React').createElement(c('XUIDialogBody.react'),null,i._("Are you sure you want to delete this photo?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{onClick:this.onCancel,label:i._("Cancel")}),c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onConfirm,label:i._("OK")}))));};m.propTypes={shown:l.bool.isRequired,onConfirm:l.func.isRequired,onCancel:l.func.isRequired};f.exports=m;}),null);
__d('PagePhotosTabDeletePhotoInlineActions.react',['cx','fbt','AsyncRequest','AsyncResponse','DOM','React','ReactDOM','Relay','XEditablePhotoRemoveDialog.react','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={removePhotoConfirmationDialogShown:false};}l.prototype.render=function(){if(!this.props.photo.can_viewer_delete)return null;return (c('React').createElement('div',{className:"_28ue"},c('React').createElement('div',{className:"_3t_i"},c('React').createElement('div',{className:"_3-8_ _3-8w _28uf rfloat"},this.$PagePhotosTabDeletePhotoInlineActions1())),this.$PagePhotosTabDeletePhotoInlineActions2()));};l.prototype.$PagePhotosTabDeletePhotoInlineActions1=function(){return (c('React').createElement(c('XUICloseButton.react'),{className:"_3-8h",onClick:function(){return this.setState({removePhotoConfirmationDialogShown:true});}.bind(this),shade:'light',size:'medium',tooltip:i._("Delete Photo")}));};l.prototype.$PagePhotosTabDeletePhotoInlineActions2=function(){if(!this.state.removePhotoConfirmationDialogShown)return null;return (c('React').createElement(c('XEditablePhotoRemoveDialog.react'),{onCancel:function(){return this.setState({removePhotoConfirmationDialogShown:false});}.bind(this),onConfirm:function(){return this.onRemove();}.bind(this),shown:true}));};l.prototype.onRemove=function(){var m={confirmed:true,fbid:this.props.photo.id};new (c('AsyncRequest'))().setData(m).setErrorHandler(function(n){c('AsyncResponse').defaultErrorHandler(n);}).setHandler(function(n){c('DOM').remove(c('ReactDOM').findDOMNode(this).parentNode);}.bind(this)).setInitialHandler(function(){this.setState({removePhotoConfirmationDialogShown:false});}.bind(this)).setURI('/ajax/photos/photo/delete/dialog.php').send();};f.exports=c('Relay').createContainer(l,{fragments:{photo:function m(){return function(){return {children:[{fieldName:'can_viewer_delete',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagePhotosTabDeletePhotoInlineActions_react_PhotoRelayQL',type:'Photo'};}();}}});}),null);
__d("XPagesCoverPhotoPreviewAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/profile\/cover_photo_preview\/",{page_id:{type:"FBID",required:true},photo_id:{type:"FBID",required:true}});}),null);
__d('PagePhotosTabEditAlbumPhotoInlineActions.react',['ix','cx','fbt','AsyncRequest','AsyncResponse','CSS','DOM','Image.react','MenuSeparator.react','PopoverMenu.react','ProfilePicCropViewerInit','React','ReactDOM','Relay','XEditablePhotoRemoveDialog.react','XPagesCoverPhotoPreviewAsyncController','ReactXUIMenu','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.state={showPhotoDeletionConfirmationDialog:false};}n.prototype.render=function(){if(!this.props.photo.can_viewer_edit)return null;return (c('React').createElement('div',{className:"_28ue"},c('React').createElement('div',{className:"_3t_i",ref:'inlineEditActionsRoot'},c('React').createElement(c('PopoverMenu.react'),{alignh:'right',className:"rfloat",menu:this.$PagePhotosTabEditAlbumPhotoInlineActions1(),onHide:function(){return this.$PagePhotosTabEditAlbumPhotoInlineActions2();}.bind(this),onShow:function(){return this.$PagePhotosTabEditAlbumPhotoInlineActions3();}.bind(this)},c('React').createElement('div',{className:"_28uf _3-8_ _3-8w rfloat"},this.$PagePhotosTabEditAlbumPhotoInlineActions4()))),this.$PagePhotosTabEditAlbumPhotoInlineActions5()));};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions4=function(){var o=j._("Edit or Remove");return (c('React').createElement('button',{className:"_i6h _3-8h",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':o},c('React').createElement(c('Image.react'),{src:h("115340")})));};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions2=function(){var o=c('ReactDOM').findDOMNode(this.refs.inlineEditActionsRoot);c('CSS').removeClass(o,"_3t_j");};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions3=function(){var o=c('ReactDOM').findDOMNode(this.refs.inlineEditActionsRoot);c('CSS').addClass(o,"_3t_j");};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions1=function(){var o=this.props.photo,p=o.album,q=o.id,r=o.owner,s=c('XPagesCoverPhotoPreviewAsyncController').getURIBuilder().setFBID('page_id',r.id).setFBID('photo_id',q).getURI(),t=p.album_type==='COVER'||p.album_type==='PROFILE'?null:c('React').createElement(m,{onclick:function u(){var v={albumFBID:p.id,datakey:q,fbid:q,shouldRemovePhotoFromDOM:true,owner:r.id};new (c('AsyncRequest'))().setAllowCrossPageTransition(false).setData(v).setErrorHandler(function(w){c('AsyncResponse').defaultErrorHandler(w);}).setURI('/ajax/photos/photo/move/dialog.php').send();}},j._("Move to Other Album"));return (c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(m,{onclick:function u(){c('ProfilePicCropViewerInit').loadID(q,r.id);}},j._("Make Profile Picture for Page")),c('React').createElement(m,{onclick:function u(){return new (c('AsyncRequest'))(s).send();}},j._("Make Cover Photo")),t,c('React').createElement(c('MenuSeparator.react'),null),c('React').createElement(m,{href:'#',onclick:function(){return this.setState({showPhotoDeletionConfirmationDialog:true});}.bind(this)},j._("Delete This Photo"))));};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions5=function(){if(!this.state.showPhotoDeletionConfirmationDialog)return null;return (c('React').createElement(c('XEditablePhotoRemoveDialog.react'),{onCancel:function(){return this.setState({showPhotoDeletionConfirmationDialog:false});}.bind(this),onConfirm:function(){return this.$PagePhotosTabEditAlbumPhotoInlineActions6();}.bind(this),shown:true}));};n.prototype.$PagePhotosTabEditAlbumPhotoInlineActions6=function(){var o={confirmed:true,fbid:this.props.photo.id};new (c('AsyncRequest'))().setData(o).setErrorHandler(function(p){c('AsyncResponse').defaultErrorHandler(p);}).setHandler(function(p){c('DOM').remove(c('ReactDOM').findDOMNode(this.props.elementToDelete));}.bind(this)).setInitialHandler(function(){this.setState({showPhotoDeletionConfirmationDialog:false});}.bind(this)).setURI('/ajax/photos/photo/delete/dialog.php').send();};f.exports=c('Relay').createContainer(n,{fragments:{photo:function o(){return function(){return {children:[{children:[{fieldName:'album_type',kind:'Field',metadata:{},type:'PhotosAlbumAPIType'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'album',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Album'},{fieldName:'can_viewer_edit',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagePhotosTabEditAlbumPhotoInlineActions_react_PhotoRelayQL',type:'Photo'};}();}}});}),null);
__d("XPagesProfilePhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/photos\/",{page_token:{type:"String",required:true},business_id:{type:"Int"},tab:{type:"Enum",defaultValue:"photos_stream",enumType:1},album_id:{type:"FBID"},__nodl:{type:"Exists",defaultValue:false},qr:{type:"String"},ref:{type:"String"},mt_nav:{type:"Bool",defaultValue:false},_sref_:{type:"Int"},_vref_:{type:"Int"}});}),null);
__d('PagePhotosTabPhotoInlineActions.react',['ix','cx','fbt','AbstractActionList.react','CSS','FeedbackLikeActions','Image.react','LayerHideOnBlur','LeftRight.react','Link.react','ProfileTabConst','React','ReactDOM','Relay','UFICommentLink.react','UIPagelet','XPagesProfilePhotosController','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react','fbglyph','intlSummarizeNumber'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.$PagePhotosTabPhotoInlineActions7=function(){c('FeedbackLikeActions').handleLikeChange(this.props.photo.feedback.id,!this.props.photo.feedback.does_viewer_like);}.bind(this);this.state={dialogLoaded:false,dialogShown:false};}m.prototype.render=function(){return c('React').createElement('div',{className:"_3t_i",ref:'inlineActionsRoot'},c('React').createElement('div',{className:"_2ph- _2pie"},this.$PagePhotosTabPhotoInlineActions1(),c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('AbstractActionList.react'),{className:"_4crj"},this.$PagePhotosTabPhotoInlineActions2(),this.$PagePhotosTabPhotoInlineActions3()),c('React').createElement(c('AbstractActionList.react'),{className:"_4crj"},this.$PagePhotosTabPhotoInlineActions4(),this.$PagePhotosTabPhotoInlineActions5())),this.$PagePhotosTabPhotoInlineActions6()),c('React').createElement(c('Image.react'),{className:"_4crk",src:'/images/photos/profile/gradient.png'}));};m.prototype.componentDidUpdate=function(n,o){var p=c('ReactDOM').findDOMNode(this.refs.inlineActionsRoot);if(this.state.dialogShown){c('CSS').addClass(p,"_3t_j");}else c('CSS').removeClass(p,"_3t_j");if(this.state.dialogShown&&!this.state.dialogLoaded){c('UIPagelet').loadFromEndpoint('PagesPhotosHoverCardPagelet',c('ReactDOM').findDOMNode(this.refs.addCommentSection),{feedback_id:this.props.photo.id});this.setState({dialogLoaded:true});}};m.prototype.$PagePhotosTabPhotoInlineActions2=function(){var n=this.props.photo.feedback,o=n.can_viewer_like,p=n.does_viewer_like;if(!o)return null;return c('React').createElement(c('Link.react'),{onClick:this.$PagePhotosTabPhotoInlineActions7},p?j._("Unlike"):j._("Like"));};m.prototype.$PagePhotosTabPhotoInlineActions3=function(){if(!this.props.photo.feedback.can_viewer_comment)return null;return (c('React').createElement(c('UFICommentLink.react'),{onClick:this.$PagePhotosTabPhotoInlineActions8.bind(this)},j._("Comment")));};m.prototype.$PagePhotosTabPhotoInlineActions6=function(){return (c('React').createElement(c('XUIContextualDialog.react'),{behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.inlineActionsRoot;}.bind(this),hideOnEscape:true,onToggle:function(n){return this.setState({dialogShown:n});}.bind(this),position:'below',shown:this.state.dialogShown,width:c('XUIContextualDialog.react').WIDTH.WIDE},c('React').createElement('div',{className:"_8tm"},c('React').createElement(c('XUIContextualDialogBody.react'),{ref:'addCommentSection'},c('React').createElement('div',{className:"_2ph-"},j._("Loading..."))))));};m.prototype.$PagePhotosTabPhotoInlineActions1=function(){if(this.props.album)return null;var n=this.props.photo.album;if(!n)return null;var o=c('XPagesProfilePhotosController').getURIBuilder().setString('page_token',this.props.pageID).setEnum('tab',c('ProfileTabConst').ALBUM).setFBID('album_id',n.id).getURI();return (c('React').createElement(c('Link.react'),{className:"_4crl",href:o},c('React').createElement(c('XUIText.react'),{size:'medium'},n.name)));};m.prototype.$PagePhotosTabPhotoInlineActions5=function(){var n=this.props.photo.feedback;if(n.comments.count===0)return null;return (c('React').createElement(c('Link.react'),{href:'#',onClick:this.$PagePhotosTabPhotoInlineActions8.bind(this)},c('React').createElement(c('Image.react'),{className:"_4crm _3-8_",src:h("114672")}),c('intlSummarizeNumber')(n.comments.count)));};m.prototype.$PagePhotosTabPhotoInlineActions4=function(){var n=this.props.photo.feedback;if(n.likers.count===0)return null;return (c('React').createElement(c('Link.react'),{href:'#',onClick:this.$PagePhotosTabPhotoInlineActions8.bind(this)},c('React').createElement(c('Image.react'),{className:"_4crm _2pih",src:h("115159")}),c('intlSummarizeNumber')(n.likers.count)));};m.prototype.$PagePhotosTabPhotoInlineActions8=function(){this.setState({dialogShown:true});};f.exports=c('Relay').createContainer(m,{fragments:{photo:function n(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'}],fieldName:'album',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Album'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'can_viewer_comment',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'can_viewer_like',kind:'Field',metadata:{},type:'Boolean'},{calls:[{kind:'Call',metadata:{},name:'use_default_actor',value:{kind:'CallValue',callValue:false}}],fieldName:'does_viewer_like',kind:'Field',metadata:{},type:'Boolean'},{children:[{fieldName:'count',kind:'Field',metadata:{},type:'Int'}],fieldName:'likers',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'LikersOfContentConnection'},{children:[{fieldName:'count',kind:'Field',metadata:{},type:'Int'}],fieldName:'comments',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'CommentsConnection'}],fieldName:'feedback',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Feedback'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagePhotosTabPhotoInlineActions_react_PhotoRelayQL',type:'Photo'};}();}}});}),null);
__d('PagePhotosTabPhotoGridItem.react',['cx','fbt','Image.react','Link.react','PagePhotosTabConfig','PagePhotosTabEditAlbumPhotoInlineActions.react','PagePhotosTabDeletePhotoInlineActions.react','PagePhotosTabPhotoInlineActions.react','React','Relay'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={isSelected:false};}l.prototype.componentWillReceiveProps=function(m){if(this.state.isSelected&&!m.onPhotoClick)this.setState({isSelected:false});};l.prototype.render=function(){var m=this.props.photo,n=m.can_viewer_edit,o=m.id,p=null,q=null;if(!this.props.shouldHideInlineAction){p=this.props.album?c('React').createElement(c('PagePhotosTabEditAlbumPhotoInlineActions.react'),babelHelpers['extends']({},this.props,{elementToDelete:this})):c('React').createElement(c('PagePhotosTabDeletePhotoInlineActions.react'),this.props);q=c('React').createElement('div',{className:"_3x2f"},c('React').createElement(c('PagePhotosTabPhotoInlineActions.react'),this.props));}return (c('React').createElement('div',{className:(this.props.album&&n?"_4zc-":'')+(' '+"_2eea"),'data-token':o,id:o,onClick:function(){return this.$PagePhotosTabPhotoGridItem1(o,this.props.onPhotoClick);}.bind(this),role:'presentation'},p,this.$PagePhotosTabPhotoGridItem2(),q));};l.prototype.$PagePhotosTabPhotoGridItem2=function(){var m=this.props.photo,n=m.image,o=m.url;if(this.props.onPhotoClick){return (c('React').createElement('div',{className:"_11sl"},c('React').createElement(c('Image.react'),{height:c('PagePhotosTabConfig').PHOTO_SIZE,src:n.uri,width:c('PagePhotosTabConfig').PHOTO_SIZE}),c('React').createElement('div',{className:this.state.isSelected?"_11sm":''})));}else if(!this.props.taggablePhotos)return (c('React').createElement(c('Link.react'),{href:o,rel:'theater'},c('React').createElement(c('Image.react'),{height:c('PagePhotosTabConfig').PHOTO_SIZE,src:n.uri,width:c('PagePhotosTabConfig').PHOTO_SIZE})));return (c('React').createElement(c('Link.react'),{href:o,id:'pic_'+this.props.photo.id,rel:'theater'},c('React').createElement('div',{className:"_26uf"},c('React').createElement('div',{className:"_1g1c tagWrapper"},c('React').createElement(c('Image.react'),{className:"uiMediaThumbImg",height:c('PagePhotosTabConfig').PHOTO_SIZE,src:n.uri,width:c('PagePhotosTabConfig').PHOTO_SIZE}),c('React').createElement('div',{className:"hidden_elem taggerOverlay"},c('React').createElement('div',{className:"blackwash left"}),c('React').createElement('div',{className:"blackwash right"}),c('React').createElement('div',{className:"blackwash top"}),c('React').createElement('div',{className:"blackwash bottom"}),c('React').createElement('div',{className:"highlightBox"}),c('React').createElement('div',{className:"hidden_elem lockBar _2pih _2pi2"},c('React').createElement('div',{className:"lockIcon"}),c('React').createElement('div',{className:"lockMessage"},i._("Already tagged"))))))));};l.prototype.$PagePhotosTabPhotoGridItem1=function(m,n){if(!n)return;n(m);this.setState({isSelected:!this.state.isSelected});};f.exports=c('Relay').createContainer(l,{initialVariables:{imageSize:c('PagePhotosTabConfig').PHOTO_SIZE},fragments:{photo:function m(){return function(n,o,p){return {children:[].concat.apply([],[{fieldName:'can_viewer_edit',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{calls:[{kind:'Call',metadata:{},name:'sizing',value:{kind:'CallValue',callValue:'cover-fill-cropped'}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallVariable',callVariableName:'imageSize'}},{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallVariable',callVariableName:'imageSize'}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'},c('Relay').QL.__frag(n),c('Relay').QL.__frag(o),c('Relay').QL.__frag(p)]),id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagePhotosTabPhotoGridItem_react_PhotoRelayQL',type:'Photo'};}(c('PagePhotosTabEditAlbumPhotoInlineActions.react').getFragment('photo'),c('PagePhotosTabDeletePhotoInlineActions.react').getFragment('photo'),c('PagePhotosTabPhotoInlineActions.react').getFragment('photo'));}}});}),null);
__d('PagePhotosTabPhotosView.react',['cx','FBMorePager.react','PagePhotosTabAddPhotosGridItem.react','PagePhotosTabAlbumPhotosReorder','PagePhotosTabPhotoGridItem.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=1500;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.state={isWaiting:false};}l.prototype.render=function(){return (c('React').createElement('div',null,this.$PagePhotosTabPhotosView1(),this.$PagePhotosTabPhotosView2()));};l.prototype.$PagePhotosTabPhotosView1=function(){var m=this.props.shouldShowAddPhotos?[c('React').createElement(c('PagePhotosTabAddPhotosGridItem.react'),babelHelpers['extends']({},this.props,{key:'addPhotosGridItem'}))]:[];this.props.photos.edges.forEach(function(n,o){if(!n.node.album||!this.props.hideAlbum||this.props.hideAlbum!==n.node.album.id)m.push(c('React').createElement(c('PagePhotosTabPhotoGridItem.react'),babelHelpers['extends']({},this.props,{key:o,photo:n.node})));}.bind(this));return (c('React').createElement('div',{className:"_2eec",ref:function(n){if(n!==null&&this.props.reorderablePhotos)c('PagePhotosTabAlbumPhotosReorder').createSortableGroup(this.props.album.owner.id,this.props.album.id,n);}.bind(this),tabIndex:0},m));};l.prototype.$PagePhotosTabPhotosView2=function(){if(!this.props.hasMore)return null;return (c('React').createElement(c('FBMorePager.react'),{onMore:function(){return this.$PagePhotosTabPhotosView3();}.bind(this)},c('React').createElement('div',{className:"_3d2x _2piq _2pie"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));};l.prototype.$PagePhotosTabPhotosView3=function(){if(this.state.isWaiting)return;this.setState({isWaiting:true});setTimeout(function(){this.props.onLoadMore();this.setState({isWaiting:false});}.bind(this),k);};f.exports=l;}),null);