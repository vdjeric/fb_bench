if (self.CavalryLogger) { CavalryLogger.start_js(["prhBa"]); }

__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports={LIVE:"Live",ON_DEMAND:"OnDemand"};}),null);
__d("ComposerEntryPointRef",[],(function a(b,c,d,e,f,g){f.exports={FEED:"feed",FEED_INLINE:"feed_inline",FEED_VOICE_SWITCHER:"feed_voice_switcher",SPROUTS:"sprouts",TIMELINE:"timeline",NATIVE_PERMALINK:"native_permalink",EVENT:"event",EVENT_ALL_MEDIA:"event_all_media",EVENT_PHOTOS:"event_photos",EVENT_VIDEOS:"event_videos",EVENT_WALL:"event_wall",EVENT_ABOUT:"event_about",GROUP:"group",NATIVE_GROUP:"native_group",NATIVE_PAGE:"native_page",PAGES_MANAGER:"pages_manager",FINCH_PAGE_CHECKIN:"finch_page_checkin",PLACES_NEARBY_FRIENDS:"places_nearby_friends",PLACES_SEARCH_FAILURE:"places_search_failure",FEED_STORY:"feed_story",PHOTOS_DASHBOARD:"photos_dashboard",PHOTOS_TAB_TIMELINE:"photos_tab_timeline",ADD_PHOTO_IN_TIMELINE_TAB:"add_photo_in_timeline_tab",ADD_PHOTO_IN_ALBUM:"add_photo_in_album",ADD_PHOTO_IN_PHOTOS_SECTION:"add_photo_in_photos_section",PHOTOS_ALBUM:"photos_album",PHOTOS_ALBUM_LISTING:"photos_album_listing",CREATE_COUPON_DIALOG:"create_coupon_dialog",SOCIAL_PLUGIN:"social_plugin",PLATFORM_DIALOG:"platform_dialog",SHARE_BUTTON_PLUGIN:"share_button",PAGE_PLUGIN:"page",ADS_CREATE:"ads_create",ADS_POWER_EDITOR:"ads_power_editor",TOPIC_HASHTAG_FEED:"topic_hashtag_feed",PERMALINK:"permalink",EDIT_DIALOG:"edit_dialog",EDIT_COMPOSER:"edit_composer",PAGES_FEED:"pages_feed",PAGES_PHOTO_TAB:"pages_photo_tab",PAGES_VIDEO_TAB:"pages_video_tab",PAGES_VIDEO_TAB_HUB:"pages_video_tab_hub",PAGES_VOICE_SWITCHER:"pages_voice_switcher",PAGES_COVER_VIDEO:"pages_cover_video",PAGE_TIPS:"page_tips",AGGREGATED_LINK_STORY:"aggregated_link_story",FEED_STICKY_COMPOSER:"feed_sticky_composer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",WIFI_CHECKIN:"wifi_checkin",HOVERCARD_CONICS:"hovercard_conics",AGGREGATED_STORY:"aggregated_story",YEAR_IN_REVIEW:"year_in_review",ORIGIN_STORY:"origin_story",CELEBRATE_FRIENDS:"celebrate_friends",CREATIVE_ASSISTANT:"creative_assistant",MEGAPHONE:"megaphone",MOMENTS:"moments",LIVE:"live",LIVE_BROADCAST:"live_broadcast",LIVE_MAP:"live_map",TOPIC_STORY_ACTION_LINK:"topic_story_action_link",OTHER:"other",TRENDING_TOPIC:"trending_topic",UC_TOOLBAR:"uc_toolbar",PAGE_CONTENT_TAB_DRAFTS:"page_content_tab_drafts",PAGE_LAUNCH_POINT:"page_launch_point",PAGE_CONTENT_TAB_PUBLISHED_POSTS:"page_content_tab_published_posts",PAGE_CONTENT_TAB_SCHEDULED_POSTS:"page_content_tab_scheduled_posts",PAGE_CONTENT_TAB_ADS_POSTS:"page_content_tab_ads_posts",PAGE_CONTNET_TAB_JOB_POSTS:"page_contet_tab_job_posts",PAGE_CONTENT_TAB_VIDEO_LIBRARY:"page_content_tab_video_library",PAGE_CONTENT_ADS_ASSET_VIDEO_LIBRARY:"page_content_ads_asset_video_library",PAGE_CONTENT_TAB_CANVAS:"page_content_tab_canvas",PAGE_CONTENT_TAB_REFERENCE_LIBRARY:"page_content_tab_reference_library",REVIEW_UNIT:"review_unit",REVIEWS_LIST:"reviews_list",CHECKIN_STORY:"checkin_story",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",BULK_UPLOAD:"bulk_upload",REFERENCE_VIDEO_BULK_UPLOAD:"reference_video_bulk_upload",SAHELI:"saheli",GAMEFACE:"gameface",GAMETIME:"gametime",ANNIVERSARY_VIDEO:"anniversary_video",FRIENDS_DAY:"friends_day_2016",FRIENDVERSARY:"FRIENDVERSARY",PRIVACY_CHECKUP:"privacy_checkup",FEEDX:"feedx",FEED_SPROUTS:"feed_sprouts",FEEDX_SPROUTS:"feedx_sprouts",LEGACY_FEED:"legacy_feed",REACTION:"reaction",FLASHBACK:"flashback",INSIGHTS_POST_SPONSORED_TABLE:"insights_post_sponsored_table",INSIGHTS_POST_DIRECT_BOOST:"insights_post_direct_boost",VOTER_REGISTRATION:"voter_registration",ISSUE_MODULE:"issue_module",ENDORSEMENT_MODULE:"endorsement_module",COMPOSER_PREFILL:"composer_prefill",MTOUCH_LOCAL_SERP:"mtouch_local_serp",RED_ENVELOPE_POST:"red_envelope_post",FUNDRAISER_PAGE:"fundraiser_page",OFFERS_COMPOSER:"offers_composer",RESHARE_DIALOG:"reshare_dialog",POLITICAL_ISSUE:"political_issue",POLITICAL_ENDORSEMENT:"political_endorsement",PROFILE_PIC_CHANGE_DIALOG:"profile_pic_change_dialog",PROFILE_VIDEO:"profile_video",PUBLISH_FRAME_DIALOG:"publish_frame_dialog",AYMT:"aymt",SW_BG_SYNC:"sw_bg_sync",FEED_INSPIRATIONS:"feed_inspirations",INSPIRATIONS:"inspirations",WORK_FEED:"work_feed",DEVELOPER_SITE:"developer_site",RECENT_POSTS:"timeline\/recent_posts",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_VIDEO_PLATFORM_DIALOG:"live_video_platform_dialog"};}),null);
__d("ReactComposerAttachmentType",[],(function a(b,c,d,e,f,g){f.exports={STATUS:"STATUS",MEDIA:"MEDIA",ALBUM:"ALBUM",MLE:"MLE",LIFE_EVENT:"LIFE_EVENT",NOTES:"NOTES",QANDA:"QANDA",PAGES_EXTRA:"PAGES_EXTRA",FILE:"FILE",QUESTION:"QUESTION",SELL:"SELL",WORK_HEADER:"WORK_HEADER",RED_ENVELOPE:"RED_ENVELOPE",LIVE_BROADCAST:"LIVE_BROADCAST",PHOTO_ZOOM_CROP:"PHOTO_ZOOM_CROP",PROFILE_PIC_DESCRIPTION:"PROFILE_PIC_DESCRIPTION",PROFILE_PIC_FRAME:"PROFILE_PIC_FRAME",LIVE_VIDEO:"LIVE_VIDEO",DOC:"DOC",EVENT:"EVENT",GAME:"GAME",CTA:"CTA",QA:"QA",MESSAGE:"MESSAGE",GET_DIRECTIONS:"GET_DIRECTIONS",CALL:"CALL",PLACE_LIST:"PLACE_LIST",QUIZ:"QUIZ",TASK:"TASK",ADD_MENTIONED:"ADD_MENTIONED"};}),null);
__d("ReactComposerFeatureType",[],(function a(b,c,d,e,f,g){f.exports={DATE:"date",EVENT:"event",FILE:"file",FORMATTED_TEXT:"formatted_text",LIFE_EVENT:"life_event",LINK:"link",LOCATION:"location",MARKDOWN:"markdown",MEDIA:"media",MENTION_TAG:"mention_tag",MILESTONE:"milestone",MINUTIAE:"minutiae",NOTE:"note",OFFER:"offer",PAGE_CTA:"page_cta",PHOTO_TAG:"photo_tag",PRIVACY:"privacy",PRODUCT:"product",SELL:"sell",SPONSOR:"sponsor",TEXT:"text",WITH_TAG:"with_tag",COLLECTIONS:"collections",COLLECTION_CREATION:"collection_creation"};}),null);
__d("ReactComposerLoggingName",[],(function a(b,c,d,e,f,g){f.exports={ALBUM_SPROUT:"album_sprout",ALBUM_TAB_SELECTOR:"album_tab_selector",AUDIENCE_SELECTOR:"audience_selector",BACKDATE_TAGGER:"backdate_tagger",CANVAS_EDITOR:"canvas_editor",CHEVRON_MENU_EDIT_POST:"chevron_menu\/edit_post",COLLECTION_CLEAR_BUTTON:"collection_clear_button",COLLECTION_SELECTED:"collection_selected",COLLECTIONS_CREATE_CANCEL_BUTTON:"collections_create_cancel_button",COLLECTIONS_CREATE_SUBMIT_BUTTON:"collections_create_submit_button",COLLECTIONS_SELECTOR_BUTTON:"collections_selector_button",COLLECTIONS_SELECTOR_CREATE_BUTTON:"collections_selector_create_button",CONTENT_WARNINGS_TAGGER:"content_warnings_tagger",DELETE_POST_EDIT_BUTTON:"delete_post_dialog\/edit_post_button",DOC_TAB_SELECTOR:"doc_tab_selector",ELLIPSIS_SPROUT:"ellipsis_sprout",ESCAPE_KEY:"escape_key",EVENT_TAB_SELECTOR:"event_tab_selector",FILE_TAB_SELECTOR:"file_tab_selector",FORMATTED_TEXT_BUTTON:"formatted_text_button",FORMATTED_TEXT_SPROUT:"formatted_text_sprout",FORMATTED_TEXT_TAGGER:"formatted_text_tagger",FRIEND_TAG_SPROUT:"friend_tag_sprout",GAME_TAB_SELECTOR:"game_tab_selector",INLINE_COMPOSER:"inline_composer",LINK_DROPPED:"link_dropped",LINK_PASTED:"link_pasted",LINK_REMOVE_BUTTON:"link_remove_button",LIVE_VIDEO_SPROUT:"live_video_sprout",LIVE_VIDEO_TAB_SELECTOR:"live_video_tab_selector",LOCATION_TAG_SPROUT:"location_tag_sprout",LOCATION_TAGGER:"location_tagger",MARKDOWN_SPROUT:"markdown_sprout",MARKDOWN_TAGGER:"markdown_tagger",MARKETPLACE:"marketplace",MEDIA_ATTACHMENT_UPLOAD_BUTTON:"media_attachment_upload_button",MEDIA_COLLAGE_PLUS_BUTTON:"media_collage_plus_button",MEDIA_FILE_DROPPED:"media_file_dropped",MEDIA_FILE_PASTED:"media_file_pasted",MEDIA_SPROUT:"media_sprout",MEDIA_TAB_SELECTOR:"media_tab_selector",MEDIA_TAGGER:"media_tagger",MEDIA_UPLOADS_PLUS_BUTTON:"media_uploads_plus_button",MEDIA_COMPOSER_ON_INIT:"media_composer_on_init",MENTIONS_INPUT_FOCUS:"mentions_input_focus",MESSAGING_TAGGER:"messaging_tagger",MESSENGER_PHOTO_VIEWER_SHARE:"messenger_photo_viewer_share",MINUTIAE_SPROUT:"minutiae_sprout",MINUTIAE_TAGGER:"minutiae_tagger",MLE_TAB_SELECTOR:"mle_tab_selector",MODAL_PAGE_INVITE_DASHBOARD:"modal_page_invite_dashboard",NOTES_SPROUT:"notes_sprout",NOTES_TAB_SELECTOR:"notes_tab_selector",PAGES_CTA_SELECTOR:"pages_cta_selector",PAGES_EXTRA_TAB_SELECTOR:"pages_extra_tab_selector",PEOPLE_TAGGER:"people_tagger",PEOPLE_TAGGER_SPROUT:"people_tagger_sprout",PHOTO_UPLOAD_DONE:"photo_upload_done",PRODUCT_TAGGER:"product_tagger",PRODUCT_TAGGER_BANNER_UPSELL:"product_tagger_banner_upsell",PROMPT:"prompt",QA_TAB_SELECTOR:"qa_tab_selector",QANDA_TAB_SELECTOR:"qanda_tab_selector",QUICKSILVER_SHARE_SCORE_BUTTON:"quicksilver_share_score_button",QUESTION_TAB_SELECTOR:"question_tab_selector",QUIZ_TAB_SELECTOR:"quiz_tab_selector",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",RED_ENVELOPE_TAB_SELECTOR:"red_envelope_tab_selector",SELL_TAB_SELECTOR:"sell_tab_selector",SHARE_NOW_MENU_SHARE_TO_PAGE:"share_now_menu\/share_to_page",SHARE_NOW_MENU_POST_TO_GROUP:"share_now_menu\/post_to_group",SHARE_NOW_MENU_SEND_MESSAGE:"share_now_menu\/send_message",SHARE_NOW_MENU_SHARE_FRIEND_TIMELINE:"share_now_menu\/share_friend_timeline",SHARE_NOW_MENU_WRITE_POST:"share_now_menu\/write_post",SPONSOR_SPROUT:"sponsor_sprout",SPONSOR_TAGGER:"sponsor_tagger",STATUS_TAB_SELECTOR:"status_tab_selector",TAGGER_SUMMARY_LOCATION:"tagger_summary_row\/location_tagger",TAGGER_SUMMARY_MINUTIAE:"tagger_summary_row\/minutiae_tagger",TAGGER_SUMMARY_PEOPLE:"tagger_summary_row\/people_tagger",TAGGER_SUMMARY_ROW:"tagger_summary_row",TARGETING_TAGGER:"targeting_tagger",TASK_TAB_SELECTOR:"task_tab_selector",OTHERS:"others"};}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports={LIVE:"live",ON_DEMAND:"on_demand"};}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();}),null);
__d('UFIAcceptedAnswerStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER:return babelHelpers['extends']({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:'Accepted',id:l.comment.id}:{type:'NoneAccepted'},m));default:return k;}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:'Accepted',id:l}:{type:'NoneAccepted'};};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true});});}j.prototype.getInitialState=function(){return {};};j.prototype.getForInstance=function(k){return this.getState()[k]||null;};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k;};f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={},k={};function l(da){return da in j?j[da]:da;}function m(da,ea){da.forEach(function(fa){var ga=fa.ftentidentifier,ha=c('UFIConstants').UFIPayloadSourceType,ia=fa.clientid,ja=false,ka=babelHelpers['extends']({},fa);if(ia){delete ka.clientid;ja=c('ClientIDs').isExistingClientID(ia);if(ja&&j[ia]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(fa.id).log();return;}}if(ea===ha.LIVE_SEND||ea===c('UFIConstants').UFIPayloadSourceType.STREAMING||ea===ha.USER_ACTION||ea===ha.ENDPOINT_ADD_COMMENT||ea===ha.ENDPOINT_EDIT_COMMENT)ka.isunseen=true;if(ea===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ea===c('UFIConstants').UFIPayloadSourceType.STREAMING)ka.islive=true;if(ea===ha.ENDPOINT_COMMENT_FETCH||ea===ha.ENDPOINT_ID_COMMENT_FETCH)ka.fromfetch=true;if(ja&&i[ia]){ka.ufiinstanceid=i[ia].ufiinstanceid;j[ia]=fa.id;k[fa.id]=ia;i[fa.id]=i[ia];delete i[ia];c('UFICentralUpdates').didUpdateComment(ia);}ca.setComment(fa.id,new (c('ImmutableObject'))(ka));c('UFICentralUpdates').didUpdateComment(fa.id);c('UFICentralUpdates').didUpdateFeedback(ga);});}function n(da,ea){for(var fa=0;fa<da.length;fa++){var ga=da[fa];switch(ga.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ca.getComment(ga.entidentifier))o(ga.clientid,ga.entidentifier,ga.hasviewerliked,ga.likecount,ga.reactiondata,ea);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:o(ga.clientid,ga.commentid,ga.viewerliked,ga.likecount,ga.reactiondata,ea);break;case c('UFIConstants').UFIActionType.REACTION:if(ca.getComment(ga.entidentifier))p(ga.entidentifier,ga);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:p(ga.commentid,ga);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(ga);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(ga);break;case c('UFIConstants').UFIActionType.ACCEPT_ANSWER:v(ga);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:w(ga);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:x(ga);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:y(ga);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(ga);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(ga);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:aa(ga);break;}}}function o(da,ea,fa,ga,ha,ia){var ja=ca.getComment(ea);if(ja){var ka={},la=da&&c('ClientIDs').isExistingClientID(da);if(!la){ka.hasviewerliked=fa;ka.likecount=ga;if(ha){ka.reactioncount=ha.reactioncount;ka.reactioncountmap=ha.reactioncountmap;ka.reactioncountreduced=ha.reactioncountreduced;ka.viewerreaction=ha.viewerreaction;}}if(ia===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ia===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(la).setCommentID(ea).log();ka.likeconfirmhash=c('randomInt')(0,1024);ba(ea,ka);}}function p(da,ea){var fa=ca.getComment(da);if(fa){var ga={};if(ea.clientid&&c('ClientIDs').isExistingClientID(ea.clientid)&&ea.viewerreaction!==fa.viewerreaction)return;ga.hasviewerliked=ea.hasviewerliked;ga.likecount=ea.likecount;ga.reactioncount=ea.reactioncount;ga.reactioncountmap=ea.reactioncountmap;ga.reactioncountreduced=ea.reactioncountreduced;ga.viewerreaction=ea.viewerreaction;ba(da,ga);}}function q(da){var ea=ca.getComment(da.commentid);if(ea&&da.hasviewerliked===ea.hasviewerliked){var fa={likecount:da.likecount,likeconfirmhash:c('randomInt')(0,1024)};ba(da.commentid,fa);}}function r(da){var ea=da.commentid,fa=ca.getComment(ea);if(fa){var ga={translationdata:da.translationdata};ba(ea,ga);}}function s(da){var ea={reportLink:da.reportLink,commenterIsFOF:da.commenterIsFOF,userIsMinor:da.userIsMinor,giveFeedbackLink:da.giveFeedbackLink,reportGroupAdminLink:da.reportGroupAdminLink};return ea;}function t(da){var ea=ca.getComment(da.commentid);z(ea,c('UFIConstants').UFIStatus.DELETED);}function u(da){var ea=ca.getComment(da.commentid);if(ea&&ea.status!==c('UFIConstants').UFIStatus.DELETED)z(ea,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(da){ba(da.commentid,{postacceptedanswer:da.isaccepted?da.commentid:null});}function w(da){ba(da.commentid,{attachment:null});}function x(da){var ea=ca.getComment(da.commentid),fa=da.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;z(ea,fa);}function y(da){ba(da.commentid,s(da));}function z(da,ea){ba(da.id,{priorstatus:da.status,status:ea});}function aa(da){var ea=ca.getComment(da.commentid);if(ea){var fa={constituentTitle:da.constituentTitle};ba(da.commentid,fa);}}function ba(da,ea){var fa=ca.getComment(da)||new (c('ImmutableObject'))({});ca.setComment(da,c('ImmutableObject').set(fa,ea));c('UFICentralUpdates').didUpdateComment(fa.id);c('UFICentralUpdates').didUpdateFeedback(fa.ftentidentifier);}var ca={getRenderKey:function da(ea){return 'comment'+(ea in k?k[ea]:ea);},getComment:function da(ea){if(ea===c('UFIConstants').unavailableCommentKey)return null;return i[l(ea)];},setComment:function da(ea,fa){fa instanceof c('ImmutableObject')||h(0);i[l(ea)]=fa;},resetComments:function da(ea){for(var fa in ea)delete i[l(fa)];},getCommentsForFTEntIdentifier:function da(ea){return Object.values(i).filter(function(fa){return fa.ftentidentifier==ea;});}};c('UFICentralUpdates').subscribe('update-comments',function(da,ea){if(ea.comments&&ea.comments.length)m(ea.comments,ea.payloadsource);if(ea.pinnedcomments&&ea.pinnedcomments.length)m(ea.pinnedcomments,ea.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(da,ea){if(ea.actions&&ea.actions.length)n(ea.actions,ea.payloadsource);});f.exports=ca;}),6);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIComments','UFIFeedbackTargets','UFIDispatcherBase','UFIStoryActionType','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').LIVE_PIN_COMMENT:case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l);};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null;}return l.commentID||null;};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null;};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(l===null)return null;return c('UFIComments').getComment(l).author||null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h;}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p;}function l(p,q){return p===q||p.startsWith(q+'-');}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[];}function n(p){return {instanceid:p};}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {};};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(p.hasOwnProperty(s))return p[s];return c('UFIVisibility').HIDDEN;};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return (this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE);};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r);}.bind(this));};o.prototype.reduce=function(p,q){var r,s;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var t=babelHelpers['extends']({},p);delete t[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return t;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var u=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),v=c('UFIComments').getCommentsForFTEntIdentifier(u);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var w=q.visibility,x=v.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=w;return ca;},{});if(u){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(u);if(y!==null){var z=c('UFIComments').getComment(y);x[k(q.instanceID,z.fbid,true)]=w;}}return babelHelpers['extends']({},p,(s={},s[k(q.instanceID)]=q.visibility,s),x);case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return (da!==ba&&!l(da,aa));});}return p;};function o(){i.apply(this,arguments);}f.exports=new o(c('UFIDispatcherBase'));}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.getValueFor=function(k){return this.getState()[k]||null;};j.prototype.getStateKey=function(k){return k.instanceID;};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue');};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o));}return k;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFICommercialBreakStore',['UFIKeyValueStore','UFIInstanceActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComposerIsTypingStore',['UFIKeyValueStore','UFIAddCommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier;};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n));}return k;};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend';};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h;}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment';}function k(o){return o+'-story';}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q));}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q));}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o;};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0;};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0;};function n(){h.apply(this,arguments);}f.exports=new n(c('UFIDispatcherBase'));}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment';}function k(m){return m+'-story';}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {};};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u;},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)];};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)];};function l(){h.apply(this,arguments);}f.exports=new l(c('UFIDispatcherBase'));}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFIAcceptedAnswerStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFIAcceptedAnswerStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFILocallyComposedCommentStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');f.exports=c('UFIDispatcherBase');}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m};},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l};},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m};},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l};},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l};},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l};},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l};},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l};},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l};},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l};},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},showConstituentTitle:function i(j,k){return {type:c('UFICommentActionType').SHOW_CONSTITUENT_TITLE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},hideConstituentTitle:function i(j,k){return {type:c('UFICommentActionType').HIDE_CONSTITUENT_TITLE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};}};f.exports=h;}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){o.unshift(l);q=1;}}else if(p>-1){o.splice(p,1);q=-1;}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r);}else s=r.toString();var t=j.reactioncountmap||{},u,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(n){w[l]=k;}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']};}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k};},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count};}return k;}};f.exports=h;}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var i={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(i,j);return i;}};f.exports=h;}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},spherical_pitch:{type:"Int"},spherical_yaw:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','AsyncRequest','ClientIDs','ChannelClientID','NumberFormat','QE2Logger','MercuryServerDispatcher','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIReactionsUtils','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFIReactionController','XUFICommentReactionController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function z(aa,ba,ca,da){c('UFIFeedbackTargets').getFeedbackTarget(aa,function(ea){var fa,ga=w(ea,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ga});var ha=c('UFIUserActionUtils').trackingData(da),ia={};ia[c('ActorURI').PARAMETER_ACTOR]=ea.actorforpost;var ja=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:aa,reaction_type:ba,root_id:ca.rootid,session_id:c('ChannelClientID').getID(),source:ca.source,feedback_referrer:ca.feedbackReferrer,instance_id:ca.instanceid},ia,ha);if(ca.fluentContentToken)(function(){var ka=ca.fluentContentToken,la=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(da,ka);if(ca.isLiveVOD||la&&la.isSpherical()){ja.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ka);}else if(ca.islivestreaming)ja.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ka);if(la&&la.isSpherical())c('ifRequired')('SphericalViewportControlStore',function(ma){var na=ma.getOrientation(la.getVideoPlayerID());if(na){ja.spherical_pitch=Math.round(na.pitch);ja.spherical_yaw=Math.round(na.yaw);}},c('emptyFunction')());})();c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),ja);});},changeCommentReaction:function z(aa,ba,ca,da){var ea=c('UFIComments').getComment(aa);if(ea.viewerreaction!=ba)c('UFIFeedbackTargets').getFeedbackTarget(ea.ftentidentifier,function(fa){var ga=c('UFIUserActionUtils').trackingData(da),ha=v(ea,fa,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ha});var ia={};ia[c('ActorURI').PARAMETER_ACTOR]=fa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:aa,legacy_id:ea.legacyid,reaction_type:ba,ft_ent_identifier:ea.ftentidentifier,source:ca.source,instance_id:ca.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ga,ia));});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r,handler:q};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c('MercuryServerDispatcher').registerEndpoints(i);function l(z,aa){return z&&z.ft_ent_identifier==aa.ft_ent_identifier&&z.comment_id==aa.comment_id;}function m(z,aa){return aa;}var n='feedback_reactions_www_rollback_universe';function o(){c('QE2Logger').logExposureForUser(n);}function p(z,aa){var ba=c('UFIReactionPendingRequestsStore').getPendingRequests(z);if(ba>0)return;var ca=c('UFIReactionSyncStore').getLastKnownReaction(z);if(aa===ca)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(da){var ea=w(da,ca);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ea});});}function q(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},da));c('setImmediate')(function(){return p(ca,da);});}function r(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type;o();var da=c('UFIConfig').reactionsHasReactionsRollback,ea=c('UFIConfig').reactionsHasReactionsRetry;if(ea&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return;}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},ca));if(da)c('setImmediate')(function(){return p(ba,ca);});c('AsyncResponse').defaultErrorHandler(z);}function s(z,aa,ba){var ca=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(aa.fbid);if(ca>0)return;var da=c('UFIReactionSyncStore').getLastKnownCommentReaction(aa.fbid);if(ba===da)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(ea){var fa=v(aa,ea,da);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa});});}function t(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type,ea=c('UFIComments').getComment(ba.comment_id);if(!ea)return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},ea,da));c('setImmediate')(function(){return s(ca,ea,da);});}function u(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type,da=c('UFIComments').getComment(aa.comment_id);if(!da)return;o();var ea=c('UFIConfig').reactionsHasCommentReactionsRollback,fa=c('UFIConfig').reactionsHasCommentReactionsRetry;if(fa&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return;}c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},da,ca));if(ea)c('setImmediate')(function(){return s(ba,da,ca);});c('AsyncResponse').defaultErrorHandler(z);}function v(z,aa,ba){var ca=z.id,da=[y(z,ba,ca,aa.supportedreactions||[],aa.actorforpost)],ea=ba===c('UFIReactionTypes').LIKE;if(aa.hasviewerliked!==ea){var fa=ea?1:-1;da.push({commentid:ca,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ea,likecount:(z.likecount||0)+fa});}return da;}function w(z,aa){var ba=[x(z,aa)],ca=aa!==c('UFIReactionTypes').NONE;if(z.hasviewerliked!==ca){var da=ca?1:-1;ba.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:ca,likecount:(z.likecount||0)+da,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}});}return ba;}function x(z,aa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c('UFIReactionsUtils').getReactionData(z,aa,z.actorforpost,c('NumberFormat').formatInteger));}function y(z,aa,ba,ca,da){var ea={};for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=z.reactioncountmap?z.reactioncountmap[ga]:null;ea[ga]={'default':ha?ha['default']:0,reduced:ha?ha.reduced:'0'};}var ia=c('UFIReactionsUtils').getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:ea,reactorids:z.viewerreaction?[da]:[]},aa,da);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:ba,hasviewerliked:!!aa,likecount:ia.reactioncountmap[1]['default'],reactioncount:ia.reactioncount,reactioncountmap:ia.reactioncountmap,reactioncountreduced:ia.reactioncountreduced,viewerreaction:aa};}f.exports=h;}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink;}.bind(this));}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.islocal){this.$UFIPagedCommentListImpl1(i.id);}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++;};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o;}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i;}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k);}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j));}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p;}.bind(this));return this.commentsFromCommentIDs(l,k,j);};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {};};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i;};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++;}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0;};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};h.prototype.getCommentCount=function(){return this.count;};h.prototype.getDeletedCount=function(){return this.deletedCount;};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};h.prototype.getBasePermalink=function(){return this.basePermalink;};h.prototype.buildCommentPermalink=function(i,j,k){return null;};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i];};f.exports=h;}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n;}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o);};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o;};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true;}c('UFIComments').resetComments(m);return l;};k.prototype.getParentCommentID=function(){return this.parentCommentID;};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1];}else j.error('Bad reply comment ID: '+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k;}),null);
__d('UFIReplyCommentList',['getObjectValues','UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o;}return h[m][n];},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{});},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n;}};function j(k){var l=c('UFIComments').getComment(k.commentid),m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});f.exports=i;}),6);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIOrderingModeStore','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFIOrderingModeStore').isInverted(l);this.orderingMode=l;this.clientHasAll=false;}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n);};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n;};j.prototype.getOrderingMode=function(){return this.orderingMode;};j.prototype.setClientHasAll=function(k){this.clientHasAll=k;};j.prototype.getClientHasAll=function(){return this.clientHasAll;};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=j;}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIComments','UFIConstants','UFIRange','UFIStreamingStateType'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getActualCommentCount=function(){return this.commentIDs.length;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l));};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o;};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false;};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.islocal){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c('UFIStreamingStateType').ON_DEMAND)this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0;};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l);}var m=l.get(k);if(!m){m=new i(j);l.set(k,m);}return m;};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k);};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values());};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true;});return;}var m={};k.forEach(function(n){m[n]=true;});i.$UFIToplevelStreamedCommentList2.set(j,m);};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3());};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3());});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l);}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid),n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n);});});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate);}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate);});});});c('UFICentralUpdates').subscribe('update-feedback',function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return (m.updateCommentCount(l.commentcount));});});f.exports=i;}),6);
__d('UFIToplevelPagedCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n;}return h[l][m];},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m;},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null;},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0);},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true;}}c('UFIComments').resetComments(m);},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p);}}c('UFIComments').resetComments(o);}};function j(k){var l=c('UFIComments').getComment(k.commentid),m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true;});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i;}),6);
__d("XConstituencyTitleEditVisibilityDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/constituency_title\/edit_comment_visibility\/",{ft_id:{type:"FBID",required:true},action_type:{type:"Enum",required:true,enumType:1},source:{type:"Enum",required:true,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}});}),null);
__d("XConstituencyTitleEnableController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/constituency_title\/enable\/",{});}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{});}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/answer\/accept\/",{});}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{});}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{});}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});}),null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','NYE2017TextHandler','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIUserActionUtils','UFIVideoPlayerRegistry','MercuryServerDispatcher','UnicodeBidi','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentLikeController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFITranslateCommentController','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={BAN:'ban',UNDO_BAN:'undo_ban'},k={changeActor:function ga(ha,ia){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ja){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ha,ia);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ha);c('UFICentralUpdates').inform('actor-changed',{actorID:ia});var ka={from_actor_id:ja.actorforpost,ft_ent_identifier:ha};ka[c('ActorURI').PARAMETER_ACTOR]=ia;var la=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(la,ka);});},changeCommentLike:function ga(ha,ia,ja){var ka=c('UFIComments').getComment(ha);if(ka.hasviewerliked!=ia){var la=c('UFIUserActionUtils').trackingData(ja.target),ma=ia?1:-1,na={commentid:ha,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ia,likecount:(ka.likecount||0)+ma};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[na]});c('UFIFeedbackTargets').getFeedbackTarget(ka.ftentidentifier,function(oa){var pa={};pa[c('ActorURI').PARAMETER_ACTOR]=oa.actorforpost;var qa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,babelHelpers['extends']({comment_id:ha,legacy_id:ka.legacyid,like_action:ia,ft_ent_identifier:ka.ftentidentifier,source:ja.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},la,pa));});}},_getAttachment:function ga(ha){return ha;},_getLocalComment:function ga(ha,ia,ja,ka,la,ma){var na=c('ClientIDs').getNewClientID(),oa=c('UnicodeBidi').isDirectionLTR(ja)?'ltr':'rtl',pa=this._getAttachment(la.attachedsticker);return {ftentidentifier:ia,body:{text:ja,dir:oa},author:ha.actorforpost,id:na,islocal:true,ufiinstanceid:la.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:la.replyid,replycommentparentid:la.replycommentparentid,attachment:pa,photo_comment:la.attachedphoto,video_comment:la.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")},photoTextTagID:la.photoTextTagID,isPhotoTag:la.isPhotoTag,photoTagX:la.photoTagX,photoTagY:la.photoTagY,videoTimeOffset:ma,postedLiveState:la.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND};},addComment:function ga(ha,ia,ja,ka){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(la){var ma=this.createComment(ha,ia,ja,ka);if(!ma)return;c('NYE2017TextHandler').playCommentAnimationIfMatchesAndAllowed(ia);var na={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:la.actorforpost,hasviewersubscribed:true,entidentifier:la.entidentifier},oa={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:la.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ma],actions:[na,oa]});}.bind(this));},createComment:function ga(ha,ia,ja,ka){var la=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ha);if(!la.actorforpost)return null;var ma=null;if(ka.isBroadcasterUFI){ma=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(qa){return (qa.getCurrentBroadcastTime());});}else if(ka.fluentContentToken&&(ka.isLiveVOD||ka.islivestreaming||ka.enableVODCommentTimestamps)){var na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ka.target,ka.fluentContentToken);if(ka.isLiveVOD||ka.islivestreaming){ma=na;}else{var oa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ka.target,ka.fluentContentToken);if(oa!=null&&na>0&&na<Math.floor(oa.getPlaybackDuration()))ma=na;}}var pa=this._getLocalComment(la,ha,ia,ja,ka,ma);this._sendCommentToServer(ha,la.actorforpost,ia,ja,ka,pa.id,ma);return pa;},_sendCommentToServer:function ga(ha,ia,ja,ka,la,ma,na){var oa=null;if(la.reply_fbid){oa=la.reply_fbid;}else if(la.replyid)oa=c('UFIComments').getComment(la.replyid).fbid;var pa;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(ma,la.timestamp,{has_photo:!!la.attachedphoto,has_video:!!la.attachedvideo,has_sticker:!!la.attachedsticker,is_reply:!!la.replyid});var qa={};qa[c('ActorURI').PARAMETER_ACTOR]=ia;var ra=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ra,babelHelpers['extends']({ft_ent_identifier:ha,comment_text:ka,source:la.source,client_id:ma,session_id:c('ChannelClientID').getID(),reply_fbid:oa,parent_comment_id:la.parent_comment_id||la.replyid,reply_comment_parent_id:la.replycommentparentid,rootid:la.rootid,clp:pa,attached_sticker_fbid:la.attachedsticker?la.attachedsticker.fbid:0,attached_photo_fbid:la.attachedphoto?la.attachedphoto.fbid:0,attached_video_fbid:la.attachedvideo?la.attachedvideo.fbid:0,attached_share_url:la.attachedshareurl,feedback_referrer:la.feedbackReferrer,feed_context:la.feedcontext,video_time_offset:na,is_live_streaming:la.islivestreaming,is_markdown:la.isMarkdown},c('UFIUserActionUtils').trackingData(la.target),qa,{photo_text_tag_id:la.photoTextTagID,is_private:la.isPrivate,is_photo_tag:la.isPhotoTag,photo_fbid:la.photoFBID,photo_tag_x:la.photoTagX,photo_tag_y:la.photoTagY}));},_hasCommentTextChanged:function ga(ha,ia){return ha.body&&ha.body.text!=ia;},_hasCommentPhotoChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ia&&ha.fbid!=ia.fbid;},_hasCommentVideoChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ia&&ha.fbid!=ia.fbid;},_hasCommentStickerChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ha.type=='sticker'&&ia&&ha.fbid!=ia.fbid;},editComment:function ga(ha,ia,ja,ka){var la=c('UFIUserActionUtils').trackingData(ka.target),ma=c('UFIComments').getComment(ha),na=this._hasCommentTextChanged(ma,ia)||this._hasCommentPhotoChanged(ma.photo_comment,ka.attachedPhoto)||this._hasCommentStickerChanged(ma.attachment,ka.attachedSticker)||this._hasCommentVideoChanged(ma.video_comment,ka.attachedVideo);ma=c('ImmutableObject').set(ma,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:ia},editnux:null,attachment:ka.attachedSticker,photo_comment:ka.attachedPhoto,video_comment:ka.attachedVideo});if(na)ma=c('ImmutableObject').set(ma,{originalTimestamp:ma.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ma]});c('UFIFeedbackTargets').getFeedbackTarget(ma.ftentidentifier,function(oa){var pa={};pa[c('ActorURI').PARAMETER_ACTOR]=oa.actorforpost;var qa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,babelHelpers['extends']({ft_ent_identifier:ma.ftentidentifier,comment_text:ja,source:ka.source,comment_id:ma.id,parent_comment_id:ma.parentcommentid,attached_sticker_fbid:ka.attachedSticker?ka.attachedSticker.fbid:0,attached_photo_fbid:ka.attachedPhoto?ka.attachedPhoto.fbid:0,attached_video_fbid:ka.attachedVideo?ka.attachedVideo.fbid:0},la,pa));});},translateComments:function ga(ha,ia,ja,ka){var la=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(la,{ft_ent_identifier:ha,comment_ids:ia,source:ka.source,trigger:ja});},setHideAsSpam:function ga(ha,ia,ja){var ka=c('UFIUserActionUtils').trackingData(ja.target),la=c('UFIComments').getComment(ha),ma={commentid:ha,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ia};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ma]});c('UFIFeedbackTargets').getFeedbackTarget(la.ftentidentifier,function(na){var oa={};oa[c('ActorURI').PARAMETER_ACTOR]=na.actorforpost;var pa=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(pa,babelHelpers['extends']({comment_id:ha,spam_action:ia,ft_ent_identifier:la.ftentidentifier,source:ja.source},ka,oa));});},removeComment:function ga(ha,ia){var ja=c('UFIUserActionUtils').trackingData(ia.target),ka=c('UFIComments').getComment(ha),la={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ha,islocal:true,oneclick:ia.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});c('UFIFeedbackTargets').getFeedbackTarget(ka.ftentidentifier,function(ma){var na={};na[c('ActorURI').PARAMETER_ACTOR]=ma.actorforpost;var oa=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(oa,babelHelpers['extends']({comment_id:ka.id,comment_legacyid:ka.legacyid,ft_ent_identifier:ka.ftentidentifier,one_click:ia.oneclick,source:ia.source,client_id:c('ClientIDs').getNewClientID()},ja,na));});},changeAcceptedAnswer:function ga(ha,ia){c('MercuryServerDispatcher').trySend(w,{ft_ent_identifier:ha.id,do_accept:ia});},banUser:function ga(ha,ia,ja,ka){var la=ja?j.BAN:j.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:ia,commenter_id:ha.author,action:la,comment_id:ha.id,client_side:true});},changeSubscribe:function ga(ha,ia,ja){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ka){var la=c('UFIUserActionUtils').trackingData(ja.target);if(ka.hasviewersubscribed!==ia){var ma={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ka.actorforpost,hasviewersubscribed:ia,entidentifier:ha};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ma]});var na={};na[c('ActorURI').PARAMETER_ACTOR]=ka.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:ia,ft_ent_identifier:ha,source:ja.source,client_id:c('ClientIDs').getNewClientID(),rootid:ja.rootid,comment_expand_mode:ja.commentexpandmode},la,na));}});},fetchSpamComments:function ga(ha,ia,ja,ka){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ha,viewas:ka,comment_ids:ia,parent_comment_id:ja,source:null});},hideConstituentTitle:function ga(ha){var ia=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(ia).setMethod('POST').setData({ft_id:ha.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:ha.id}).send();},showConstituentTitle:function ga(ha){var ia=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',ha.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',ha.id).getURI();new (c('AsyncRequest'))(ia).send();},removePreview:function ga(ha,ia){var ja=c('UFIUserActionUtils').trackingData(ia.target),ka={commentid:ha.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ha.id,ft_ent_identifier:ha.ftentidentifier,source:ia.source},ja));}};function l(ga){c('AsyncResponse').defaultErrorHandler(ga);}function m(ga){var ha=ga.request.data;c('AsyncResponse').defaultErrorHandler(ga);var ia=ha.client_id||ha.comment_id,ja=c('UFIComments').getComment(ia),ka=ja.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ja=c('ImmutableObject').setDeep(ja,{status:ka,allowRetry:n(ga),body:{mentionstext:ha.comment_text,mentionsphoto:ja.photo_comment,mentionsvideo:ja.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ja]});}function n(ga){var ha=ga.getError();if(ga.isBlockedAction())return false;if(ga.silentError)return true;if(ha===1357012||ha===1357006)return false;return true;}function o(ga){var ha=ga.request.data,ia=ha.comment_id,ja=c('UFIComments').getComment(ia);ja=c('ImmutableObject').set(ja,{status:ja.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ja]});}function p(ga){var ha=ga.request.data,ia=ha.comment_id,ja=c('UFIComments').getComment(ia);if(ha.like_action===ja.hasviewerliked){var ka=ja.hasviewerliked?-1:1,la={commentid:ia,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ja.hasviewerliked,likecount:(ja.likecount||0)+ka};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});}c('AsyncResponse').defaultErrorHandler(ga);}function q(ga){var ha=ga.request.data,ia=ha.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ia,function(ja){if(ja.hasviewerliked===ha.like_action){var ka=ja.hasviewerliked?-1:1,la={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ja.actorforpost,hasviewerliked:!ja.hasviewerliked,likecount:(ja.likecount||0)+ka,entidentifier:ia,likesentences:{current:ja.likesentences.alternate,alternate:ja.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});}});c('AsyncResponse').defaultErrorHandler(ga);}function r(ga){var ha=ga.request.data,ia=ha.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ia,function(ja){if(ja.hasviewersubscribed===ha.subscribe_action){var ka={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ja.actorforpost,hasviewersubscribed:!ja.hasviewersubscribed,entidentifier:ia};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});}});c('AsyncResponse').defaultErrorHandler(ga);}var s={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:l},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:ea,batch_function:fa},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},t=c('XUFIAddCommentController').getURIBuilder().getURI();s[t]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var u=c('XUFIDeleteCommentController').getURIBuilder().getURI();s[u]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var v=c('XUFICommentLikeController').getURIBuilder().getURI();s[v]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:p,batch_if:ca,batch_function:fa};var w=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();s[w]={mode:c('MercuryServerDispatcher').IMMEDIATE};var x=c('XUFIHideCommentController').getURIBuilder().getURI();s[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var y=c('XUFILikeController').getURIBuilder().getURI();s[y]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:q,batch_if:da,batch_function:fa};var z=c('XUFIEditCommentController').getURIBuilder().getURI();s[z]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var aa=c('XUFITranslateCommentController').getURIBuilder().getURI();s[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XUFIActorChangeController').getURIBuilder().getURI();s[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(s);function ca(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier&&ga.comment_id==ha.comment_id;}function da(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier;}function ea(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier;}function fa(ga,ha){return ha;}f.exports=babelHelpers['extends']({},k,c('UFIReactionUserActions'));}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('LitestandClassicRHC',['cx','Arbiter','BigPipe','CSS','DOMQuery','NavigationMessage','Run','SubscriptionsHandler','requireWeak'],(function a(b,c,d,e,f,g,h){var i="_268y";function j(l,m){var n=new (c('SubscriptionsHandler'))(),o=n.release.bind(n),p=c('DOMQuery').scry(l,'.pagelet'),q=p.length;n.addSubscriptions(m.subscribe([].map.call(p,function(r){return r.id+'_displayed';}),function(){c('CSS').removeClass(l,i);if(--q===0){c('Arbiter').inform('LitestandClassicRHC/loaded');o();}}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,o),m.subscribeOnce(c('BigPipe').Events.displayed,function(){c('Arbiter').inform('LitestandClassicRHC/loaded');c('CSS').removeClass(l,i);o();}));c('Run').onLeave(o);}var k={init:function l(m){c('requireWeak')('BigPipe',function(n){var o=n.getCurrentInstance();if(o&&o.arbiter){j(m,o.arbiter);}else c('Arbiter').subscribeOnce('BigPipe/init',function(event,p){j(m,p.arbiter);},c('Arbiter').SUBSCRIBE_NEW);});}};f.exports=k;}),null);
__d('ComposerStickyEntriesTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ComposerStickyEntriesLoggerConfig',this.$ComposerStickyEntriesTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ComposerStickyEntriesLoggerConfig',this.$ComposerStickyEntriesTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ComposerStickyEntriesTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ComposerStickyEntriesTypedLogger1=babelHelpers['extends']({},this.$ComposerStickyEntriesTypedLogger1,j);return this;};h.prototype.setEventType=function(j){this.$ComposerStickyEntriesTypedLogger1.event_type=j;return this;};h.prototype.setStickyType=function(j){this.$ComposerStickyEntriesTypedLogger1.sticky_type=j;return this;};h.prototype.setVC=function(j){this.$ComposerStickyEntriesTypedLogger1.vc=j;return this;};var i={event_type:true,sticky_type:true,vc:true};f.exports=h;}),null);
__d('ReactComposerAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({REGISTER_ATTACHMENT:null,INITIALIZE_ATTACHMENT:null,SELECT_ATTACHMENT:null,SET_INITIALIZED:null,SET_BOOTLOADED:null,SET_BOOTSTRAPPED:null,UPLOAD_ATTACHMENT:null},'ReactComposerAttachmentActionType');}),null);
__d('ReactComposerMediaUploadActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_IS_SPHERICAL:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_RETRY:null,PHOTO_UPLOAD_EXTRA_DONE:null,PHOTOS_SELECT:null,PHOTO_ADD_UPLOAD:null,SPHERICAL_PHOTO_CHECK_DONE:null,SPHERICAL_PHOTO_CHECK_FAILED:null,VIDEO_UPLOAD_ENQUEUED:null,VIDEO_UPLOAD_UPLOADING:null,VIDEO_UPLOAD_DONE:null,VIDEO_UPLOAD_FAILED:null,VIDEO_UPLOAD_RETRY:null,VIDEO_SET_THUMBNAIL:null,VIDEO_SET_UPLOADER:null,MEDIA_UPLOAD_MOVED:null,MEDIA_UPLOAD_REMOVE:null,MEDIA_UPLOAD_PROGRESS:null,MEDIA_UPLOAD_INPUT_CLICKED:null,MEDIA_UPLOAD_INPUT_DONE:null,PREFILL_MEDIAS:null,REORDER_MEDIAS:null},'ReactComposerMediaUploadActionType');}),null);
__d('ReactComposerScrapedAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null,ATTACHMENT_CAROUSEL_UPLOAD:null,ATTACHMENT_SHARE_SELECTED:null},'ReactComposerScrapedAttachmentActionType');}),null);
__d('ReactComposerActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({COMPOSER_ENTRY:null,COMPOSER_CANCEL:null,INIT_CONFIG:null,POST_ERROR:null,POST_STARTED:null,POST_INTENDED:null,POST_SUCCEEDED:null,POST_FINALLY:null,PUBLISH_STARTED:null,PUBLISH_SUCCEEDED:null,COMPOSER_RESET:null,EXPAND_SPROUTS:null,COLLAPSE_SPROUTS:null,FEATURE_INTENT:null,FEATURE_DONE:null,FEATURE_CANCEL:null,SCHEDULE:null},'ReactComposerActionTypes');}),null);
__d('ReactComposerLoggingQueue',['invariant','Bootloader','requireWeak'],(function a(b,c,d,e,f,g,h){var i=null;c('requireWeak')('ReactComposerLoggingStore',function(l){i=l;});var j=[],k={add:function l(m){if(m&&m.suppressWaterfallLogging)return;m&&m.composerID||h(0);if(i&&i.isActivated(m.composerID))return;j.push(m);},initBootload:function l(m,n,o,p){c('Bootloader').loadModules(["ComposerXSessionIDs","ComposerXMarauderLogger","ReactComposerPerfLogger","ReactComposerLoggingStore"],function(q,r,s,t){q.resetSessionID(m);r.registerComposer(n,o,p);s.registerComposer(n,p.targetType,p.ref,o);t.activate(m);},'ReactComposerLoggingQueue');},pop:function l(){return j.shift();},getLength:function l(){return j.length;}};f.exports=k;}),null);
__d('ReactComposerDispatcher',['ReactComposerLoggingQueue','Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){'use strict';i.dispatch.call(this,k);c('ReactComposerLoggingQueue').add(k);};function j(){'use strict';h.apply(this,arguments);}f.exports=new j();}),null);
__d('ReactComposerStoreBase',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerEvents','EventEmitter','Map'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$ReactComposerStoreBase1=k;this.$ReactComposerStoreBase2=new (c('Map'))();this.$ReactComposerStoreBase3=c('ReactComposerDispatcher').register(function(m){switch(m.type){case c('ReactComposerActionTypes').COMPOSER_RESET:this.__cleanup(m);break;}l(m);}.bind(this));}j.prototype.getComposerData=function(k){'use strict';var l=this.$ReactComposerStoreBase2.get(k);if(!l){l=this.$ReactComposerStoreBase1();this.$ReactComposerStoreBase2.set(k,l);}return l;};j.prototype.clearComposerData=function(k){'use strict';this.$ReactComposerStoreBase2.set(k,this.$ReactComposerStoreBase1());};j.prototype.addChangeListener=function(k){'use strict';return this.addListener(c('ReactComposerEvents').CHANGE,k);};j.prototype.emitChange=function(k){'use strict';this.emit(c('ReactComposerEvents').CHANGE,{composerID:k});};j.prototype.getDispatchToken=function(){'use strict';return this.$ReactComposerStoreBase3;};j.prototype.validateAction=function(k,l){'use strict';l=[].concat(l);var m=l.map(function(n){if(k[n]===undefined)throw new Error('Action missing field: '+n);return k[n];});if(l.length===1)return m[0];return m;};j.prototype.__cleanup=function(k){'use strict';this.clearComposerData(k.composerID);this.emitChange(k.composerID);};f.exports=j;}),null);
__d('ReactComposerActionStore',['errorCode','ReactComposerActionTypes','ReactComposerEvents','ReactComposerStoreBase','Arbiter','AsyncResponse','NYE2017TextHandler','Set','requireWeak'],(function a(b,c,d,e,f,g,h){var i,j,k=void 0;c('requireWeak')('ReactComposerStatusStore',function(m){return k=m;});i=babelHelpers.inherits(l,c('ReactComposerStoreBase'));j=i&&i.prototype;function l(m,n){'use strict';m=m?m:function(){return null;};var o;j.constructor.call(this,m,function(p){if(!(o&&o.__shouldIgnoreAction(p)))switch(p.type){case c('ReactComposerActionTypes').POST_STARTED:o&&o.$ReactComposerActionStore2(p);break;case c('ReactComposerActionTypes').POST_INTENDED:o&&o.$ReactComposerActionStore3(p);break;case c('ReactComposerActionTypes').POST_SUCCEEDED:o&&o.$ReactComposerActionStore4(p);break;case c('ReactComposerActionTypes').POST_ERROR:o&&o.$ReactComposerActionStore5(p);break;case c('ReactComposerActionTypes').POST_FINALLY:o&&o.$ReactComposerActionStore6(p);break;default:}n&&n(p);});o=this;this.$ReactComposerActionStore1=new (c('Set'))();}l.prototype.registerComposerID=function(m){'use strict';this.$ReactComposerActionStore1.add(m);};l.prototype.$ReactComposerActionStore2=function(m){'use strict';var n=this.validateAction(m,'composerID');this.__onPostStarted&&this.__onPostStarted(m);c('Arbiter').inform(c('ReactComposerEvents').POST_STARTED+n);};l.prototype.$ReactComposerActionStore3=function(m){'use strict';this.validateAction(m,['composerID','actorID','config','targetID']);if(!this.__canPost||this.__canPost(m))this.$ReactComposerActionStore2(m);};l.prototype.$ReactComposerActionStore4=function(m){'use strict';var n=this.validateAction(m,'composerID');if(k){var o=k.getMessage(n);c('NYE2017TextHandler').playPostAnimationIfMatchesAndAllowed(o);}this.__onPostSucceeded&&this.__onPostSucceeded(m);c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+n);};l.prototype.$ReactComposerActionStore5=function(m){'use strict';if(this.__onPostError)return this.__onPostError(m);if(m.response){var n=m.response.getError&&m.response.getError()==1455004;if(n)return;c('AsyncResponse').defaultErrorHandler(m.response);}};l.prototype.$ReactComposerActionStore6=function(m){'use strict';this.__onPostFinally&&this.__onPostFinally(m);};l.prototype.__shouldIgnoreAction=function(m){'use strict';var n=this.validateAction(m,'composerID');return !this.$ReactComposerActionStore1.has(n);};f.exports=l;}),null);
__d('ReactComposerFocusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({SUBSCRIBE:null,UNSUBSCRIBE:null,FOCUS_ACQUIRED:null,FOCUS_LOST:null});}),null);
__d('ReactComposerInit',['invariant','Arbiter','ReactComposerEvents','ReactComposerIDGenerator','Map','React','ReactDOM'],(function a(b,c,d,e,f,g,h){var i={_isUnmounting:false,instances:new (c('Map'))(),changeProps:function j(k,l){var m=i._getCurrentInstance(k);m.props=l;i.resetComposer(k,true);},normalizeComposerID:function j(k){if(!k.contextConfig.composerID)k.contextConfig.composerID=c('ReactComposerIDGenerator').getID();return k.contextConfig.composerID;},init:function j(k,l,m,n){var o=i.normalizeComposerID(l),p={ComposerModule:k,props:l,container:m,asyncPreloader:n,hidden:false};this._render(p);this._preloadAsyncData(p);i.instances.set(o,p);c('Arbiter').inform(c('ReactComposerEvents').INSTANCE_MOUNTED+o);},_render:function j(k){var l=k.ComposerModule,m=k.props,n=k.container;c('ReactDOM').render(c('React').createElement(l,m),n);},_preloadAsyncData:function j(k){var l=k.props,m=k.asyncPreloader;if(m==null||l.config.audienceXHP)return;m.onLoaded(function(n){var o=n.audienceXHP;l.config=babelHelpers['extends']({},l.config,{audienceXHP:l.config.audienceXHP||o});this._render(k);}.bind(this));},_createNewComposer:function j(k,l){k.props.contextConfig.composerID=c('ReactComposerIDGenerator').getID();k.props.prefillConfig={};i.init(k.ComposerModule,k.props,l,k.asyncPreloader);},resetComposer:function j(k){var l=i._getCurrentInstance(k);i.unmountInstance(k);if(l.hidden){l.container.parentNode&&l.container.parentNode.removeChild(l.container);}else i._createNewComposer(l,l.container);c('Arbiter').inform(c('ReactComposerEvents').COMPOSER_RESET+k,{newComposerID:l.props.contextConfig.composerID});},hideAndReplaceComposer:function j(k){var l=i._getCurrentInstance(k),m=l.container.cloneNode(false);l.container.style.display='none';l.container.removeAttribute('id');l.container.parentNode&&l.container.parentNode.appendChild(m);l.hidden=true;i._createNewComposer(l,m);c('Arbiter').inform(c('ReactComposerEvents').COMPOSER_RESET+k,{newComposerID:l.props.contextConfig.composerID});},isInstanceMounted:function j(k){return !!i.instances.get(k);},unmountInstance:function j(k){if(i.isInstanceMounted(k)&&!i._isUnmounting){i._isUnmounting=true;i._unmountReact(k);i._isUnmounting=false;i.instances['delete'](k);}},_unmountReact:function j(k){var l=i._getCurrentInstance(k);c('ReactDOM').unmountComponentAtNode(l.container);c('Arbiter').inform(c('ReactComposerEvents').COMPOSER_UNMOUNT+k);return l;},_getCurrentInstance:function j(k){var l=i.instances.get(k);l||h(0);return l;}};f.exports=i;}),null);
__d('ReactComposerSproutsDisplayState',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({INLINE:null,EXPANDED:null},'ReactComposerSproutsDisplayState');}),null);
__d('ReactComposerStore',['ReactComposerActionStore','ReactComposerActionTypes','ReactComposerSproutsDisplayState','ReactComposerAttachmentActionType','ReactComposerScrapedAttachmentActionType','ReactComposerInit','Bootloader'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isActive:false,serverErrorResponse:null,posting:false,postSucceeded:false,publishing:false,ref:null,targetType:null,sproutsDisplayState:c('ReactComposerSproutsDisplayState').INLINE,scheduledPublishTime:null};},function(l){switch(l.type){case c('ReactComposerActionTypes').INIT_CONFIG:k&&k.$ReactComposerStore1(l);break;case c('ReactComposerActionTypes').PUBLISH_STARTED:k&&k.$ReactComposerStore2(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerStore3(l);break;case c('ReactComposerActionTypes').EXPAND_SPROUTS:k&&k.$ReactComposerStore4(l);break;case c('ReactComposerActionTypes').COLLAPSE_SPROUTS:k&&k.$ReactComposerStore5(l);break;case c('ReactComposerAttachmentActionType').UPLOAD_ATTACHMENT:case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerStore6(l);break;case c('ReactComposerActionTypes').SCHEDULE:k&&k.$ReactComposerStore7(l);break;}});k=this;}j.prototype.$ReactComposerStore7=function(k){'use strict';var l=this.getComposerData(k.composerID);l.scheduledPublishTime=k.scheduleDate;};j.prototype.getScheduledPublishTime=function(k){'use strict';return this.getComposerData(k).scheduledPublishTime;};j.prototype.getServerErrorResponse=function(k){'use strict';return this.getComposerData(k).serverErrorResponse;};j.prototype.getRef=function(k){'use strict';return this.getComposerData(k).ref;};j.prototype.getTargetType=function(k){'use strict';return this.getComposerData(k).targetType;};j.prototype.isPosting=function(k){'use strict';return this.getComposerData(k).posting;};j.prototype.hasPostSucceeded=function(k){'use strict';return this.getComposerData(k).postSucceeded;};j.prototype.isActive=function(k){'use strict';return this.getComposerData(k).isActive;};j.prototype.isPublishing=function(k){'use strict';return this.getComposerData(k).publishing;};j.prototype.getSproutsDisplayState=function(k){'use strict';return this.getComposerData(k).sproutsDisplayState;};j.prototype.isUploading=function(k){'use strict';return this.getComposerData(k).uploading;};j.prototype.__shouldIgnoreAction=function(k){'use strict';return false;};j.prototype.__onPostStarted=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.posting=true;this.emitChange(l);};j.prototype.__onPostSucceeded=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.serverErrorResponse=null;m.posting=false;m.postSucceeded=true;m.publishing=false;this.emitChange(l);};j.prototype.__onPostError=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.serverErrorResponse=k.response;m.posting=false;m.postSucceeded=false;m.publishing=false;this.emitChange(l);};j.prototype.__onPostFinally=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.posting=false;m.publishing=false;this.emitChange(l);};j.prototype.$ReactComposerStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','loggingConfig','activateOnInit']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.ref=n.ref;p.composerVersion=n.composerVersion;p.targetType=n.targetType;if(o){this.$ReactComposerStore8(m);this.emitChange(m);}};j.prototype.$ReactComposerStore2=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.publishing=true;this.emitChange(l);};j.prototype.$ReactComposerStore6=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.uploading=k.uploading;this.emitChange(l);};j.prototype.$ReactComposerStore3=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.sproutsDisplayState=c('ReactComposerSproutsDisplayState').EXPANDED;this.$ReactComposerStore8(l);this.emitChange(l);};j.prototype.$ReactComposerStore4=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.sproutsDisplayState=c('ReactComposerSproutsDisplayState').EXPANDED;this.emitChange(l);};j.prototype.$ReactComposerStore5=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.sproutsDisplayState=c('ReactComposerSproutsDisplayState').INLINE;this.emitChange(l);};j.prototype.$ReactComposerStore8=function(k){'use strict';var l=this.getComposerData(k);if(!l.isActive){l.isActive=true;c('Bootloader').loadModules(["curry","Run","ReactComposerHandleUnsavedChanges","URI"],function(m,n,o,p){return (n.onBeforeUnload(m(o.handler,k,p.getNextURI())));},'ReactComposerStore');}};j.prototype.__cleanup=function(k){'use strict';setTimeout(c('ReactComposerInit').resetComposer.bind(null,k.composerID),0);};f.exports=new j();}),null);
__d('ReactComposerFocusActions',['ReactComposerFocusActionTypes','ReactComposerDispatcher','ReactComposerStore'],(function a(b,c,d,e,f,g){'use strict';c('ReactComposerStore');var h={subscribe:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').SUBSCRIBE,onFocusAcquiredCallback:k,onFocusLostCallback:l});},unsubscribe:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').UNSUBSCRIBE});},notifyFocusAcquired:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').FOCUS_ACQUIRED});},notifyFocusLost:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').FOCUS_LOST});}};f.exports=h;}),null);
__d('ReactComposerLoggingActions',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerFeatureType','ReactComposerLoggingName','ReactComposerMediaUploadActionType'],(function a(b,c,d,e,f,g){var h={composerEntry:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').COMPOSER_ENTRY,uiElementName:k});},mediaUploadInputClicked:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_CLICKED,sourceLoggingName:k});},mediaUploadInputDone:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_DONE,sourceLoggingName:k});},mediaFileDropped:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_INTENT,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_DROPPED});},mediaFileDropFinished:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_DONE,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_DROPPED});},mediaFilePasted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_INTENT,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_PASTED});},mediaFilePasteFinished:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_DONE,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_PASTED});},collectionSelectorCancel:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_CANCEL,featureType:c('ReactComposerFeatureType').COLLECTIONS,uiElementName:k});},collectionSelectorDone:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_DONE,featureType:c('ReactComposerFeatureType').COLLECTIONS,uiElementName:k});},composerCancel:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').COMPOSER_CANCEL});}};f.exports=h;}),null);
__d('ReactComposerFocusHandleScrollAway',['Event','getActiveElement','throttle'],(function a(b,c,d,e,f,g){'use strict';var h=-400,i=300,j={handler:function k(l,m){var n=c('Event').listen(window,'scroll',c('throttle')(function(){var o=l.getBoundingClientRect().bottom;if(o<h){m();c('getActiveElement')().blur();n.remove();}},i));}};f.exports=j;}),null);
__d('ReactComposerFocusInit',['invariant','csx','DOM','DOMContainer.react','React','ReactDOM','Parent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={handler:function k(l,m,n,o,p,q){var r=c('DOM').create('div'),s=l.parentNode;if(q){var t=c('Parent').bySelector(l,"._3u13");if(t!==null)s=t.parentNode.parentNode;}c('ReactDOM').render(c('React').createElement(p,{composerID:m,actorID:n,gks:o,enableFocusBehavior:true},c('React').createElement(c('DOMContainer.react'),{display:'block'},l)),r);s||h(0);if(s.firstChild){s.replaceChild(r,s.firstChild);}else s.appendChild(r);},preload:function k(){}};f.exports=j;}),null);
__d('ReactComposerFocusWrapperCore.react',['ix','cssVar','csx','cx','ReactComposerEvents','Arbiter','ComposerStickyEntriesTypedLogger','CurrentUser','DOM','Event','Image.react','Keys','Link.react','ReactComponentWithPureRenderMixin','React','ReactDOM','ReactComposerFocusActions','Run','SubscriptionsHandler','URI','ifRequired','fbglyph'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('React').PropTypes,m=parseInt("10px",10),n=c('React').createClass({displayName:'ReactComposerFocusWrapperCore',_composerID:'',_fixedHeight:0,_subscriptions:c('SubscriptionsHandler'),_firstFocus:true,_onLeaveHandle:null,_stickycomposer:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{composerID:l.string.isRequired,ariaLabel:l.string,onDismiss:l.func.isRequired,onFocus:l.func.isRequired,focused:l.bool.isRequired,gks:l.object,onFirstFocus:l.func,fixHeight:l.bool},getDefaultProps:function o(){return {focused:false,fixHeight:false};},componentWillMount:function o(){this._composerID=this.props.composerID;},componentWillReceiveProps:function o(p){if(this.props.fixHeight&&!this.props.focused&&p.focused){var q=c('ReactDOM').findDOMNode(this.refs.container);this._fixedHeight=q.offsetHeight+m;}},componentDidMount:function o(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscribeComposerEvents();this._onLeaveHandle=c('Run').onLeave(this._onDismiss);c('ifRequired')('ReactComposerSticky',function(p){if(this.props.gks&&this.props.gks.hasStickyComposer)this._stickycomposer=new p(this.props.gks&&this.props.gks.hasScrollawaySticky,c('ReactDOM').findDOMNode(this.refs.container));}.bind(this));},componentDidUpdate:function o(p){if(!p.focused&&this.props.focused)try{var q=document.createEvent('HTMLEvents');if(q.initEvent){q.initEvent('resize',true,false);window.dispatchEvent(new (c('Event'))('resize'));}}catch(q){}},componentWillUnmount:function o(){this._subscriptions&&this._subscriptions.release();this._onDismiss();if(this._onLeaveHandle)this._onLeaveHandle.remove();this._stickycomposer&&this._stickycomposer.destroy();},render:function o(){var p=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,q=this.props.focused?this._renderDismissButton():null,r=this.props.focused?this._renderBugNub():null;return (c('React').createElement('div',{role:'dialog','aria-label':this.props.ariaLabel,className:"_3u13"+(' '+"_3e9r")+(this.props.focused?' '+"_3u14":'')+(this.props.focused?' '+"_1b3n":''),style:p,onKeyDown:this._onKeyDown},c('React').createElement('div',{className:"_3u15",onClick:this._onDismiss,role:'presentation'}),c('React').createElement('div',{className:"_3u16",ref:'container',onFocus:this._onFocus},this.props.children,q),r));},getComposerID:function o(){return this._composerID;},getComposer:function o(){return this.refs.container;},_renderDismissButton:function o(){return (c('React').createElement('div',{className:"_3u17"+(this.props.gks&&this.props.gks.topPostButton?' '+"_nse":'')+(this.props.gks&&this.props.gks.hasHeader?' '+"_356d":'')+(this.props.gks&&this.props.gks.albumTab?' '+"_3_fz":''),onClick:this._onDismiss,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{src:h("125922")})));},_renderBugNub:function o(){if(!c('CurrentUser').isEmployee())return null;var p=new (c('URI'))('/ajax/bugs/report');return (c('React').createElement('div',{className:"_t95"},c('React').createElement(c('Link.react'),{href:'#',ajaxify:p,className:"_t97",rel:'dialog'})));},_subscribeComposerEvents:function o(){var p=c('Arbiter').subscribe(c('ReactComposerEvents').OPTIMISTIC_POSTING_STARTED+this._composerID,function(){this.props.onDismiss(true);this._stickycomposer&&this._stickycomposer.setFocused(false);}.bind(this)),q=c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+this._composerID,function(){this.props.onDismiss(true);this._stickycomposer&&this._stickycomposer.setFocused(false);}.bind(this)),r=c('Arbiter').subscribe('ReactFeedComposerXBootloader/focuscomposer/'+this._composerID,function(){return this._onFocus();}.bind(this)),s=c('Arbiter').subscribe(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(t,u){if(u&&u.newComposerID){this._composerID=u.newComposerID;this._subscriptions.release();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscribeComposerEvents();}}.bind(this));this._subscriptions.addSubscriptions(p,q,r,s);},_onFocus:function o(){if(this.props.focused)return;if(this.props.gks&&this.props.gks.hasStickyComposer){var p=c('DOM').scry(this.refs.container,"._1a1e");if(p.length>0)new (c('ComposerStickyEntriesTypedLogger'))().setEventType('entry').setStickyType(this.props.gks&&this.props.gks.hasScrollawaySticky?'scrollaway':'always').log();}if(this._firstFocus){this.props.onFirstFocus&&this.props.onFirstFocus();this._firstFocus=false;}this.props.onFocus();c('ReactComposerFocusActions').notifyFocusAcquired(this.props.composerID);this._stickycomposer&&this._stickycomposer.setFocused(true);},_onKeyDown:function o(p){if(p.keyCode===c('Keys').ESC&&!p.nativeEvent.isPropagationStopped)this._onDismiss();},_onDismiss:function o(){this.props.onDismiss();c('ReactComposerFocusActions').notifyFocusLost(this.props.composerID);this._stickycomposer&&this._stickycomposer.setFocused(false);}});f.exports=n;}),null);
__d('ReactComposerFocusInline.react',['ReactComposerFocusHandleScrollAway','ReactComposerFocusWrapperCore.react','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={focused:false},this.$ReactComposerFocusInline2=function(){var q=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusHandleScrollAway').handler(q,this.$ReactComposerFocusInline1);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusInline1=function(){this.setState({focused:false});}.bind(this),m;}k.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusInline1();};k.prototype.render=function(){'use strict';return c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused&&this.props.enableFocusBehavior,onFocus:this.$ReactComposerFocusInline2,onDismiss:this.$ReactComposerFocusInline1,ref:'focus'},this.props.children);};k.propTypes={composerID:j.string.isRequired};f.exports=k;}),null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],(function a(b,c,d,e,f,g){var h=0,i={preload:function j(k){if(h<2){k=c('DOMQuery').scry(k,'video')[0];if(k instanceof b.HTMLVideoElement){if(!h)c('Run').onBeforeUnload(function(){return i.reset();});k.preload='auto';h+=1;}}},reset:function j(){h=0;}};i.reset();f.exports=i;}),null);
__d('PriorityJobQueue',['Promise','Map'],(function a(b,c,d,e,f,g){'use strict';var h=1;function i(j){this.$PriorityJobQueue2=new (c('Map'))();this.$PriorityJobQueue3=new (c('Map'))();this.$PriorityJobQueue4=false;this.$PriorityJobQueue5=new (c('Map'))();this.$PriorityJobQueue8=function(){var k=this.$PriorityJobQueue3.size,l=Date.now();if(k<this.$PriorityJobQueue1){var m=this.$PriorityJobQueue1-k,n=Array.from(this.$PriorityJobQueue2.values());n.sort(function(q,r){return r.job.getPriority(l-r.timeQueued)-q.job.getPriority(l-q.timeQueued);});var o=this.$PriorityJobQueue2.size;for(var p=0;p<Math.min(o,m);p++)this.$PriorityJobQueue9(n[p]);}this.$PriorityJobQueue4=false;}.bind(this);this.$PriorityJobQueue1=j||h;}i.prototype.$PriorityJobQueue6=function(j){this.$PriorityJobQueue3['delete'](j);this.$PriorityJobQueue7();};i.prototype.$PriorityJobQueue7=function(){if(!this.$PriorityJobQueue4){this.$PriorityJobQueue4=true;c('Promise').resolve().then(this.$PriorityJobQueue8).done();}};i.prototype.$PriorityJobQueue9=function(j){var k=j.job,l=k.getJobID();this.$PriorityJobQueue2['delete'](l);this.$PriorityJobQueue3.set(l,j);k.getPromise().then(function(){return this.$PriorityJobQueue6(l);}.bind(this))['catch']();var m=this.$PriorityJobQueue5.get(l);m&&m();this.$PriorityJobQueue5['delete'](l);k.start();};i.prototype.enqueue=function(j,k){var l={job:j,timeQueued:Date.now()},m=j.getJobID();this.$PriorityJobQueue2.set(m,l);if(k)this.$PriorityJobQueue5.set(m,k);this.$PriorityJobQueue7();return this;};i.prototype.abort=function(j){this.$PriorityJobQueue2['delete'](j);var k=this.$PriorityJobQueue3.get(j);if(k){k.job.abort();this.$PriorityJobQueue3['delete'](j);this.$PriorityJobQueue7();}};i.get=function(){if(!i.$PriorityJobQueue10)i.$PriorityJobQueue10=new i(h);return i.$PriorityJobQueue10;};f.exports=i;}),null);
__d('VideoPlayerShakaBandwidthEstimator',['CacheStorage','requireWeak','Run','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=void 0;c('requireWeak')('Shaka',function(l){h=l.util.EWMACacheBandwidthEstimator;});var i=null,j=false;function k(){'use strict';var l=new (c('CacheStorage'))('localstorage','_video_'),m=l.get('bandwidthEstimate');this.$VideoPlayerShakaBandwidthEstimator1={isMockObject:true,getBandwidth:function n(){return m;},getFastMovingBandwidth:function n(){return m;}};if(h){this.$VideoPlayerShakaBandwidthEstimator1=new h(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?m:undefined);this.$VideoPlayerShakaBandwidthEstimator1.isMockObject=false;}c('Run').onUnload(function(){l.set('bandwidthEstimate',this.$VideoPlayerShakaBandwidthEstimator1.getBandwidth());}.bind(this));}k.prototype.getEstimator=function(){'use strict';return this.$VideoPlayerShakaBandwidthEstimator1;};k.getInstance=function(){'use strict';if(i===null||i.getEstimator().isMockObject&&h)i=new k();return i;};k.getEstimator=function(){'use strict';return k.getInstance().getEstimator();};k.isAutoplayBandwidthRestrained=function(l){'use strict';var m=k.getEstimator(),n=void 0;if(c('VideoPlayerShakaExperiments').blockAutoplayUseFastMovingAverage&&j){n=m.getFastMovingBandwidth();}else n=m.getBandwidth();var o=l?c('VideoPlayerShakaExperiments').liveBlockAutoplayBandwidthThreshold:c('VideoPlayerShakaExperiments').blockAutoplayBandwidthThreshold;if(n===null||n>o){j=false;}else j=true;return j;};f.exports=k;}),null);
__d('VideoDashPrefetchCache',['Promise','regeneratorRuntime','Deferred','Map','PriorityJobQueue','Run','URI','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','XHRRequest','getCrossOriginTransport'],(function a(b,c,d,e,f,g){var h=null;function i(n,o){var p=new Error(n.errorMsg);p.name=n.errorType;p.type='preload';p.url=o;p.status=n.errorCode;return p;}function j(n){var o=new (c('URI'))(n.url),p=o.getDomain();return p.endsWith('fbcdn.net')&&!p.startsWith('interncache')&&!p.endsWith('ak.fbcdn.net');}function k(n,o,p){return {response:n.slice(o.start+0,o.end+1),responseTime:p};}function l(n,o,p){'use strict';this.$UrlRequestJob1=n;this.$UrlRequestJob2=o;this.$UrlRequestJob5=p;var q=new (c('XHRRequest'))(this.$UrlRequestJob2).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport'));this.$UrlRequestJob3=new (c('Promise'))(function(r,s){q.setErrorHandler(function(t){s(i(t,this.$UrlRequestJob2));}.bind(this));q.setResponseHandler(function(t){q.response=t;r(q);});q.setAbortHandler(function(){s(this.$UrlRequestJob3,new Error('Request promise aborted'));}.bind(this));}.bind(this));this.$UrlRequestJob4=q;}l.prototype.getUrl=function(){'use strict';return this.$UrlRequestJob2;};l.prototype.getPromise=function(){'use strict';return this.$UrlRequestJob3;};l.prototype.start=function(){'use strict';this.$UrlRequestJob4.send();};l.prototype.abort=function(){'use strict';this.$UrlRequestJob4.abort();};l.prototype.getPriority=function(n){'use strict';return 1/Math.min(this.$UrlRequestJob5,1)/Math.min(n,1);};l.prototype.getJobID=function(){'use strict';return this.$UrlRequestJob1;};function m(){'use strict';this.$VideoDashPrefetchCache1=new (c('Map'))();this.$VideoDashPrefetchCache2=new (c('Map'))();this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=0;this.$VideoDashPrefetchCache6=c('VideoPlayerShakaExperiments').maxPrefetchVideosNum;this.$VideoDashPrefetchCache7=c('VideoPlayerShakaExperiments').consolidateFragmentedPrefetchRequest;}m.prototype.$VideoDashPrefetchCache8=function(n){'use strict';var o=new (c('URI'))(n);if(o.getDomain()){o=o.removeQueryData(['oh']);o=o.removeQueryData('__gda__');for(var p=Object.keys(o.getQueryData()),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++];}else{r=p.next();if(r.done)break;s=r.value;}var t=s;if(t.startsWith('_nc'))o=o.removeQueryData(t);}return o.toString();}return n;};m.prototype.$VideoDashPrefetchCache9=function(n){var o=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],p=arguments.length<=2||arguments[2]===undefined?0:arguments[2];'use strict';var q=n;if(Object.keys(o))q=new (c('URI'))(n).addQueryData(o);var r=new (c('XHRRequest'))(q).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),s=new (c('Promise'))(function(t,u){r.setErrorHandler(function(v){this.$VideoDashPrefetchCache10(r);u(i(v,q));}.bind(this));r.setResponseHandler(function(v){r.response=v;this.$VideoDashPrefetchCache10(r);t(r);}.bind(this));r.setAbortHandler(function(){u(s,new Error('Request promise aborted'));});}.bind(this));this.$VideoDashPrefetchCache11(n,s,p);this.$VideoDashPrefetchCache12(n,s);this.$VideoDashPrefetchCache3.push(r);r.send();return s;};m.prototype.$VideoDashPrefetchCache11=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?3600000:arguments[2];'use strict';this.$VideoDashPrefetchCache13(n);if(p>0)this.$VideoDashPrefetchCache2.set(this.$VideoDashPrefetchCache8(n),setTimeout(function(){return this.$VideoDashPrefetchCache13(n);}.bind(this),p));this.$VideoDashPrefetchCache12(n,o);};m.prototype.genPrfetchMpdNow=function n(o,p,q){var r,s;return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:'use strict';if(!this.has(p)){u.next=3;break;}return u.abrupt('return',null);case 3:r=q.getURL();s=new l(o,r,0);this.$VideoDashPrefetchCache11(p,s.getPromise());s.start();u.next=9;return c('regeneratorRuntime').awrap(s.getPromise());case 9:return u.abrupt('return',null);case 10:case 'end':return u.stop();}},null,this);};m.prototype.queueRequestFromMouseMovement=function(n,o,p,q,r){var s=arguments.length<=5||arguments[5]===undefined?function(){}:arguments[5],t=arguments.length<=6||arguments[6]===undefined?function(){}:arguments[6];'use strict';var u=c('PriorityJobQueue').get(),v=this.$VideoDashPrefetchCache14(o);if(v){v.then(t).done();return;}var w=p.getURL(),x=new l(n,w,q);x.getPromise().then(t)['catch'](function(){return this.getAndDelete(o);}.bind(this));u.enqueue(x,function(){this.$VideoDashPrefetchCache11(o,x.getPromise(),r);s();}.bind(this));};m.prototype.cancelRequestFromMouseMovement=function(n){'use strict';c('PriorityJobQueue').get().abort(n);};m.prototype.$VideoDashPrefetchCache13=function(n,o){'use strict';this.getAndDelete(n,o);if(this.$VideoDashPrefetchCache2.has(n)){clearTimeout(this.$VideoDashPrefetchCache2.get(n));this.$VideoDashPrefetchCache2['delete'](n);}};m.prototype.$VideoDashPrefetchCache15=function(n){'use strict';var o=[];for(var p=0;p<n.length;p++){var q=m.createQueryStringURL(n[p]);if(!this.has(q))o.push(this.$VideoDashPrefetchCache9(q));}return o;};m.prototype.$VideoDashPrefetchCache16=function(n){'use strict';var o=m.getConsolidatedURL(n);if(o==null)return this.$VideoDashPrefetchCache15(n);var p=new (c('XHRRequest'))(o).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),q=Date.now(),r=[];for(var s=0;s<n.length;s++){var t=m.createQueryStringURL(n[s]),u=new (c('Deferred'))();if(!this.has(t))this.$VideoDashPrefetchCache12(t,u.getPromise());r.push(u);}p.setErrorHandler(function(v){this.$VideoDashPrefetchCache10(p);for(var w=0;w<r.length;w++)r[w].reject(i(v,o));}.bind(this));p.setResponseHandler(function(v){var w=Date.now()-q;for(var x=0;x<n.length;x++){var y=r[x],z=n[x];y.resolve(k(v,z,w));}this.$VideoDashPrefetchCache10(p);}.bind(this));p.setAbortHandler(function(){for(var v=0;v<n.length;v++){var w=r[v];w.reject(new Error('Request aborted.'));}});this.$VideoDashPrefetchCache3.push(p);p.send();return r.map(function(v){return v.getPromise();});};m.prototype.$VideoDashPrefetchCache17=function(n){'use strict';this.$VideoDashPrefetchCache5++;var o=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache16(n.video):this.$VideoDashPrefetchCache15(n.video),p=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache16(n.audio):this.$VideoDashPrefetchCache15(n.audio),q=this.$VideoDashPrefetchCache15(n.manifest),r=o.concat(p,q);c('Promise').all(r).then(function(){return this.$VideoDashPrefetchCache18();}.bind(this))['catch'](function(){return this.$VideoDashPrefetchCache18();}.bind(this));};m.prototype.$VideoDashPrefetchCache12=function(n,o){'use strict';n=this.$VideoDashPrefetchCache8(n);if(this.$VideoDashPrefetchCache1.values().next().done)c('Run').onLeave(function(){for(var p=0;p<this.$VideoDashPrefetchCache3.length;p++)this.$VideoDashPrefetchCache3[p].abort();this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=0;this.$VideoDashPrefetchCache1.clear();}.bind(this));this.$VideoDashPrefetchCache1.set(n,o);};m.prototype.$VideoDashPrefetchCache10=function(n){'use strict';var o=this.$VideoDashPrefetchCache3.indexOf(n);if(o>-1)this.$VideoDashPrefetchCache3.splice(o,1);};m.prototype.$VideoDashPrefetchCache18=function(){'use strict';this.$VideoDashPrefetchCache5--;var n=this.$VideoDashPrefetchCache4.shift();if(n)this.$VideoDashPrefetchCache17(n);};m.prototype.has=function(n){'use strict';n=this.$VideoDashPrefetchCache8(n);return this.$VideoDashPrefetchCache1.has(n);};m.prototype.getAndDelete=function(n,o){'use strict';n=this.$VideoDashPrefetchCache8(n);var p=this.$VideoDashPrefetchCache1.get(n);if(p&&o)o();this.$VideoDashPrefetchCache1['delete'](n);return p;};m.prototype.$VideoDashPrefetchCache14=function(n){'use strict';n=this.$VideoDashPrefetchCache8(n);var o=this.$VideoDashPrefetchCache1.get(n);return o;};m.prototype.queueRequestBatch=function(n){'use strict';if(this.$VideoDashPrefetchCache6===0||this.$VideoDashPrefetchCache5<this.$VideoDashPrefetchCache6){this.$VideoDashPrefetchCache17(n);}else this.$VideoDashPrefetchCache4.push(n);};m.getInstance=function(){'use strict';if(h===null)h=new m();return h;};m.createQueryStringURL=function(n){'use strict';var o=n.url,p=n.start,q=n.end;if(p!==null&&p!==undefined&&q!==null&&q!==undefined)o=new (c('URI'))(o).addQueryData({bytestart:p,byteend:q});return o.toString();};m.getConsolidatedURL=function(n){'use strict';var o='',p=Infinity,q=0;for(var r=0;r<n.length;r++){var s=n[r],t=s.url,u=s.start,v=s.end;if(t==null||u==null||v==null)return null;if(o===''){o=t;}else if(o!==t)return null;p=Math.min(p,u);q=Math.max(q,v);}return m.createQueryStringURL({url:o,start:p,end:q});};m.loadVideo=function(n){'use strict';if(c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained())return;var o=m.getInstance();if(!n.manifest)n.manifest=[];o.queueRequestBatch({manifest:n.manifest.filter(j),video:n.video.filter(j),audio:n.audio.filter(j)});};m.getCacheValue=function(n,o){'use strict';return m.getInstance().getAndDelete(n,o);};f.exports=m;}),null);
__d('VideoDisplayTimePlayButton',['CSS','DataStore','Event'],(function a(b,c,d,e,f,g){var h={},i='_spinner',j={getClicked:function k(l){return c('DataStore').get(l,'clicked',false);},register:function k(l,m){var n=l.id;h[n]=c('Event').listen(l,'click',function(){if(m){c('CSS').hide(l);c('CSS').show(m);}c('DataStore').set(l,'clicked',true);});if(m)h[n+i]=c('Event').listen(m,'click',function(){c('CSS').hide(m);c('CSS').show(l);c('DataStore').set(l,'clicked',false);});},unregister:function k(l){var m=l.id;if(h.hasOwnProperty(m))h[m].remove();var n=m+i;if(h.hasOwnProperty(n))h[n].remove();}};f.exports=j;}),null);
__d('VideosRenderingInstrumentation',['DataStore','VideoPlayerHTML5Experiments','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){var h={storeRenderTime:function i(j){var k=c('VideoPlayerHTML5Experiments').useMonotonicallyIncreasingTimers?c('performanceAbsoluteNow')():Date.now();c('DataStore').set(j,'videos_rendering_instrumentation',k);return k;},retrieveRenderTime:function i(j){var k=c('DataStore').get(j,'videos_rendering_instrumentation',NaN);if(Number.isNaN(k))k=h.storeRenderTime(j);return k;}};f.exports=h;}),null);
__d("XReactComposerLoggingODSController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/logging\/ods\/",{attachment_type:{type:"String"},composer_type:{type:"Enum",required:true,enumType:1},event:{type:"String",required:true}});}),null);