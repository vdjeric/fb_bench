if (self.CavalryLogger) { CavalryLogger.start_js(["SoeRk"]); }

__d('PageVoiceDropdownSelectorMenu.react',['cx','fbt','invariant','AdsAssetSectionType','AdsLoadState','AdsPageAssetSelector.react','BizSiteIdentifier.brands','BusinessAssetGrouping.brands','ContextualLayer.react','Image.react','ImageBlock.react','LayerAutoFocus','LayerHideOnBlur','LayerHideOnEscape','React','underscore.ads','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=300,o=12;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$PageVoiceDropdownSelectorMenu1=function(){if(Object.keys(this.props.user).length===0)return null;var u=this.$PageVoiceDropdownSelectorMenu2(),v=null;if(this.props.selectedActorID===this.props.user.id)v=c('React').createElement('div',{className:"_55fc"});var w=null;if(this.props.user.id&&(this.state.shownBusinessID===c('BusinessAssetGrouping.brands').NULL_BIZ_ID||this.state.shownBusinessID===null&&this.props.showUserInPersonalVoices))w=c('React').createElement(c('ImageBlock.react'),{className:"_5dsl"+(' '+"_alf")+(this.props.selectedActorID===this.props.user.id?' '+"_2246":'')+(' '+"_alg"),onClick:this.$PageVoiceDropdownSelectorMenu3},c('React').createElement(c('Image.react'),{className:"_4-rj",height:30,src:this.props.user.thumbSrc,width:30}),c('React').createElement('div',{className:"_1wcv"},c('React').createElement('div',{className:"_2sl4"+(' '+"_4c71")},this.props.user.name,'\u00A0',c('React').createElement('span',{className:"_uyb"},i._("(You)")),v)));return (c('React').createElement('div',{className:"_21wq"+(' '+"_70b")},this.props.title,w,u.length===0?null:c('React').createElement(c('AdsPageAssetSelector.react'),{bookmarkedPages:[],compactLayout:true,listItemHoverStyle:"dark-blue",maxListHeight:n,pages:u,searchBarVisible:u.length>=o,searchQuery:this.state.searchQuery,searchState:c('AdsLoadState').NOT_LOADED,searchedPages:[],selectedBusinessID:this.state.selectedBusinessID,selectedPageID:this.props.selectedActorID,selectedSectionType:c('AdsAssetSectionType').OWNED,showBookmarks:false,showBottomBorder:false,showBusinessPages:this.props.showBusinessPages,showNonBizGroupTitle:true,showPageCount:false,showPersonalPagesInRoot:!!this.props.showPersonalPagesInRoot,showSectionPageCount:true,shownBusinessID:this.state.shownBusinessID,sortPages:false,unownedPages:[],onBusinessSelected:this.$PageVoiceDropdownSelectorMenu4,onPageBookmarked:c('emptyFunction'),onPageRemoved:c('emptyFunction'),onPageSelected:this.$PageVoiceDropdownSelectorMenu5,onSearch:this.$PageVoiceDropdownSelectorMenu6})));}.bind(this);this.$PageVoiceDropdownSelectorMenu4=function(u){this.setState({shownBusinessID:u});}.bind(this);this.$PageVoiceDropdownSelectorMenu5=function(u,v,w){this.setState({selectedBusinessID:v},function(){return this.$PageVoiceDropdownSelectorMenu7(u);}.bind(this));}.bind(this);this.$PageVoiceDropdownSelectorMenu3=function(){this.$PageVoiceDropdownSelectorMenu7(this.props.user.id);}.bind(this);this.$PageVoiceDropdownSelectorMenu6=function(u){this.setState({searchQuery:u});}.bind(this);this.$PageVoiceDropdownSelectorMenu2=function(){var u=c('underscore.ads').map(this.props.pages,function(v,w){var x={id:w,name:v.name,picture:{data:{url:v.thumbSrc}},userpermissions:{data:[]},sectionType:c('AdsAssetSectionType').OWNED};if(v.allBusinessData)v.allBusinessData.forEach(function(y){if(y.businessID)x.userpermissions.data.push({business:{name:y.businessName,id:y.businessID}});});return x;},this);if(this.props.user.id){u[0].id===this.props.user.id||j(0);return u.slice(1);}return u;}.bind(this);this.$PageVoiceDropdownSelectorMenu7=function(u){if(!u||u===this.props.selectedActorID)return;this.setState({searchQuery:''});if(u===this.props.user.id){this.props.onChange({label:this.props.user.name,value:this.props.user.id});}else this.props.onChange({label:this.props.pages[u].name,value:u});}.bind(this);var r=q.pages[q.selectedActorID],s=c('BusinessAssetGrouping.brands').NULL_BIZ_ID,t=null;if(r&&r.businessID){t=String(r.businessID);s=String(r.businessID);}this.state={defaultBusinessID:t,selectedBusinessID:s,searchQuery:'',shownBusinessID:t};}p.prototype.render=function(){return c('React').createElement(c('ContextualLayer.react'),{alignment:this.props.alignment,behaviors:{LayerAutoFocus:c('LayerAutoFocus'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape')},contextRef:this.props.contextRef,position:'below',shown:this.props.shown,onToggle:this.props.onToggle},this.$PageVoiceDropdownSelectorMenu1());};p.propTypes={alignment:m.oneOf(['left','right']),pages:m.object.isRequired,selectedActorID:m.string,showBusinessPages:m.bool,showPersonalPageInRoot:m.bool,showUserInPersonalVoices:m.bool,shown:m.bool,title:m.object,user:m.object.isRequired,onChange:m.func.isRequired,onClick:m.func.isRequired};p.defaultProps={alignment:'right',searchBarVisible:false,showBusinessPages:true,showUserInPersonalVoices:true};f.exports=p;}),null);