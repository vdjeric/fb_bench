if (self.CavalryLogger) { CavalryLogger.start_js(["8sP68"]); }

__d('FriendsCenterStickyController',['StickyController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('StickyController'));i=h&&h.prototype;function j(k,l,m,n){'use strict';i.constructor.call(this,k,l,m,n);this.$FriendsCenterStickyController1=l;this.$FriendsCenterStickyController2=n||k.parentNode;var o=k.getBoundingClientRect();this.$FriendsCenterStickyController3=o.bottom-o.top;this.$FriendsCenterStickyController4=true;}j.prototype.unstick=function(){'use strict';this.$FriendsCenterStickyController4=false;this.handleScroll();};j.prototype.restick=function(){'use strict';this.$FriendsCenterStickyController4=true;this.handleScroll();};j.prototype.shouldFix=function(){'use strict';if(!this.$FriendsCenterStickyController4)return false;var k=this.$FriendsCenterStickyController2.getBoundingClientRect();return this.$FriendsCenterStickyController1>=k.top&&this.$FriendsCenterStickyController1+this.$FriendsCenterStickyController3<k.bottom;};f.exports=j;}),null);
__d('FriendsCenterStickyHeader',['cx','BlueBar','CSS','DOM','FriendsCenterStickyController','Style','Vector'],(function a(b,c,d,e,f,g,h){var i=[];function j(k){'use strict';var l=c('BlueBar').getBar();if(!l)return;var m=c('Style').isFixed(l)?c('Vector').getElementDimensions(l).y:0,n=this.getPlaceholder(k.getBoundingClientRect());c('DOM').insertAfter(k,n);c('CSS').addClass(k,"_5m65");var o=new (c('FriendsCenterStickyController'))(k,m,function(p){c('CSS').conditionShow(n,p);c('CSS').conditionClass(k,'stuck',p);}.bind(this));o.start();i[k.id]=o;}j.prototype.getPlaceholder=function(k){'use strict';var l=c('DOM').create('div');c('CSS').hide(l);c('Style').set(l,'height',k.bottom-k.top+'px');c('Style').set(l,'width',k.right-k.left+'px');return l;};j.stopSticky=function(k){'use strict';k&&k.id in i&&i[k.id].unstick();};j.startSticky=function(k){'use strict';k&&k.id in i&&i[k.id].restick();};f.exports=j;}),null);
__d('FriendBrowserCheckboxController',['csx','Arbiter','AsyncRequest','CSS','DOM','Event','Form','FriendsCenterStickyHeader','OnVisible','$','bind','ge'],(function a(b,c,d,e,f,g,h){var i='friend_browser_list';function j(){}Object.assign(j,{instances:{},getInstance:function k(l){return this.instances[l];}});Object.assign(j.prototype,{init:function k(l,m,n,o){j.instances[l]=this;this._id=l;this._simplified=n;this._infiniteScroll=o;this._form=m;this._contentGrid=c('DOM').find(m,'.friendBrowserCheckboxContentGrid');this._loadingIndicator=c('DOM').find(m,'.friendBrowsingCheckboxContentLoadingIndicator');this._checkboxResults=c('DOM').find(m,'.friendBrowserCheckboxResults');this._contentPager=c('DOM').find(m,'.friendBrowserCheckboxContentPager');this._standaloneFilters=null;this._searchStarted=false;this._stickyHeader=null;c('Arbiter').subscribe('friend-browser/name-change',this.getNew.bind(this,false));this.numGetNewRequests=0;this.queuedRequests={};c('Event').listen(this._form,'submit',this.onFormSubmit.bind(this));},addTypeahead:function k(l,m){l.subscribe('select',this.onHubSelect.bind(this,l,m));if(this._simplified)l.subscribe('unselect',this.onHubSelect.bind(this,l,m));},setStandaloneFilters:function k(l){if(l){this._standaloneFilters=c('DOM').scry(document.body,'.friendBrowserCheckboxFilters')[0];this._stickyHeader=c('DOM').scry(c('$')('fbSearchResultsBox'),"._5m65")[0];var m=c('$')('doneSearchButton');m.onclick=function(){this._searchStarted=false;c('DOM').scry(document.body,"._5n-u").forEach(function(n){c('CSS').show(n);});c('CSS').hide(m);window.scrollTo(0,0);c('FriendsCenterStickyHeader').startSticky(this._stickyHeader);}.bind(this);}return this;},onFormSubmit:function k(){this.getNew(true);return false;},addSelector:function k(l){l.subscribe('change',this.getNew.bind(this,false));},onHubSelect:function k(l,m,event,n){if(this._simplified){this.getNew(true);return;}if(!(event=='select'&&n.selected))return;var o=this.buildNewCheckbox(m,n.selected.text,n.selected.uid),p=c('DOM').find(this._standaloneFilters||this._form,'.checkboxes_'+m);c('DOM').appendContent(p.firstChild,o);var q=c('DOM').scry(l.getElement(),'input[type="button"]');if(q&&q[0])q[0].click();this.getNew(true);},buildNewCheckbox:function k(l,m,n){var o=l+'_ids_'+n,p=l+'_ids[]',q=c('DOM').create('input',{id:o,type:'checkbox',value:n,name:p,checked:true});c('Event').listen(q,'click',c('bind')(this,'getNew',false));var r=c('DOM').create('td',null,q);c('CSS').addClass(r,'vTop');c('CSS').addClass(r,'hLeft');var s=c('DOM').create('label',null,m),t=c('DOM').create('td',null,s);c('CSS').addClass(t,'vMid');c('CSS').addClass(t,'hLeft');var u=c('DOM').create('tr');u.appendChild(r);u.appendChild(t);return u;},showMore:function k(){var l=c('DOM').scry(this._contentPager,'.friendBrowserMorePager')[0];if(!l)return false;if(c('CSS').hasClass(l,'async_saving'))return false;var m=this.numGetNewRequests,n=this.getFormData();n.show_more=true;if(this._searchStarted)n.page=i;new (c('AsyncRequest'))().setURI('/ajax/growth/friend_browser/checkbox.php').setData(n).setHandler(c('bind')(this,function(o){this.showMoreHandler(o,m);})).setStatusElement(l).send();},showMoreHandler:function k(l,m){if(m==this.numGetNewRequests){var n=l.payload;c('DOM').appendContent(this._contentGrid,n.results);this.updatePagerAndExtraData(n.pager,n.extra_data);}},getFormData:function k(){var l=c('Form').serialize(this._form);if(this._standaloneFilters){var m=c('Form').serialize(this._standaloneFilters);for(var n in m)l[n]=m[n];}return l;},getNew:function k(l){this.numGetNewRequests++;var m=this.numGetNewRequests;c('CSS').addClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(c('ge')('friendBrowserCI'))c('CSS').addClass(c('$')('friendBrowserCI'),'friendBrowserCheckboxContentOnload');this.startStandaloneSearch();c('CSS').show(this._loadingIndicator);var n=this.getFormData();n.used_typeahead=l;if(this._searchStarted)n.page=i;new (c('AsyncRequest'))().setURI('/ajax/growth/friend_browser/checkbox.php').setData(n).setHandler(c('bind')(this,function(o){this.getNewHandler(o,m);})).send();},getNewHandler:function k(l,m){if(m==this.numGetNewRequests){var n=l.payload;c('DOM').setContent(this._contentGrid,n.results);c('CSS').removeClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(c('ge')('friendBrowserCI'))c('CSS').hide(c('$')('friendBrowserCI'));c('CSS').hide(this._loadingIndicator);this.updatePagerAndExtraData(n.pager,n.extra_data);}},startStandaloneSearch:function k(){if(!this._standaloneFilters)return;window.scrollTo(0,0);if(this._searchStarted)return;this._searchStarted=true;c('CSS').show(c('$')('fbSearchResultsBox'));c('DOM').scry(document.body,"._5n-u").forEach(function(l){c('CSS').hide(l);});c('CSS').show(c('$')('doneSearchButton'));c('FriendsCenterStickyHeader').stopSticky(this._stickyHeader);},updatePagerAndExtraData:function k(l,m){c('DOM').setContent(this._contentPager,l);if(this._infiniteScroll)this.setupOnVisible();c('DOM').replace(this._form.elements.extra_data,m);},setupOnVisible:function k(){var l=c('DOM').scry(this._contentPager,'.friendBrowserMorePager')[0];if(l&&this._id!='jewel'){this._onVisible&&this._onVisible.remove();this._onVisible=new (c('OnVisible'))(l,c('bind')(this,'showMore'),false,1000);}}});f.exports=j;}),null);
__d('legacy:friend-browser-checkbox-js',['FriendBrowserCheckboxController'],(function a(b,c,d,e,f,g){b.FriendBrowserCheckboxController=c('FriendBrowserCheckboxController');}),3);
__d('legacy:onvisible',['OnVisible'],(function a(b,c,d,e,f,g){b.OnVisible=c('OnVisible');}),3);