if (self.CavalryLogger) { CavalryLogger.start_js(["J36gj"]); }

__d('SpatialReactionAnimationUtils',['SpatialReactionAnimationConfig','curry'],(function a(b,c,d,e,f,g){'use strict';var h={getAnimationDurationFrames:function i(){var j=c('SpatialReactionAnimationConfig').OPACITY;return j.FADE_IN_DURATION.FRAMES+j.DISPLAY_DURATION.FRAMES+j.FADE_OUT_DURATION.FRAMES;},shouldStartClusterAnimation:function i(j,k){return (h.clusterIsInTimeRange(j,k.timestamp)&&!k.hasStartedAnimating(k));},isClusterAnimationFinished:function i(j){var k=j.animationProgressFrames,l=h.getAnimationDurationFrames();return k===l;},stopClusterAnimationIfNeeded:function i(j){return h.isClusterAnimationFinished(j)?j.stopAnimation():j;},getReactionRadius:function i(j){return Math.floor(c('SpatialReactionAnimationConfig').SIZES.FULL_SIZE.PX/2*Math.sqrt(j.scale));},clusterIsInTimeRange:function i(j,k){var l=k-c('SpatialReactionAnimationConfig').OPACITY.FADE_IN_DURATION.SECONDS,m=k+c('SpatialReactionAnimationConfig').OPACITY.DISPLAY_DURATION.SECONDS;return j>l&&j<m;},getPercentageWithOffset:function i(j,k,l){return (j-k)/(l-k);},getClusterOpacity:function i(j){var k=c('SpatialReactionAnimationConfig').OPACITY,l=j.animationProgressFrames;if(!j.hasStartedAnimating())throw new Error('Reactions cluster with progress: '+l+'\n         has not started animating');var m=0,n=m+k.FADE_IN_DURATION.FRAMES,o=n+k.DISPLAY_DURATION.FRAMES,p=o+k.FADE_OUT_DURATION.FRAMES,q=0,r=c('curry')(h.getPercentageWithOffset,l);switch(true){case l<n:q=k.MIN+r(m,n)*(1-k.MIN);break;case l<o:q=k.MAX;break;case l<p:q=k.MAX-r(o,p);break;default:throw new Error('Reactions cluster with progress: '+l+'\n           is not in a valid time range for animation');}return q;}};f.exports=h;}),null);