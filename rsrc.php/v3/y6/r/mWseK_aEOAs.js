if (self.CavalryLogger) { CavalryLogger.start_js(["2xBuX"]); }

__d("BirthdayRemindersCounterEvent",[],(function a(b,c,d,e,f,g){f.exports={OPEN_MODAL:"open_modal",PHOTO_FLOW_WITHOUT_PERSONALIZED:"photo_flow_without_personalized",PHOTO_FLOW_WITH_PERSONALIZED:"photo_flow_with_personalized",ADD_PERSONALIZED_PHOTO:"add_personalized_photo",CLICK_ALBUM:"click_album",ADD_ALBUM_PHOTO:"add_album_photo",SELFIE_FLOW:"selfie_flow",ADD_SELFIE:"add_selfie",ADD_UPLOADED:"add_uploaded",POST_WITH_PHOTO:"post_with_photo",POST_WITHOUT_PHOTO:"post_without_photo",POST_NON_SCHEDULED:"post_non_scheduled",POST_SCHEDULED:"post_scheduled",CANCEL_SCHEDULED_MODAL:"cancel_scheduled_modal",CANCEL_SCHEDULED_TIMELINE:"cancel_scheduled_timeline"};}),null);
__d('ComposerXNUX',['csx','cx','AsyncRequest','ComposerXDragDropUtils','CSS','DOM','Event','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j={},k={};function l(n,o,p){var q=p.dataTransfer.items;if(q){var r=c('ComposerXDragDropUtils').filterImages(q);if(!r.length)return;}m.acknowledgeDialog(n,o);}var m={onInit:function n(o,p,q){if(j[q])return;k[q]=k[q]||new (c('SubscriptionsHandler'))();var r=k[q];r.engage();var s=o.getRoot();c('CSS').addClass(s,"_4bka");var t=c('DOM').scry(s,"._3o-a");t.forEach(function(u){r.addSubscriptions(c('Event').listen(u,'click',m.acknowledgeDialog.bind(null,q,o)));});if(q==m.CAMERA_NUX)r.addSubscriptions(c('Event').listen(document,'dragenter',l.bind(null,q,o)));r.addSubscriptions(o.subscribe('cancel',m.sendMarkSeenRequest.bind(null,q)),o.subscribe('hide',r.release.bind(r)));o.setContext(p).show();},acknowledgeDialog:function n(o,p){m.sendMarkSeenRequest(o);p.hide();},sendMarkSeenRequest:function n(o){if(!j[o]){new (c('AsyncRequest'))('/ajax/photos/composer/mark_nux_seen.php').setData({type:o}).send();j[o]=true;}},onCleanup:function n(o){o.hide();}};f.exports=m;}),null);
__d("XBirthdayRemindersCounterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/birthday\/reminder\/counter\/",{event:{type:"Enum",required:true,enumType:1}});}),null);
__d('BirthdayRemindersCounter',['AsyncSignal','XBirthdayRemindersCounterController'],(function a(b,c,d,e,f,g){var h={logEvent:function i(event){var j=c('XBirthdayRemindersCounterController').getURIBuilder().setEnum('event',event).getURI();new (c('AsyncSignal'))(j).send();}};f.exports=h;}),null);
__d("XBirthdayRemindersCameraPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/birthday\/reminder\/camera\/preview\/",{photo_fbid:{type:"Int",required:true},target_id:{type:"Int",required:true},uuid:{type:"String",required:true}});}),null);
__d('BirthdayModal',['csx','cx','AsyncRequest','BirthdayRemindersCounter','BirthdayRemindersCounterEvent','BirthdaysReminder','Button','ComposerNUXType','ComposerXNUX','CSS','DataStore','DOM','Event','FileInputUploader','Focus','Layer','Parent','XBirthdayRemindersCameraPreviewController','focusWithinLayer','getActiveElement','goURI','setImmediate'],(function a(b,c,d,e,f,g,h,i){var j=null,k={},l={},m,n={},o={},p={init:function q(r,s,t,u){if(!l.hasOwnProperty(u))l[u]=t;n[u]=r;o[u]=s;c('Event').listen(r,'click',function(v){c('BirthdayRemindersCounter').logEvent(c('BirthdayRemindersCounterEvent').OPEN_MODAL);t.show();}.bind(this));},initAsyncDialog:function q(r,s){l[s]=r;c('setImmediate')(function(){c('getActiveElement')().blur();c('focusWithinLayer')(r.getRoot());});},addComposers:function q(r,s,t,u){if(t===c('BirthdaysReminder').LayoutTypes.MULTIPLE){var v=t.concat(s).concat(u);if(!k.hasOwnProperty(v))k[v]=r;this._addComposer(c('DOM').find(r,"._5j0b"),s,t,u);}else{if(!s||s!==j)k={};j=s;for(var w in r)if(r.hasOwnProperty(w))this._addComposer(c('DOM').find(r[w],"._5j0b"),w,t,u);}},_showInput:function q(r){var s=c('DOM').scry(r,"._u48").pop();if(!s)return;var t=c('DOM').find(r,"._4ovy"),u=c('DOM').find(t,'.inlineReplyTextArea');c('CSS').hide(s);c('CSS').show(t);c('Focus').set(u);},_addComposer:function q(r,s,t,u){var v=t.concat(s).concat(u);k[v]=r;var w=c('DOM').scry(r,"._4ovw").pop();if(!w)return;var x=this;['click','focus'].forEach(function(z){c('Event').listen(w,z,function(event){var aa=event.getTarget();if(c('Parent').bySelector(aa,"._260q"))return;x._showInput(r);});});var y=c('DOM').find(r,"._4ow2");this._addRemoveButton(y,s,v);},addUpcomingBirthdays:function q(r,s){c('Event').listen(s.firstChild,'click',function(event){c('CSS').show(r);c('CSS').hide(s);});},attachPhoto:function q(r,s,t,u,v){var w=u.concat(t).concat(v),x=k[w];if(!x)return;var y=c('DOM').find(x,"._4ovz");c('CSS').removeClass(y,"._4ow0");var z=c('DOM').find(x,"._4ow1");z.appendChild(s);c('DOM').appendContent(y,r);var aa=c('DOM').find(x,"._4ow2");c('CSS').show(aa);this._showInput(x);var ba=c('DOM').find(x,"._30e4");c('Button').setEnabled(ba,true);},initUploader:function q(r,s,t,u,v,w){var x=r.getInput();r.subscribe('change',this._uploadPhoto.bind(this,x,u,t,v,w));},_uploadPhoto:function q(r,s,t,u,v){var w=u.concat(t).concat(v),x=k[w];if(!x)return;c('BirthdayRemindersCounter').logEvent(c('BirthdayRemindersCounterEvent').ADD_UPLOADED);this._showInput(x);var y=c('DOM').find(x,"._4ow3"),z=c('DOM').find(x,"._4ow4");c('CSS').show(y);c('CSS').hide(z);var aa=new (c('FileInputUploader'))(r);aa.setURI(s.uploadURI).setData(s.uploadData).setAllowCrossOrigin(true).setUploadInParallel(true).setFiles({files:r.files}).send();var ba=c('DOM').find(x,"._30e4");c('Button').setEnabled(ba,false);var ca=c('Layer').getTopmostLayer();if(ca)ca.hide();},getCameraPreview:function q(r,s,t){var u=c('BirthdaysReminder').LayoutTypes.SINGLETON.concat(s).concat(t),v=k[u];if(!v)return;c('BirthdayRemindersCounter').logEvent(c('BirthdayRemindersCounterEvent').ADD_SELFIE);this._showInput(v);var w=c('DOM').find(v,"._4ow3"),x=c('DOM').find(v,"._4ow4");c('CSS').show(w);c('CSS').hide(x);var y=c('XBirthdayRemindersCameraPreviewController').getURIBuilder().setInt('target_id',s).setInt('photo_fbid',r).setString('uuid',t).setString('singleton',c('BirthdaysReminder').LayoutTypes.SINGLETON).getURI();new (c('AsyncRequest'))(y).send();var z=c('DOM').find(v,"._30e4");c('Button').setEnabled(z,false);},showPhotoPicker:function q(r,s){r.subscribeOnce(['show'],function(){c('CSS').addClass(l[s].getContentRoot(),"_30e3");}.bind(this));r.subscribeOnce(['hide'],function(){l[s].show();c('CSS').removeClass(l[s].getContentRoot(),"_30e3");}.bind(this));},showPreviewPhoto:function q(r,s,t,u,v){var w=u.concat(t).concat(v),x=k[w];if(!x)return;var y=c('DOM').find(x,"._4ow3"),z=c('DOM').find(x,"._4ovz"),aa=c('DOM').find(x,"._4ow4");c('CSS').show(y);c('CSS').hide(aa);c('CSS').removeClass(z,"._4ow0");var ba=c('DOM').find(x,"._4ow1");ba.appendChild(s);c('DOM').appendContent(z,r);var ca=c('DOM').find(x,"._4ow2");c('CSS').show(ca);this._showInput(x);var da=c('Layer').getTopmostLayer();if(da)da.hide();},addPhotoItem:function q(r,s,t,u,v,w,x){var y=w.concat(u).concat(x),z=k[y];if(!z)return;c('Event').listen(r,'click',function(){c('BirthdayRemindersCounter').logEvent(v);var aa=c('DOM').find(z,"._4ow3"),ba=c('DOM').find(z,"._4ovz"),ca=c('DOM').find(z,"._4ow4");c('CSS').show(aa);c('CSS').hide(ca);c('CSS').removeClass(ba,"._4ow0");var da=c('DOM').find(z,"._4ow1");da.appendChild(t);c('DOM').appendContent(ba,s);var ea=c('DOM').find(z,"._4ow2");c('CSS').show(ea);this._showInput(z);var fa=c('Layer').getTopmostLayer();if(fa)fa.hide();}.bind(this));},_addRemoveButton:function q(r,s,t){var u=k[t];if(!u)return;c('Event').listen(r,'click',function(v){v.kill();c('CSS').hide(r);var w=c('DOM').find(u,"._4ow3"),x=c('DOM').find(u,"._4ovz"),y=c('DOM').find(u,"._4ow4");c('CSS').hide(w);c('CSS').show(y);c('CSS').addClass(x,"._4ow0");var z=c('DOM').scry(u,"._4ltt").concat(c('DOM').scry(u,"._4ow5"));z.forEach(function(aa){c('DOM').remove(aa);});}.bind(this));},_resetComposer:function q(r){var s=c('DOM').find(r,"._4ow2");s.click();var t=c('DOM').find(r,".uiMentionsInput");c('DataStore').get(t,'MentionsInput').reset();},closeDialog:function q(r,s,t){var u=s.concat(r).concat(t);l[u].hide();},finishPosting:function q(r,s,t,u,v){if(t)return c('goURI')(window.location.href,true);var w=u.concat(s).concat(v),x=k[w];if(!x)return;this._resetComposer(x);c('CSS').addClass(x,"_4dgh");if(u===c('BirthdaysReminder').LayoutTypes.MULTIPLE){c('CSS').addClass(n[w],"_1exi");c('CSS').addClass(o[w],"_1exj");}},cancelScheduled:function q(r,s,t){if(s!=='modal')return c('goURI')(window.location.href,true);var u=c('BirthdaysReminder').LayoutTypes.SINGLETON.concat(r).concat(t),v=k[u];if(!v)return;c('CSS').removeClass(v,"_4dgh");},setPhotoAlbumView:function q(r){m=r;},setPhotoView:function q(r){if(!m)return;var s=c('DOM').find(m,"._5r32");if(s){c('CSS').hide(s);}else return;var t=c('DOM').find(m,"._375u");t.appendChild(r);var u=c('DOM').find(r,"._375v");c('Event').listen(u,'click',function(){c('CSS').show(s);var v=c('DOM').find(m,"._375w");c('DOM').remove(v);}.bind(this));},attachFlyout:function q(r){var s=r.getContext(),t=c('DOM').find(r.getContentRoot(),"._21xo"),u=c('DOM').scry(r.getContentRoot(),"._15p7").pop(),v=function w(){c('CSS').conditionClass(s,"_21xn",r.isShown());};v();r.subscribe(['show','hide'],v);c('Event').listen(s,'click',function(w){r.conditionShow(!r.isShown());w.kill();});c('Event').listen(t,'click',function(){r.hide();});if(u)c('Event').listen(u,'click',function(){r.hide();});},initMegaphone:function q(r,s){c('Event').listen(s,'click',function(){c('DOM').remove(r);c('ComposerXNUX').sendMarkSeenRequest(c('ComposerNUXType').UPCOMING_BIRTHDAYS_NUX);});},registerBirthdayPostHandler:function q(r,s,t){c('Event').listen(r,'submit',function(event,u){var v,w;v=c('Parent').byClass(r,s);if(v)for(w=v.nextSibling;w;w=w.nextSibling){var x=c('DOM').scry(w,t);if(x.length>0){p._showInput(w);break;}}return true;});}};f.exports=p;}),null);