if (self.CavalryLogger) { CavalryLogger.start_js(["LjSrn"]); }

__d('MessengerReactionsContextualDialog.react',['cx','AccessibleLayer','ContextualLayerUpdateOnScroll','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerUpdateOnScroll'),c('LayerHideOnEscape'),c('AccessibleLayer')],displayName:'MessengerReactionsContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i;}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLMutationHelper").getExports({docID:"1491398900900362",queryID:"254517288326467"});}),null);
__d('MessengerReactionsPrompt.react',['cx','ix','CurrentUser','Image.react','MessengerReactionsContextualDialog.react','MessengerTextWithEmoticons.react','MessengerReactionsUtil','MessageReactionMutationWebGraphQLMutation','React','XAsyncRequest'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return (this.props.onShowMenu&&this.props.onShowMenu(this.state.open));}.bind(this));}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open);}.bind(this));}.bind(this),n;}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c('React').createElement('span',{className:(!this.props.isQuickAdd?"_5zvq":'')+(this.props.isQuickAdd?' '+"_yav":''),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:'button'},c('React').createElement(c('Image.react'),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu());};l.prototype.renderMenu=function(){if(!this.state.open)return null;var m=c('CurrentUser').getID(),n=this.props.message.reactions&&this.props.message.reactions[m];return c('React').createElement(c('MessengerReactionsContextualDialog.react'),{alignment:'center',contextRef:function(){return this.refs.button;}.bind(this),shown:this.state.open,onBlur:this.$MessengerReactionsPrompt2},c('React').createElement('div',{className:"_1z8q _fy2"},c('MessengerReactionsUtil').defaultReactions.map(function(o){return c('React').createElement('span',{className:"_1z8r"+(o===n?' '+"_5-2b":''),key:o,onClick:function(){return this.$MessengerReactionsPrompt3(o);}.bind(this)},c('React').createElement(c('MessengerTextWithEmoticons.react'),{customSize:true,renderEmoticons:true,renderEmoji:true,text:o}));}.bind(this))));};l.prototype.$MessengerReactionsPrompt3=function(m){var n=c('CurrentUser').getID(),o=this.props.message.reactions&&this.props.message.reactions[n],p=c('MessageReactionMutationWebGraphQLMutation').getURI({action:m===o?'REMOVE_REACTION':'ADD_REACTION',message_id:this.props.message.message_id,actor_id:n,reaction:m});new (c('XAsyncRequest'))(p).setMethod('POST').send();this.$MessengerReactionsPrompt2();};f.exports=l;}),null);