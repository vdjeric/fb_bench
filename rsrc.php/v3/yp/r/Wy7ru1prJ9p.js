if (self.CavalryLogger) { CavalryLogger.start_js(["RDCL5"]); }

__d("leaflet",[],(function a(b,c,d,e,f,g){(function(h,i,j){var k=h.L,l={};l.version='0.7.2';if(typeof f==='object'&&typeof f.exports==='object'){f.exports=l;}else if(typeof define==='function'&&define.amd)define(l);l.noConflict=function(){h.L=k;return this;};h.L=l;l.Util={extend:function(o){var p=Array.prototype.slice.call(arguments,1),q,r,s,t;for(r=0,s=p.length;r<s;r++){t=p[r]||{};for(q in t)if(t.hasOwnProperty(q))o[q]=t[q];}return o;},bind:function(o,p){var q=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return o.apply(p,q||arguments);};},stamp:(function(){var o=0,p='_leaflet_id';return function(q){q[p]=q[p]||++o;return q[p];};}()),invokeEach:function(o,p,q){var r,s;if(typeof o==='object'){s=Array.prototype.slice.call(arguments,3);for(r in o)p.apply(q,[r,o[r]].concat(s));return true;}return false;},limitExecByInterval:function(o,p,q){var r,s;return function t(){var u=arguments;if(r){s=true;return;}r=true;setTimeout(function(){r=false;if(s){t.apply(q,u);s=false;}},p);o.apply(q,u);};},falseFn:function(){return false;},formatNum:function(o,p){var q=Math.pow(10,p||5);return Math.round(o*q)/q;},trim:function(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,'');},splitWords:function(o){return l.Util.trim(o).split(/\s+/);},setOptions:function(o,p){o.options=l.extend({},o.options,p);return o.options;},getParamString:function(o,p,q){var r=[];for(var s in o)r.push(encodeURIComponent(q?s.toUpperCase():s)+'='+encodeURIComponent(o[s]));return ((!p||p.indexOf('?')===-1)?'?':'&')+r.join('&');},template:function(o,p){return o.replace(/\{ *([\w_]+) *\}/g,function(q,r){var s=p[r];if(s===j){throw new Error('No value provided for variable '+q);}else if(typeof s==='function')s=s(p);return s;});},isArray:Array.isArray||function(o){return (Object.prototype.toString.call(o)==='[object Array]');},emptyImageUrl:'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='};(function(){function o(t){var u,v,w=['webkit','moz','o','ms'];for(u=0;u<w.length&&!v;u++)v=h[w[u]+t];return v;}var p=0;function q(t){var u=+new Date(),v=Math.max(0,16-(u-p));p=u+v;return h.setTimeout(t,v);}var r=h.requestAnimationFrame||o('RequestAnimationFrame')||q,s=h.cancelAnimationFrame||o('CancelAnimationFrame')||o('CancelRequestAnimationFrame')||function(t){h.clearTimeout(t);};l.Util.requestAnimFrame=function(t,u,v,w){t=l.bind(t,u);if(v&&r===q){t();}else return r.call(h,t,w);};l.Util.cancelAnimFrame=function(t){if(t)s.call(h,t);};}());l.extend=l.Util.extend;l.bind=l.Util.bind;l.stamp=l.Util.stamp;l.setOptions=l.Util.setOptions;l.Class=function(){};l.Class.extend=function(o){var p=function(){if(this.initialize)this.initialize.apply(this,arguments);if(this._initHooks)this.callInitHooks();},q=function(){};q.prototype=this.prototype;var r=new q();r.constructor=p;p.prototype=r;for(var s in this)if(this.hasOwnProperty(s)&&s!=='prototype')p[s]=this[s];if(o.statics){l.extend(p,o.statics);delete o.statics;}if(o.includes){l.Util.extend.apply(null,[r].concat(o.includes));delete o.includes;}if(o.options&&r.options)o.options=l.extend({},r.options,o.options);l.extend(r,o);r._initHooks=[];var t=this;p.__super__=t.prototype;r.callInitHooks=function(){if(this._initHooksCalled)return;if(t.prototype.callInitHooks)t.prototype.callInitHooks.call(this);this._initHooksCalled=true;for(var u=0,v=r._initHooks.length;u<v;u++)r._initHooks[u].call(this);};return p;};l.Class.include=function(o){l.extend(this.prototype,o);};l.Class.mergeOptions=function(o){l.extend(this.prototype.options,o);};l.Class.addInitHook=function(o){var p=Array.prototype.slice.call(arguments,1),q=typeof o==='function'?o:function(){this[o].apply(this,p);};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(q);};var m='_leaflet_events';l.Mixin={};l.Mixin.Events={addEventListener:function(o,p,q){if(l.Util.invokeEach(o,this.addEventListener,this,p,q))return this;var r=this[m]=this[m]||{},s=q&&q!==this&&l.stamp(q),t,u,event,v,w,x,y;o=l.Util.splitWords(o);for(t=0,u=o.length;t<u;t++){event={action:p,context:q||this};v=o[t];if(s){w=v+'_idx';x=w+'_len';y=r[w]=r[w]||{};if(!y[s]){y[s]=[];r[x]=(r[x]||0)+1;}y[s].push(event);}else{r[v]=r[v]||[];r[v].push(event);}}return this;},hasEventListeners:function(o){var p=this[m];return !!p&&((o in p&&p[o].length>0)||(o+'_idx' in p&&p[o+'_idx_len']>0));},removeEventListener:function(o,p,q){if(!this[m])return this;if(!o)return this.clearAllEventListeners();if(l.Util.invokeEach(o,this.removeEventListener,this,p,q))return this;var r=this[m],s=q&&q!==this&&l.stamp(q),t,u,v,w,x,y,z,aa,ba;o=l.Util.splitWords(o);for(t=0,u=o.length;t<u;t++){v=o[t];y=v+'_idx';z=y+'_len';aa=r[y];if(!p){delete r[v];delete r[y];delete r[z];}else{w=s&&aa?aa[s]:r[v];if(w){for(x=w.length-1;x>=0;x--)if((w[x].action===p)&&(!q||(w[x].context===q))){ba=w.splice(x,1);ba[0].action=l.Util.falseFn;}if(q&&aa&&(w.length===0)){delete aa[s];r[z]--;}}}}return this;},clearAllEventListeners:function(){delete this[m];return this;},fireEvent:function(o,p){if(!this.hasEventListeners(o))return this;var event=l.Util.extend({},p,{type:o,target:this}),q=this[m],r,s,t,u,v;if(q[o]){r=q[o].slice();for(s=0,t=r.length;s<t;s++)r[s].action.call(r[s].context,event);}u=q[o+'_idx'];for(v in u){r=u[v].slice();if(r)for(s=0,t=r.length;s<t;s++)r[s].action.call(r[s].context,event);}return this;},addOneTimeEventListener:function(o,p,q){if(l.Util.invokeEach(o,this.addOneTimeEventListener,this,p,q))return this;var r=l.bind(function(){this.removeEventListener(o,p,q).removeEventListener(o,r,q);},this);return this.addEventListener(o,p,q).addEventListener(o,r,q);}};l.Mixin.Events.on=l.Mixin.Events.addEventListener;l.Mixin.Events.off=l.Mixin.Events.removeEventListener;l.Mixin.Events.once=l.Mixin.Events.addOneTimeEventListener;l.Mixin.Events.fire=l.Mixin.Events.fireEvent;(function(){var o='ActiveXObject' in h,p=o&&!i.addEventListener,q=navigator.userAgent.toLowerCase(),r=q.indexOf('webkit')!==-1,s=q.indexOf('chrome')!==-1,t=q.indexOf('phantom')!==-1,u=q.indexOf('android')!==-1,v=q.search('android [23]')!==-1,w=q.indexOf('gecko')!==-1,x=typeof orientation!==j+'',y=h.navigator&&h.navigator.msPointerEnabled&&h.navigator.msMaxTouchPoints&&!h.PointerEvent,z=(h.PointerEvent&&h.navigator.pointerEnabled&&h.navigator.maxTouchPoints)||y,aa=('devicePixelRatio' in h&&h.devicePixelRatio>1)||('matchMedia' in h&&h.matchMedia('(min-resolution:144dpi)')&&h.matchMedia('(min-resolution:144dpi)').matches),ba=i.documentElement,ca=ba&&o&&('transition' in ba.style),da=ba&&('WebKitCSSMatrix' in h)&&('m11' in new h.WebKitCSSMatrix())&&!v,ea=ba&&'MozPerspective' in ba.style,fa=ba&&'OTransition' in ba.style,ga=!h.L_DISABLE_3D&&(ca||da||ea||fa)&&!t,ha=!h.L_NO_TOUCH&&!t&&ba&&(function(){var ia='ontouchstart';if(z||(ia in ba))return true;var ja=i.createElement('div'),ka=false;if(!ja.setAttribute)return false;ja.setAttribute(ia,'return;');if(typeof ja[ia]==='function')ka=true;ja.removeAttribute(ia);ja=null;return ka;}());l.Browser={ie:o,ielt9:p,webkit:r,gecko:w&&!r&&!h.opera&&!o,android:u,android23:v,chrome:s,ie3d:ca,webkit3d:da,gecko3d:ea,opera3d:fa,any3d:ga,mobile:x,mobileWebkit:x&&r,mobileWebkit3d:x&&da,mobileOpera:x&&h.opera,touch:ha,msPointer:y,pointer:z,retina:aa};}());l.Point=function(o,p,q){this.x=(q?Math.round(o):o);this.y=(q?Math.round(p):p);};l.Point.prototype={clone:function(){return new l.Point(this.x,this.y);},add:function(o){return this.clone()._add(l.point(o));},_add:function(o){this.x+=o.x;this.y+=o.y;return this;},subtract:function(o){return this.clone()._subtract(l.point(o));},_subtract:function(o){this.x-=o.x;this.y-=o.y;return this;},divideBy:function(o){return this.clone()._divideBy(o);},_divideBy:function(o){this.x/=o;this.y/=o;return this;},multiplyBy:function(o){return this.clone()._multiplyBy(o);},_multiplyBy:function(o){this.x*=o;this.y*=o;return this;},round:function(){return this.clone()._round();},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this;},floor:function(){return this.clone()._floor();},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this;},distanceTo:function(o){o=l.point(o);var p=o.x-this.x,q=o.y-this.y;return Math.sqrt(p*p+q*q);},equals:function(o){o=l.point(o);return o.x===this.x&&o.y===this.y;},contains:function(o){o=l.point(o);return Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y);},toString:function(){return 'Point('+l.Util.formatNum(this.x)+', '+l.Util.formatNum(this.y)+')';}};l.point=function(o,p,q){if(o instanceof l.Point)return o;if(l.Util.isArray(o))return new l.Point(o[0],o[1]);if(o===j||o===null)return o;return new l.Point(o,p,q);};l.Bounds=function(o,p){if(!o)return;var q=p?[o,p]:o;for(var r=0,s=q.length;r<s;r++)this.extend(q[r]);};l.Bounds.prototype={extend:function(o){o=l.point(o);if(!this.min&&!this.max){this.min=o.clone();this.max=o.clone();}else{this.min.x=Math.min(o.x,this.min.x);this.max.x=Math.max(o.x,this.max.x);this.min.y=Math.min(o.y,this.min.y);this.max.y=Math.max(o.y,this.max.y);}return this;},getCenter:function(o){return new l.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o);},getBottomLeft:function(){return new l.Point(this.min.x,this.max.y);},getTopRight:function(){return new l.Point(this.max.x,this.min.y);},getSize:function(){return this.max.subtract(this.min);},contains:function(o){var p,q;if(typeof o[0]==='number'||o instanceof l.Point){o=l.point(o);}else o=l.bounds(o);if(o instanceof l.Bounds){p=o.min;q=o.max;}else p=q=o;return (p.x>=this.min.x)&&(q.x<=this.max.x)&&(p.y>=this.min.y)&&(q.y<=this.max.y);},intersects:function(o){o=l.bounds(o);var p=this.min,q=this.max,r=o.min,s=o.max,t=(s.x>=p.x)&&(r.x<=q.x),u=(s.y>=p.y)&&(r.y<=q.y);return t&&u;},isValid:function(){return !!(this.min&&this.max);}};l.bounds=function(o,p){if(!o||o instanceof l.Bounds)return o;return new l.Bounds(o,p);};l.Transformation=function(o,p,q,r){this._a=o;this._b=p;this._c=q;this._d=r;};l.Transformation.prototype={transform:function(o,p){return this._transform(o.clone(),p);},_transform:function(o,p){p=p||1;o.x=p*(this._a*o.x+this._b);o.y=p*(this._c*o.y+this._d);return o;},untransform:function(o,p){p=p||1;return new l.Point((o.x/p-this._b)/this._a,(o.y/p-this._d)/this._c);}};l.DomUtil={get:function(o){return (typeof o==='string'?i.getElementById(o):o);},getStyle:function(o,p){var q=o.style[p];if(!q&&o.currentStyle)q=o.currentStyle[p];if((!q||q==='auto')&&i.defaultView){var r=i.defaultView.getComputedStyle(o,null);q=r?r[p]:null;}return q==='auto'?null:q;},getViewportOffset:function(o){var p=0,q=0,r=o,s=i.body,t=i.documentElement,u;do{p+=r.offsetTop||0;q+=r.offsetLeft||0;p+=parseInt(l.DomUtil.getStyle(r,'borderTopWidth'),10)||0;q+=parseInt(l.DomUtil.getStyle(r,'borderLeftWidth'),10)||0;u=l.DomUtil.getStyle(r,'position');if(r.offsetParent===s&&u==='absolute')break;if(u==='fixed'){p+=s.scrollTop||t.scrollTop||0;q+=s.scrollLeft||t.scrollLeft||0;break;}if(u==='relative'&&!r.offsetLeft){var v=l.DomUtil.getStyle(r,'width'),w=l.DomUtil.getStyle(r,'max-width'),x=r.getBoundingClientRect();if(v!=='none'||w!=='none')q+=x.left+r.clientLeft;p+=x.top+(s.scrollTop||t.scrollTop||0);break;}r=r.offsetParent;}while(r);r=o;do{if(r===s)break;p-=r.scrollTop||0;q-=r.scrollLeft||0;r=r.parentNode;}while(r);return new l.Point(q,p);},documentIsLtr:function(){if(!l.DomUtil._docIsLtrCached){l.DomUtil._docIsLtrCached=true;l.DomUtil._docIsLtr=l.DomUtil.getStyle(i.body,'direction')==='ltr';}return l.DomUtil._docIsLtr;},create:function(o,p,q){var r=i.createElement(o);r.className=p;if(q)q.appendChild(r);return r;},hasClass:function(o,p){if(o.classList!==j)return o.classList.contains(p);var q=l.DomUtil._getClass(o);return q.length>0&&new RegExp('(^|\\s)'+p+'(\\s|$)').test(q);},addClass:function(o,p){if(o.classList!==j){var q=l.Util.splitWords(p);for(var r=0,s=q.length;r<s;r++)o.classList.add(q[r]);}else if(!l.DomUtil.hasClass(o,p)){var t=l.DomUtil._getClass(o);l.DomUtil._setClass(o,(t?t+' ':'')+p);}},removeClass:function(o,p){if(o.classList!==j){o.classList.remove(p);}else l.DomUtil._setClass(o,l.Util.trim((' '+l.DomUtil._getClass(o)+' ').replace(' '+p+' ',' ')));},_setClass:function(o,p){if(o.className.baseVal===j){o.className=p;}else o.className.baseVal=p;},_getClass:function(o){return o.className.baseVal===j?o.className:o.className.baseVal;},setOpacity:function(o,p){if('opacity' in o.style){o.style.opacity=p;}else if('filter' in o.style){var q=false,r='DXImageTransform.Microsoft.Alpha';try{q=o.filters.item(r);}catch(s){if(p===1)return;}p=Math.round(p*100);if(q){q.Enabled=(p!==100);q.Opacity=p;}else o.style.filter+=' progid:'+r+'(opacity='+p+')';}},testProp:function(o){if(!i.documentElement)return false;var p=i.documentElement.style;for(var q=0;q<o.length;q++)if(o[q] in p)return o[q];return false;},getTranslateString:function(o){var p=l.Browser.webkit3d,q='translate'+(p?'3d':'')+'(',r=(p?',0':'')+')';return q+o.x+'px,'+o.y+'px'+r;},getScaleString:function(o,p){var q=l.DomUtil.getTranslateString(p.add(p.multiplyBy(-1*o))),r=' scale('+o+') ';return q+r;},setPosition:function(o,p,q){o._leaflet_pos=p;if(!q&&l.Browser.any3d){o.style[l.DomUtil.TRANSFORM]=l.DomUtil.getTranslateString(p);}else{o.style.left=p.x+'px';o.style.top=p.y+'px';}},getPosition:function(o){return o._leaflet_pos;}};l.DomUtil.TRANSFORM=l.DomUtil.testProp(['transform','WebkitTransform','OTransform','MozTransform','msTransform']);l.DomUtil.TRANSITION=l.DomUtil.testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']);l.DomUtil.TRANSITION_END=l.DomUtil.TRANSITION==='webkitTransition'||l.DomUtil.TRANSITION==='OTransition'?l.DomUtil.TRANSITION+'End':'transitionend';(function(){if('onselectstart' in i){l.extend(l.DomUtil,{disableTextSelection:function(){l.DomEvent.on(h,'selectstart',l.DomEvent.preventDefault);},enableTextSelection:function(){l.DomEvent.off(h,'selectstart',l.DomEvent.preventDefault);}});}else{var o=l.DomUtil.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);l.extend(l.DomUtil,{disableTextSelection:function(){if(o){var p=i.documentElement.style;this._userSelect=p[o];p[o]='none';}},enableTextSelection:function(){if(o){i.documentElement.style[o]=this._userSelect;delete this._userSelect;}}});}l.extend(l.DomUtil,{disableImageDrag:function(){l.DomEvent.on(h,'dragstart',l.DomEvent.preventDefault);},enableImageDrag:function(){l.DomEvent.off(h,'dragstart',l.DomEvent.preventDefault);}});})();l.LatLng=function(o,p,q){o=parseFloat(o);p=parseFloat(p);if(isNaN(o)||isNaN(p))throw new Error('Invalid LatLng object: ('+o+', '+p+')');this.lat=o;this.lng=p;if(q!==j)this.alt=parseFloat(q);};l.extend(l.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-09});l.LatLng.prototype={equals:function(o){if(!o)return false;o=l.latLng(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=l.LatLng.MAX_MARGIN;},toString:function(o){return 'LatLng('+l.Util.formatNum(this.lat,o)+', '+l.Util.formatNum(this.lng,o)+')';},distanceTo:function(o){o=l.latLng(o);var p=6378137,q=l.LatLng.DEG_TO_RAD,r=(o.lat-this.lat)*q,s=(o.lng-this.lng)*q,t=this.lat*q,u=o.lat*q,v=Math.sin(r/2),w=Math.sin(s/2),x=v*v+w*w*Math.cos(t)*Math.cos(u);return p*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));},wrap:function(o,p){var q=this.lng;o=o||-180;p=p||180;q=(q+p)%(p-o)+(q<o||q===p?p:o);return new l.LatLng(this.lat,q);}};l.latLng=function(o,p){if(o instanceof l.LatLng)return o;if(l.Util.isArray(o))if(typeof o[0]==='number'||typeof o[0]==='string'){return new l.LatLng(o[0],o[1],o[2]);}else return null;if(o===j||o===null)return o;if(typeof o==='object'&&'lat' in o)return new l.LatLng(o.lat,'lng' in o?o.lng:o.lon);if(p===j)return null;return new l.LatLng(o,p);};l.LatLngBounds=function(o,p){if(!o)return;var q=p?[o,p]:o;for(var r=0,s=q.length;r<s;r++)this.extend(q[r]);};l.LatLngBounds.prototype={extend:function(o){if(!o)return this;var p=l.latLng(o);if(p!==null){o=p;}else o=l.latLngBounds(o);if(o instanceof l.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new l.LatLng(o.lat,o.lng);this._northEast=new l.LatLng(o.lat,o.lng);}else{this._southWest.lat=Math.min(o.lat,this._southWest.lat);this._southWest.lng=Math.min(o.lng,this._southWest.lng);this._northEast.lat=Math.max(o.lat,this._northEast.lat);this._northEast.lng=Math.max(o.lng,this._northEast.lng);}}else if(o instanceof l.LatLngBounds){this.extend(o._southWest);this.extend(o._northEast);}return this;},pad:function(o){var p=this._southWest,q=this._northEast,r=Math.abs(p.lat-q.lat)*o,s=Math.abs(p.lng-q.lng)*o;return new l.LatLngBounds(new l.LatLng(p.lat-r,p.lng-s),new l.LatLng(q.lat+r,q.lng+s));},getCenter:function(){return new l.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2);},getSouthWest:function(){return this._southWest;},getNorthEast:function(){return this._northEast;},getNorthWest:function(){return new l.LatLng(this.getNorth(),this.getWest());},getSouthEast:function(){return new l.LatLng(this.getSouth(),this.getEast());},getWest:function(){return this._southWest.lng;},getSouth:function(){return this._southWest.lat;},getEast:function(){return this._northEast.lng;},getNorth:function(){return this._northEast.lat;},contains:function(o){if(typeof o[0]==='number'||o instanceof l.LatLng){o=l.latLng(o);}else o=l.latLngBounds(o);var p=this._southWest,q=this._northEast,r,s;if(o instanceof l.LatLngBounds){r=o.getSouthWest();s=o.getNorthEast();}else r=s=o;return (r.lat>=p.lat)&&(s.lat<=q.lat)&&(r.lng>=p.lng)&&(s.lng<=q.lng);},intersects:function(o){o=l.latLngBounds(o);var p=this._southWest,q=this._northEast,r=o.getSouthWest(),s=o.getNorthEast(),t=(s.lat>=p.lat)&&(r.lat<=q.lat),u=(s.lng>=p.lng)&&(r.lng<=q.lng);return t&&u;},toBBoxString:function(){return [this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',');},equals:function(o){if(!o)return false;o=l.latLngBounds(o);return this._southWest.equals(o.getSouthWest())&&this._northEast.equals(o.getNorthEast());},isValid:function(){return !!(this._southWest&&this._northEast);}};l.latLngBounds=function(o,p){if(!o||o instanceof l.LatLngBounds)return o;return new l.LatLngBounds(o,p);};l.Projection={};l.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(o){var p=l.LatLng.DEG_TO_RAD,q=this.MAX_LATITUDE,r=Math.max(Math.min(q,o.lat),-q),s=o.lng*p,t=r*p;t=Math.log(Math.tan((Math.PI/4)+(t/2)));return new l.Point(s,t);},unproject:function(o){var p=l.LatLng.RAD_TO_DEG,q=o.x*p,r=(2*Math.atan(Math.exp(o.y))-(Math.PI/2))*p;return new l.LatLng(r,q);}};l.Projection.LonLat={project:function(o){return new l.Point(o.lng,o.lat);},unproject:function(o){return new l.LatLng(o.y,o.x);}};l.CRS={latLngToPoint:function(o,p){var q=this.projection.project(o),r=this.scale(p);return this.transformation._transform(q,r);},pointToLatLng:function(o,p){var q=this.scale(p),r=this.transformation.untransform(o,q);return this.projection.unproject(r);},project:function(o){return this.projection.project(o);},scale:function(o){return 256*Math.pow(2,o);},getSize:function(o){var p=this.scale(o);return l.point(p,p);}};l.CRS.Simple=l.extend({},l.CRS,{projection:l.Projection.LonLat,transformation:new l.Transformation(1,0,-1,0),scale:function(o){return Math.pow(2,o);}});l.CRS.EPSG3857=l.extend({},l.CRS,{code:'EPSG:3857',projection:l.Projection.SphericalMercator,transformation:new l.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(o){var p=this.projection.project(o),q=6378137;return p.multiplyBy(q);}});l.CRS.EPSG900913=l.extend({},l.CRS.EPSG3857,{code:'EPSG:900913'});l.CRS.EPSG4326=l.extend({},l.CRS,{code:'EPSG:4326',projection:l.Projection.LonLat,transformation:new l.Transformation(1/360,.5,-1/360,.5)});l.Map=l.Class.extend({includes:l.Mixin.Events,options:{crs:l.CRS.EPSG3857,fadeAnimation:l.DomUtil.TRANSITION&&!l.Browser.android23,trackResize:true,markerZoomAnimation:l.DomUtil.TRANSITION&&l.Browser.any3d},initialize:function(o,p){p=l.setOptions(this,p);this._initContainer(o);this._initLayout();this._onResize=l.bind(this._onResize,this);this._initEvents();if(p.maxBounds)this.setMaxBounds(p.maxBounds);if(p.center&&p.zoom!==j)this.setView(l.latLng(p.center),p.zoom,{reset:true});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(p.layers);},setView:function(o,p){p=p===j?this.getZoom():p;this._resetView(l.latLng(o),this._limitZoom(p));return this;},setZoom:function(o,p){if(!this._loaded){this._zoom=this._limitZoom(o);return this;}return this.setView(this.getCenter(),o,{zoom:p});},zoomIn:function(o,p){return this.setZoom(this._zoom+(o||1),p);},zoomOut:function(o,p){return this.setZoom(this._zoom-(o||1),p);},setZoomAround:function(o,p,q){var r=this.getZoomScale(p),s=this.getSize().divideBy(2),t=o instanceof l.Point?o:this.latLngToContainerPoint(o),u=t.subtract(s).multiplyBy(1-1/r),v=this.containerPointToLatLng(s.add(u));return this.setView(v,p,{zoom:q});},fitBounds:function(o,p){p=p||{};o=o.getBounds?o.getBounds():l.latLngBounds(o);var q=l.point(p.paddingTopLeft||p.padding||[0,0]),r=l.point(p.paddingBottomRight||p.padding||[0,0]),s=this.getBoundsZoom(o,false,q.add(r)),t=r.subtract(q).divideBy(2),u=this.project(o.getSouthWest(),s),v=this.project(o.getNorthEast(),s),w=this.unproject(u.add(v).divideBy(2).add(t),s);s=p&&p.maxZoom?Math.min(p.maxZoom,s):s;return this.setView(w,s,p);},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o);},panTo:function(o,p){return this.setView(o,this._zoom,{pan:p});},panBy:function(o){this.fire('movestart');this._rawPanBy(l.point(o));this.fire('move');return this.fire('moveend');},setMaxBounds:function(o){o=l.latLngBounds(o);this.options.maxBounds=o;if(!o)return this.off('moveend',this._panInsideMaxBounds,this);if(this._loaded)this._panInsideMaxBounds();return this.on('moveend',this._panInsideMaxBounds,this);},panInsideBounds:function(o,p){var q=this.getCenter(),r=this._limitCenter(q,this._zoom,o);if(q.equals(r))return this;return this.panTo(r,p);},addLayer:function(o){var p=l.stamp(o);if(this._layers[p])return this;this._layers[p]=o;if(o.options&&(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))){this._zoomBoundLayers[p]=o;this._updateZoomLevels();}if(this.options.zoomAnimation&&l.TileLayer&&(o instanceof l.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;o.on('load',this._onTileLayerLoad,this);}if(this._loaded)this._layerAdd(o);return this;},removeLayer:function(o){var p=l.stamp(o);if(!this._layers[p])return this;if(this._loaded)o.onRemove(this);delete this._layers[p];if(this._loaded)this.fire('layerremove',{layer:o});if(this._zoomBoundLayers[p]){delete this._zoomBoundLayers[p];this._updateZoomLevels();}if(this.options.zoomAnimation&&l.TileLayer&&(o instanceof l.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;o.off('load',this._onTileLayerLoad,this);}return this;},hasLayer:function(o){if(!o)return false;return (l.stamp(o) in this._layers);},eachLayer:function(o,p){for(var q in this._layers)o.call(p,this._layers[q]);return this;},invalidateSize:function(o){if(!this._loaded)return this;o=l.extend({animate:false,pan:true},o===true?{animate:true}:o);var p=this.getSize();this._sizeChanged=true;this._initialCenter=null;var q=this.getSize(),r=p.divideBy(2).round(),s=q.divideBy(2).round(),t=r.subtract(s);if(!t.x&&!t.y)return this;if(o.animate&&o.pan){this.panBy(t);}else{if(o.pan)this._rawPanBy(t);this.fire('move');if(o.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(l.bind(this.fire,this,'moveend'),200);}else this.fire('moveend');}return this.fire('resize',{oldSize:p,newSize:q});},addHandler:function(o,p){if(!p)return this;var q=this[o]=new p(this);this._handlers.push(q);if(this.options[o])q.enable();return this;},remove:function(){if(this._loaded)this.fire('unload');this._initEvents('off');try{delete this._container._leaflet;}catch(o){this._container._leaflet=j;}this._clearPanes();if(this._clearControlPos)this._clearControlPos();this._clearHandlers();return this;},getCenter:function(){this._checkIfLoaded();if(this._initialCenter&&!this._moved())return this._initialCenter;return this.layerPointToLatLng(this._getCenterLayerPoint());},getZoom:function(){return this._zoom;},getBounds:function(){var o=this.getPixelBounds(),p=this.unproject(o.getBottomLeft()),q=this.unproject(o.getTopRight());return new l.LatLngBounds(p,q);},getMinZoom:function(){return this.options.minZoom===j?(this._layersMinZoom===j?0:this._layersMinZoom):this.options.minZoom;},getMaxZoom:function(){return this.options.maxZoom===j?(this._layersMaxZoom===j?Infinity:this._layersMaxZoom):this.options.maxZoom;},getBoundsZoom:function(o,p,q){o=l.latLngBounds(o);var r=this.getMinZoom()-(p?1:0),s=this.getMaxZoom(),t=this.getSize(),u=o.getNorthWest(),v=o.getSouthEast(),w=true,x;q=l.point(q||[0,0]);do{r++;x=this.project(v,r).subtract(this.project(u,r)).add(q);w=!p?t.contains(x):x.x<t.x||x.y<t.y;}while(w&&r<=s);if(w&&p)return null;return p?r:r-1;},getSize:function(){if(!this._size||this._sizeChanged){this._size=new l.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false;}return this._size.clone();},getPixelBounds:function(){var o=this._getTopLeftPoint();return new l.Bounds(o,o.add(this.getSize()));},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint;},getPanes:function(){return this._panes;},getContainer:function(){return this._container;},getZoomScale:function(o){var p=this.options.crs;return p.scale(o)/p.scale(this._zoom);},getScaleZoom:function(o){return this._zoom+(Math.log(o)/Math.LN2);},project:function(o,p){p=p===j?this._zoom:p;return this.options.crs.latLngToPoint(l.latLng(o),p);},unproject:function(o,p){p=p===j?this._zoom:p;return this.options.crs.pointToLatLng(l.point(o),p);},layerPointToLatLng:function(o){var p=l.point(o).add(this.getPixelOrigin());return this.unproject(p);},latLngToLayerPoint:function(o){var p=this.project(l.latLng(o))._round();return p._subtract(this.getPixelOrigin());},containerPointToLayerPoint:function(o){return l.point(o).subtract(this._getMapPanePos());},layerPointToContainerPoint:function(o){return l.point(o).add(this._getMapPanePos());},containerPointToLatLng:function(o){var p=this.containerPointToLayerPoint(l.point(o));return this.layerPointToLatLng(p);},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(l.latLng(o)));},mouseEventToContainerPoint:function(o){return l.DomEvent.getMousePosition(o,this._container);},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o));},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o));},_initContainer:function(o){var p=this._container=l.DomUtil.get(o);if(!p){throw new Error('Map container not found.');}else if(p._leaflet)throw new Error('Map container is already initialized.');p._leaflet=true;},_initLayout:function(){var o=this._container;l.DomUtil.addClass(o,'leaflet-container'+(l.Browser.touch?' leaflet-touch':'')+(l.Browser.retina?' leaflet-retina':'')+(l.Browser.ielt9?' leaflet-oldie':'')+(this.options.fadeAnimation?' leaflet-fade-anim':''));var p=l.DomUtil.getStyle(o,'position');if(p!=='absolute'&&p!=='relative'&&p!=='fixed')o.style.position='relative';this._initPanes();if(this._initControlPos)this._initControlPos();},_initPanes:function(){var o=this._panes={};this._mapPane=o.mapPane=this._createPane('leaflet-map-pane',this._container);this._tilePane=o.tilePane=this._createPane('leaflet-tile-pane',this._mapPane);o.objectsPane=this._createPane('leaflet-objects-pane',this._mapPane);o.shadowPane=this._createPane('leaflet-shadow-pane');o.overlayPane=this._createPane('leaflet-overlay-pane');o.markerPane=this._createPane('leaflet-marker-pane');o.popupPane=this._createPane('leaflet-popup-pane');var p=' leaflet-zoom-hide';if(!this.options.markerZoomAnimation){l.DomUtil.addClass(o.markerPane,p);l.DomUtil.addClass(o.shadowPane,p);l.DomUtil.addClass(o.popupPane,p);}},_createPane:function(o,p){return l.DomUtil.create('div',o,p||this._panes.objectsPane);},_clearPanes:function(){this._container.removeChild(this._mapPane);},_addLayers:function(o){o=o?(l.Util.isArray(o)?o:[o]):[];for(var p=0,q=o.length;p<q;p++)this.addLayer(o[p]);},_resetView:function(o,p,q,r){var s=(this._zoom!==p);if(!r){this.fire('movestart');if(s)this.fire('zoomstart');}this._zoom=p;this._initialCenter=o;this._initialTopLeftPoint=this._getNewTopLeftPoint(o);if(!q){l.DomUtil.setPosition(this._mapPane,new l.Point(0,0));}else this._initialTopLeftPoint._add(this._getMapPanePos());this._tileLayersToLoad=this._tileLayersNum;var t=!this._loaded;this._loaded=true;if(t){this.fire('load');this.eachLayer(this._layerAdd,this);}this.fire('viewreset',{hard:!q});this.fire('move');if(s||r)this.fire('zoomend');this.fire('moveend',{hard:!q});},_rawPanBy:function(o){l.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(o));},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom();},_updateZoomLevels:function(){var o,p=Infinity,q=-Infinity,r=this._getZoomSpan();for(o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o];if(!isNaN(s.options.minZoom))p=Math.min(p,s.options.minZoom);if(!isNaN(s.options.maxZoom))q=Math.max(q,s.options.maxZoom);}if(o===j){this._layersMaxZoom=this._layersMinZoom=j;}else{this._layersMaxZoom=q;this._layersMinZoom=p;}if(r!==this._getZoomSpan())this.fire('zoomlevelschange');},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds);},_checkIfLoaded:function(){if(!this._loaded)throw new Error('Set map center and zoom first.');},_initEvents:function(o){if(!l.DomEvent)return;o=o||'on';l.DomEvent[o](this._container,'click',this._onMouseClick,this);var p=['dblclick','mousedown','mouseup','mouseenter','mouseleave','mousemove','contextmenu'],q,r;for(q=0,r=p.length;q<r;q++)l.DomEvent[o](this._container,p[q],this._fireMouseEvent,this);if(this.options.trackResize)l.DomEvent[o](h,'resize',this._onResize,this);},_onResize:function(){l.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=l.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true});},this,false,this._container);},_onMouseClick:function(o){if(!this._loaded||(!o._simulated&&((this.dragging&&this.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())))||l.DomEvent._skipped(o))return;this.fire('preclick');this._fireMouseEvent(o);},_fireMouseEvent:function(o){if(!this._loaded||l.DomEvent._skipped(o))return;var p=o.type;p=(p==='mouseenter'?'mouseover':(p==='mouseleave'?'mouseout':p));if(!this.hasEventListeners(p))return;if(p==='contextmenu')l.DomEvent.preventDefault(o);var q=this.mouseEventToContainerPoint(o),r=this.containerPointToLayerPoint(q),s=this.layerPointToLatLng(r);this.fire(p,{latlng:s,layerPoint:r,containerPoint:q,originalEvent:o});},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad)this.fire('tilelayersload');},_clearHandlers:function(){for(var o=0,p=this._handlers.length;o<p;o++)this._handlers[o].disable();},whenReady:function(o,p){if(this._loaded){o.call(p||this,this);}else this.on('load',o,p);return this;},_layerAdd:function(o){o.onAdd(this);this.fire('layeradd',{layer:o});},_getMapPanePos:function(){return l.DomUtil.getPosition(this._mapPane);},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0]);},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos());},_getNewTopLeftPoint:function(o,p){var q=this.getSize()._divideBy(2);return this.project(o,p)._subtract(q)._round();},_latLngToNewLayerPoint:function(o,p,q){var r=this._getNewTopLeftPoint(q,p).add(this._getMapPanePos());return this.project(o,p)._subtract(r);},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2));},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint());},_limitCenter:function(o,p,q){if(!q)return o;var r=this.project(o,p),s=this.getSize().divideBy(2),t=new l.Bounds(r.subtract(s),r.add(s)),u=this._getBoundsOffset(t,q,p);return this.unproject(r.add(u),p);},_limitOffset:function(o,p){if(!p)return o;var q=this.getPixelBounds(),r=new l.Bounds(q.min.add(o),q.max.add(o));return o.add(this._getBoundsOffset(r,p));},_getBoundsOffset:function(o,p,q){var r=this.project(p.getNorthWest(),q).subtract(o.min),s=this.project(p.getSouthEast(),q).subtract(o.max),t=this._rebound(r.x,-s.x),u=this._rebound(r.y,-s.y);return new l.Point(t,u);},_rebound:function(o,p){return o+p>0?Math.round(o-p)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(p));},_limitZoom:function(o){var p=this.getMinZoom(),q=this.getMaxZoom();return Math.max(p,Math.min(q,o));}});l.map=function(o,p){return new l.Map(o,p);};l.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(o){var p=l.LatLng.DEG_TO_RAD,q=this.MAX_LATITUDE,r=Math.max(Math.min(q,o.lat),-q),s=this.R_MAJOR,t=this.R_MINOR,u=o.lng*p*s,v=r*p,w=t/s,x=Math.sqrt(1-w*w),y=x*Math.sin(v);y=Math.pow((1-y)/(1+y),x*.5);var z=Math.tan(.5*((Math.PI*.5)-v))/y;v=-s*Math.log(z);return new l.Point(u,v);},unproject:function(o){var p=l.LatLng.RAD_TO_DEG,q=this.R_MAJOR,r=this.R_MINOR,s=o.x*p/q,t=r/q,u=Math.sqrt(1-(t*t)),v=Math.exp(-o.y/q),w=(Math.PI/2)-2*Math.atan(v),x=15,y=1e-07,z=x,aa=.1,ba;while((Math.abs(aa)>y)&&(--z>0)){ba=u*Math.sin(w);aa=(Math.PI/2)-2*Math.atan(v*Math.pow((1-ba)/(1+ba),.5*u))-w;w+=aa;}return new l.LatLng(w*p,s);}};l.CRS.EPSG3395=l.extend({},l.CRS,{code:'EPSG:3395',projection:l.Projection.Mercator,transformation:(function(){var o=l.Projection.Mercator,p=o.R_MAJOR,q=.5/(Math.PI*p);return new l.Transformation(q,.5,-q,.5);}())});l.TileLayer=l.Class.extend({includes:l.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:'abc',errorTileUrl:'',attribution:'',zoomOffset:0,opacity:1,unloadInvisibleTiles:l.Browser.mobile,updateWhenIdle:l.Browser.mobile},initialize:function(o,p){p=l.setOptions(this,p);if(p.detectRetina&&l.Browser.retina&&p.maxZoom>0){p.tileSize=Math.floor(p.tileSize/2);p.zoomOffset++;if(p.minZoom>0)p.minZoom--;this.options.maxZoom--;}if(p.bounds)p.bounds=l.latLngBounds(p.bounds);this._url=o;var q=this.options.subdomains;if(typeof q==='string')this.options.subdomains=q.split('');},onAdd:function(o){this._map=o;this._animated=o._zoomAnimated;this._initContainer();o.on({viewreset:this._reset,moveend:this._update},this);if(this._animated)o.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);if(!this.options.updateWhenIdle){this._limitedUpdate=l.Util.limitExecByInterval(this._update,150,this);o.on('move',this._limitedUpdate,this);}this._reset();this._update();},addTo:function(o){o.addLayer(this);return this;},onRemove:function(o){this._container.parentNode.removeChild(this._container);o.off({viewreset:this._reset,moveend:this._update},this);if(this._animated)o.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);if(!this.options.updateWhenIdle)o.off('move',this._limitedUpdate,this);this._container=null;this._map=null;},bringToFront:function(){var o=this._map._panes.tilePane;if(this._container){o.appendChild(this._container);this._setAutoZIndex(o,Math.max);}return this;},bringToBack:function(){var o=this._map._panes.tilePane;if(this._container){o.insertBefore(this._container,o.firstChild);this._setAutoZIndex(o,Math.min);}return this;},getAttribution:function(){return this.options.attribution;},getContainer:function(){return this._container;},setOpacity:function(o){this.options.opacity=o;if(this._map)this._updateOpacity();return this;},setZIndex:function(o){this.options.zIndex=o;this._updateZIndex();return this;},setUrl:function(o,p){this._url=o;if(!p)this.redraw();return this;},redraw:function(){if(this._map){this._reset({hard:true});this._update();}return this;},_updateZIndex:function(){if(this._container&&this.options.zIndex!==j)this._container.style.zIndex=this.options.zIndex;},_setAutoZIndex:function(o,p){var q=o.children,r=-p(Infinity,-Infinity),s,t,u;for(t=0,u=q.length;t<u;t++)if(q[t]!==this._container){s=parseInt(q[t].style.zIndex,10);if(!isNaN(s))r=p(r,s);}this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+p(1,-1);},_updateOpacity:function(){var o,p=this._tiles;if(l.Browser.ielt9){for(o in p)l.DomUtil.setOpacity(p[o],this.options.opacity);}else l.DomUtil.setOpacity(this._container,this.options.opacity);},_initContainer:function(){var o=this._map._panes.tilePane;if(!this._container){this._container=l.DomUtil.create('div','leaflet-layer');this._updateZIndex();if(this._animated){var p='leaflet-tile-container';this._bgBuffer=l.DomUtil.create('div',p,this._container);this._tileContainer=l.DomUtil.create('div',p,this._container);}else this._tileContainer=this._container;o.appendChild(this._container);if(this.options.opacity<1)this._updateOpacity();}},_reset:function(o){for(var p in this._tiles)this.fire('tileunload',{tile:this._tiles[p]});this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles)this._unusedTiles=[];this._tileContainer.innerHTML='';if(this._animated&&o&&o.hard)this._clearBgBuffer();this._initContainer();},_getTileSize:function(){var o=this._map,p=o.getZoom()+this.options.zoomOffset,q=this.options.maxNativeZoom,r=this.options.tileSize;if(q&&p>q)r=Math.round(o.getZoomScale(p)/o.getZoomScale(q)*r);return r;},_update:function(){if(!this._map)return;var o=this._map,p=o.getPixelBounds(),q=o.getZoom(),r=this._getTileSize();if(q>this.options.maxZoom||q<this.options.minZoom)return;var s=l.bounds(p.min.divideBy(r)._floor(),p.max.divideBy(r)._floor());this._addTilesFromCenterOut(s);if(this.options.unloadInvisibleTiles||this.options.reuseTiles)this._removeOtherTiles(s);},_addTilesFromCenterOut:function(o){var p=[],q=o.getCenter(),r,s,t;for(r=o.min.y;r<=o.max.y;r++)for(s=o.min.x;s<=o.max.x;s++){t=new l.Point(s,r);if(this._tileShouldBeLoaded(t))p.push(t);}var u=p.length;if(u===0)return;p.sort(function(w,x){return w.distanceTo(q)-x.distanceTo(q);});var v=i.createDocumentFragment();if(!this._tilesToLoad)this.fire('loading');this._tilesToLoad+=u;for(s=0;s<u;s++)this._addTile(p[s],v);this._tileContainer.appendChild(v);},_tileShouldBeLoaded:function(o){if((o.x+':'+o.y) in this._tiles)return false;var p=this.options;if(!p.continuousWorld){var q=this._getWrapTileNum();if((p.noWrap&&(o.x<0||o.x>=q.x))||o.y<0||o.y>=q.y)return false;}if(p.bounds){var r=p.tileSize,s=o.multiplyBy(r),t=s.add([r,r]),u=this._map.unproject(s),v=this._map.unproject(t);if(!p.continuousWorld&&!p.noWrap){u=u.wrap();v=v.wrap();}if(!p.bounds.intersects([u,v]))return false;}return true;},_removeOtherTiles:function(o){var p,q,r,s;for(s in this._tiles){p=s.split(':');q=parseInt(p[0],10);r=parseInt(p[1],10);if(q<o.min.x||q>o.max.x||r<o.min.y||r>o.max.y)this._removeTile(s);}},_removeTile:function(o){var p=this._tiles[o];this.fire('tileunload',{tile:p,url:p.src});if(this.options.reuseTiles){l.DomUtil.removeClass(p,'leaflet-tile-loaded');this._unusedTiles.push(p);}else if(p.parentNode===this._tileContainer)this._tileContainer.removeChild(p);if(!l.Browser.android){p.onload=null;p.src=l.Util.emptyImageUrl;}delete this._tiles[o];},_addTile:function(o,p){var q=this._getTilePos(o),r=this._getTile();l.DomUtil.setPosition(r,q,l.Browser.chrome);this._tiles[o.x+':'+o.y]=r;this._loadTile(r,o);if(r.parentNode!==this._tileContainer)p.appendChild(r);},_getZoomForUrl:function(){var o=this.options,p=this._map.getZoom();if(o.zoomReverse)p=o.maxZoom-p;p+=o.zoomOffset;return o.maxNativeZoom?Math.min(p,o.maxNativeZoom):p;},_getTilePos:function(o){var p=this._map.getPixelOrigin(),q=this._getTileSize();return o.multiplyBy(q).subtract(p);},getTileUrl:function(o){return l.Util.template(this._url,l.extend({s:this._getSubdomain(o),z:o.z,x:o.x,y:o.y},this.options));},_getWrapTileNum:function(){var o=this._map.options.crs,p=o.getSize(this._map.getZoom());return p.divideBy(this._getTileSize())._floor();},_adjustTilePoint:function(o){var p=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap)o.x=((o.x%p.x)+p.x)%p.x;if(this.options.tms)o.y=p.y-o.y-1;o.z=this._getZoomForUrl();},_getSubdomain:function(o){var p=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[p];},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var o=this._unusedTiles.pop();this._resetTile(o);return o;}return this._createTile();},_resetTile:function(){},_createTile:function(){var o=l.DomUtil.create('img','leaflet-tile');o.style.width=o.style.height=this._getTileSize()+'px';o.galleryimg='no';o.onselectstart=o.onmousemove=l.Util.falseFn;if(l.Browser.ielt9&&this.options.opacity!==j)l.DomUtil.setOpacity(o,this.options.opacity);if(l.Browser.mobileWebkit3d)o.style.WebkitBackfaceVisibility='hidden';return o;},_loadTile:function(o,p){o._layer=this;o.onload=this._tileOnLoad;o.onerror=this._tileOnError;this._adjustTilePoint(p);o.src=this.getTileUrl(p);this.fire('tileloadstart',{tile:o,url:o.src});},_tileLoaded:function(){this._tilesToLoad--;if(this._animated)l.DomUtil.addClass(this._tileContainer,'leaflet-zoom-animated');if(!this._tilesToLoad){this.fire('load');if(this._animated){clearTimeout(this._clearBgBufferTimer);this._clearBgBufferTimer=setTimeout(l.bind(this._clearBgBuffer,this),500);}}},_tileOnLoad:function(){var o=this._layer;if(this.src!==l.Util.emptyImageUrl){l.DomUtil.addClass(this,'leaflet-tile-loaded');o.fire('tileload',{tile:this,url:this.src});}o._tileLoaded();},_tileOnError:function(){var o=this._layer;o.fire('tileerror',{tile:this,url:this.src});var p=o.options.errorTileUrl;if(p)this.src=p;o._tileLoaded();}});l.tileLayer=function(o,p){return new l.TileLayer(o,p);};l.TileLayer.WMS=l.TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',version:'1.1.1',layers:'',styles:'',format:'image/jpeg',transparent:false},initialize:function(o,p){this._url=o;var q=l.extend({},this.defaultWmsParams),r=p.tileSize||this.options.tileSize;if(p.detectRetina&&l.Browser.retina){q.width=q.height=r*2;}else q.width=q.height=r;for(var s in p)if(!this.options.hasOwnProperty(s)&&s!=='crs')q[s]=p[s];this.wmsParams=q;l.setOptions(this,p);},onAdd:function(o){this._crs=this.options.crs||o.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[p]=this._crs.code;l.TileLayer.prototype.onAdd.call(this,o);},getTileUrl:function(o){var p=this._map,q=this.options.tileSize,r=o.multiplyBy(q),s=r.add([q,q]),t=this._crs.project(p.unproject(r,o.z)),u=this._crs.project(p.unproject(s,o.z)),v=this._wmsVersion>=1.3&&this._crs===l.CRS.EPSG4326?[u.y,t.x,t.y,u.x].join(','):[t.x,u.y,u.x,t.y].join(','),w=l.Util.template(this._url,{s:this._getSubdomain(o)});return w+l.Util.getParamString(this.wmsParams,w,true)+'&BBOX='+v;},setParams:function(o,p){l.extend(this.wmsParams,o);if(!p)this.redraw();return this;}});l.tileLayer.wms=function(o,p){return new l.TileLayer.WMS(o,p);};l.TileLayer.Canvas=l.TileLayer.extend({options:{async:false},initialize:function(o){l.setOptions(this,o);},redraw:function(){if(this._map){this._reset({hard:true});this._update();}for(var o in this._tiles)this._redrawTile(this._tiles[o]);return this;},_redrawTile:function(o){this.drawTile(o,o._tilePoint,this._map._zoom);},_createTile:function(){var o=l.DomUtil.create('canvas','leaflet-tile');o.width=o.height=this.options.tileSize;o.onselectstart=o.onmousemove=l.Util.falseFn;return o;},_loadTile:function(o,p){o._layer=this;o._tilePoint=p;this._redrawTile(o);if(!this.options.async)this.tileDrawn(o);},drawTile:function(){},tileDrawn:function(o){this._tileOnLoad.call(o);}});l.tileLayer.canvas=function(o){return new l.TileLayer.Canvas(o);};l.ImageOverlay=l.Class.extend({includes:l.Mixin.Events,options:{opacity:1},initialize:function(o,p,q){this._url=o;this._bounds=l.latLngBounds(p);l.setOptions(this,q);},onAdd:function(o){this._map=o;if(!this._image)this._initImage();o._panes.overlayPane.appendChild(this._image);o.on('viewreset',this._reset,this);if(o.options.zoomAnimation&&l.Browser.any3d)o.on('zoomanim',this._animateZoom,this);this._reset();},onRemove:function(o){o.getPanes().overlayPane.removeChild(this._image);o.off('viewreset',this._reset,this);if(o.options.zoomAnimation)o.off('zoomanim',this._animateZoom,this);},addTo:function(o){o.addLayer(this);return this;},setOpacity:function(o){this.options.opacity=o;this._updateOpacity();return this;},bringToFront:function(){if(this._image)this._map._panes.overlayPane.appendChild(this._image);return this;},bringToBack:function(){var o=this._map._panes.overlayPane;if(this._image)o.insertBefore(this._image,o.firstChild);return this;},setUrl:function(o){this._url=o;this._image.src=this._url;},getAttribution:function(){return this.options.attribution;},_initImage:function(){this._image=l.DomUtil.create('img','leaflet-image-layer');if(this._map.options.zoomAnimation&&l.Browser.any3d){l.DomUtil.addClass(this._image,'leaflet-zoom-animated');}else l.DomUtil.addClass(this._image,'leaflet-zoom-hide');this._updateOpacity();l.extend(this._image,{galleryimg:'no',onselectstart:l.Util.falseFn,onmousemove:l.Util.falseFn,onload:l.bind(this._onImageLoad,this),src:this._url});},_animateZoom:function(o){var p=this._map,q=this._image,r=p.getZoomScale(o.zoom),s=this._bounds.getNorthWest(),t=this._bounds.getSouthEast(),u=p._latLngToNewLayerPoint(s,o.zoom,o.center),v=p._latLngToNewLayerPoint(t,o.zoom,o.center)._subtract(u),w=u._add(v._multiplyBy((1/2)*(1-1/r)));q.style[l.DomUtil.TRANSFORM]=l.DomUtil.getTranslateString(w)+' scale('+r+') ';},_reset:function(){var o=this._image,p=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),q=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(p);l.DomUtil.setPosition(o,p);o.style.width=q.x+'px';o.style.height=q.y+'px';},_onImageLoad:function(){this.fire('load');},_updateOpacity:function(){l.DomUtil.setOpacity(this._image,this.options.opacity);}});l.imageOverlay=function(o,p,q){return new l.ImageOverlay(o,p,q);};l.Icon=l.Class.extend({options:{className:''},initialize:function(o){l.setOptions(this,o);},createIcon:function(o){return this._createIcon('icon',o);},createShadow:function(o){return this._createIcon('shadow',o);},_createIcon:function(o,p){var q=this._getIconUrl(o);if(!q){if(o==='icon')throw new Error('iconUrl not set in Icon options (see the docs).');return null;}var r;if(!p||p.tagName!=='IMG'){r=this._createImg(q);}else r=this._createImg(q,p);this._setIconStyles(r,o);return r;},_setIconStyles:function(o,p){var q=this.options,r=l.point(q[p+'Size']),s;if(p==='shadow'){s=l.point(q.shadowAnchor||q.iconAnchor);}else s=l.point(q.iconAnchor);if(!s&&r)s=r.divideBy(2,true);o.className='leaflet-marker-'+p+' '+q.className;if(s){o.style.marginLeft=(-s.x)+'px';o.style.marginTop=(-s.y)+'px';}if(r){o.style.width=r.x+'px';o.style.height=r.y+'px';}},_createImg:function(o,p){p=p||i.createElement('img');p.src=o;return p;},_getIconUrl:function(o){if(l.Browser.retina&&this.options[o+'RetinaUrl'])return this.options[o+'RetinaUrl'];return this.options[o+'Url'];}});l.icon=function(o){return new l.Icon(o);};l.Icon.Default=l.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(o){var p=o+'Url';if(this.options[p])return this.options[p];if(l.Browser.retina&&o==='icon')o+='-2x';var q=l.Icon.Default.imagePath;if(!q)throw new Error('Couldn\'t autodetect L.Icon.Default.imagePath, set it manually.');return q+'/marker-'+o+'.png';}});l.Icon.Default.imagePath=(function(){if(!i.getElementsByTagName)return null;var o=i.getElementsByTagName('script'),p=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,q,r,s,t,u;for(q=0,r=o.length;q<r;q++){s=o[q].src;t=s.match(p);if(t){u=s.split(p)[0];return (u?u+'/':'')+'images';}}}());l.Marker=l.Class.extend({includes:l.Mixin.Events,options:{icon:new l.Icon.Default(),title:'',alt:'',clickable:true,draggable:false,keyboard:true,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(o,p){l.setOptions(this,p);this._latlng=l.latLng(o);},onAdd:function(o){this._map=o;o.on('viewreset',this.update,this);this._initIcon();this.update();this.fire('add');if(o.options.zoomAnimation&&o.options.markerZoomAnimation)o.on('zoomanim',this._animateZoom,this);},addTo:function(o){o.addLayer(this);return this;},onRemove:function(o){if(this.dragging)this.dragging.disable();this._removeIcon();this._removeShadow();this.fire('remove');o.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null;},getLatLng:function(){return this._latlng;},setLatLng:function(o){this._latlng=l.latLng(o);this.update();return this.fire('move',{latlng:this._latlng});},setZIndexOffset:function(o){this.options.zIndexOffset=o;this.update();return this;},setIcon:function(o){this.options.icon=o;if(this._map){this._initIcon();this.update();}if(this._popup)this.bindPopup(this._popup);return this;},update:function(){if(this._icon){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o);}return this;},_initIcon:function(){var o=this.options,p=this._map,q=(p.options.zoomAnimation&&p.options.markerZoomAnimation),r=q?'leaflet-zoom-animated':'leaflet-zoom-hide',s=o.icon.createIcon(this._icon),t=false;if(s!==this._icon){if(this._icon)this._removeIcon();t=true;if(o.title)s.title=o.title;if(o.alt)s.alt=o.alt;}l.DomUtil.addClass(s,r);if(o.keyboard)s.tabIndex='0';this._icon=s;this._initInteraction();if(o.riseOnHover)l.DomEvent.on(s,'mouseover',this._bringToFront,this).on(s,'mouseout',this._resetZIndex,this);var u=o.icon.createShadow(this._shadow),v=false;if(u!==this._shadow){this._removeShadow();v=true;}if(u)l.DomUtil.addClass(u,r);this._shadow=u;if(o.opacity<1)this._updateOpacity();var w=this._map._panes;if(t)w.markerPane.appendChild(this._icon);if(u&&v)w.shadowPane.appendChild(this._shadow);},_removeIcon:function(){if(this.options.riseOnHover)l.DomEvent.off(this._icon,'mouseover',this._bringToFront).off(this._icon,'mouseout',this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null;},_removeShadow:function(){if(this._shadow)this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null;},_setPos:function(o){l.DomUtil.setPosition(this._icon,o);if(this._shadow)l.DomUtil.setPosition(this._shadow,o);this._zIndex=o.y+this.options.zIndexOffset;this._resetZIndex();},_updateZIndex:function(o){this._icon.style.zIndex=this._zIndex+o;},_animateZoom:function(o){var p=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(p);},_initInteraction:function(){if(!this.options.clickable)return;var o=this._icon,p=['dblclick','mousedown','mouseover','mouseout','contextmenu'];l.DomUtil.addClass(o,'leaflet-clickable');l.DomEvent.on(o,'click',this._onMouseClick,this);l.DomEvent.on(o,'keypress',this._onKeyPress,this);for(var q=0;q<p.length;q++)l.DomEvent.on(o,p[q],this._fireMouseEvent,this);if(l.Handler.MarkerDrag){this.dragging=new l.Handler.MarkerDrag(this);if(this.options.draggable)this.dragging.enable();}},_onMouseClick:function(o){var p=this.dragging&&this.dragging.moved();if(this.hasEventListeners(o.type)||p)l.DomEvent.stopPropagation(o);if(p)return;if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved())return;this.fire(o.type,{originalEvent:o,latlng:this._latlng});},_onKeyPress:function(o){if(o.keyCode===13)this.fire('click',{originalEvent:o,latlng:this._latlng});},_fireMouseEvent:function(o){this.fire(o.type,{originalEvent:o,latlng:this._latlng});if(o.type==='contextmenu'&&this.hasEventListeners(o.type))l.DomEvent.preventDefault(o);if(o.type!=='mousedown'){l.DomEvent.stopPropagation(o);}else l.DomEvent.preventDefault(o);},setOpacity:function(o){this.options.opacity=o;if(this._map)this._updateOpacity();return this;},_updateOpacity:function(){l.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow)l.DomUtil.setOpacity(this._shadow,this.options.opacity);},_bringToFront:function(){this._updateZIndex(this.options.riseOffset);},_resetZIndex:function(){this._updateZIndex(0);}});l.marker=function(o,p){return new l.Marker(o,p);};l.DivIcon=l.Icon.extend({options:{iconSize:[12,12],className:'leaflet-div-icon',html:false},createIcon:function(o){var p=(o&&o.tagName==='DIV')?o:i.createElement('div'),q=this.options;if(q.html!==false){p.innerHTML=q.html;}else p.innerHTML='';if(q.bgPos)p.style.backgroundPosition=(-q.bgPos.x)+'px '+(-q.bgPos.y)+'px';this._setIconStyles(p,'icon');return p;},createShadow:function(){return null;}});l.divIcon=function(o){return new l.DivIcon(o);};l.Map.mergeOptions({closePopupOnClick:true});l.Popup=l.Class.extend({includes:l.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:true,closeButton:true,offset:[0,7],autoPanPadding:[5,5],keepInView:false,className:'',zoomAnimation:true},initialize:function(o,p){l.setOptions(this,o);this._source=p;this._animated=l.Browser.any3d&&this.options.zoomAnimation;this._isOpen=false;},onAdd:function(o){this._map=o;if(!this._container)this._initLayout();var p=o.options.fadeAnimation;if(p)l.DomUtil.setOpacity(this._container,0);o._panes.popupPane.appendChild(this._container);o.on(this._getEvents(),this);this.update();if(p)l.DomUtil.setOpacity(this._container,1);this.fire('open');o.fire('popupopen',{popup:this});if(this._source)this._source.fire('popupopen',{popup:this});},addTo:function(o){o.addLayer(this);return this;},openOn:function(o){o.openPopup(this);return this;},onRemove:function(o){o._panes.popupPane.removeChild(this._container);l.Util.falseFn(this._container.offsetWidth);o.off(this._getEvents(),this);if(o.options.fadeAnimation)l.DomUtil.setOpacity(this._container,0);this._map=null;this.fire('close');o.fire('popupclose',{popup:this});if(this._source)this._source.fire('popupclose',{popup:this});},getLatLng:function(){return this._latlng;},setLatLng:function(o){this._latlng=l.latLng(o);if(this._map){this._updatePosition();this._adjustPan();}return this;},getContent:function(){return this._content;},setContent:function(o){this._content=o;this.update();return this;},update:function(){if(!this._map)return;this._container.style.visibility='hidden';this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility='';this._adjustPan();},_getEvents:function(){var o={viewreset:this._updatePosition};if(this._animated)o.zoomanim=this._zoomAnimation;if('closeOnClick' in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)o.preclick=this._close;if(this.options.keepInView)o.moveend=this._adjustPan;return o;},_close:function(){if(this._map)this._map.closePopup(this);},_initLayout:function(){var o='leaflet-popup',p=o+' '+this.options.className+' leaflet-zoom-'+(this._animated?'animated':'hide'),q=this._container=l.DomUtil.create('div',p),r;if(this.options.closeButton){r=this._closeButton=l.DomUtil.create('a',o+'-close-button',q);r.href='#close';r.innerHTML='&#215;';l.DomEvent.disableClickPropagation(r);l.DomEvent.on(r,'click',this._onCloseButtonClick,this);}var s=this._wrapper=l.DomUtil.create('div',o+'-content-wrapper',q);l.DomEvent.disableClickPropagation(s);this._contentNode=l.DomUtil.create('div',o+'-content',s);l.DomEvent.disableScrollPropagation(this._contentNode);l.DomEvent.on(s,'contextmenu',l.DomEvent.stopPropagation);this._tipContainer=l.DomUtil.create('div',o+'-tip-container',q);this._tip=l.DomUtil.create('div',o+'-tip',this._tipContainer);},_updateContent:function(){if(!this._content)return;if(typeof this._content==='string'){this._contentNode.innerHTML=this._content;}else{while(this._contentNode.hasChildNodes())this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content);}this.fire('contentupdate');},_updateLayout:function(){var o=this._contentNode,p=o.style;p.width='';p.whiteSpace='nowrap';var q=o.offsetWidth;q=Math.min(q,this.options.maxWidth);q=Math.max(q,this.options.minWidth);p.width=(q+1)+'px';p.whiteSpace='';p.height='';var r=o.offsetHeight,s=this.options.maxHeight,t='leaflet-popup-scrolled';if(s&&r>s){p.height=s+'px';l.DomUtil.addClass(o,t);}else l.DomUtil.removeClass(o,t);this._containerWidth=this._container.offsetWidth;},_updatePosition:function(){if(!this._map)return;var o=this._map.latLngToLayerPoint(this._latlng),p=this._animated,q=l.point(this.options.offset);if(p)l.DomUtil.setPosition(this._container,o);this._containerBottom=-q.y-(p?0:o.y);this._containerLeft=-Math.round(this._containerWidth/2)+q.x+(p?0:o.x);this._container.style.bottom=this._containerBottom+'px';this._container.style.left=this._containerLeft+'px';},_zoomAnimation:function(o){var p=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);l.DomUtil.setPosition(this._container,p);},_adjustPan:function(){if(!this.options.autoPan)return;var o=this._map,p=this._container.offsetHeight,q=this._containerWidth,r=new l.Point(this._containerLeft,-p-this._containerBottom);if(this._animated)r._add(l.DomUtil.getPosition(this._container));var s=o.layerPointToContainerPoint(r),t=l.point(this.options.autoPanPadding),u=l.point(this.options.autoPanPaddingTopLeft||t),v=l.point(this.options.autoPanPaddingBottomRight||t),w=o.getSize(),x=0,y=0;if(s.x+q+v.x>w.x)x=s.x+q-w.x+v.x;if(s.x-x-u.x<0)x=s.x-u.x;if(s.y+p+v.y>w.y)y=s.y+p-w.y+v.y;if(s.y-y-u.y<0)y=s.y-u.y;if(x||y)o.fire('autopanstart').panBy([x,y]);},_onCloseButtonClick:function(o){this._close();l.DomEvent.stop(o);}});l.popup=function(o,p){return new l.Popup(o,p);};l.Map.include({openPopup:function(o,p,q){this.closePopup();if(!(o instanceof l.Popup)){var r=o;o=new l.Popup(q).setLatLng(p).setContent(r);}o._isOpen=true;this._popup=o;return this.addLayer(o);},closePopup:function(o){if(!o||o===this._popup){o=this._popup;this._popup=null;}if(o){this.removeLayer(o);o._isOpen=false;}return this;}});l.Marker.include({openPopup:function(){if(this._popup&&this._map&&!this._map.hasLayer(this._popup)){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup);}return this;},closePopup:function(){if(this._popup)this._popup._close();return this;},togglePopup:function(){if(this._popup)if(this._popup._isOpen){this.closePopup();}else this.openPopup();return this;},bindPopup:function(o,p){var q=l.point(this.options.icon.options.popupAnchor||[0,0]);q=q.add(l.Popup.prototype.options.offset);if(p&&p.offset)q=q.add(p.offset);p=l.extend({offset:q},p);if(!this._popupHandlersAdded){this.on('click',this.togglePopup,this).on('remove',this.closePopup,this).on('move',this._movePopup,this);this._popupHandlersAdded=true;}if(o instanceof l.Popup){l.setOptions(o,p);this._popup=o;}else this._popup=new l.Popup(p,this).setContent(o);return this;},setPopupContent:function(o){if(this._popup)this._popup.setContent(o);return this;},unbindPopup:function(){if(this._popup){this._popup=null;this.off('click',this.togglePopup,this).off('remove',this.closePopup,this).off('move',this._movePopup,this);this._popupHandlersAdded=false;}return this;},getPopup:function(){return this._popup;},_movePopup:function(o){this._popup.setLatLng(o.latlng);}});l.LayerGroup=l.Class.extend({initialize:function(o){this._layers={};var p,q;if(o)for(p=0,q=o.length;p<q;p++)this.addLayer(o[p]);},addLayer:function(o){var p=this.getLayerId(o);this._layers[p]=o;if(this._map)this._map.addLayer(o);return this;},removeLayer:function(o){var p=o in this._layers?o:this.getLayerId(o);if(this._map&&this._layers[p])this._map.removeLayer(this._layers[p]);delete this._layers[p];return this;},hasLayer:function(o){if(!o)return false;return (o in this._layers||this.getLayerId(o) in this._layers);},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this;},invoke:function(o){var p=Array.prototype.slice.call(arguments,1),q,r;for(q in this._layers){r=this._layers[q];if(r[o])r[o].apply(r,p);}return this;},onAdd:function(o){this._map=o;this.eachLayer(o.addLayer,o);},onRemove:function(o){this.eachLayer(o.removeLayer,o);this._map=null;},addTo:function(o){o.addLayer(this);return this;},eachLayer:function(o,p){for(var q in this._layers)o.call(p,this._layers[q]);return this;},getLayer:function(o){return this._layers[o];},getLayers:function(){var o=[];for(var p in this._layers)o.push(this._layers[p]);return o;},setZIndex:function(o){return this.invoke('setZIndex',o);},getLayerId:function(o){return l.stamp(o);}});l.layerGroup=function(o){return new l.LayerGroup(o);};l.FeatureGroup=l.LayerGroup.extend({includes:l.Mixin.Events,statics:{EVENTS:'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'},addLayer:function(o){if(this.hasLayer(o))return this;if('on' in o)o.on(l.FeatureGroup.EVENTS,this._propagateEvent,this);l.LayerGroup.prototype.addLayer.call(this,o);if(this._popupContent&&o.bindPopup)o.bindPopup(this._popupContent,this._popupOptions);return this.fire('layeradd',{layer:o});},removeLayer:function(o){if(!this.hasLayer(o))return this;if(o in this._layers)o=this._layers[o];o.off(l.FeatureGroup.EVENTS,this._propagateEvent,this);l.LayerGroup.prototype.removeLayer.call(this,o);if(this._popupContent)this.invoke('unbindPopup');return this.fire('layerremove',{layer:o});},bindPopup:function(o,p){this._popupContent=o;this._popupOptions=p;return this.invoke('bindPopup',o,p);},openPopup:function(o){for(var p in this._layers){this._layers[p].openPopup(o);break;}return this;},setStyle:function(o){return this.invoke('setStyle',o);},bringToFront:function(){return this.invoke('bringToFront');},bringToBack:function(){return this.invoke('bringToBack');},getBounds:function(){var o=new l.LatLngBounds();this.eachLayer(function(p){o.extend(p instanceof l.Marker?p.getLatLng():p.getBounds());});return o;},_propagateEvent:function(o){o=l.extend({layer:o.target,target:this},o);this.fire(o.type,o);}});l.featureGroup=function(o){return new l.FeatureGroup(o);};l.Path=l.Class.extend({includes:[l.Mixin.Events],statics:{CLIP_PADDING:(function(){var o=l.Browser.mobile?1280:2000,p=(o/Math.max(h.outerWidth,h.outerHeight)-1)/2;return Math.max(0,Math.min(.5,p));})()},options:{stroke:true,color:'#0033ff',dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:false,fillColor:null,fillOpacity:.2,clickable:true},initialize:function(o){l.setOptions(this,o);},onAdd:function(o){this._map=o;if(!this._container){this._initElements();this._initEvents();}this.projectLatlngs();this._updatePath();if(this._container)this._map._pathRoot.appendChild(this._container);this.fire('add');o.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this);},addTo:function(o){o.addLayer(this);return this;},onRemove:function(o){o._pathRoot.removeChild(this._container);this.fire('remove');this._map=null;if(l.Browser.vml){this._container=null;this._stroke=null;this._fill=null;}o.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this);},projectLatlngs:function(){},setStyle:function(o){l.setOptions(this,o);if(this._container)this._updateStyle();return this;},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath();}return this;}});l.Map.include({_updatePathViewport:function(){var o=l.Path.CLIP_PADDING,p=this.getSize(),q=l.DomUtil.getPosition(this._mapPane),r=q.multiplyBy(-1)._subtract(p.multiplyBy(o)._round()),s=r.add(p.multiplyBy(1+o*2)._round());this._pathViewport=new l.Bounds(r,s);}});l.Path.SVG_NS='http://www.w3.org/2000/svg';l.Browser.svg=!!(i.createElementNS&&i.createElementNS(l.Path.SVG_NS,'svg').createSVGRect);l.Path=l.Path.extend({statics:{SVG:l.Browser.svg},bringToFront:function(){var o=this._map._pathRoot,p=this._container;if(p&&o.lastChild!==p)o.appendChild(p);return this;},bringToBack:function(){var o=this._map._pathRoot,p=this._container,q=o.firstChild;if(p&&q!==p)o.insertBefore(p,q);return this;},getPathString:function(){},_createElement:function(o){return i.createElementNS(l.Path.SVG_NS,o);},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle();},_initPath:function(){this._container=this._createElement('g');this._path=this._createElement('path');if(this.options.className)l.DomUtil.addClass(this._path,this.options.className);this._container.appendChild(this._path);},_initStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke-linejoin','round');this._path.setAttribute('stroke-linecap','round');}if(this.options.fill)this._path.setAttribute('fill-rule','evenodd');if(this.options.pointerEvents)this._path.setAttribute('pointer-events',this.options.pointerEvents);if(!this.options.clickable&&!this.options.pointerEvents)this._path.setAttribute('pointer-events','none');this._updateStyle();},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke',this.options.color);this._path.setAttribute('stroke-opacity',this.options.opacity);this._path.setAttribute('stroke-width',this.options.weight);if(this.options.dashArray){this._path.setAttribute('stroke-dasharray',this.options.dashArray);}else this._path.removeAttribute('stroke-dasharray');if(this.options.lineCap)this._path.setAttribute('stroke-linecap',this.options.lineCap);if(this.options.lineJoin)this._path.setAttribute('stroke-linejoin',this.options.lineJoin);}else this._path.setAttribute('stroke','none');if(this.options.fill){this._path.setAttribute('fill',this.options.fillColor||this.options.color);this._path.setAttribute('fill-opacity',this.options.fillOpacity);}else this._path.setAttribute('fill','none');},_updatePath:function(){var o=this.getPathString();if(!o)o='M0 0';this._path.setAttribute('d',o);},_initEvents:function(){if(this.options.clickable){if(l.Browser.svg||!l.Browser.vml)l.DomUtil.addClass(this._path,'leaflet-clickable');l.DomEvent.on(this._container,'click',this._onMouseClick,this);var o=['dblclick','mousedown','mouseover','mouseout','mousemove','contextmenu'];for(var p=0;p<o.length;p++)l.DomEvent.on(this._container,o[p],this._fireMouseEvent,this);}},_onMouseClick:function(o){if(this._map.dragging&&this._map.dragging.moved())return;this._fireMouseEvent(o);},_fireMouseEvent:function(o){if(!this.hasEventListeners(o.type))return;var p=this._map,q=p.mouseEventToContainerPoint(o),r=p.containerPointToLayerPoint(q),s=p.layerPointToLatLng(r);this.fire(o.type,{latlng:s,layerPoint:r,containerPoint:q,originalEvent:o});if(o.type==='contextmenu')l.DomEvent.preventDefault(o);if(o.type!=='mousemove')l.DomEvent.stopPropagation(o);}});l.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=l.Path.prototype._createElement('svg');this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&l.Browser.any3d){l.DomUtil.addClass(this._pathRoot,'leaflet-zoom-animated');this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom});}else l.DomUtil.addClass(this._pathRoot,'leaflet-zoom-hide');this.on('moveend',this._updateSvgViewport);this._updateSvgViewport();}},_animatePathZoom:function(o){var p=this.getZoomScale(o.zoom),q=this._getCenterOffset(o.center)._multiplyBy(-p)._add(this._pathViewport.min);this._pathRoot.style[l.DomUtil.TRANSFORM]=l.DomUtil.getTranslateString(q)+' scale('+p+') ';this._pathZooming=true;},_endPathZoom:function(){this._pathZooming=false;},_updateSvgViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var o=this._pathViewport,p=o.min,q=o.max,r=q.x-p.x,s=q.y-p.y,t=this._pathRoot,u=this._panes.overlayPane;if(l.Browser.mobileWebkit)u.removeChild(t);l.DomUtil.setPosition(t,p);t.setAttribute('width',r);t.setAttribute('height',s);t.setAttribute('viewBox',[p.x,p.y,r,s].join(' '));if(l.Browser.mobileWebkit)u.appendChild(t);}});l.Path.include({bindPopup:function(o,p){if(o instanceof l.Popup){this._popup=o;}else{if(!this._popup||p)this._popup=new l.Popup(p,this);this._popup.setContent(o);}if(!this._popupHandlersAdded){this.on('click',this._openPopup,this).on('remove',this.closePopup,this);this._popupHandlersAdded=true;}return this;},unbindPopup:function(){if(this._popup){this._popup=null;this.off('click',this._openPopup).off('remove',this.closePopup);this._popupHandlersAdded=false;}return this;},openPopup:function(o){if(this._popup){o=o||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:o});}return this;},closePopup:function(){if(this._popup)this._popup._close();return this;},_openPopup:function(o){this._popup.setLatLng(o.latlng);this._map.openPopup(this._popup);}});l.Browser.vml=!l.Browser.svg&&(function(){try{var p=i.createElement('div');p.innerHTML='<v:shape adj="1"/>';var q=p.firstChild;q.style.behavior='url(#default#VML)';return q&&(typeof q.adj==='object');}catch(o){return false;}}());l.Path=l.Browser.svg||!l.Browser.vml?l.Path:l.Path.extend({statics:{VML:true,CLIP_PADDING:.02},_createElement:(function(){try{i.namespaces.add('lvml','urn:schemas-microsoft-com:vml');return function(p){return i.createElement('<lvml:'+p+' class="lvml">');};}catch(o){return function(p){return i.createElement('<'+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');};}}()),_initPath:function(){var o=this._container=this._createElement('shape');l.DomUtil.addClass(o,'leaflet-vml-shape'+(this.options.className?' '+this.options.className:''));if(this.options.clickable)l.DomUtil.addClass(o,'leaflet-clickable');o.coordsize='1 1';this._path=this._createElement('path');o.appendChild(this._path);this._map._pathRoot.appendChild(o);},_initStyle:function(){this._updateStyle();},_updateStyle:function(){var o=this._stroke,p=this._fill,q=this.options,r=this._container;r.stroked=q.stroke;r.filled=q.fill;if(q.stroke){if(!o){o=this._stroke=this._createElement('stroke');o.endcap='round';r.appendChild(o);}o.weight=q.weight+'px';o.color=q.color;o.opacity=q.opacity;if(q.dashArray){o.dashStyle=l.Util.isArray(q.dashArray)?q.dashArray.join(' '):q.dashArray.replace(/( *, *)/g,' ');}else o.dashStyle='';if(q.lineCap)o.endcap=q.lineCap.replace('butt','flat');if(q.lineJoin)o.joinstyle=q.lineJoin;}else if(o){r.removeChild(o);this._stroke=null;}if(q.fill){if(!p){p=this._fill=this._createElement('fill');r.appendChild(p);}p.color=q.fillColor||q.color;p.opacity=q.fillOpacity;}else if(p){r.removeChild(p);this._fill=null;}},_updatePath:function(){var o=this._container.style;o.display='none';this._path.v=this.getPathString()+' ';o.display='';}});l.Map.include(l.Browser.svg||!l.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot)return;var o=this._pathRoot=i.createElement('div');o.className='leaflet-vml-container';this._panes.overlayPane.appendChild(o);this.on('moveend',this._updatePathViewport);this._updatePathViewport();}});l.Browser.canvas=(function(){return !!(i.createElement&&i.createElement('canvas').getContext);}());l.Path=(l.Path.SVG&&!h.L_PREFER_CANVAS)||!l.Browser.canvas?l.Path:l.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate();}return this;},setStyle:function(o){l.setOptions(this,o);if(this._map){this._updateStyle();this._requestUpdate();}return this;},onRemove:function(o){o.off('viewreset',this.projectLatlngs,this).off('moveend',this._updatePath,this);if(this.options.clickable){this._map.off('click',this._onClick,this);this._map.off('mousemove',this._onMouseMove,this);}this._requestUpdate();this._map=null;},_requestUpdate:function(){if(this._map&&!l.Path._updateRequest)l.Path._updateRequest=l.Util.requestAnimFrame(this._fireMapMoveEnd,this._map);},_fireMapMoveEnd:function(){l.Path._updateRequest=null;this.fire('moveend');},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx;},_updateStyle:function(){var o=this.options;if(o.stroke){this._ctx.lineWidth=o.weight;this._ctx.strokeStyle=o.color;}if(o.fill)this._ctx.fillStyle=o.fillColor||o.color;},_drawPath:function(){var o,p,q,r,s,t;this._ctx.beginPath();for(o=0,q=this._parts.length;o<q;o++){for(p=0,r=this._parts[o].length;p<r;p++){s=this._parts[o][p];t=(p===0?'move':'line')+'To';this._ctx[t](s.x,s.y);}if(this instanceof l.Polygon)this._ctx.closePath();}},_checkIfEmpty:function(){return !this._parts.length;},_updatePath:function(){if(this._checkIfEmpty())return;var o=this._ctx,p=this.options;this._drawPath();o.save();this._updateStyle();if(p.fill){o.globalAlpha=p.fillOpacity;o.fill();}if(p.stroke){o.globalAlpha=p.opacity;o.stroke();}o.restore();},_initEvents:function(){if(this.options.clickable){this._map.on('mousemove',this._onMouseMove,this);this._map.on('click',this._onClick,this);}},_onClick:function(o){if(this._containsPoint(o.layerPoint))this.fire('click',o);},_onMouseMove:function(o){if(!this._map||this._map._animatingZoom)return;if(this._containsPoint(o.layerPoint)){this._ctx.canvas.style.cursor='pointer';this._mouseInside=true;this.fire('mouseover',o);}else if(this._mouseInside){this._ctx.canvas.style.cursor='';this._mouseInside=false;this.fire('mouseout',o);}}});l.Map.include((l.Path.SVG&&!h.L_PREFER_CANVAS)||!l.Browser.canvas?{}:{_initPathRoot:function(){var o=this._pathRoot,p;if(!o){o=this._pathRoot=i.createElement('canvas');o.style.position='absolute';p=this._canvasCtx=o.getContext('2d');p.lineCap='round';p.lineJoin='round';this._panes.overlayPane.appendChild(o);if(this.options.zoomAnimation){this._pathRoot.className='leaflet-zoom-animated';this.on('zoomanim',this._animatePathZoom);this.on('zoomend',this._endPathZoom);}this.on('moveend',this._updateCanvasViewport);this._updateCanvasViewport();}},_updateCanvasViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var o=this._pathViewport,p=o.min,q=o.max.subtract(p),r=this._pathRoot;l.DomUtil.setPosition(r,p);r.width=q.x;r.height=q.y;r.getContext('2d').translate(-p.x,-p.y);}});l.LineUtil={simplify:function(o,p){if(!p||!o.length)return o.slice();var q=p*p;o=this._reducePoints(o,q);o=this._simplifyDP(o,q);return o;},pointToSegmentDistance:function(o,p,q){return Math.sqrt(this._sqClosestPointOnSegment(o,p,q,true));},closestPointOnSegment:function(o,p,q){return this._sqClosestPointOnSegment(o,p,q);},_simplifyDP:function(o,p){var q=o.length,r=typeof Uint8Array!==j+''?Uint8Array:Array,s=new r(q);s[0]=s[q-1]=1;this._simplifyDPStep(o,s,p,0,q-1);var t,u=[];for(t=0;t<q;t++)if(s[t])u.push(o[t]);return u;},_simplifyDPStep:function(o,p,q,r,s){var t=0,u,v,w;for(v=r+1;v<=s-1;v++){w=this._sqClosestPointOnSegment(o[v],o[r],o[s],true);if(w>t){u=v;t=w;}}if(t>q){p[u]=1;this._simplifyDPStep(o,p,q,r,u);this._simplifyDPStep(o,p,q,u,s);}},_reducePoints:function(o,p){var q=[o[0]];for(var r=1,s=0,t=o.length;r<t;r++)if(this._sqDist(o[r],o[s])>p){q.push(o[r]);s=r;}if(s<t-1)q.push(o[t-1]);return q;},clipSegment:function(o,p,q,r){var s=r?this._lastCode:this._getBitCode(o,q),t=this._getBitCode(p,q),u,v,w;this._lastCode=t;while(true)if(!(s|t)){return [o,p];}else if(s&t){return false;}else{u=s||t;v=this._getEdgeIntersection(o,p,u,q);w=this._getBitCode(v,q);if(u===s){o=v;s=w;}else{p=v;t=w;}}},_getEdgeIntersection:function(o,p,q,r){var s=p.x-o.x,t=p.y-o.y,u=r.min,v=r.max;if(q&8){return new l.Point(o.x+s*(v.y-o.y)/t,v.y);}else if(q&4){return new l.Point(o.x+s*(u.y-o.y)/t,u.y);}else if(q&2){return new l.Point(v.x,o.y+t*(v.x-o.x)/s);}else if(q&1)return new l.Point(u.x,o.y+t*(u.x-o.x)/s);},_getBitCode:function(o,p){var q=0;if(o.x<p.min.x){q|=1;}else if(o.x>p.max.x)q|=2;if(o.y<p.min.y){q|=4;}else if(o.y>p.max.y)q|=8;return q;},_sqDist:function(o,p){var q=p.x-o.x,r=p.y-o.y;return q*q+r*r;},_sqClosestPointOnSegment:function(o,p,q,r){var s=p.x,t=p.y,u=q.x-s,v=q.y-t,w=u*u+v*v,x;if(w>0){x=((o.x-s)*u+(o.y-t)*v)/w;if(x>1){s=q.x;t=q.y;}else if(x>0){s+=u*x;t+=v*x;}}u=o.x-s;v=o.y-t;return r?u*u+v*v:new l.Point(s,t);}};l.Polyline=l.Path.extend({initialize:function(o,p){l.Path.prototype.initialize.call(this,p);this._latlngs=this._convertLatLngs(o);},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var o=0,p=this._latlngs.length;o<p;o++)this._originalPoints[o]=this._map.latLngToLayerPoint(this._latlngs[o]);},getPathString:function(){for(var o=0,p=this._parts.length,q='';o<p;o++)q+=this._getPathPartStr(this._parts[o]);return q;},getLatLngs:function(){return this._latlngs;},setLatLngs:function(o){this._latlngs=this._convertLatLngs(o);return this.redraw();},addLatLng:function(o){this._latlngs.push(l.latLng(o));return this.redraw();},spliceLatLngs:function(){var o=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,true);this.redraw();return o;},closestLayerPoint:function(o){var p=Infinity,q=this._parts,r,s,t=null;for(var u=0,v=q.length;u<v;u++){var w=q[u];for(var x=1,y=w.length;x<y;x++){r=w[x-1];s=w[x];var z=l.LineUtil._sqClosestPointOnSegment(o,r,s,true);if(z<p){p=z;t=l.LineUtil._sqClosestPointOnSegment(o,r,s);}}}if(t)t.distance=Math.sqrt(p);return t;},getBounds:function(){return new l.LatLngBounds(this.getLatLngs());},_convertLatLngs:function(o,p){var q,r,s=p?o:[];for(q=0,r=o.length;q<r;q++){if(l.Util.isArray(o[q])&&typeof o[q][0]!=='number')return;s[q]=l.latLng(o[q]);}return s;},_initEvents:function(){l.Path.prototype._initEvents.call(this);},_getPathPartStr:function(o){var p=l.Path.VML;for(var q=0,r=o.length,s='',t;q<r;q++){t=o[q];if(p)t._round();s+=(q?'L':'M')+t.x+' '+t.y;}return s;},_clipPoints:function(){var o=this._originalPoints,p=o.length,q,r,s;if(this.options.noClip){this._parts=[o];return;}this._parts=[];var t=this._parts,u=this._map._pathViewport,v=l.LineUtil;for(q=0,r=0;q<p-1;q++){s=v.clipSegment(o[q],o[q+1],u,q);if(!s)continue;t[r]=t[r]||[];t[r].push(s[0]);if((s[1]!==o[q+1])||(q===p-2)){t[r].push(s[1]);r++;}}},_simplifyPoints:function(){var o=this._parts,p=l.LineUtil;for(var q=0,r=o.length;q<r;q++)o[q]=p.simplify(o[q],this.options.smoothFactor);},_updatePath:function(){if(!this._map)return;this._clipPoints();this._simplifyPoints();l.Path.prototype._updatePath.call(this);}});l.polyline=function(o,p){return new l.Polyline(o,p);};l.PolyUtil={};l.PolyUtil.clipPolygon=function(o,p){var q,r=[1,4,2,8],s,t,u,v,w,x,y,z,aa=l.LineUtil;for(s=0,x=o.length;s<x;s++)o[s]._code=aa._getBitCode(o[s],p);for(u=0;u<4;u++){y=r[u];q=[];for(s=0,x=o.length,t=x-1;s<x;t=s++){v=o[s];w=o[t];if(!(v._code&y)){if(w._code&y){z=aa._getEdgeIntersection(w,v,y,p);z._code=aa._getBitCode(z,p);q.push(z);}q.push(v);}else if(!(w._code&y)){z=aa._getEdgeIntersection(w,v,y,p);z._code=aa._getBitCode(z,p);q.push(z);}}o=q;}return o;};l.Polygon=l.Polyline.extend({options:{fill:true},initialize:function(o,p){l.Polyline.prototype.initialize.call(this,o,p);this._initWithHoles(o);},_initWithHoles:function(o){var p,q,r;if(o&&l.Util.isArray(o[0])&&(typeof o[0][0]!=='number')){this._latlngs=this._convertLatLngs(o[0]);this._holes=o.slice(1);for(p=0,q=this._holes.length;p<q;p++){r=this._holes[p]=this._convertLatLngs(this._holes[p]);if(r[0].equals(r[r.length-1]))r.pop();}}o=this._latlngs;if(o.length>=2&&o[0].equals(o[o.length-1]))o.pop();},projectLatlngs:function(){l.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes)return;var o,p,q,r;for(o=0,q=this._holes.length;o<q;o++){this._holePoints[o]=[];for(p=0,r=this._holes[o].length;p<r;p++)this._holePoints[o][p]=this._map.latLngToLayerPoint(this._holes[o][p]);}},setLatLngs:function(o){if(o&&l.Util.isArray(o[0])&&(typeof o[0][0]!=='number')){this._initWithHoles(o);return this.redraw();}else return l.Polyline.prototype.setLatLngs.call(this,o);},_clipPoints:function(){var o=this._originalPoints,p=[];this._parts=[o].concat(this._holePoints);if(this.options.noClip)return;for(var q=0,r=this._parts.length;q<r;q++){var s=l.PolyUtil.clipPolygon(this._parts[q],this._map._pathViewport);if(s.length)p.push(s);}this._parts=p;},_getPathPartStr:function(o){var p=l.Polyline.prototype._getPathPartStr.call(this,o);return p+(l.Browser.svg?'z':'x');}});l.polygon=function(o,p){return new l.Polygon(o,p);};(function(){function o(p){return l.FeatureGroup.extend({initialize:function(q,r){this._layers={};this._options=r;this.setLatLngs(q);},setLatLngs:function(q){var r=0,s=q.length;this.eachLayer(function(t){if(r<s){t.setLatLngs(q[r++]);}else this.removeLayer(t);},this);while(r<s)this.addLayer(new p(q[r++],this._options));return this;},getLatLngs:function(){var q=[];this.eachLayer(function(r){q.push(r.getLatLngs());});return q;}});}l.MultiPolyline=o(l.Polyline);l.MultiPolygon=o(l.Polygon);l.multiPolyline=function(p,q){return new l.MultiPolyline(p,q);};l.multiPolygon=function(p,q){return new l.MultiPolygon(p,q);};}());l.Rectangle=l.Polygon.extend({initialize:function(o,p){l.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(o),p);},setBounds:function(o){this.setLatLngs(this._boundsToLatLngs(o));},_boundsToLatLngs:function(o){o=l.latLngBounds(o);return [o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()];}});l.rectangle=function(o,p){return new l.Rectangle(o,p);};l.Circle=l.Path.extend({initialize:function(o,p,q){l.Path.prototype.initialize.call(this,q);this._latlng=l.latLng(o);this._mRadius=p;},options:{fill:true},setLatLng:function(o){this._latlng=l.latLng(o);return this.redraw();},setRadius:function(o){this._mRadius=o;return this.redraw();},projectLatlngs:function(){var o=this._getLngRadius(),p=this._latlng,q=this._map.latLngToLayerPoint([p.lat,p.lng-o]);this._point=this._map.latLngToLayerPoint(p);this._radius=Math.max(this._point.x-q.x,1);},getBounds:function(){var o=this._getLngRadius(),p=(this._mRadius/40075017)*360,q=this._latlng;return new l.LatLngBounds([q.lat-p,q.lng-o],[q.lat+p,q.lng+o]);},getLatLng:function(){return this._latlng;},getPathString:function(){var o=this._point,p=this._radius;if(this._checkIfEmpty())return '';if(l.Browser.svg){return 'M'+o.x+','+(o.y-p)+'A'+p+','+p+',0,1,1,'+(o.x-.1)+','+(o.y-p)+' z';}else{o._round();p=Math.round(p);return 'AL '+o.x+','+o.y+' '+p+','+p+' 0,'+(65535*360);}},getRadius:function(){return this._mRadius;},getPath:function(){return this._path;},_getLatRadius:function(){return (this._mRadius/40075017)*360;},_getLngRadius:function(){return this._getLatRadius()/Math.cos(l.LatLng.DEG_TO_RAD*this._latlng.lat);},_checkIfEmpty:function(){if(!this._map)return false;var o=this._map._pathViewport,p=this._radius,q=this._point;return q.x-p>o.max.x||q.y-p>o.max.y||q.x+p<o.min.x||q.y+p<o.min.y;}});l.circle=function(o,p,q){return new l.Circle(o,p,q);};l.CircleMarker=l.Circle.extend({options:{radius:10,weight:2},initialize:function(o,p){l.Circle.prototype.initialize.call(this,o,null,p);this._radius=this.options.radius;},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);},_updateStyle:function(){l.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius);},setLatLng:function(o){l.Circle.prototype.setLatLng.call(this,o);if(this._popup&&this._popup._isOpen)this._popup.setLatLng(o);return this;},setRadius:function(o){this.options.radius=this._radius=o;return this.redraw();},getRadius:function(){return this._radius;}});l.circleMarker=function(o,p){return new l.CircleMarker(o,p);};l.Polyline.include(!l.Path.CANVAS?{}:{_containsPoint:function(o,p){var q,r,s,t,u,v,w,x=this.options.weight/2;if(l.Browser.touch)x+=10;for(q=0,t=this._parts.length;q<t;q++){w=this._parts[q];for(r=0,u=w.length,s=u-1;r<u;s=r++){if(!p&&(r===0))continue;v=l.LineUtil.pointToSegmentDistance(o,w[s],w[r]);if(v<=x)return true;}}return false;}});l.Polygon.include(!l.Path.CANVAS?{}:{_containsPoint:function(o){var p=false,q,r,s,t,u,v,w,x;if(l.Polyline.prototype._containsPoint.call(this,o,true))return true;for(t=0,w=this._parts.length;t<w;t++){q=this._parts[t];for(u=0,x=q.length,v=x-1;u<x;v=u++){r=q[u];s=q[v];if(((r.y>o.y)!==(s.y>o.y))&&(o.x<(s.x-r.x)*(o.y-r.y)/(s.y-r.y)+r.x))p=!p;}}return p;}});l.Circle.include(!l.Path.CANVAS?{}:{_drawPath:function(){var o=this._point;this._ctx.beginPath();this._ctx.arc(o.x,o.y,this._radius,0,Math.PI*2,false);},_containsPoint:function(o){var p=this._point,q=this.options.stroke?this.options.weight/2:0;return (o.distanceTo(p)<=this._radius+q);}});l.CircleMarker.include(!l.Path.CANVAS?{}:{_updateStyle:function(){l.Path.prototype._updateStyle.call(this);}});l.GeoJSON=l.FeatureGroup.extend({initialize:function(o,p){l.setOptions(this,p);this._layers={};if(o)this.addData(o);},addData:function(o){var p=l.Util.isArray(o)?o:o.features,q,r,s;if(p){for(q=0,r=p.length;q<r;q++){s=p[q];if(s.geometries||s.geometry||s.features||s.coordinates)this.addData(p[q]);}return this;}var t=this.options;if(t.filter&&!t.filter(o))return;var u=l.GeoJSON.geometryToLayer(o,t.pointToLayer,t.coordsToLatLng,t);u.feature=l.GeoJSON.asFeature(o);u.defaultOptions=u.options;this.resetStyle(u);if(t.onEachFeature)t.onEachFeature(o,u);return this.addLayer(u);},resetStyle:function(o){var p=this.options.style;if(p){l.Util.extend(o.options,o.defaultOptions);this._setLayerStyle(o,p);}},setStyle:function(o){this.eachLayer(function(p){this._setLayerStyle(p,o);},this);},_setLayerStyle:function(o,p){if(typeof p==='function')p=p(o.feature);if(o.setStyle)o.setStyle(p);}});l.extend(l.GeoJSON,{geometryToLayer:function(o,p,q,r){var s=o.type==='Feature'?o.geometry:o,t=s.coordinates,u=[],v,w,x,y;q=q||this.coordsToLatLng;switch(s.type){case 'Point':v=q(t);return p?p(o,v):new l.Marker(v);case 'MultiPoint':for(x=0,y=t.length;x<y;x++){v=q(t[x]);u.push(p?p(o,v):new l.Marker(v));}return new l.FeatureGroup(u);case 'LineString':w=this.coordsToLatLngs(t,0,q);return new l.Polyline(w,r);case 'Polygon':if(t.length===2&&!t[1].length)throw new Error('Invalid GeoJSON object.');w=this.coordsToLatLngs(t,1,q);return new l.Polygon(w,r);case 'MultiLineString':w=this.coordsToLatLngs(t,1,q);return new l.MultiPolyline(w,r);case 'MultiPolygon':w=this.coordsToLatLngs(t,2,q);return new l.MultiPolygon(w,r);case 'GeometryCollection':for(x=0,y=s.geometries.length;x<y;x++)u.push(this.geometryToLayer({geometry:s.geometries[x],type:'Feature',properties:o.properties},p,q,r));return new l.FeatureGroup(u);default:throw new Error('Invalid GeoJSON object.');}},coordsToLatLng:function(o){return new l.LatLng(o[1],o[0],o[2]);},coordsToLatLngs:function(o,p,q){var r,s,t,u=[];for(s=0,t=o.length;s<t;s++){r=p?this.coordsToLatLngs(o[s],p-1,q):(q||this.coordsToLatLng)(o[s]);u.push(r);}return u;},latLngToCoords:function(o){var p=[o.lng,o.lat];if(o.alt!==j)p.push(o.alt);return p;},latLngsToCoords:function(o){var p=[];for(var q=0,r=o.length;q<r;q++)p.push(l.GeoJSON.latLngToCoords(o[q]));return p;},getFeature:function(o,p){return o.feature?l.extend({},o.feature,{geometry:p}):l.GeoJSON.asFeature(p);},asFeature:function(o){if(o.type==='Feature')return o;return {type:'Feature',properties:{},geometry:o};}});var n={toGeoJSON:function(){return l.GeoJSON.getFeature(this,{type:'Point',coordinates:l.GeoJSON.latLngToCoords(this.getLatLng())});}};l.Marker.include(n);l.Circle.include(n);l.CircleMarker.include(n);l.Polyline.include({toGeoJSON:function(){return l.GeoJSON.getFeature(this,{type:'LineString',coordinates:l.GeoJSON.latLngsToCoords(this.getLatLngs())});}});l.Polygon.include({toGeoJSON:function(){var o=[l.GeoJSON.latLngsToCoords(this.getLatLngs())],p,q,r;o[0].push(o[0][0]);if(this._holes)for(p=0,q=this._holes.length;p<q;p++){r=l.GeoJSON.latLngsToCoords(this._holes[p]);r.push(r[0]);o.push(r);}return l.GeoJSON.getFeature(this,{type:'Polygon',coordinates:o});}});(function(){function o(p){return function(){var q=[];this.eachLayer(function(r){q.push(r.toGeoJSON().geometry.coordinates);});return l.GeoJSON.getFeature(this,{type:p,coordinates:q});};}l.MultiPolyline.include({toGeoJSON:o('MultiLineString')});l.MultiPolygon.include({toGeoJSON:o('MultiPolygon')});l.LayerGroup.include({toGeoJSON:function(){var p=this.feature&&this.feature.geometry,q=[],r;if(p&&p.type==='MultiPoint')return o('MultiPoint').call(this);var s=p&&p.type==='GeometryCollection';this.eachLayer(function(t){if(t.toGeoJSON){r=t.toGeoJSON();q.push(s?r.geometry:l.GeoJSON.asFeature(r));}});if(s)return l.GeoJSON.getFeature(this,{geometries:q,type:'GeometryCollection'});return {type:'FeatureCollection',features:q};}});}());l.geoJson=function(o,p){return new l.GeoJSON(o,p);};l.DomEvent={addListener:function(o,p,q,r){var s=l.stamp(q),t='_leaflet_'+p+s,u,v,w;if(o[t])return this;u=function(x){return q.call(r||o,x||l.DomEvent._getEvent());};if(l.Browser.pointer&&p.indexOf('touch')===0)return this.addPointerListener(o,p,u,s);if(l.Browser.touch&&(p==='dblclick')&&this.addDoubleTapListener)this.addDoubleTapListener(o,u,s);if('addEventListener' in o){if(p==='mousewheel'){o.addEventListener('DOMMouseScroll',u,false);o.addEventListener(p,u,false);}else if((p==='mouseenter')||(p==='mouseleave')){v=u;w=(p==='mouseenter'?'mouseover':'mouseout');u=function(x){if(!l.DomEvent._checkMouse(o,x))return;return v(x);};o.addEventListener(w,u,false);}else if(p==='click'&&l.Browser.android){v=u;u=function(x){return l.DomEvent._filterClick(x,v);};o.addEventListener(p,u,false);}else o.addEventListener(p,u,false);}else if('attachEvent' in o)o.attachEvent('on'+p,u);o[t]=u;return this;},removeListener:function(o,p,q){var r=l.stamp(q),s='_leaflet_'+p+r,t=o[s];if(!t)return this;if(l.Browser.pointer&&p.indexOf('touch')===0){this.removePointerListener(o,p,r);}else if(l.Browser.touch&&(p==='dblclick')&&this.removeDoubleTapListener){this.removeDoubleTapListener(o,r);}else if('removeEventListener' in o){if(p==='mousewheel'){o.removeEventListener('DOMMouseScroll',t,false);o.removeEventListener(p,t,false);}else if((p==='mouseenter')||(p==='mouseleave')){o.removeEventListener((p==='mouseenter'?'mouseover':'mouseout'),t,false);}else o.removeEventListener(p,t,false);}else if('detachEvent' in o)o.detachEvent('on'+p,t);o[s]=null;return this;},stopPropagation:function(o){if(o.stopPropagation){o.stopPropagation();}else o.cancelBubble=true;l.DomEvent._skipped(o);return this;},disableScrollPropagation:function(o){var p=l.DomEvent.stopPropagation;return l.DomEvent.on(o,'mousewheel',p).on(o,'MozMousePixelScroll',p);},disableClickPropagation:function(o){var p=l.DomEvent.stopPropagation;for(var q=l.Draggable.START.length-1;q>=0;q--)l.DomEvent.on(o,l.Draggable.START[q],p);return l.DomEvent.on(o,'click',l.DomEvent._fakeStop).on(o,'dblclick',p);},preventDefault:function(o){if(o.preventDefault){o.preventDefault();}else o.returnValue=false;return this;},stop:function(o){return l.DomEvent.preventDefault(o).stopPropagation(o);},getMousePosition:function(o,p){if(!p)return new l.Point(o.clientX,o.clientY);var q=p.getBoundingClientRect();return new l.Point(o.clientX-q.left-p.clientLeft,o.clientY-q.top-p.clientTop);},getWheelDelta:function(o){var p=0;if(o.wheelDelta)p=o.wheelDelta/120;if(o.detail)p=-o.detail/3;return p;},_skipEvents:{},_fakeStop:function(o){l.DomEvent._skipEvents[o.type]=true;},_skipped:function(o){var p=this._skipEvents[o.type];this._skipEvents[o.type]=false;return p;},_checkMouse:function(o,p){var q=p.relatedTarget;if(!q)return true;try{while(q&&(q!==o))q=q.parentNode;}catch(r){return false;}return (q!==o);},_getEvent:function(){var o=h.event;if(!o){var p=arguments.callee.caller;while(p){o=p.arguments[0];if(o&&h.Event===o.constructor)break;p=p.caller;}}return o;},_filterClick:function(o,p){var q=(o.timeStamp||o.originalEvent.timeStamp),r=l.DomEvent._lastClick&&(q-l.DomEvent._lastClick);if((r&&r>100&&r<1000)||(o.target._simulatedClick&&!o._simulated)){l.DomEvent.stop(o);return;}l.DomEvent._lastClick=q;return p(o);}};l.DomEvent.on=l.DomEvent.addListener;l.DomEvent.off=l.DomEvent.removeListener;l.Draggable=l.Class.extend({includes:l.Mixin.Events,statics:{START:l.Browser.touch?['touchstart','mousedown']:['mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(o,p){this._element=o;this._dragStartTarget=p||o;},enable:function(){if(this._enabled)return;for(var o=l.Draggable.START.length-1;o>=0;o--)l.DomEvent.on(this._dragStartTarget,l.Draggable.START[o],this._onDown,this);this._enabled=true;},disable:function(){if(!this._enabled)return;for(var o=l.Draggable.START.length-1;o>=0;o--)l.DomEvent.off(this._dragStartTarget,l.Draggable.START[o],this._onDown,this);this._enabled=false;this._moved=false;},_onDown:function(o){this._moved=false;if(o.shiftKey||((o.which!==1)&&(o.button!==1)&&!o.touches))return;l.DomEvent.stopPropagation(o);if(l.Draggable._disabled)return;l.DomUtil.disableImageDrag();l.DomUtil.disableTextSelection();if(this._moving)return;var p=o.touches?o.touches[0]:o;this._startPoint=new l.Point(p.clientX,p.clientY);this._startPos=this._newPos=l.DomUtil.getPosition(this._element);l.DomEvent.on(i,l.Draggable.MOVE[o.type],this._onMove,this).on(i,l.Draggable.END[o.type],this._onUp,this);},_onMove:function(o){if(o.touches&&o.touches.length>1){this._moved=true;return;}var p=(o.touches&&o.touches.length===1?o.touches[0]:o),q=new l.Point(p.clientX,p.clientY),r=q.subtract(this._startPoint);if(!r.x&&!r.y)return;l.DomEvent.preventDefault(o);if(!this._moved){this.fire('dragstart');this._moved=true;this._startPos=l.DomUtil.getPosition(this._element).subtract(r);l.DomUtil.addClass(i.body,'leaflet-dragging');l.DomUtil.addClass((o.target||o.srcElement),'leaflet-drag-target');}this._newPos=this._startPos.add(r);this._moving=true;l.Util.cancelAnimFrame(this._animRequest);this._animRequest=l.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget);},_updatePosition:function(){this.fire('predrag');l.DomUtil.setPosition(this._element,this._newPos);this.fire('drag');},_onUp:function(o){l.DomUtil.removeClass(i.body,'leaflet-dragging');l.DomUtil.removeClass((o.target||o.srcElement),'leaflet-drag-target');for(var p in l.Draggable.MOVE)l.DomEvent.off(i,l.Draggable.MOVE[p],this._onMove).off(i,l.Draggable.END[p],this._onUp);l.DomUtil.enableImageDrag();l.DomUtil.enableTextSelection();if(this._moved&&this._moving){l.Util.cancelAnimFrame(this._animRequest);this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)});}this._moving=false;}});l.Handler=l.Class.extend({initialize:function(o){this._map=o;},enable:function(){if(this._enabled)return;this._enabled=true;this.addHooks();},disable:function(){if(!this._enabled)return;this._enabled=false;this.removeHooks();},enabled:function(){return !!this._enabled;}});l.Map.mergeOptions({dragging:true,inertia:!l.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:l.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:false});l.Map.Drag=l.Handler.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new l.Draggable(o._mapPane,o._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(o.options.worldCopyJump){this._draggable.on('predrag',this._onPreDrag,this);o.on('viewreset',this._onViewReset,this);o.whenReady(this._onViewReset,this);}}this._draggable.enable();},removeHooks:function(){this._draggable.disable();},moved:function(){return this._draggable&&this._draggable._moved;},_onDragStart:function(){var o=this._map;if(o._panAnim)o._panAnim.stop();o.fire('movestart').fire('dragstart');if(o.options.inertia){this._positions=[];this._times=[];}},_onDrag:function(){if(this._map.options.inertia){var o=this._lastTime=+new Date(),p=this._lastPos=this._draggable._newPos;this._positions.push(p);this._times.push(o);if(o-this._times[0]>200){this._positions.shift();this._times.shift();}}this._map.fire('move').fire('drag');},_onViewReset:function(){var o=this._map.getSize()._divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(o).x;this._worldWidth=this._map.project([0,180]).x;},_onPreDrag:function(){var o=this._worldWidth,p=Math.round(o/2),q=this._initialWorldOffset,r=this._draggable._newPos.x,s=(r-p+q)%o+p-q,t=(r+p+q)%o-p-q,u=Math.abs(s+q)<Math.abs(t+q)?s:t;this._draggable._newPos.x=u;},_onDragEnd:function(o){var p=this._map,q=p.options,r=+new Date()-this._lastTime,s=!q.inertia||r>q.inertiaThreshold||!this._positions[0];p.fire('dragend',o);if(s){p.fire('moveend');}else{var t=this._lastPos.subtract(this._positions[0]),u=(this._lastTime+r-this._times[0])/1000,v=q.easeLinearity,w=t.multiplyBy(v/u),x=w.distanceTo([0,0]),y=Math.min(q.inertiaMaxSpeed,x),z=w.multiplyBy(y/x),aa=y/(q.inertiaDeceleration*v),ba=z.multiplyBy(-aa/2).round();if(!ba.x||!ba.y){p.fire('moveend');}else{ba=p._limitOffset(ba,p.options.maxBounds);l.Util.requestAnimFrame(function(){p.panBy(ba,{duration:aa,easeLinearity:v,noMoveStart:true});});}}}});l.Map.addInitHook('addHandler','dragging',l.Map.Drag);l.Map.mergeOptions({doubleClickZoom:true});l.Map.DoubleClickZoom=l.Handler.extend({addHooks:function(){this._map.on('dblclick',this._onDoubleClick,this);},removeHooks:function(){this._map.off('dblclick',this._onDoubleClick,this);},_onDoubleClick:function(o){var p=this._map,q=p.getZoom()+(o.originalEvent.shiftKey?-1:1);if(p.options.doubleClickZoom==='center'){p.setZoom(q);}else p.setZoomAround(o.containerPoint,q);}});l.Map.addInitHook('addHandler','doubleClickZoom',l.Map.DoubleClickZoom);l.Map.mergeOptions({scrollWheelZoom:true});l.Map.ScrollWheelZoom=l.Handler.extend({addHooks:function(){l.DomEvent.on(this._map._container,'mousewheel',this._onWheelScroll,this);l.DomEvent.on(this._map._container,'MozMousePixelScroll',l.DomEvent.preventDefault);this._delta=0;},removeHooks:function(){l.DomEvent.off(this._map._container,'mousewheel',this._onWheelScroll);l.DomEvent.off(this._map._container,'MozMousePixelScroll',l.DomEvent.preventDefault);},_onWheelScroll:function(o){var p=l.DomEvent.getWheelDelta(o);this._delta+=p;this._lastMousePos=this._map.mouseEventToContainerPoint(o);if(!this._startTime)this._startTime=+new Date();var q=Math.max(40-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(l.bind(this._performZoom,this),q);l.DomEvent.preventDefault(o);l.DomEvent.stopPropagation(o);},_performZoom:function(){var o=this._map,p=this._delta,q=o.getZoom();p=p>0?Math.ceil(p):Math.floor(p);p=Math.max(Math.min(p,4),-4);p=o._limitZoom(q+p)-q;this._delta=0;this._startTime=null;if(!p)return;if(o.options.scrollWheelZoom==='center'){o.setZoom(q+p);}else o.setZoomAround(this._lastMousePos,q+p);}});l.Map.addInitHook('addHandler','scrollWheelZoom',l.Map.ScrollWheelZoom);l.extend(l.DomEvent,{_touchstart:l.Browser.msPointer?'MSPointerDown':l.Browser.pointer?'pointerdown':'touchstart',_touchend:l.Browser.msPointer?'MSPointerUp':l.Browser.pointer?'pointerup':'touchend',addDoubleTapListener:function(o,p,q){var r,s=false,t=250,u,v='_leaflet_',w=this._touchstart,x=this._touchend,y=[];function z(ca){var da;if(l.Browser.pointer){y.push(ca.pointerId);da=y.length;}else da=ca.touches.length;if(da>1)return;var ea=Date.now(),fa=ea-(r||ea);u=ca.touches?ca.touches[0]:ca;s=(fa>0&&fa<=t);r=ea;}function aa(ca){if(l.Browser.pointer){var da=y.indexOf(ca.pointerId);if(da===-1)return;y.splice(da,1);}if(s){if(l.Browser.pointer){var ea={},fa;for(var ga in u){fa=u[ga];if(typeof fa==='function'){ea[ga]=fa.bind(u);}else ea[ga]=fa;}u=ea;}u.type='dblclick';p(u);r=null;}}o[v+w+q]=z;o[v+x+q]=aa;var ba=l.Browser.pointer?i.documentElement:o;o.addEventListener(w,z,false);ba.addEventListener(x,aa,false);if(l.Browser.pointer)ba.addEventListener(l.DomEvent.POINTER_CANCEL,aa,false);return this;},removeDoubleTapListener:function(o,p){var q='_leaflet_';o.removeEventListener(this._touchstart,o[q+this._touchstart+p],false);(l.Browser.pointer?i.documentElement:o).removeEventListener(this._touchend,o[q+this._touchend+p],false);if(l.Browser.pointer)i.documentElement.removeEventListener(l.DomEvent.POINTER_CANCEL,o[q+this._touchend+p],false);return this;}});l.extend(l.DomEvent,{POINTER_DOWN:l.Browser.msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE:l.Browser.msPointer?'MSPointerMove':'pointermove',POINTER_UP:l.Browser.msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL:l.Browser.msPointer?'MSPointerCancel':'pointercancel',_pointers:[],_pointerDocumentListener:false,addPointerListener:function(o,p,q,r){switch(p){case 'touchstart':return this.addPointerListenerStart(o,p,q,r);case 'touchend':return this.addPointerListenerEnd(o,p,q,r);case 'touchmove':return this.addPointerListenerMove(o,p,q,r);default:throw 'Unknown touch event type';}},addPointerListenerStart:function(o,p,q,r){var s='_leaflet_',t=this._pointers,u=function(w){l.DomEvent.preventDefault(w);var x=false;for(var y=0;y<t.length;y++)if(t[y].pointerId===w.pointerId){x=true;break;}if(!x)t.push(w);w.touches=t.slice();w.changedTouches=[w];q(w);};o[s+'touchstart'+r]=u;o.addEventListener(this.POINTER_DOWN,u,false);if(!this._pointerDocumentListener){var v=function(w){for(var x=0;x<t.length;x++)if(t[x].pointerId===w.pointerId){t.splice(x,1);break;}};i.documentElement.addEventListener(this.POINTER_UP,v,false);i.documentElement.addEventListener(this.POINTER_CANCEL,v,false);this._pointerDocumentListener=true;}return this;},addPointerListenerMove:function(o,p,q,r){var s='_leaflet_',t=this._pointers;function u(v){if((v.pointerType===v.MSPOINTER_TYPE_MOUSE||v.pointerType==='mouse')&&v.buttons===0)return;for(var w=0;w<t.length;w++)if(t[w].pointerId===v.pointerId){t[w]=v;break;}v.touches=t.slice();v.changedTouches=[v];q(v);}o[s+'touchmove'+r]=u;o.addEventListener(this.POINTER_MOVE,u,false);return this;},addPointerListenerEnd:function(o,p,q,r){var s='_leaflet_',t=this._pointers,u=function(v){for(var w=0;w<t.length;w++)if(t[w].pointerId===v.pointerId){t.splice(w,1);break;}v.touches=t.slice();v.changedTouches=[v];q(v);};o[s+'touchend'+r]=u;o.addEventListener(this.POINTER_UP,u,false);o.addEventListener(this.POINTER_CANCEL,u,false);return this;},removePointerListener:function(o,p,q){var r='_leaflet_',s=o[r+p+q];switch(p){case 'touchstart':o.removeEventListener(this.POINTER_DOWN,s,false);break;case 'touchmove':o.removeEventListener(this.POINTER_MOVE,s,false);break;case 'touchend':o.removeEventListener(this.POINTER_UP,s,false);o.removeEventListener(this.POINTER_CANCEL,s,false);break;}return this;}});l.Map.mergeOptions({touchZoom:l.Browser.touch&&!l.Browser.android23,bounceAtZoomLimits:true});l.Map.TouchZoom=l.Handler.extend({addHooks:function(){l.DomEvent.on(this._map._container,'touchstart',this._onTouchStart,this);},removeHooks:function(){l.DomEvent.off(this._map._container,'touchstart',this._onTouchStart,this);},_onTouchStart:function(o){var p=this._map;if(!o.touches||o.touches.length!==2||p._animatingZoom||this._zooming)return;var q=p.mouseEventToLayerPoint(o.touches[0]),r=p.mouseEventToLayerPoint(o.touches[1]),s=p._getCenterLayerPoint();this._startCenter=q.add(r)._divideBy(2);this._startDist=q.distanceTo(r);this._moved=false;this._zooming=true;this._centerOffset=s.subtract(this._startCenter);if(p._panAnim)p._panAnim.stop();l.DomEvent.on(i,'touchmove',this._onTouchMove,this).on(i,'touchend',this._onTouchEnd,this);l.DomEvent.preventDefault(o);},_onTouchMove:function(o){var p=this._map;if(!o.touches||o.touches.length!==2||!this._zooming)return;var q=p.mouseEventToLayerPoint(o.touches[0]),r=p.mouseEventToLayerPoint(o.touches[1]);this._scale=q.distanceTo(r)/this._startDist;this._delta=q._add(r)._divideBy(2)._subtract(this._startCenter);if(this._scale===1)return;if(!p.options.bounceAtZoomLimits)if((p.getZoom()===p.getMinZoom()&&this._scale<1)||(p.getZoom()===p.getMaxZoom()&&this._scale>1))return;if(!this._moved){l.DomUtil.addClass(p._mapPane,'leaflet-touching');p.fire('movestart').fire('zoomstart');this._moved=true;}l.Util.cancelAnimFrame(this._animRequest);this._animRequest=l.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);l.DomEvent.preventDefault(o);},_updateOnMove:function(){var o=this._map,p=this._getScaleOrigin(),q=o.layerPointToLatLng(p),r=o.getScaleZoom(this._scale);o._animateZoom(q,r,this._startCenter,this._scale,this._delta);},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return;}var o=this._map;this._zooming=false;l.DomUtil.removeClass(o._mapPane,'leaflet-touching');l.Util.cancelAnimFrame(this._animRequest);l.DomEvent.off(i,'touchmove',this._onTouchMove).off(i,'touchend',this._onTouchEnd);var p=this._getScaleOrigin(),q=o.layerPointToLatLng(p),r=o.getZoom(),s=o.getScaleZoom(this._scale)-r,t=(s>0?Math.ceil(s):Math.floor(s)),u=o._limitZoom(r+t),v=o.getZoomScale(u)/this._scale;o._animateZoom(q,u,p,v);},_getScaleOrigin:function(){var o=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(o);}});l.Map.addInitHook('addHandler','touchZoom',l.Map.TouchZoom);l.Map.mergeOptions({tap:true,tapTolerance:15});l.Map.Tap=l.Handler.extend({addHooks:function(){l.DomEvent.on(this._map._container,'touchstart',this._onDown,this);},removeHooks:function(){l.DomEvent.off(this._map._container,'touchstart',this._onDown,this);},_onDown:function(o){if(!o.touches)return;l.DomEvent.preventDefault(o);this._fireClick=true;if(o.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return;}var p=o.touches[0],q=p.target;this._startPos=this._newPos=new l.Point(p.clientX,p.clientY);if(q.tagName&&q.tagName.toLowerCase()==='a')l.DomUtil.addClass(q,'leaflet-active');this._holdTimeout=setTimeout(l.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent('contextmenu',p);}},this),1000);l.DomEvent.on(i,'touchmove',this._onMove,this).on(i,'touchend',this._onUp,this);},_onUp:function(o){clearTimeout(this._holdTimeout);l.DomEvent.off(i,'touchmove',this._onMove,this).off(i,'touchend',this._onUp,this);if(this._fireClick&&o&&o.changedTouches){var p=o.changedTouches[0],q=p.target;if(q&&q.tagName&&q.tagName.toLowerCase()==='a')l.DomUtil.removeClass(q,'leaflet-active');if(this._isTapValid())this._simulateEvent('click',p);}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance;},_onMove:function(o){var p=o.touches[0];this._newPos=new l.Point(p.clientX,p.clientY);},_simulateEvent:function(o,p){var q=i.createEvent('MouseEvents');q._simulated=true;p.target._simulatedClick=true;q.initMouseEvent(o,true,true,h,1,p.screenX,p.screenY,p.clientX,p.clientY,false,false,false,false,0,null);p.target.dispatchEvent(q);}});if(l.Browser.touch&&!l.Browser.pointer)l.Map.addInitHook('addHandler','tap',l.Map.Tap);l.Map.mergeOptions({boxZoom:true});l.Map.BoxZoom=l.Handler.extend({initialize:function(o){this._map=o;this._container=o._container;this._pane=o._panes.overlayPane;this._moved=false;},addHooks:function(){l.DomEvent.on(this._container,'mousedown',this._onMouseDown,this);},removeHooks:function(){l.DomEvent.off(this._container,'mousedown',this._onMouseDown);this._moved=false;},moved:function(){return this._moved;},_onMouseDown:function(o){this._moved=false;if(!o.shiftKey||((o.which!==1)&&(o.button!==1)))return false;l.DomUtil.disableTextSelection();l.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(o);l.DomEvent.on(i,'mousemove',this._onMouseMove,this).on(i,'mouseup',this._onMouseUp,this).on(i,'keydown',this._onKeyDown,this);},_onMouseMove:function(o){if(!this._moved){this._box=l.DomUtil.create('div','leaflet-zoom-box',this._pane);l.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor='crosshair';this._map.fire('boxzoomstart');}var p=this._startLayerPoint,q=this._box,r=this._map.mouseEventToLayerPoint(o),s=r.subtract(p),t=new l.Point(Math.min(r.x,p.x),Math.min(r.y,p.y));l.DomUtil.setPosition(q,t);this._moved=true;q.style.width=(Math.max(0,Math.abs(s.x)-4))+'px';q.style.height=(Math.max(0,Math.abs(s.y)-4))+'px';},_finish:function(){if(this._moved){this._pane.removeChild(this._box);this._container.style.cursor='';}l.DomUtil.enableTextSelection();l.DomUtil.enableImageDrag();l.DomEvent.off(i,'mousemove',this._onMouseMove).off(i,'mouseup',this._onMouseUp).off(i,'keydown',this._onKeyDown);},_onMouseUp:function(o){this._finish();var p=this._map,q=p.mouseEventToLayerPoint(o);if(this._startLayerPoint.equals(q))return;var r=new l.LatLngBounds(p.layerPointToLatLng(this._startLayerPoint),p.layerPointToLatLng(q));p.fitBounds(r);p.fire('boxzoomend',{boxZoomBounds:r});},_onKeyDown:function(o){if(o.keyCode===27)this._finish();}});l.Map.addInitHook('addHandler','boxZoom',l.Map.BoxZoom);l.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});l.Map.Keyboard=l.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(o){this._map=o;this._setPanOffset(o.options.keyboardPanOffset);this._setZoomOffset(o.options.keyboardZoomOffset);},addHooks:function(){var o=this._map._container;if(o.tabIndex===-1)o.tabIndex='0';l.DomEvent.on(o,'focus',this._onFocus,this).on(o,'blur',this._onBlur,this).on(o,'mousedown',this._onMouseDown,this);this._map.on('focus',this._addHooks,this).on('blur',this._removeHooks,this);},removeHooks:function(){this._removeHooks();var o=this._map._container;l.DomEvent.off(o,'focus',this._onFocus,this).off(o,'blur',this._onBlur,this).off(o,'mousedown',this._onMouseDown,this);this._map.off('focus',this._addHooks,this).off('blur',this._removeHooks,this);},_onMouseDown:function(){if(this._focused)return;var o=i.body,p=i.documentElement,q=o.scrollTop||p.scrollTop,r=o.scrollLeft||p.scrollLeft;this._map._container.focus();h.scrollTo(r,q);},_onFocus:function(){this._focused=true;this._map.fire('focus');},_onBlur:function(){this._focused=false;this._map.fire('blur');},_setPanOffset:function(o){var p=this._panKeys={},q=this.keyCodes,r,s;for(r=0,s=q.left.length;r<s;r++)p[q.left[r]]=[-1*o,0];for(r=0,s=q.right.length;r<s;r++)p[q.right[r]]=[o,0];for(r=0,s=q.down.length;r<s;r++)p[q.down[r]]=[0,o];for(r=0,s=q.up.length;r<s;r++)p[q.up[r]]=[0,-1*o];},_setZoomOffset:function(o){var p=this._zoomKeys={},q=this.keyCodes,r,s;for(r=0,s=q.zoomIn.length;r<s;r++)p[q.zoomIn[r]]=o;for(r=0,s=q.zoomOut.length;r<s;r++)p[q.zoomOut[r]]=-o;},_addHooks:function(){l.DomEvent.on(i,'keydown',this._onKeyDown,this);},_removeHooks:function(){l.DomEvent.off(i,'keydown',this._onKeyDown,this);},_onKeyDown:function(o){var p=o.keyCode,q=this._map;if(p in this._panKeys){if(q._panAnim&&q._panAnim._inProgress)return;q.panBy(this._panKeys[p]);if(q.options.maxBounds)q.panInsideBounds(q.options.maxBounds);}else if(p in this._zoomKeys){q.setZoom(q.getZoom()+this._zoomKeys[p]);}else return;l.DomEvent.stop(o);}});l.Map.addInitHook('addHandler','keyboard',l.Map.Keyboard);l.Handler.MarkerDrag=l.Handler.extend({initialize:function(o){this._marker=o;},addHooks:function(){var o=this._marker._icon;if(!this._draggable)this._draggable=new l.Draggable(o,o);this._draggable.on('dragstart',this._onDragStart,this).on('drag',this._onDrag,this).on('dragend',this._onDragEnd,this);this._draggable.enable();l.DomUtil.addClass(this._marker._icon,'leaflet-marker-draggable');},removeHooks:function(){this._draggable.off('dragstart',this._onDragStart,this).off('drag',this._onDrag,this).off('dragend',this._onDragEnd,this);this._draggable.disable();l.DomUtil.removeClass(this._marker._icon,'leaflet-marker-draggable');},moved:function(){return this._draggable&&this._draggable._moved;},_onDragStart:function(){this._marker.closePopup().fire('movestart').fire('dragstart');},_onDrag:function(){var o=this._marker,p=o._shadow,q=l.DomUtil.getPosition(o._icon),r=o._map.layerPointToLatLng(q);if(p)l.DomUtil.setPosition(p,q);o._latlng=r;o.fire('move',{latlng:r}).fire('drag');},_onDragEnd:function(o){this._marker.fire('moveend').fire('dragend',o);}});l.Control=l.Class.extend({options:{position:'topright'},initialize:function(o){l.setOptions(this,o);},getPosition:function(){return this.options.position;},setPosition:function(o){var p=this._map;if(p)p.removeControl(this);this.options.position=o;if(p)p.addControl(this);return this;},getContainer:function(){return this._container;},addTo:function(o){this._map=o;var p=this._container=this.onAdd(o),q=this.getPosition(),r=o._controlCorners[q];l.DomUtil.addClass(p,'leaflet-control');if(q.indexOf('bottom')!==-1){r.insertBefore(p,r.firstChild);}else r.appendChild(p);return this;},removeFrom:function(o){var p=this.getPosition(),q=o._controlCorners[p];q.removeChild(this._container);this._map=null;if(this.onRemove)this.onRemove(o);return this;},_refocusOnMap:function(){if(this._map)this._map.getContainer().focus();}});l.control=function(o){return new l.Control(o);};l.Map.include({addControl:function(o){o.addTo(this);return this;},removeControl:function(o){o.removeFrom(this);return this;},_initControlPos:function(){var o=this._controlCorners={},p='leaflet-',q=this._controlContainer=l.DomUtil.create('div',p+'control-container',this._container);function r(s,t){var u=p+s+' '+p+t;o[s+t]=l.DomUtil.create('div',u,q);}r('top','left');r('top','right');r('bottom','left');r('bottom','right');},_clearControlPos:function(){this._container.removeChild(this._controlContainer);}});l.Control.Zoom=l.Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'-',zoomOutTitle:'Zoom out'},onAdd:function(o){var p='leaflet-control-zoom',q=l.DomUtil.create('div',p+' leaflet-bar');this._map=o;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,p+'-in',q,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,p+'-out',q,this._zoomOut,this);this._updateDisabled();o.on('zoomend zoomlevelschange',this._updateDisabled,this);return q;},onRemove:function(o){o.off('zoomend zoomlevelschange',this._updateDisabled,this);},_zoomIn:function(o){this._map.zoomIn(o.shiftKey?3:1);},_zoomOut:function(o){this._map.zoomOut(o.shiftKey?3:1);},_createButton:function(o,p,q,r,s,t){var u=l.DomUtil.create('a',q,r);u.innerHTML=o;u.href='#';u.title=p;var v=l.DomEvent.stopPropagation;l.DomEvent.on(u,'click',v).on(u,'mousedown',v).on(u,'dblclick',v).on(u,'click',l.DomEvent.preventDefault).on(u,'click',s,t).on(u,'click',this._refocusOnMap,t);return u;},_updateDisabled:function(){var o=this._map,p='leaflet-disabled';l.DomUtil.removeClass(this._zoomInButton,p);l.DomUtil.removeClass(this._zoomOutButton,p);if(o._zoom===o.getMinZoom())l.DomUtil.addClass(this._zoomOutButton,p);if(o._zoom===o.getMaxZoom())l.DomUtil.addClass(this._zoomInButton,p);}});l.Map.mergeOptions({zoomControl:true});l.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new l.Control.Zoom();this.addControl(this.zoomControl);}});l.control.zoom=function(o){return new l.Control.Zoom(o);};l.Control.Attribution=l.Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(o){l.setOptions(this,o);this._attributions={};},onAdd:function(o){this._container=l.DomUtil.create('div','leaflet-control-attribution');l.DomEvent.disableClickPropagation(this._container);for(var p in o._layers)if(o._layers[p].getAttribution)this.addAttribution(o._layers[p].getAttribution());o.on('layeradd',this._onLayerAdd,this).on('layerremove',this._onLayerRemove,this);this._update();return this._container;},onRemove:function(o){o.off('layeradd',this._onLayerAdd).off('layerremove',this._onLayerRemove);},setPrefix:function(o){this.options.prefix=o;this._update();return this;},addAttribution:function(o){if(!o)return;if(!this._attributions[o])this._attributions[o]=0;this._attributions[o]++;this._update();return this;},removeAttribution:function(o){if(!o)return;if(this._attributions[o]){this._attributions[o]--;this._update();}return this;},_update:function(){if(!this._map)return;var o=[];for(var p in this._attributions)if(this._attributions[p])o.push(p);var q=[];if(this.options.prefix)q.push(this.options.prefix);if(o.length)q.push(o.join(', '));this._container.innerHTML=q.join(' | ');},_onLayerAdd:function(o){if(o.layer.getAttribution)this.addAttribution(o.layer.getAttribution());},_onLayerRemove:function(o){if(o.layer.getAttribution)this.removeAttribution(o.layer.getAttribution());}});l.Map.mergeOptions({attributionControl:true});l.Map.addInitHook(function(){if(this.options.attributionControl)this.attributionControl=(new l.Control.Attribution()).addTo(this);});l.control.attribution=function(o){return new l.Control.Attribution(o);};l.Control.Scale=l.Control.extend({options:{position:'bottomleft',maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(o){this._map=o;var p='leaflet-control-scale',q=l.DomUtil.create('div',p),r=this.options;this._addScales(r,p,q);o.on(r.updateWhenIdle?'moveend':'move',this._update,this);o.whenReady(this._update,this);return q;},onRemove:function(o){o.off(this.options.updateWhenIdle?'moveend':'move',this._update,this);},_addScales:function(o,p,q){if(o.metric)this._mScale=l.DomUtil.create('div',p+'-line',q);if(o.imperial)this._iScale=l.DomUtil.create('div',p+'-line',q);},_update:function(){var o=this._map.getBounds(),p=o.getCenter().lat,q=6378137*Math.PI*Math.cos(p*Math.PI/180),r=q*(o.getNorthEast().lng-o.getSouthWest().lng)/180,s=this._map.getSize(),t=this.options,u=0;if(s.x>0)u=r*(t.maxWidth/s.x);this._updateScales(t,u);},_updateScales:function(o,p){if(o.metric&&p)this._updateMetric(p);if(o.imperial&&p)this._updateImperial(p);},_updateMetric:function(o){var p=this._getRoundNum(o);this._mScale.style.width=this._getScaleWidth(p/o)+'px';this._mScale.innerHTML=p<1000?p+' m':(p/1000)+' km';},_updateImperial:function(o){var p=o*3.2808399,q=this._iScale,r,s,t;if(p>5280){r=p/5280;s=this._getRoundNum(r);q.style.width=this._getScaleWidth(s/r)+'px';q.innerHTML=s+' mi';}else{t=this._getRoundNum(p);q.style.width=this._getScaleWidth(t/p)+'px';q.innerHTML=t+' ft';}},_getScaleWidth:function(o){return Math.round(this.options.maxWidth*o)-10;},_getRoundNum:function(o){var p=Math.pow(10,(Math.floor(o)+'').length-1),q=o/p;q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:1;return p*q;}});l.control.scale=function(o){return new l.Control.Scale(o);};l.Control.Layers=l.Control.extend({options:{collapsed:true,position:'topright',autoZIndex:true},initialize:function(o,p,q){l.setOptions(this,q);this._layers={};this._lastZIndex=0;this._handlingClick=false;for(var r in o)this._addLayer(o[r],r);for(r in p)this._addLayer(p[r],r,true);},onAdd:function(o){this._initLayout();this._update();o.on('layeradd',this._onLayerChange,this).on('layerremove',this._onLayerChange,this);return this._container;},onRemove:function(o){o.off('layeradd',this._onLayerChange).off('layerremove',this._onLayerChange);},addBaseLayer:function(o,p){this._addLayer(o,p);this._update();return this;},addOverlay:function(o,p){this._addLayer(o,p,true);this._update();return this;},removeLayer:function(o){var p=l.stamp(o);delete this._layers[p];this._update();return this;},_initLayout:function(){var o='leaflet-control-layers',p=this._container=l.DomUtil.create('div',o);p.setAttribute('aria-haspopup',true);if(!l.Browser.touch){l.DomEvent.disableClickPropagation(p).disableScrollPropagation(p);}else l.DomEvent.on(p,'click',l.DomEvent.stopPropagation);var q=this._form=l.DomUtil.create('form',o+'-list');if(this.options.collapsed){if(!l.Browser.android)l.DomEvent.on(p,'mouseover',this._expand,this).on(p,'mouseout',this._collapse,this);var r=this._layersLink=l.DomUtil.create('a',o+'-toggle',p);r.href='#';r.title='Layers';if(l.Browser.touch){l.DomEvent.on(r,'click',l.DomEvent.stop).on(r,'click',this._expand,this);}else l.DomEvent.on(r,'focus',this._expand,this);l.DomEvent.on(q,'click',function(){setTimeout(l.bind(this._onInputClick,this),0);},this);this._map.on('click',this._collapse,this);}else this._expand();this._baseLayersList=l.DomUtil.create('div',o+'-base',q);this._separator=l.DomUtil.create('div',o+'-separator',q);this._overlaysList=l.DomUtil.create('div',o+'-overlays',q);p.appendChild(q);},_addLayer:function(o,p,q){var r=l.stamp(o);this._layers[r]={layer:o,name:p,overlay:q};if(this.options.autoZIndex&&o.setZIndex){this._lastZIndex++;o.setZIndex(this._lastZIndex);}},_update:function(){if(!this._container)return;this._baseLayersList.innerHTML='';this._overlaysList.innerHTML='';var o=false,p=false,q,r;for(q in this._layers){r=this._layers[q];this._addItem(r);p=p||r.overlay;o=o||!r.overlay;}this._separator.style.display=p&&o?'':'none';},_onLayerChange:function(o){var p=this._layers[l.stamp(o.layer)];if(!p)return;if(!this._handlingClick)this._update();var q=p.overlay?(o.type==='layeradd'?'overlayadd':'overlayremove'):(o.type==='layeradd'?'baselayerchange':null);if(q)this._map.fire(q,p);},_createRadioElement:function(o,p){var q='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"';if(p)q+=' checked="checked"';q+='/>';var r=i.createElement('div');r.innerHTML=q;return r.firstChild;},_addItem:function(o){var p=i.createElement('label'),q,r=this._map.hasLayer(o.layer);if(o.overlay){q=i.createElement('input');q.type='checkbox';q.className='leaflet-control-layers-selector';q.defaultChecked=r;}else q=this._createRadioElement('leaflet-base-layers',r);q.layerId=l.stamp(o.layer);l.DomEvent.on(q,'click',this._onInputClick,this);var s=i.createElement('span');s.innerHTML=' '+o.name;p.appendChild(q);p.appendChild(s);var t=o.overlay?this._overlaysList:this._baseLayersList;t.appendChild(p);return p;},_onInputClick:function(){var o,p,q,r=this._form.getElementsByTagName('input'),s=r.length;this._handlingClick=true;for(o=0;o<s;o++){p=r[o];q=this._layers[p.layerId];if(p.checked&&!this._map.hasLayer(q.layer)){this._map.addLayer(q.layer);}else if(!p.checked&&this._map.hasLayer(q.layer))this._map.removeLayer(q.layer);}this._handlingClick=false;this._refocusOnMap();},_expand:function(){l.DomUtil.addClass(this._container,'leaflet-control-layers-expanded');},_collapse:function(){this._container.className=this._container.className.replace(' leaflet-control-layers-expanded','');}});l.control.layers=function(o,p,q){return new l.Control.Layers(o,p,q);};l.PosAnimation=l.Class.extend({includes:l.Mixin.Events,run:function(o,p,q,r){this.stop();this._el=o;this._inProgress=true;this._newPos=p;this.fire('start');o.style[l.DomUtil.TRANSITION]='all '+(q||.25)+'s cubic-bezier(0,0,'+(r||.5)+',1)';l.DomEvent.on(o,l.DomUtil.TRANSITION_END,this._onTransitionEnd,this);l.DomUtil.setPosition(o,p);l.Util.falseFn(o.offsetWidth);this._stepTimer=setInterval(l.bind(this._onStep,this),50);},stop:function(){if(!this._inProgress)return;l.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();l.Util.falseFn(this._el.offsetWidth);},_onStep:function(){var o=this._getPos();if(!o){this._onTransitionEnd();return;}this._el._leaflet_pos=o;this.fire('step');},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var o,p,q,r=this._el,s=h.getComputedStyle(r);if(l.Browser.any3d){q=s[l.DomUtil.TRANSFORM].match(this._transformRe);if(!q)return;o=parseFloat(q[1]);p=parseFloat(q[2]);}else{o=parseFloat(s.left);p=parseFloat(s.top);}return new l.Point(o,p,true);},_onTransitionEnd:function(){l.DomEvent.off(this._el,l.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress)return;this._inProgress=false;this._el.style[l.DomUtil.TRANSITION]='';this._el._leaflet_pos=this._newPos;clearInterval(this._stepTimer);this.fire('step').fire('end');}});l.Map.include({setView:function(o,p,q){p=p===j?this._zoom:this._limitZoom(p);o=this._limitCenter(l.latLng(o),p,this.options.maxBounds);q=q||{};if(this._panAnim)this._panAnim.stop();if(this._loaded&&!q.reset&&q!==true){if(q.animate!==j){q.zoom=l.extend({animate:q.animate},q.zoom);q.pan=l.extend({animate:q.animate},q.pan);}var r=(this._zoom!==p)?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,p,q.zoom):this._tryAnimatedPan(o,q.pan);if(r){clearTimeout(this._sizeTimer);return this;}}this._resetView(o,p);return this;},panBy:function(o,p){o=l.point(o).round();p=p||{};if(!o.x&&!o.y)return this;if(!this._panAnim){this._panAnim=new l.PosAnimation();this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this);}if(!p.noMoveStart)this.fire('movestart');if(p.animate!==false){l.DomUtil.addClass(this._mapPane,'leaflet-pan-anim');var q=this._getMapPanePos().subtract(o);this._panAnim.run(this._mapPane,q,p.duration||.25,p.easeLinearity);}else{this._rawPanBy(o);this.fire('move').fire('moveend');}return this;},_onPanTransitionStep:function(){this.fire('move');},_onPanTransitionEnd:function(){l.DomUtil.removeClass(this._mapPane,'leaflet-pan-anim');this.fire('moveend');},_tryAnimatedPan:function(o,p){var q=this._getCenterOffset(o)._floor();if((p&&p.animate)!==true&&!this.getSize().contains(q))return false;this.panBy(q,p);return true;}});l.PosAnimation=l.DomUtil.TRANSITION?l.PosAnimation:l.PosAnimation.extend({run:function(o,p,q,r){this.stop();this._el=o;this._inProgress=true;this._duration=q||.25;this._easeOutPower=1/Math.max(r||.5,.2);this._startPos=l.DomUtil.getPosition(o);this._offset=p.subtract(this._startPos);this._startTime=+new Date();this.fire('start');this._animate();},stop:function(){if(!this._inProgress)return;this._step();this._complete();},_animate:function(){this._animId=l.Util.requestAnimFrame(this._animate,this);this._step();},_step:function(){var o=(+new Date())-this._startTime,p=this._duration*1000;if(o<p){this._runFrame(this._easeOut(o/p));}else{this._runFrame(1);this._complete();}},_runFrame:function(o){var p=this._startPos.add(this._offset.multiplyBy(o));l.DomUtil.setPosition(this._el,p);this.fire('step');},_complete:function(){l.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire('end');},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower);}});l.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});if(l.DomUtil.TRANSITION)l.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&l.DomUtil.TRANSITION&&l.Browser.any3d&&!l.Browser.android23&&!l.Browser.mobileOpera;if(this._zoomAnimated)l.DomEvent.on(this._mapPane,l.DomUtil.TRANSITION_END,this._catchTransitionEnd,this);});l.Map.include(!l.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(o){if(this._animatingZoom&&o.propertyName.indexOf('transform')>=0)this._onZoomTransitionEnd();},_nothingToAnimate:function(){return !this._container.getElementsByClassName('leaflet-zoom-animated').length;},_tryAnimatedZoom:function(o,p,q){if(this._animatingZoom)return true;q=q||{};if(!this._zoomAnimated||q.animate===false||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return false;var r=this.getZoomScale(p),s=this._getCenterOffset(o)._divideBy(1-1/r),t=this._getCenterLayerPoint()._add(s);if(q.animate!==true&&!this.getSize().contains(s))return false;this.fire('movestart').fire('zoomstart');this._animateZoom(o,p,t,r,null,true);return true;},_animateZoom:function(o,p,q,r,s,t){this._animatingZoom=true;l.DomUtil.addClass(this._mapPane,'leaflet-zoom-anim');this._animateToCenter=o;this._animateToZoom=p;if(l.Draggable)l.Draggable._disabled=true;this.fire('zoomanim',{center:o,zoom:p,origin:q,scale:r,delta:s,backwards:t});},_onZoomTransitionEnd:function(){this._animatingZoom=false;l.DomUtil.removeClass(this._mapPane,'leaflet-zoom-anim');this._resetView(this._animateToCenter,this._animateToZoom,true,true);if(l.Draggable)l.Draggable._disabled=false;}});l.TileLayer.include({_animateZoom:function(o){if(!this._animating){this._animating=true;this._prepareBgBuffer();}var p=this._bgBuffer,q=l.DomUtil.TRANSFORM,r=o.delta?l.DomUtil.getTranslateString(o.delta):p.style[q],s=l.DomUtil.getScaleString(o.scale,o.origin);p.style[q]=o.backwards?s+' '+r:r+' '+s;},_endZoomAnim:function(){var o=this._tileContainer,p=this._bgBuffer;o.style.visibility='';o.parentNode.appendChild(o);l.Util.falseFn(p.offsetWidth);this._animating=false;},_clearBgBuffer:function(){var o=this._map;if(o&&!o._animatingZoom&&!o.touchZoom._zooming){this._bgBuffer.innerHTML='';this._bgBuffer.style[l.DomUtil.TRANSFORM]='';}},_prepareBgBuffer:function(){var o=this._tileContainer,p=this._bgBuffer,q=this._getLoadedTilesPercentage(p),r=this._getLoadedTilesPercentage(o);if(p&&q>.5&&r<.5){o.style.visibility='hidden';this._stopLoadingImages(o);return;}p.style.visibility='hidden';p.style[l.DomUtil.TRANSFORM]='';this._tileContainer=p;p=this._bgBuffer=o;this._stopLoadingImages(p);clearTimeout(this._clearBgBufferTimer);},_getLoadedTilesPercentage:function(o){var p=o.getElementsByTagName('img'),q,r,s=0;for(q=0,r=p.length;q<r;q++)if(p[q].complete)s++;return s/r;},_stopLoadingImages:function(o){var p=Array.prototype.slice.call(o.getElementsByTagName('img')),q,r,s;for(q=0,r=p.length;q<r;q++){s=p[q];if(!s.complete){s.onload=l.Util.falseFn;s.onerror=l.Util.falseFn;s.src=l.Util.emptyImageUrl;s.parentNode.removeChild(s);}}}});l.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(o){o=this._locateOptions=l.extend(this._defaultLocateOptions,o);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:'Geolocation not supported.'});return this;}var p=l.bind(this._handleGeolocationResponse,this),q=l.bind(this._handleGeolocationError,this);if(o.watch){this._locationWatchId=navigator.geolocation.watchPosition(p,q,o);}else navigator.geolocation.getCurrentPosition(p,q,o);return this;},stopLocate:function(){if(navigator.geolocation)navigator.geolocation.clearWatch(this._locationWatchId);if(this._locateOptions)this._locateOptions.setView=false;return this;},_handleGeolocationError:function(o){var p=o.code,q=o.message||(p===1?'permission denied':(p===2?'position unavailable':'timeout'));if(this._locateOptions.setView&&!this._loaded)this.fitWorld();this.fire('locationerror',{code:p,message:'Geolocation error: '+q+'.'});},_handleGeolocationResponse:function(o){var p=o.coords.latitude,q=o.coords.longitude,r=new l.LatLng(p,q),s=180*o.coords.accuracy/40075017,t=s/Math.cos(l.LatLng.DEG_TO_RAD*p),u=l.latLngBounds([p-s,q-t],[p+s,q+t]),v=this._locateOptions;if(v.setView){var w=Math.min(this.getBoundsZoom(u),v.maxZoom);this.setView(r,w);}var x={latlng:r,bounds:u,timestamp:o.timestamp};for(var y in o.coords)if(typeof o.coords[y]==='number')x[y]=o.coords[y];this.fire('locationfound',x);}});}(window,document));}),null);