if (self.CavalryLogger) { CavalryLogger.start_js(["NrYJ+"]); }

__d("IntentClassifierRequestAction",[],(function a(b,c,d,e,f,g){f.exports={REQUEST_MESSAGE_INTENT:"REQUEST_MESSAGE_INTENT",REQUEST_THREAD_INTENT:"REQUEST_THREAD_INTENT"};}),null);
__d("MessageThreadViewSource",[],(function a(b,c,d,e,f,g){f.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",NEW_MESSAGETAB:"new_message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};}),null);
__d("PageCommItemStatus",[],(function a(b,c,d,e,f,g){f.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM"};}),null);
__d("PagesAdminToolUIActionType",[],(function a(b,c,d,e,f,g){f.exports={CONTEXT_CARD_CLICK_ADD_NOTE:"context_card_click_add_note",CONTEXT_CARD_CLICK_CONFIRM_ADD_NOTE:"context_card_click_confirm_add_note",CONTEXT_CARD_CLICK_DELETE_NOTE:"context_card_click_delete_note",CONTEXT_CARD_CLICK_CONFIRM_DELETE_NOTE:"context_card_click_confirm_delete_note",CONTEXT_CARD_CLICK_HISTORY:"context_card_click_history",CONTEXT_CARD_CLICK_PROFILE_LINK:"context_card_click_profile_link",CONTEXT_CARD_CLICK_SHARED_MEDIA:"context_card_click_shared_media",CONTEXT_CARD_LOAD_MORE_SHARED_MEDIA:"context_card_load_more_shared_media",CONTEXT_CARD_LOAD_MORE_NOTES:"context_card_load_more_notes",CONTEXT_CARD_LOAD_MORE_HISTORY:"context_card_load_more_history",CONTEXT_CARD_CLICK_SET_CUSTOM_TAG:"context_card_click_set_custom_tag",CONTEXT_CARD_CLICK_UNSET_CUSTOM_TAG:"context_card_click_unset_custom_tag",TAG_MANAGEMENT_CLICK_DELETE_LINK:"tag_management_click_delete_link",TAG_MANAGEMENT_CLICK_CONFIRM_DELETE:"tag_management_click_confirm_delete",TAG_MANAGEMENT_CLICK_COLOR_SELECTOR:"tag_management_click_color_selector",TAG_MANAGEMENT_CLICK_CHANGE_COLOR:"tag_management_click_change_color",TAG_MANAGEMENT_CLICK_ADD_TAG:"tag_management_click_add_tag",TAG_MANAGEMENT_CLICK_MERGE_TAG:"tag_management_click_merge_tag",MESSAGE_INBOX_SWITCH_FOLDER:"message_inbox_switch_folder",MESSAGE_INBOX_TOGGLE_FILTER_PANEL:"message_inbox_toggle_filter_panel",MESSAGE_INBOX_CLICK_MANAGE_TAGS:"message_inbox_click_manage_tags",MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS:"message_inbox_click_add_search_tags",MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS:"message_inbox_click_remove_search_tags",MESSAGE_INBOX_CLICK_SEARCH_NAMES:"message_inbox_click_search_names",MESSAGE_INBOX_CLICK_SEARCH_MESSAGES:"message_inbox_click_search_messages",MESSAGE_INBOX_CLICK_AWAY_TOGGLE:"message_inbox_click_away_toggle",MESSAGE_INBOX_CLICK_THREAD_BLOCK:"message_inbox_click_thread_block",MESSAGE_INBOX_CLICK_SEND_MESSAGE:"message_inbox_click_send_message",MESSAGE_INBOX_CLICK_MENU_ACTION:"message_inbox_click_menu_action",HOVERCARD_CLICK_EXPAND_FULL_VIEW:"hovercard_click_expand_full_view",HOVERCARD_CLICK_SEND_MESSAGE:"hovercard_click_send_message",HOVERCARD_CLICK_SEE_CONVERSATION:"hovercard_click_see_conversation",HOVERCARD_CLICK_VIEW_PROFILE:"hovercard_click_view_profile"};}),null);
__d("PaymentItemTypeFields",[],(function a(b,c,d,e,f,g){f.exports={NONE:"none",ADS_INVOICE:"ads_invoice",DONATIONS:"donations",OCULUS_CV1:"oculus_cv1",OCULUS_LAUNCH_V1:"oculus_launch_v1",OCULUS_LAUNCH_V2:"oculus_launch_v2",OZONE:"ozone",OPEN_GRAPH_PRODUCT:"open_graph_product",MESSENGER_COMMERCE:"messenger_commerce",P2P_TRANSFER:"p2p_transfer",DUMMY_FIRST_PARTY:"dummy_first_party",DUMMY_THIRD_PARTY:"dummy_third_party",GIFTS:"gifts",BILL:"bill",AIRMAIL:"airmail",EVENT_TICKETING:"event_ticketing",PAYMENT_LITE:"payment_lite",MESSENGER_API_FEE:"messenger_api_fee",WORKPLACE:"workplace",NMOR_PAGES_COMMERCE:"nmor_pages_commerce"};}),null);
__d('CommerceCommonNUXAPI',['AsyncRequest','XCommerceSelfServeMerchantNUXSeenController'],(function a(b,c,d,e,f,g){'use strict';var h={update:function i(j){var k=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',j.pageID).setEnum('nux_type',j.nuxType).setEnum('event',j.event).getURI();new (c('AsyncRequest'))(k).send();}};f.exports=h;}),null);
__d('CommerceCommonNUX.react',['BOFSellerLoggerEvent','CommerceCommonNUXAPI','React','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=180;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){'use strict';i.constructor.call(this,m);this.$CommerceCommonNUX1=function(){this.setState({shown:false});c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_SEEN,nuxType:this.props.type,pageID:this.props.pageID});}.bind(this);this.state={shown:m.shown};}l.prototype.componentDidMount=function(){'use strict';if(this.state.shown)c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_SHOW,nuxType:this.props.type,pageID:this.props.pageID});};l.prototype.render=function(){'use strict';if(!this.state||!this.state.shown)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{className:this.props.className,contextRef:this.props.contextRef,customwidth:k,onCloseButtonClick:this.$CommerceCommonNUX1,position:'above',shown:this.state.shown,width:this.props.width},this.props.children));};l.defaultProps={width:'custom'};l.PropTypes={children:j.any,className:j.string,contextRef:j.func.isRequired,pageID:j.string.isRequired,shown:j.bool.isRequired,type:j.string.isRequired,width:j.oneOf(['auto','custom','normal','wide'])};f.exports=l;}),null);
__d('CommerceCurrencyUtil',['ix','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i={BRL:h("127535"),EUR:h("127538"),GBP:h("127541"),IDR:h("127545"),MYR:h("127553"),NTD:h("127557"),PHP:h("127561"),SEK:h("127565"),THB:h("127569"),TRY:h("127573"),VEF:h("127581"),VND:h("127585"),YEN:h("127588"),USD:h("127577")},j='USD',k={getIconSrc:function l(m){if(!m)return i[j];return i[m]||i[j];}};f.exports=k;}),null);
__d('CommerceInvoiceButtonPUX.react',['fbt','CommerceCommonNUX.react','CommerceSelfServeNUXType','MercuryParticipants','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceButtonPUX2=function(r){this.setState({recipientName:r&&r.name});}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';this.$CommerceInvoiceButtonPUX1(this.props);};l.prototype.componentWillReceiveProps=function(m){'use strict';this.$CommerceInvoiceButtonPUX1(m);};l.prototype.$CommerceInvoiceButtonPUX1=function(m){'use strict';c('MercuryParticipants').get('fbid:'+m.recipientID,this.$CommerceInvoiceButtonPUX2);};l.prototype.render=function(){'use strict';if(!this.state||!this.state.recipientName)return null;return (c('React').createElement(c('CommerceCommonNUX.react'),{contextRef:this.props.contextRef,pageID:this.props.pageID,shown:this.props.shown,type:c('CommerceSelfServeNUXType').INVOICE_PAYMENTS_CREATION_PUX},h._("Click here to send {buyer} a payment request",[h.param('buyer',this.state.recipientName)])));};l.PropTypes={contextRef:k.func.isRequired,pageID:k.string.isRequired,recipientID:k.string.isRequired,shown:k.bool.isRequired};f.exports=l;}),null);
__d('CommerceInvoiceCreateDialogHeader.react',['fbt','React','XUIGrayText.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.$CommerceInvoiceCreateDialogHeader1=function(){var l=this.props.invoiceID;if(!l)return null;return (c('React').createElement(c('XUIText.react'),{display:'block',size:'large'},h._("Order {Part of sentence which is emphasized}",[h.param('Part of sentence which is emphasized',c('React').createElement(c('XUIText.react'),{weight:'bold'},h._("#{order_number}",[h.param('order_number',l)])))])));};k.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogHeader1(),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},h._("Order status: {statusMessage}",[h.param('statusMessage',this.props.statusMessage)]))));};f.exports=k;}),null);
__d('CommerceInvoiceCreateDialogNoteSection.react',['ix','cx','fbt','FBPaymentsFormField.react','Image.react','LeftRight.react','Link.react','React','XUIGrayText.react','XUIText.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=240,n=3;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$CommerceInvoiceCreateDialogNoteSection1=function(){this.setState({isAddingNote:true});}.bind(this);this.$CommerceInvoiceCreateDialogNoteSection2=function(q,r){this.setState({remainingWords:m-r.length});this.props.onNoteChanged(r);}.bind(this);this.state={isAddingNote:false,remainingWords:m};}o.prototype.$CommerceInvoiceCreateDialogNoteSection3=function(){if(this.state.isAddingNote||!this.props.canEdit)return null;return (c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$CommerceInvoiceCreateDialogNoteSection1},c('React').createElement(c('Image.react'),{className:"_4blm",src:h("117010")}),j._("Add a Note"))));};o.prototype.$CommerceInvoiceCreateDialogNoteSection4=function(){if(!this.state.isAddingNote)return null;return (c('React').createElement('div',null,c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},j._("Note")),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.state.remainingWords)),c('React').createElement(c('FBPaymentsFormField.react'),{className:"_2pi2",fieldType:'textArea',maxLength:m,name:'editableNote',onChange:this.$CommerceInvoiceCreateDialogNoteSection2,placeholder:j._("Enter a note that both you and the buyer can see."),rows:n,value:this.props.note})));};o.prototype.$CommerceInvoiceCreateDialogNoteSection5=function(){if(this.props.canEdit||!this.props.note)return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},j._("Note")),c('React').createElement(c('XUIText.react'),null,this.props.note)));};o.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogNoteSection3(),this.$CommerceInvoiceCreateDialogNoteSection4(),this.$CommerceInvoiceCreateDialogNoteSection5()));};f.exports=o;}),null);
__d('CommerceAddProductScrollRow.react',['cx','fbt','XUIText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return (c('React').createElement('div',{className:"_2jjq",onClick:this.props.onClick,role:'presentation'},c('React').createElement('table',null,c('React').createElement('tbody',null,c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('div',{className:"_buh"})),c('React').createElement('td',null,c('React').createElement(c('XUIText.react'),{size:'small',className:"_buj"},i._("Add Product"))))))));};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func.isRequired};f.exports=m;}),null);
__d('CommerceProductItemSearch',['ActorURI','AsyncRequest','XPagesManagerProductSearchController','Set','bind','debounce'],(function a(b,c,d,e,f,g){'use strict';var h=300,i=30;function j(k,l,m,n){this.searchOrMore=c('debounce')(this.$CommerceProductItemSearch8,m||h,this);this.$CommerceProductItemSearch2=l||[];this.$CommerceProductItemSearch3=new (c('Set'))();this.$CommerceProductItemSearch5=[];this.$CommerceProductItemSearch7=n||i;this.$CommerceProductItemSearch1=c('ActorURI').create(c('XPagesManagerProductSearchController').getURIBuilder().getURI(),k);}j.prototype.$CommerceProductItemSearch8=function(k,l){if(this.$CommerceProductItemSearch6)this.$CommerceProductItemSearch6.abort();var m=k!==this.$CommerceProductItemSearch4;if(m){this.$CommerceProductItemSearch3.clear();this.$CommerceProductItemSearch5=[];this.$CommerceProductItemSearch4=k;}var n=this.$CommerceProductItemSearch2.concat(Array.from(this.$CommerceProductItemSearch3));this.$CommerceProductItemSearch6=new (c('AsyncRequest'))().setData({query:k.trim(),offset:0,limit:this.$CommerceProductItemSearch7,filter_product_group_ids:n}).setHandler(c('bind')(this,this.$CommerceProductItemSearch9,l,m)).setURI(this.$CommerceProductItemSearch1);this.$CommerceProductItemSearch6.send();};j.prototype.$CommerceProductItemSearch9=function(k,l,m){var n=m.payload.products;n.map(function(o){this.$CommerceProductItemSearch3.add(o.product_group_id);}.bind(this));this.$CommerceProductItemSearch5=this.$CommerceProductItemSearch5.concat(n);this.$CommerceProductItemSearch6=null;k(this.$CommerceProductItemSearch5,n.length!==0||l);};f.exports=j;}),null);
__d('CommerceProductItemSearchSelector.react',['ix','cx','fbt','invariant','Image.react','InfiniteScrollArea.react','CommerceAddProductScrollRow.react','CommerceProductItemSearch','LayerFadeOnHide','Link.react','ProfileImageBlockEntry.react','React','ReactDOM','XUIContextualDialog.react','XUISpinner.react','XUITextInput.react','curry','fbglyph'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes;l=babelHelpers.inherits(o,c('React').Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);this.$CommerceProductItemSearchSelector11=function(r,s){var t=r.description===''?r.price:r.price+' - '+r.description;return (c('React').createElement('div',{className:"_2jjq",key:r.id,onClick:c('curry')(this.$CommerceProductItemSearchSelector12,[r]),role:'presentation'},c('React').createElement(c('ProfileImageBlockEntry.react'),{imgSrc:r.image_url,title:r.name,subtitle:t})));}.bind(this);this.$CommerceProductItemSearchSelector12=function(r){this.props.onProductSelected(r);this.$CommerceProductItemSearchSelector7();}.bind(this);this.$CommerceProductItemSearchSelector9=function(event){this.setState({query:event.target.value});this.$CommerceProductItemSearchSelector2(event.target.value);}.bind(this);this.$CommerceProductItemSearchSelector10=function(){if(this.state.hasNewData&&!this.state.loading)this.$CommerceProductItemSearchSelector2(this.state.query);}.bind(this);this.$CommerceProductItemSearchSelector13=function(r,s){if(this.isUnmounted)return;var t={loading:false,hasNewData:s};if(s)t.products=r;this.setState(t);}.bind(this);this.$CommerceProductItemSearchSelector7=function(){this.setState({isProductListVisible:false});}.bind(this);this.$CommerceProductItemSearchSelector8=function(){if(this.props.showAsDropdownMenu&&this.state.productListDialogWidth===0)this.$CommerceProductItemSearchSelector3();this.setState({isProductListVisible:true});}.bind(this);this.$CommerceProductItemSearchSelector1=new (c('CommerceProductItemSearch'))(p.pageID);this.state={hasNewData:true,isProductListVisible:false,loading:false,products:[],productListDialogWidth:0,query:''};}o.prototype.componentDidMount=function(){this.$CommerceProductItemSearchSelector2(this.state.query);this.$CommerceProductItemSearchSelector3();};o.prototype.componentWillUnmount=function(){this.isUnmounted=true;};o.prototype.$CommerceProductItemSearchSelector3=function(){var p=c('ReactDOM').findDOMNode(this.refs.searchBox).offsetWidth;this.setState({productListDialogWidth:p});};o.prototype.render=function(){return c('React').createElement('div',{className:this.props.className},this.$CommerceProductItemSearchSelector4(),this.$CommerceProductItemSearchSelector5());};o.prototype.$CommerceProductItemSearchSelector6=function(){if(this.state.loading)return c('React').createElement(c('XUISpinner.react'),{size:'small'});if(!this.props.showAsDropdownMenu)return c('React').createElement(c('Image.react'),{src:h("142454")});var p=c('React').createElement(c('Image.react'),{src:h("142926")}),q=this.state.isProductListVisible?this.$CommerceProductItemSearchSelector7:this.$CommerceProductItemSearchSelector8;return c('React').createElement(c('Link.react'),{onClick:q},p);};o.prototype.$CommerceProductItemSearchSelector4=function(){return c('React').createElement('div',{className:"_22f5",ref:'searchBox'},c('React').createElement(c('XUITextInput.react'),{className:"_22f6",placeholder:j._("Search"),onChange:this.$CommerceProductItemSearchSelector9,onFocus:this.$CommerceProductItemSearchSelector8,ref:'input',role:'combobox',value:this.state.query}),c('React').createElement('div',{className:"_22f7"},this.$CommerceProductItemSearchSelector6()));};o.prototype.$CommerceProductItemSearchSelector5=function(){var p=null;if(this.props.canCreateProduct){this.props.onAddProductClick||k(0);p=c('React').createElement(c('CommerceAddProductScrollRow.react'),{onClick:this.props.onAddProductClick});}var q=c('React').createElement(c('InfiniteScrollArea.react'),{distanceToEnd:1,onEndReached:this.$CommerceProductItemSearchSelector10,height:this.props.productScrollAreaHeight},p,this.state.products.map(this.$CommerceProductItemSearchSelector11,this));if(!this.props.showAsDropdownMenu)return c('React').createElement('div',{className:"_2jjp"},q);return c('React').createElement(c('XUIContextualDialog.react'),{position:'below',alignment:'right',width:this.state.productListDialogWidth,autoFocus:false,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},shown:this.state.isProductListVisible,contextRef:function(){return this.refs.searchBox;}.bind(this),offsetY:-5},q);};o.prototype.$CommerceProductItemSearchSelector2=function(p){this.$CommerceProductItemSearchSelector1.searchOrMore(p,this.$CommerceProductItemSearchSelector13);this.setState({loading:true});};o.defaultProps={canCreateProduct:false,showAsDropdownMenu:false,productScrollAreaHeight:300};o.propTypes={canCreateProduct:n.bool,showAsDropdownMenu:n.bool,onAddProductClick:n.func,onProductSelected:n.func.isRequired,pageID:n.string.isRequired,productScrollAreaHeight:n.number};f.exports=o;}),null);
__d('CommerceInvoiceCreateDialogProductSelector.react',['ix','cx','CommerceProductItemSearchSelector.react','CurrencyInput.atlas','Image.react','LeftRight.react','Link.react','PECurrency.react','ProfileImageBlockEntry.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceCreateDialogProductSelector1=function(r){if(!this.props.selectedProduct)return;this.props.onPriceChange(this.props.selectedProduct.id,r);}.bind(this),this.$CommerceInvoiceCreateDialogProductSelector4=function(){this.props.onProductSelected([]);}.bind(this),n;}l.prototype.$CommerceInvoiceCreateDialogProductSelector2=function(){return c('React').createElement('div',{className:"_3451"+(this.props.selectedProduct?' '+"hidden_elem":'')},c('React').createElement(c('CommerceProductItemSearchSelector.react'),{canCreateProduct:false,showAsDropdownMenu:true,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,productScrollAreaHeight:this.props.productScrollAreaHeight}));};l.prototype.$CommerceInvoiceCreateDialogProductSelector3=function(){var m=this.props.selectedProduct;if(!m)return null;var n=this.props.isEditable?c('React').createElement(c('Link.react'),{className:"_3452",onClick:this.$CommerceInvoiceCreateDialogProductSelector4},c('React').createElement(c('Image.react'),{src:h("137136")})):null,o=this.props.isEditable?c('React').createElement(c('CurrencyInput.atlas'),{className:"_3x5v _3x5w",currency:this.props.currency,onChange:this.$CommerceInvoiceCreateDialogProductSelector1,value:m.price}):c('React').createElement(c('PECurrency.react'),{code:this.props.currency,value:m.price*100});return c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{className:"_3x5v _3x5x"},c('React').createElement(c('ProfileImageBlockEntry.react'),{imgSrc:m.imageURL,title:m.name})),c('React').createElement('div',{className:(!this.props.isEditable?"_5okk":'')+(' '+"_3x5-")+(' '+"_2pis")+(' '+"_2pi2")},o,n));};l.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogProductSelector3(),this.$CommerceInvoiceCreateDialogProductSelector2()));};f.exports=l;}),null);
__d('CommerceInvoiceCreateDialogTotalRow.react',['cx','fbt','PECurrency.react','Grid.react','React','XUIGrayText.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=i._("Buyer to select");this.props.selectedShippingOption;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_5hc4 clearfix")},c('React').createElement(c('Grid.react'),{className:"_5hc7",cols:2,spacing:'padding/left-12'},c('React').createElement('div',{className:"_5hc8"},c('React').createElement(c('XUIGrayText.react'),{size:'medium'},i._("Shipping"))),c('React').createElement('div',{className:"_5hco _2pim"},c('React').createElement(c('XUIGrayText.react'),{size:'medium'},m)),c('React').createElement('div',{className:"_5hc8"},c('React').createElement(c('XUIText.react'),{size:'large'},i._("Total"))),c('React').createElement('div',{className:"_5hco _2pi2"},c('React').createElement(c('XUIText.react'),{size:'large'},c('React').createElement(c('PECurrency.react'),{code:this.props.currency,value:this.props.totalCost}))))));};f.exports=l;}),null);
__d('CommerceInvoiceDetailsEditableList.react',['React','XUIGrayText.react','XUIText.react','intlList'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},this.props.title),c('React').createElement(c('XUIText.react'),{display:'block'},c('intlList')(this.props.listItems.map(this.props.getOptionName),c('intlList').CONJUNCTIONS.NONE))));};function k(){h.apply(this,arguments);}k.propsTypes={className:j.string,getOptionName:j.func.isRequired,listItems:j.array.isRequired,title:j.node.isRequired};f.exports=k;}),null);
__d('CommerceAdminInvoiceDetails.react',['cx','fbt','CommerceContactMerchantShippingAddress.react','CommerceInvoiceCreateDialogHeader.react','CommerceInvoiceCreateDialogNoteSection.react','CommerceInvoiceCreateDialogProductSelector.react','CommerceInvoiceCreateDialogTotalRow.react','CommerceInvoiceDetailsEditableList.react','React','XUIGrayText.react','XUINotice.react','XUIText.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.$CommerceAdminInvoiceDetails1=function(){if(!this.props.selectedShippingOption||!this.props.shippingAddress||!this.props.customerPhoneNumber)return null;return (c('React').createElement(c('XUIText.react'),{className:"_3-8w"},this.props.customerPhoneNumber));};l.prototype.$CommerceAdminInvoiceDetails2=function(){if(!this.props.errorMessage)return null;return (c('React').createElement(c('XUINotice.react'),{use:'warn'},this.props.errorMessage));};l.prototype.$CommerceAdminInvoiceDetails3=function(){return (c('React').createElement(c('CommerceInvoiceCreateDialogHeader.react'),{className:"_4kya",invoiceID:this.props.invoiceID,statusMessage:this.props.invoiceStatus}));};l.prototype.$CommerceAdminInvoiceDetails4=function(){return (c('React').createElement('div',{className:"_4kya"},c('React').createElement(c('CommerceInvoiceCreateDialogProductSelector.react'),{currency:this.props.currency,onPriceChange:this.props.onPriceChange,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,selectedProduct:this.props.selectedProducts[0],productScrollAreaHeight:this.props.productScrollAreaHeight,isEditable:this.props.canEditProducts})));};l.prototype.$CommerceAdminInvoiceDetails5=function(){return (c('React').createElement(c('CommerceInvoiceCreateDialogNoteSection.react'),{canEdit:this.props.canEditProducts,note:this.props.invoiceNote,onNoteChanged:this.props.onNoteChanged}));};l.prototype.$CommerceAdminInvoiceDetails6=function(){return (c('React').createElement('div',{className:"_30v4"},c('React').createElement(c('CommerceInvoiceDetailsEditableList.react'),{title:i._("Accepted payment methods"),listItems:this.props.paymentOptions,getOptionName:function m(n){return n.name||n.description;}})));};l.prototype.$CommerceAdminInvoiceDetails7=function(){if(!this.props.selectedShippingOption||!this.props.shippingAddress)return null;return (c('React').createElement(c('CommerceContactMerchantShippingAddress.react'),{address:this.props.shippingAddress}));};l.prototype.$CommerceAdminInvoiceDetails8=function(){if(!this.props.invoiceID)return this.$CommerceAdminInvoiceDetails9();return (c('React').createElement('div',{className:"_30v4"},this.$CommerceAdminInvoiceDetails9(),this.$CommerceAdminInvoiceDetails10(),this.$CommerceAdminInvoiceDetails7(),this.$CommerceAdminInvoiceDetails1()));};l.prototype.$CommerceAdminInvoiceDetails9=function(){var m=this.props.shippingOptions,n=i._("Shipping Methods Offered");if(this.props.selectedShippingOption){m=[this.props.selectedShippingOption];n=i._("Shipping Method");}return (c('React').createElement('div',{className:"_30v4"},c('React').createElement(c('CommerceInvoiceDetailsEditableList.react'),{getOptionName:function o(p){return p.name;},listItems:m,title:n})));};l.prototype.$CommerceAdminInvoiceDetails10=function(){if(this.props.isInvoiceFulfilled)return (c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},i._("Fulfilled")));return (c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},i._("Not Fulfilled")));};l.prototype.$CommerceAdminInvoiceDetails11=function(){return (c('React').createElement('div',{className:"_30v4 _4ebn"},c('React').createElement(c('CommerceInvoiceCreateDialogTotalRow.react'),{currency:this.props.currency,selectedShippingOption:this.props.selectedShippingOption,totalCost:this.props.totalCost})));};l.prototype.render=function(){return (c('React').createElement('span',null,this.$CommerceAdminInvoiceDetails2(),this.$CommerceAdminInvoiceDetails3(),this.$CommerceAdminInvoiceDetails4(),this.$CommerceAdminInvoiceDetails11(),this.$CommerceAdminInvoiceDetails5(),this.$CommerceAdminInvoiceDetails8()));};l.defaultProps={onPriceChange:c('emptyFunction'),onProductSelected:c('emptyFunction')};f.exports=l;}),null);
__d("XCommerceTransactionInvoiceUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction-invoice\/update\/",{});}),null);
__d('CommerceInvoiceAPI',['ActorURI','AsyncRequest','XCommerceTransactionInvoiceUpdateController','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={updateInvoiceStatus:function i(j){var k=c('XCommerceTransactionInvoiceUpdateController').getURIBuilder().getURI();k=c('ActorURI').create(k,j.pageID);var l=j.onSuccess||c('emptyFunction'),m=j.onError||c('emptyFunction'),n={invoice_id:j.invoiceID,transaction_status:j.status,receipt_reject_reason:j.receiptRejectReason,shipment_tracking_no:j.shipmentTrackingNumber};new (c('AsyncRequest'))().setURI(k).setData(n).setMethod('POST').setHandler(function(o){var p=o.getPayload();l(p);}).setErrorHandler(function(o){m();}).send();}};f.exports=h;}),null);
__d('CommerceInvoiceAdminActionsTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({CREATE_INVOICE_START:'',CREATE_INVOICE_SUCCESS:'',CREATE_INVOICE_FAILURE:'',HIDE_DIALOG:'',SAVE_CONFIG:'',SET_CONFIG:'',SET_INVOICE_DETAILS:'',SET_INVOICE_NOTE:'',SET_PRODUCT_PRICE:'',SET_SELECTED_PRODUCTS:'',SHOW_DIALOG:'',SHOW_MANAGE_INVOICE_DIALOG:'',UPDATE_INVOICE_STATUS_START:'',UPDATE_INVOICE_STATUS_SUCCESS:'',MANAGE_INVOICE_ERROR:'',HIDE_MANAGE_INVOICE_DIALOG:''});f.exports=h;}),null);
__d('CommerceInvoiceAdminDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d("XCommerceAdminTransactionInvoiceDetailsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/admin\/transaction_invoice_details\/",{invoice_id:{type:"FBID",required:true}});}),null);
__d("XCommerceTransactionInvoiceConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction\/invoice\/config\/",{});}),null);
__d('CommerceInvoiceAdminActions',['fbt','CommerceInvoiceAdminActionsTypes','ActorURI','AsyncRequest','CommerceInvoiceAPI','CommerceInvoiceAdminDispatcher','XCommerceAdminTransactionInvoiceDetailsController','XCommerceTransactionInvoiceConfigController'],(function a(b,c,d,e,f,g,h){'use strict';var i={setConfig:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_CONFIG,config:k});},createInvoiceStart:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_START});},createInvoiceSuccess:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_SUCCESS});},createInvoiceFailure:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_FAILURE,error:k});},hideDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').HIDE_DIALOG});},hideManageInvoiceDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').HIDE_MANAGE_INVOICE_DIALOG});},saveConfiguration:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SAVE_CONFIG});},setInvoiceDetails:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_DETAILS,invoiceID:k,invoiceDetails:l});},setInvoiceNote:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_NOTE,invoiceNote:k});},setProductPrice:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_PRODUCT_PRICE,productID:k,price:l});},setSelectedProducts:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_SELECTED_PRODUCTS,products:k});},showDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SHOW_DIALOG});},showManageInvoiceDialog:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SHOW_MANAGE_INVOICE_DIALOG,invoiceID:k,pageID:l});},updateInvoiceStatusStart:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_START,invoiceID:l,pageID:k});},updateInvoiceStatusSuccess:function j(k,l,m){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_SUCCESS,invoiceID:l,pageID:k,status:m});},setManageInvoiceError:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').MANAGE_INVOICE_ERROR,invoiceID:k,errorMessage:l});},fetchInvoiceDetails:function j(k,l){var m=c('XCommerceAdminTransactionInvoiceDetailsController').getURIBuilder().setFBID('invoice_id',l).getURI(),n=c('ActorURI').create(m,k);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){var p=o.payload,q=p.items[0],r={id:q.product_item_id,imageURL:q.product_image_uri,name:q.product_name,price:q.product_price/100},s={currency:p.currency,id:p.invoice_id,pageID:p.page_id,status:p.status,statusDisplay:p.status_display,totalCost:p.total_cost,products:[r],availableShippingOptions:p.available_shipping_options,selectedShippingOption:p.selected_shipping_option,availablePaymentOptions:p.available_payment_options,selectedPaymentOption:p.selected_payment_option,receiptPhotoURL:p.receipt_photo_url,shippingAddress:p.ship_to_address,note:p.invoice_notes,customerPhoneNumber:p.customer_phone_number};i.setInvoiceDetails(l,s);}).send();},fetchConfig:function j(k){var l=c('XCommerceTransactionInvoiceConfigController').getURIBuilder().getURI(),m=c('ActorURI').create(l,k);new (c('AsyncRequest'))().setURI(m).setHandler(function(n){var o=n.payload,p={isOnboarded:o.isOnboarded,businessEmail:o.merchantSettings.contactEmail,paymentMethods:o.paymentOptions,shippingOptions:o.shippingOptions,merchantSettings:o.merchantSettings};i.setConfig(p);}).send();},updateInvoiceStatus:function j(k,l,m){this.updateInvoiceStatusStart(k,l);c('CommerceInvoiceAPI').updateInvoiceStatus({invoiceID:l,pageID:k,status:m,onSuccess:function(){this.updateInvoiceStatusSuccess(k,l,m);}.bind(this),onError:function(){var n=h._("There was an error updating the order status");this.setManageInvoiceError(l,n);}.bind(this)});}};f.exports=i;}),null);
__d('CommerceInvoicePaymentOptionCategory',[],(function a(b,c,d,e,f,g){'use strict';var h={BANK_TRANSFER:'BANK_TRANSFER',CUSTOM:'CUSTOM',PAY_ON_DELIVERY:'PAY_ON_DELIVERY'};f.exports=h;}),null);
__d('CommerceInvoiceAdminStore',['invariant','CommerceInvoiceAdminActions','CommerceInvoiceAdminActionsTypes','CommerceInvoiceAdminDispatcher','CommerceInvoicePaymentOptionCategory','FluxStore','immutable','PageProductTransactionOrderStatus','Map'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$CommerceInvoiceAdminStore1=true;this.$CommerceInvoiceAdminStore2=false;this.$CommerceInvoiceAdminStore3=false;this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore5=false;this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.$CommerceInvoiceAdminStore7=false;this.$CommerceInvoiceAdminStore8=null;this.$CommerceInvoiceAdminStore11='Draft';this.$CommerceInvoiceAdminStore12=k(new (c('Map'))());this.$CommerceInvoiceAdminStore13=k(new (c('Map'))());this.$CommerceInvoiceAdminStore14='';this.$CommerceInvoiceAdminStore10=null;this.$CommerceInvoiceAdminStore15();}l.prototype.$CommerceInvoiceAdminStore16=function(m){return {description:m.description,id:m.id,imageURL:m.image_url,name:m.name,permalink:m.permalink,price:m.current_price.amount/100};};l.prototype.$CommerceInvoiceAdminStore15=function(){this.$CommerceInvoiceAdminStore9=k(new (c('Map'))());this.$CommerceInvoiceAdminStore14='';};l.prototype.$CommerceInvoiceAdminStore17=function(){this.$CommerceInvoiceAdminStore8={isOnboarded:true,businessEmail:'test@test.com',paymentMethods:[{type:c('CommerceInvoicePaymentOptionCategory').BANK_TRANSFER,description:'*transfer detaile here*'}],shippingOptions:[{id:'1234',price:2000,currency:'USD',name:'UPS Ground'}],merchantSettings:{id:'1234567',defaultCurrency:'USD'}};};l.prototype.$CommerceInvoiceAdminStore18=function(m){this.$CommerceInvoiceAdminStore2=m;};l.prototype.$CommerceInvoiceAdminStore19=function(m){this.$CommerceInvoiceAdminStore3=m;};l.prototype.$CommerceInvoiceAdminStore20=function(m){this.$CommerceInvoiceAdminStore7=m;};l.prototype.$CommerceInvoiceAdminStore21=function(m){this.$CommerceInvoiceAdminStore14=m;};l.prototype.$CommerceInvoiceAdminStore22=function(m,n){var o=this.$CommerceInvoiceAdminStore9.get(m);o.price=n;this.$CommerceInvoiceAdminStore9=this.$CommerceInvoiceAdminStore9.set(m,Object.assign({},o));};l.prototype.$CommerceInvoiceAdminStore23=function(m){var n=new (c('Map'))();m.map(function(o){return n.set(o.id,this.$CommerceInvoiceAdminStore16(o));}.bind(this));this.$CommerceInvoiceAdminStore9=k(n);};l.prototype.$CommerceInvoiceAdminStore24=function(){this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.$CommerceInvoiceAdminStore12=k(new (c('Map'))());};l.prototype.$CommerceInvoiceAdminStore25=function(m,n){var o=new (c('Map'))();o.set(m,n);this.$CommerceInvoiceAdminStore13=k(o);};l.prototype.__onDispatch=function(m){switch(m.actionType){case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_FAILURE:this.$CommerceInvoiceAdminStore20(false);this.$CommerceInvoiceAdminStore19(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_START:this.$CommerceInvoiceAdminStore20(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_SUCCESS:this.$CommerceInvoiceAdminStore20(false);this.$CommerceInvoiceAdminStore18(false);this.$CommerceInvoiceAdminStore19(false);this.$CommerceInvoiceAdminStore15();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').HIDE_DIALOG:this.$CommerceInvoiceAdminStore18(false);this.$CommerceInvoiceAdminStore19(false);this.$CommerceInvoiceAdminStore15();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').HIDE_MANAGE_INVOICE_DIALOG:this.$CommerceInvoiceAdminStore24();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SAVE_CONFIG:this.$CommerceInvoiceAdminStore17();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_CONFIG:this.$CommerceInvoiceAdminStore8=m.config;this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_DETAILS:this.$CommerceInvoiceAdminStore25(m.invoiceID,m.invoiceDetails);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_NOTE:this.$CommerceInvoiceAdminStore21(m.invoiceNote);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_PRODUCT_PRICE:this.$CommerceInvoiceAdminStore22(m.productID,m.price);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_SELECTED_PRODUCTS:this.$CommerceInvoiceAdminStore23(m.products);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SHOW_DIALOG:this.$CommerceInvoiceAdminStore18(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SHOW_MANAGE_INVOICE_DIALOG:var n=new (c('Map'))();n.set(m.invoiceID,true);this.$CommerceInvoiceAdminStore4=k(n);c('CommerceInvoiceAdminActions').fetchInvoiceDetails(m.pageID,m.invoiceID);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_START:var o=new (c('Map'))();o.set(m.invoiceID,true);this.$CommerceInvoiceAdminStore6=k(o);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_SUCCESS:var p=this.$CommerceInvoiceAdminStore13.get(m.invoiceID);p.status=m.status;this.$CommerceInvoiceAdminStore25(m.invoiceID,p);this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').MANAGE_INVOICE_ERROR:var q=new (c('Map'))();q.set(m.invoiceID,m.errorMessage);this.$CommerceInvoiceAdminStore12=k(q);this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.__emitChange();break;}};l.prototype.getCanSaveConfig=function(){return this.$CommerceInvoiceAdminStore1;};l.prototype.getCanSendInvoice=function(){return this.$CommerceInvoiceAdminStore9.size>0;};l.prototype.getIsDialogVisible=function(){return this.$CommerceInvoiceAdminStore2;};l.prototype.getIsInvoicePendingApproval=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return !!n&&n.status===c('PageProductTransactionOrderStatus').PENDING_APPROVAL;};l.prototype.getIsInvoiceCancelled=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&n.status===c('PageProductTransactionOrderStatus').VOIDED);};l.prototype.getIsInvoiceFulfilled=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&n.status===c('PageProductTransactionOrderStatus').SHIPPED);};l.prototype.getIsInvoicePaid=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&!!n.selectedPaymentOption&&(n.status===c('PageProductTransactionOrderStatus').PAYMENT_SUBMITTED||n.status===c('PageProductTransactionOrderStatus').SHIPPED));};l.prototype.getIsManageInvoiceDialogVisible=function(m){return this.$CommerceInvoiceAdminStore4.get(m)===true;};l.prototype.getIsErrorMessageVisible=function(){return this.$CommerceInvoiceAdminStore3;};l.prototype.getIsSavingConfig=function(){return this.$CommerceInvoiceAdminStore5;};l.prototype.getIsSendingInvoice=function(){return this.$CommerceInvoiceAdminStore7;};l.prototype.getConfig=function(){return this.$CommerceInvoiceAdminStore8;};l.prototype.getInvoiceNote=function(){return this.$CommerceInvoiceAdminStore14;};l.prototype.getProductPrice=function(m){this.$CommerceInvoiceAdminStore9.get(m)||h(0);return this.$CommerceInvoiceAdminStore9.get(m).price;};l.prototype.getSelectedProducts=function(){return this.$CommerceInvoiceAdminStore9.toArray();};l.prototype.getStatusMessage=function(){return this.$CommerceInvoiceAdminStore11;};l.prototype.getManageInvoiceErrorMessage=function(m){return this.$CommerceInvoiceAdminStore12.get(m);};l.prototype.getSelectedShippingOption=function(){return this.$CommerceInvoiceAdminStore10;};l.prototype.getIsManageInvoiceDialogLoading=function(m){var n=this.$CommerceInvoiceAdminStore6.get(m)===true;return (n||this.getInvoiceDetails(m)==null);};l.prototype.getTotalCost=function(){var m=0;this.$CommerceInvoiceAdminStore9.forEach(function(n){return m+=n.price;});return m*100;};l.prototype.getInvoiceDetails=function(m){return this.$CommerceInvoiceAdminStore13.get(m);};f.exports=new l(c('CommerceInvoiceAdminDispatcher'));}),null);
__d('CommerceInvoiceCreateDialog.react',['cx','fbt','CommerceAdminInvoiceDetails.react','LayerFadeOnHide','LayerHideOnBlur','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=556;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);}m.prototype.$CommerceInvoiceCreateDialog1=function(){return (c('React').createElement('span',null,i._("New Invoice")));};m.prototype.$CommerceInvoiceCreateDialog2=function(){var n=this.props.isErrorMessageVisible?i._("Oops, something went wrong! Your invoice was not sent."):null;return (c('React').createElement('div',{className:"_1_bg"},c('React').createElement(c('CommerceAdminInvoiceDetails.react'),{canEditProducts:true,currency:this.props.currency,customerPhoneNumber:this.props.customerPhoneNumber,invoiceNote:this.props.invoiceNote,invoiceStatus:this.props.invoiceStatus,isInvoiceFulfilled:this.props.isInvoiceFulfilled,errorMessage:n,onNoteChanged:this.props.onNoteChanged,onPriceChange:this.props.onPriceChange,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,paymentOptions:this.props.paymentOptions,productScrollAreaHeight:this.props.productScrollAreaHeight,selectedProducts:this.props.selectedProducts,selectedShippingOption:this.props.selectedShippingOption,shippingAddress:this.props.shippingAddress,shippingOptions:this.props.shippingOptions,totalCost:this.props.totalCost})));};m.prototype.$CommerceInvoiceCreateDialog3=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:i._("Send"),use:'confirm',onClick:this.props.onSend,disabled:this.props.isSendButtonDisabled})));};m.prototype.render=function(){return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.isDialogVisible,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnBlur:c('LayerHideOnBlur')},onToggle:this.props.onToggle,width:l},c('React').createElement(c('XUIDialogTitle.react'),null,this.$CommerceInvoiceCreateDialog1()),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},this.$CommerceInvoiceCreateDialog2()),c('React').createElement(c('XUIDialogFooter.react'),null,this.$CommerceInvoiceCreateDialog3())));};f.exports=m;}),null);
__d("XCommerceTransactionInvoiceCreateAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction-invoice\/create\/",{});}),null);
__d('CommerceInvoiceAdminDialogContainer.react',['invariant','ActorURI','AsyncRequest','CommerceInvoiceAdminActions','CommerceInvoiceAdminDispatcher','CommerceInvoiceAdminStore','CommerceInvoiceCreateDialog.react','FluxContainer','FluxStore','React','XCommerceTransactionInvoiceCreateAsyncController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=250;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceAdminDialogContainer2=function(r,s){c('CommerceInvoiceAdminActions').setProductPrice(r,s);},this.$CommerceInvoiceAdminDialogContainer3=function(r){c('CommerceInvoiceAdminActions').setSelectedProducts(r);},this.$CommerceInvoiceAdminDialogContainer4=function(){c('CommerceInvoiceAdminActions').saveConfiguration();},this.$CommerceInvoiceAdminDialogContainer5=function(){c('CommerceInvoiceAdminActions').createInvoiceStart();var r=Math.round(this.state.selectedProducts[0].price*100),s=c('XCommerceTransactionInvoiceCreateAsyncController').getURIBuilder().getURI(),t=c('ActorURI').create(s,this.props.pageID);new (c('AsyncRequest'))().setURI(t).setMethod('POST').setData({page_id:this.props.pageID,customer_id:this.props.recipientID,product_id:this.state.selectedProducts[0].id,product_price:r,notes:this.state.invoiceNote}).setHandler(function(u){if(u.error)return c('CommerceInvoiceAdminActions').createInvoiceFailure(u);return c('CommerceInvoiceAdminActions').createInvoiceSuccess();}).setErrorHandler(function(u){return c('CommerceInvoiceAdminActions').createInvoiceFailure(u);}).send();}.bind(this),this.$CommerceInvoiceAdminDialogContainer6=function(r){if(!this.state.isDialogVisible&&r){c('CommerceInvoiceAdminActions').showDialog();}else if(this.state.isDialogVisible&&!r)c('CommerceInvoiceAdminActions').hideDialog();}.bind(this),n;}l.getStores=function(){return [c('CommerceInvoiceAdminStore')];};l.calculateState=function(m,n){var o=c('CommerceInvoiceAdminStore').getConfig(),p=o===null||o===undefined?null:o.merchantSettings.defaultCurrency;return {canSaveConfig:c('CommerceInvoiceAdminStore').getCanSaveConfig(),canSendInvoice:c('CommerceInvoiceAdminStore').getCanSendInvoice(),config:o,currency:p,invoiceNote:c('CommerceInvoiceAdminStore').getInvoiceNote(),invoiceStatus:c('CommerceInvoiceAdminStore').getStatusMessage(),isDialogVisible:c('CommerceInvoiceAdminStore').getIsDialogVisible(),isErrorMessageVisible:c('CommerceInvoiceAdminStore').getIsErrorMessageVisible(),isSavingConfig:c('CommerceInvoiceAdminStore').getIsSavingConfig(),isSendingInvoice:c('CommerceInvoiceAdminStore').getIsSendingInvoice(),price:0,selectedProducts:c('CommerceInvoiceAdminStore').getSelectedProducts(),selectedShippingOption:c('CommerceInvoiceAdminStore').getSelectedShippingOption(),totalCost:c('CommerceInvoiceAdminStore').getTotalCost()};};l.prototype.componentWillMount=function(){c('CommerceInvoiceAdminDispatcher').explicitlyRegisterStores([c('CommerceInvoiceAdminStore')]);c('CommerceInvoiceAdminActions').fetchConfig(this.props.pageID);};l.prototype.showDialog=function(){c('CommerceInvoiceAdminActions').showDialog();};l.prototype.$CommerceInvoiceAdminDialogContainer1=function(m){c('CommerceInvoiceAdminActions').setInvoiceNote(m);};l.prototype.render=function(){if(!this.state.isDialogVisible)return null;var m=this.state.config&&this.state.config.paymentMethods.length>0&&this.state.config.shippingOptions.length>0;if(!m)return null;this.state.currency!=null||h(0);return (c('React').createElement(c('CommerceInvoiceCreateDialog.react'),{currency:this.state.currency,invoiceNote:this.state.invoiceNote,invoiceStatus:this.state.invoiceStatus,isErrorMessageVisible:this.state.isErrorMessageVisible,isDialogVisible:this.state.isDialogVisible,isSendButtonDisabled:!this.state.canSendInvoice||this.state.isSendingInvoice,onNoteChanged:this.$CommerceInvoiceAdminDialogContainer1,onPriceChange:this.$CommerceInvoiceAdminDialogContainer2,onProductSelected:this.$CommerceInvoiceAdminDialogContainer3,onSend:this.$CommerceInvoiceAdminDialogContainer5,onToggle:this.$CommerceInvoiceAdminDialogContainer6,pageID:this.props.pageID,paymentOptions:this.state.config?this.state.config.paymentMethods:[],price:this.state.price,productScrollAreaHeight:k,selectedProducts:this.state.selectedProducts,selectedShippingOption:this.state.selectedShippingOption,shippingOptions:this.state.config?this.state.config.shippingOptions:[],totalCost:this.state.totalCost}));};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('FBPaymentsCartFlowContainerBase.react',['FBPaymentsPriceListHelper','React','abstractMethod','emptyFunction','idx','immutable','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('keyMirror')({CART_SUMMARY:null,CONFIGURE_ITEM_OPTIONS:null});h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$FBPaymentsCartFlowContainerBase1=function(n){this.setState({config:n});}.bind(this);this.$FBPaymentsCartFlowContainerBase2=function(n){this.setState({errorMessage:n.message});}.bind(this);this.$FBPaymentsCartFlowContainerBase5=function(){this.props.onClose();}.bind(this);this.$FBPaymentsCartFlowContainerBase6=function(n){this.setState({configuringCartItem:n,configuringCartItemKey:null,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase7=function(){this.setState({configuringCartItem:null,configuringCartItemKey:null,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase8=function(n){var o=this.state.configuringCartItemKey;if(o===null||o===undefined)o=this.$FBPaymentsCartFlowContainerBase4();var p=this.state.itemsInCart.set(o,n);this.setState({configuringCartItem:null,configuringCartItemKey:null,itemsInCart:p,step:k.CART_SUMMARY});}.bind(this);this.$FBPaymentsCartFlowContainerBase9=function(n){var o=this.state.itemsInCart.get(n);this.setState({configuringCartItem:o,configuringCartItemKey:n,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase10=function(n){var o=this.state.itemsInCart['delete'](n);this.setState({itemsInCart:o});}.bind(this);this.$FBPaymentsCartFlowContainerBase11=function(){this.props.onContinue&&this.props.onContinue(this.state.itemsInCart);}.bind(this);this.state={config:null,configuringCartItem:null,configuringCartItemKey:null,errorMessage:null,itemsInCart:new (c('immutable').List)(),step:k.CART_SUMMARY};}l.prototype.componentWillMount=function(){this.props.configLoader().done(this.$FBPaymentsCartFlowContainerBase1,this.$FBPaymentsCartFlowContainerBase2);};l.prototype.$FBPaymentsCartFlowContainerBase3=function(){return this.state.config&&this.state.config.itemCurrency||'USD';};l.prototype.$FBPaymentsCartFlowContainerBase4=function(){return this.state.itemsInCart.size;};l.prototype.__isCartFull=function(){var m=this.state.config&&this.state.config.maxCartItems;if(m===null||m===undefined||m<0)return false;return this.state.itemsInCart.size>=m;};l.prototype.$FBPaymentsCartFlowContainerBase12=function(){var m=this.state.itemsInCart,n={currency:this.$FBPaymentsCartFlowContainerBase3(),amount:'0'};m.forEach(function(o){n=c('FBPaymentsPriceListHelper').addPrices(n,o.getPrice());});return n;};l.prototype.render=function(){var m=void 0,n=void 0,o=this.state.config;if(o)if(this.state.step===k.CART_SUMMARY){var p=this.__getProductSearchContainer(),q=this.__isCartFull()?undefined:c('React').createElement(p,{canCreateCustomItem:!!o.customItemsConfig,onCartItemSelected:this.$FBPaymentsCartFlowContainerBase6,onCreateCustomItem:this.$FBPaymentsCartFlowContainerBase7,sellerID:this.props.sellerID}),r=this.__getCartSummaryScreen();n=c('React').createElement(r,{cartItems:this.state.itemsInCart,continueButtonLabel:this.props.continueButtonLabel,isContinueButtonDisabled:this.state.itemsInCart.size===0,onContinueButtonClicked:this.$FBPaymentsCartFlowContainerBase11,onEditCartItem:this.$FBPaymentsCartFlowContainerBase9,onRemoveCartItem:this.$FBPaymentsCartFlowContainerBase10,productSearchContainer:q,subtotal:this.$FBPaymentsCartFlowContainerBase12(),title:o.title});}else if(this.state.step===k.CONFIGURE_ITEM_OPTIONS){var s,t,u,v,w,x,y=this.__getCartProductConfigurationContainer(),z=!this.state.configuringCartItem,aa=((s=o)!=null?(t=s.catalogItemsConfig)!=null?t.customizePrice:t:s)&&!z,ba=(u=o)!=null?(v=u.customItemsConfig)!=null?v.itemFields:v:u,ca=(w=o)!=null?(x=w.customItemsConfig)!=null?x.quantityLimit:x:w;m=c('React').createElement(y,{cartItem:this.state.configuringCartItem,cartItemKey:this.state.configuringCartItemKey,customItemFields:ba,customItemMaxQuantity:ca,isCustomItem:z,isPriceEditable:aa,onAddItemToCart:this.$FBPaymentsCartFlowContainerBase8});}var da=this.__getCartFlowView();return (c('React').createElement(da,{cartSummaryScreen:n,errorMessage:this.state.errorMessage,isLoading:!o,onDialogClose:this.$FBPaymentsCartFlowContainerBase5,productConfigurationContainer:m,shown:this.props.shown}));};l.prototype.__getCartFlowView=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartFlowView');};l.prototype.__getCartSummaryScreen=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartSummaryScreen');};l.prototype.__getCartProductConfigurationContainer=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartProductConfigurationContainer');};l.prototype.__getProductSearchContainer=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getProductSearchContainer');};l.propTypes={configLoader:j.func.isRequired,continueButtonLabel:j.node,onClose:j.func.isRequired,onContinue:j.func,sellerID:j.string.isRequired,shown:j.bool.isRequired};l.defaultProps={onClose:c('emptyFunction'),shown:true};f.exports=l;}),null);
__d('FBPaymentsCartFlowViewBase.react',['React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.__shouldShowError=function(){return !!this.props.errorMessage;};k.prototype.__shouldShowLoading=function(){return !!this.props.isLoading;};k.prototype.__shouldShowProductConfiguration=function(){return !!this.props.productConfigurationContainer;};k.prototype.__renderBodyContent=function(){if(this.__shouldShowError()){return this.__renderError();}else if(this.__shouldShowLoading()){return this.__renderLoading();}else if(this.__shouldShowProductConfiguration()){return this.props.productConfigurationContainer;}else return this.props.cartSummaryScreen;};k.prototype.__renderLoading=function(){return c('abstractMethod')('FBPaymentsCartFlowViewBase','__renderLoading');};k.prototype.__renderError=function(){return c('abstractMethod')('FBPaymentsCartFlowViewBase','__renderError');};function k(){h.apply(this,arguments);}k.propTypes={cartSummaryScreen:j.element,errorMessage:j.node,isLoading:j.bool,onDialogClose:j.func.isRequired,productConfigurationContainer:j.element,shown:j.bool.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartFlowView.react',['cx','FBPaymentsCartFlowViewBase.react','FBPaymentsLoadingView.react','LayerHideOnBlur','LayerHideOnEscape','React','XUIDialog.react','XUINotice.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=325;i=babelHelpers.inherits(l,c('FBPaymentsCartFlowViewBase.react'));j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBPaymentsCartFlowView1=function(r){if(!r)this.props.onDialogClose();}.bind(this),n;}l.prototype.__renderLoading=function(){return c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,isVisible:true});};l.prototype.__renderError=function(){return (c('React').createElement(c('XUINotice.react'),{size:'medium',use:'warn'},this.props.errorMessage));};l.prototype.render=function(){var m="_xfh"+(this.__shouldShowError()?' '+"_2ph_":'')+(!this.props.shown?' '+"hidden_elem":''),n={LayerHideOnEscape:c('LayerHideOnEscape')},o=this.__shouldShowError();if(o)n=babelHelpers['extends']({},n,{LayerHideOnBlur:c('LayerHideOnBlur')});return (c('React').createElement(c('XUIDialog.react'),{behaviors:n,layerHideOnBlur:false,onToggle:this.$FBPaymentsCartFlowView1,shown:true,width:k},c('React').createElement('div',{className:m},this.__renderBodyContent())));};f.exports=l;}),null);
__d('FBPaymentsCartProductConfigurationContainerBase.react',['invariant','FBPaymentsCartItem','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$FBPaymentsCartProductConfigurationContainerBase2=function(){var o=babelHelpers['extends']({},this.props.cartItem,{quantity:this.state.quantity});if(this.props.isCustomItem){o.quantityLimit=this.props.customItemMaxQuantity;var p=this.state.customItemFormData;for(var q=Object.entries(p),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t,v=u[0],w=u[1],x=this.props.customItemFields.get(v);if(x.type==='currency'){o.unitPrice={currency:x.currency,amount:w};}else o[v]=w;}}else if(this.state.priceAmount)o.unitPrice={currency:this.props.cartItem.unitPrice.currency,amount:this.state.priceAmount};var y=new (c('FBPaymentsCartItem'))(o);this.props.onAddItemToCart(y);}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase3=function(o,p){if(!this.props.isCustomItem)return;this.setState({customItemFormData:o,isAddButtonEnabled:p});}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase4=function(o,p){if(!this.props.isPriceEditable)return;this.setState({priceAmount:o.price,isAddButtonEnabled:p});}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase5=function(o){this.setState({quantity:o});}.bind(this);this.assertValidProps(m);var n=m.cartItem?m.cartItem.quantity:1;this.state={customItemFormData:{},isAddButtonEnabled:true,priceAmount:'',quantity:n};}l.prototype.assertValidProps=function(m){!(m.isCustomItem&&m.isPriceEditable)||h(0);if(m.isCustomItem){!!m.customItemFields||h(0);}else !!m.cartItem||h(0);};l.prototype.$FBPaymentsCartProductConfigurationContainerBase1=function(){var m=this.props.cartItem,n=void 0;if(this.props.isCustomItem){n=this.props.customItemMaxQuantity;}else if(m)n=m.quantityLimit;return n;};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsCartProductConfigurationContainerBase','__getView');};l.prototype.render=function(){var m=this.__getView();return (c('React').createElement(m,babelHelpers['extends']({},this.state,{cartItem:this.props.cartItem,customItemFields:this.props.customItemFields,isCustomItem:this.props.isCustomItem,isPriceEditable:this.props.isPriceEditable,maxQuantity:this.$FBPaymentsCartProductConfigurationContainerBase1(),onAddItemToCart:this.$FBPaymentsCartProductConfigurationContainerBase2,onCustomItemFormChange:this.$FBPaymentsCartProductConfigurationContainerBase3,onPriceChange:this.$FBPaymentsCartProductConfigurationContainerBase4,onQuantityChange:this.$FBPaymentsCartProductConfigurationContainerBase5})));};l.propTypes={cartItem:k.object,customItemFields:k.object,customItemMaxQuantity:k.number,isCustomItem:k.bool.isRequired,isPriceEditable:k.bool.isRequired,onAddItemToCart:k.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsCartBodyBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartBody.react',['cx','FBPaymentsCartBodyBase.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartBodyBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_222z"},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartFooterBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartFooter.react',['cx','FBPaymentsCartFooterBase.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartFooterBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_222q"},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartHeaderBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){h.apply(this,arguments);}k.propTypes={title:j.node.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartHeader.react',['cx','FBPaymentsCartHeaderBase.react','React','XUIDialogTitle.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartHeaderBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_1iw9"},c('React').createElement(c('XUIDialogTitle.react'),{className:"_222x"},c('React').createElement(c('XUIGrayText.react'),{className:"_222y",shade:'dark',size:'small'},this.props.title)),this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartProductConfigurationViewBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.getFormattedItemPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getHeaderTitle=function(){if(this.props.isCustomItem)return h._("Add Custom Item");return h._("Select Options");};m.prototype.getAddButtonLabel=function(){return h._("Add");};m.prototype.getQuantityLabel=function(){return h._("Quantity");};m.prototype.shouldRenderPriceField=function(){return !this.props.isCustomItem&&this.props.isPriceEditable;};m.prototype.shouldRenderCustomItemForm=function(){return this.props.isCustomItem&&!!this.props.customItemFields;};function m(){i.apply(this,arguments);}m.propTypes={cartItem:l.object,customItemFields:l.object,isAddButtonEnabled:l.bool.isRequired,isCustomItem:l.bool,isPriceEditable:l.bool.isRequired,maxQuantity:l.number,onAddItemToCart:l.func.isRequired,onCustomItemFormChange:l.func.isRequired,onPriceChange:l.func,onQuantityChange:l.func.isRequired,quantity:l.number.isRequired};m.defaultProps={isAddButtonEnabled:true,isPriceEditable:false};f.exports=m;}),null);
__d('FBPaymentsCartProductConfigurationView.react',['cx','AdsIncrementalNumberInput.react','FBPaymentsCartBody.react','FBPaymentsCartFooter.react','FBPaymentsCartHeader.react','FBPaymentsCartProductConfigurationViewBase.react','FBPaymentsCustomForm.react','FBPaymentsForm.react','FBPaymentsItemSummaryView.react','FBPaymentsPriceFormField.react','React','XUIButton.react','XUIGrayText.react','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=1,l=48;i=babelHelpers.inherits(m,c('FBPaymentsCartProductConfigurationViewBase.react'));j=i&&i.prototype;m.prototype.renderProductHeader=function(){var n=this.props.cartItem;if(this.props.isCustomItem||!n)return null;var o=void 0;if(!this.props.isPriceEditable)o=c('React').createElement('div',{className:"_1i26 _3-9b"},c('React').createElement(c('XUIGrayText.react'),{shade:'dark',size:'small'},this.getFormattedItemPrice(n.unitPrice)));var p=c('React').createElement(c('XUIGrayText.react'),{className:"_222y",display:'block',shade:'dark',size:'small'},n.title),q=c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},n.subtitle);return (c('React').createElement('div',{className:"_36ny"},c('React').createElement(c('FBPaymentsItemSummaryView.react'),{imageSrc:n.imageURL||'',imageHeight:l,imageWidth:l,rightContent:o},p,q)));};m.prototype.renderCustomItemForm=function(){if(!this.shouldRenderCustomItemForm()||!this.props.customItemFields)return null;return (c('React').createElement(c('FBPaymentsCustomForm.react'),{fields:Array.from(this.props.customItemFields.values()),onChange:this.props.onCustomItemFormChange}));};m.prototype.renderPriceField=function(){var n,o;if(!this.shouldRenderPriceField())return null;var p=(n=this.props.cartItem)!=null?(o=n.unitPrice)!=null?o.amount:o:n;return (c('React').createElement(c('FBPaymentsForm.react'),{onChange:this.props.onPriceChange},c('React').createElement(c('FBPaymentsPriceFormField.react'),{className:"_3-96",name:'price',value:p})));};m.prototype.renderQuantitySelector=function(){var n=c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _4px8",display:'block',shade:'dark',size:'small'},this.getQuantityLabel());return (c('React').createElement('div',null,n,c('React').createElement(c('AdsIncrementalNumberInput.react'),{arrowStyle:'dark',max:this.props.maxQuantity||undefined,min:k,onChange:this.props.onQuantityChange,showDisabled:true,value:this.props.quantity})));};m.prototype.renderProductConfigurations=function(){return (c('React').createElement('div',null,this.renderPriceField(),this.renderCustomItemForm(),this.renderQuantitySelector()));};m.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('FBPaymentsCartHeader.react'),{title:this.getHeaderTitle()}),c('React').createElement(c('FBPaymentsCartBody.react'),null,this.renderProductHeader(),c('React').createElement('div',{className:"_2ph_"},this.renderProductConfigurations())),c('React').createElement(c('FBPaymentsCartFooter.react'),null,c('React').createElement(c('XUIButton.react'),{className:"_222r",disabled:!this.props.isAddButtonEnabled,label:this.getAddButtonLabel(),size:'large',onClick:this.props.onAddItemToCart,use:'confirm'}))));};function m(){i.apply(this,arguments);}f.exports=m;}),null);
__d('FBPaymentsCartProductConfigurationContainer.react',['FBPaymentsCartProductConfigurationContainerBase.react','FBPaymentsCartProductConfigurationView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductConfigurationContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsCartProductConfigurationView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartProductSearchContainerBase.react',['React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsCartProductSearchContainerBase','__getView');};k.prototype.render=function(){var l=this.__getView();return (c('React').createElement(l,this.props));};function k(){h.apply(this,arguments);}k.propTypes={canCreateCustomItem:j.bool.isRequired,onCartItemSelected:j.func.isRequired,onCreateCustomItem:j.func,sellerID:j.string.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartProductSearchViewBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){h.apply(this,arguments);}k.propTypes={canCreateCustomItem:j.bool.isRequired,onCartItemSelected:j.func.isRequired,onCreateCustomItem:j.func,sellerID:j.string.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartProductSearchView.react',['CommerceProductItemSearchSelector.react','FBPaymentsCartItem','FBPaymentsCartProductSearchViewBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductSearchViewBase.react'));i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$FBPaymentsCartProductSearchView1=function(p){var q=p[0],r=q.current_price,s=q.description,t=q.id,u=q.image_url,v=q.inventory,w=q.name,x=new (c('FBPaymentsCartItem'))({id:t,imageURL:u,isSelectable:true,quantity:1,quantityLimit:v,subtitle:s,title:w,unitPrice:{amount:r.raw_label,currency:r.currency}});this.props.onCartItemSelected(x);}.bind(this),l;}j.prototype.render=function(){return (c('React').createElement(c('CommerceProductItemSearchSelector.react'),{canCreateProduct:this.props.canCreateCustomItem,onAddProductClick:this.props.onCreateCustomItem,onProductSelected:this.$FBPaymentsCartProductSearchView1,pageID:this.props.sellerID,productScrollAreaHeight:250,showAsDropdownMenu:true}));};f.exports=j;}),null);
__d('FBPaymentsCartProductSearchContainer.react',['FBPaymentsCartProductSearchContainerBase.react','FBPaymentsCartProductSearchView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductSearchContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsCartProductSearchView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartItemSummaryBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.PRODUCT_IMAGE_SIZE=48,this.handleEditClick=function(){this.props.onEdit(this.props.cartItemKey);}.bind(this),this.handleRemoveClick=function(){this.props.onRemove(this.props.cartItemKey);}.bind(this),o;}m.prototype.getFormattedPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getQuantityDescription=function(){var n=this.props.cartItem;if(n.quantity>1)return h._("Quantity: {quantity} ({unit_price} ea)",[h.param('quantity',n.quantity),h.param('unit_price',this.getFormattedPrice(n.unitPrice))]);return h._("Quantity: {quantity}",[h.param('quantity',n.quantity)]);};m.prototype.getEditLabel=function(){return h._("Edit");};m.prototype.getRemoveLabel=function(){return h._("Remove");};m.propTypes={cartItem:l.object.isRequired,cartItemKey:l.number.isRequired,onEdit:l.func.isRequired,onRemove:l.func.isRequired};f.exports=m;}),null);
__d('FBPaymentsCartItemSummary.react',['cx','FBPaymentsCartItemSummaryBase.react','FBPaymentsItemSummaryView.react','Link.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartItemSummaryBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.props.cartItem,m=c('React').createElement(c('XUIGrayText.react'),{className:"_486y",display:'block',shade:'dark',size:'small'},l.title),n=c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},this.getQuantityDescription()),o=c('React').createElement(c('XUIGrayText.react'),{className:"_3-9a",shade:'light',size:'small'},this.getFormattedPrice(l.getPrice())),p=c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('Link.react'),{className:"_3-90",onClick:this.handleEditClick},this.getEditLabel()),c('React').createElement(c('Link.react'),{onClick:this.handleRemoveClick},this.getRemoveLabel()));return (c('React').createElement(c('FBPaymentsItemSummaryView.react'),{className:"_36ny",imageSrc:l.imageURL||'',imageHeight:this.PRODUCT_IMAGE_SIZE,imageWidth:this.PRODUCT_IMAGE_SIZE,rightContent:o},m,n,p));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartSummaryScreenBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldShowSearchBar=function(){return !!this.props.productSearchContainer;};m.prototype.getFormattedPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getSubtotalLabel=function(){return h._("Subtotal");};m.prototype.getScreenTitle=function(){return this.props.title;};m.prototype.getDisabledButtonText=function(){return h._("No Products Selected");};m.prototype.getContinueButtonText=function(){return (this.props.continueButtonLabel||h._("Continue"));};m.prototype.getButtonText=function(){return this.props.isContinueButtonDisabled?this.getDisabledButtonText():this.getContinueButtonText();};function m(){i.apply(this,arguments);}m.propTypes={cartItems:l.oneOfType([l.arrayOf(l.shape({id:l.string.isRequired})),l.object.isRequired]),continueButtonLabel:l.node,isContinueButtonDisabled:l.bool.isRequired,onContinueButtonClicked:l.func,onEditCartItem:l.func.isRequired,onRemoveCartItem:l.func.isRequired,productSearchContainer:l.element,subtotal:l.object.isRequired,title:l.node.isRequired};f.exports=m;}),null);
__d('FBPaymentsCartSummaryScreen.react',['cx','FBPaymentsCartBody.react','FBPaymentsCartFooter.react','FBPaymentsCartHeader.react','FBPaymentsCartItemSummary.react','FBPaymentsCartSummaryScreenBase.react','LeftRight.react','React','ScrollableArea.react','XUIButton.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=304;i=babelHelpers.inherits(l,c('FBPaymentsCartSummaryScreenBase.react'));j=i&&i.prototype;l.prototype.$FBPaymentsCartSummaryScreen1=function(){if(!this.shouldShowSearchBar())return null;return (c('React').createElement('div',{className:"_222p"},this.props.productSearchContainer));};l.prototype.$FBPaymentsCartSummaryScreen2=function(){var m=this.props.cartItems.map(function(n,o){return (c('React').createElement(c('FBPaymentsCartItemSummary.react'),{cartItem:n,cartItemKey:o,key:o,onEdit:this.props.onEditCartItem,onRemove:this.props.onRemoveCartItem}));}.bind(this));return (c('React').createElement(c('ScrollableArea.react'),{fade:true,height:k,shadow:false},m));};l.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('FBPaymentsCartHeader.react'),{title:this.getScreenTitle()},this.$FBPaymentsCartSummaryScreen1()),c('React').createElement(c('FBPaymentsCartBody.react'),null,this.$FBPaymentsCartSummaryScreen2()),c('React').createElement(c('FBPaymentsCartFooter.react'),null,c('React').createElement(c('LeftRight.react'),{className:"_3-96"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark'},this.getSubtotalLabel()),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark'},this.getFormattedPrice(this.props.subtotal))),c('React').createElement(c('XUIButton.react'),{className:"_222r",disabled:this.props.isContinueButtonDisabled,label:this.getButtonText(),size:'large',onClick:this.props.onContinueButtonClicked,use:'confirm'}))));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBPaymentsCartFlowContainer.react',['FBPaymentsCartFlowContainerBase.react','FBPaymentsCartFlowView.react','FBPaymentsCartProductConfigurationContainer.react','FBPaymentsCartProductSearchContainer.react','FBPaymentsCartSummaryScreen.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartFlowContainerBase.react'));i=h&&h.prototype;j.prototype.__getCartFlowView=function(){return c('FBPaymentsCartFlowView.react');};j.prototype.__getCartSummaryScreen=function(){return c('FBPaymentsCartSummaryScreen.react');};j.prototype.__getCartProductConfigurationContainer=function(){return c('FBPaymentsCartProductConfigurationContainer.react');};j.prototype.__getProductSearchContainer=function(){return c('FBPaymentsCartProductSearchContainer.react');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=babelHelpers['extends']({},c('FBPaymentsCartFlowContainerBase.react').propTypes);f.exports=j;}),null);
__d('FBPaymentsInvoiceFlowContainerBase.react',['fbt','invariant','Promise','FBPaymentsCartItem','FBPaymentsCheckoutConstants','FBPaymentsModulesFlowType','FBPaymentsPriceListHelper','Map','PaymentItemTypeFields','React','abstractMethod','idx','keyMirror'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('FBPaymentsCheckoutConstants').Extensions,n=c('FBPaymentsCheckoutConstants').OrderStatusModelType,o=c('FBPaymentsCheckoutConstants').PaymentAction,p=c('FBPaymentsCheckoutConstants').PaymentCallbackUpdateState,q=c('keyMirror')({CREATE_CART:null,CREATE_INVOICE:null});j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(s){k.constructor.call(this,s);this.cartConfigLoader=function(){return new (c('Promise'))(function(t,u){this.__getAPI().fetchInvoiceConfig({buyer_id:this.props.buyerID,seller_id:this.props.sellerID,client:this.props.client},function(v){this.setState({invoiceConfig:v});t(v.invoiceCreationConfig);}.bind(this),u);}.bind(this));}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase1=function(t){this.setState({buyerProfile:t});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase2=function(t){this.setState({step:q.CREATE_INVOICE,invoiceItems:t.toArray()});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase3=function(){this.setState({step:q.CREATE_CART});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase4=function(){var t=false,u=new (c('Map'))();this.props.onClose&&this.props.onClose(t,u);}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase5=function(t,u){var v,w,x=this.state.invoiceItems||[],y=x.map(c('FBPaymentsCartItem').serializeForServer),z=((v=t.get(m.CUSTOM_OPTIONS))!=null?v.extraData:v)||{},aa=z.optionId,ba=z.customOption;aa||ba||i(0);var ca=void 0,da=[];if(ba){da.push({title:ba.optionTitle,currency_amount:ba.optionPrice});}else if(aa)ca=[aa];var ea=((w=t.get(m.NOTE))!=null?w.extraData:w)||{},fa=ea.note;this.__getAPI().createInvoice({client_mutation_id:'13245789',actor_id:this.props.sellerID,client:this.props.client,seller_id:this.props.sellerID,buyer_id:this.props.buyerID,items:y,notes:fa,selected_options:{shipping_options:ca},custom_shipping_options:da},this.$FBPaymentsInvoiceFlowContainerBase6.bind(this,u),this.$FBPaymentsInvoiceFlowContainerBase7.bind(this,u));}.bind(this);this.state={buyerProfile:null,invoiceConfig:null,invoiceItems:null,step:q.CREATE_CART};}r.prototype.componentWillMount=function(){this.__getAPI().fetchUserBasicProfile({id:this.props.buyerID},this.$FBPaymentsInvoiceFlowContainerBase1);};r.prototype.$FBPaymentsInvoiceFlowContainerBase6=function(s,t){s({state:p.DONE});var u=true,v=new (c('Map'))();v.set('invoice',{invoiceID:t});this.props.onClose&&this.props.onClose(u,v);};r.prototype.$FBPaymentsInvoiceFlowContainerBase7=function(s,t){s({state:p.ERROR,errorMessage:t.message});};r.prototype.$FBPaymentsInvoiceFlowContainerBase8=function(){var s=this.state.invoiceConfig;if(!s)return {};var t=s.invoiceContentConfiguration,u=t.priceList,v=t.purchaseInfo,w=this.state.invoiceItems||[],x=w.map(function(ca){return c('FBPaymentsPriceListHelper').newBasePrice(ca.title,ca.getPrice());}),y=[{label:this.$FBPaymentsInvoiceFlowContainerBase9(),priceList:x}],z=c('FBPaymentsPriceListHelper').merge(y,u),aa=this.state.buyerProfile||{},ba={version:'1.0',paymentInfo:{payCallback:this.$FBPaymentsInvoiceFlowContainerBase5,paymentItemType:c('PaymentItemTypeFields').NMOR_PAGES_COMMERCE,action:o.CUSTOM_CALLBACK,receiverId:this.props.sellerID},orderStatusModel:{type:n.FIXED_AMOUNT},contentConfiguration:{entity:{participant:{title:aa.name,imageURL:aa.profilePictureUrl}},items:[],priceList:z,purchaseInfo:v,payActionContent:{actionTitle:this.$FBPaymentsInvoiceFlowContainerBase10(),backButton:true,backButtonCallback:this.$FBPaymentsInvoiceFlowContainerBase3,customTermsAndPoliciesText:c('React').createElement('span',null)}}};return ba;};r.prototype.$FBPaymentsInvoiceFlowContainerBase11=function(){return h._("Payment Request");};r.prototype.$FBPaymentsInvoiceFlowContainerBase9=function(){return h._("Subtotal");};r.prototype.$FBPaymentsInvoiceFlowContainerBase12=function(){return h._("Continue to Payment Request");};r.prototype.$FBPaymentsInvoiceFlowContainerBase10=function(){return h._("Request Payment");};r.prototype.render=function(){var s=this.__getCartContainer(),t=this.state.step===q.CREATE_CART,u=c('React').createElement(s,{configLoader:this.cartConfigLoader,continueButtonLabel:this.$FBPaymentsInvoiceFlowContainerBase12(),onClose:this.props.onClose,onContinue:this.$FBPaymentsInvoiceFlowContainerBase2,sellerID:this.props.sellerID,shown:t}),v=this.__getCheckoutContainer(),w=this.state.step===q.CREATE_INVOICE?c('React').createElement(v,{configuration:this.$FBPaymentsInvoiceFlowContainerBase8(),dialogTitle:this.$FBPaymentsInvoiceFlowContainerBase11(),onCheckoutClosed:this.$FBPaymentsInvoiceFlowContainerBase4,onConfirmationClosed:this.props.onClose,paymentModuleFlowType:c('FBPaymentsModulesFlowType').INVOICE}):null;return (c('React').createElement('div',null,u,w));};r.prototype.__getCartContainer=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getCartContainer');};r.prototype.__getCheckoutContainer=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getCheckoutContainer');};r.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getAPI');};r.propTypes={buyerID:l.string.isRequired,client:l.string.isRequired,onClose:l.func,sellerID:l.string.isRequired};f.exports=r;}),null);
__d('FBPaymentsInvoiceFlowContainer.react',['FBPaymentsCartFlowContainer.react','FBPaymentsCheckoutFlowContainer.react','FBPaymentsInvoiceFlowContainerBase.react','FBPaymentsModulesAPI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsInvoiceFlowContainerBase.react'));i=h&&h.prototype;j.prototype.__getCartContainer=function(){return c('FBPaymentsCartFlowContainer.react');};j.prototype.__getCheckoutContainer=function(){return c('FBPaymentsCheckoutFlowContainer.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=babelHelpers['extends']({},c('FBPaymentsInvoiceFlowContainerBase.react').propTypes);f.exports=j;}),null);
__d('CommerceInvoiceAdminButton.react',['cx','fbt','BOFSellerLoggerEvent','CommerceCommonNUXAPI','CommerceContactMerchantAPI','CommerceCurrencyUtil','CommerceInvoiceAdminActions','CommerceInvoiceAdminDialogContainer.react','CommerceInvoiceAdminDispatcher','CommerceInvoiceAdminStore','CommerceInvoiceButtonNUX.react','CommerceInvoiceButtonPUX.react','CommerceSelfServeNUXType','FBPaymentsInvoiceFlowContainer.react','FluxContainer','Image.react','Link.react','PaymentModulesClient','React','TooltipData','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$CommerceInvoiceAdminButton1=function(){return this.refs.invoiceButton;}.bind(this);this.$CommerceInvoiceAdminButton2=function(){if(this.state.isInvoiceSetupComplete){if(this.props.shouldShowPUX)c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_CLICK,nuxType:c('CommerceSelfServeNUXType').INVOICE_PAYMENTS_CREATION_PUX,pageID:this.props.pageID});this.setState({dialogIsVisible:true});this.refs.invoiceDialog&&this.refs.invoiceDialog.showDialog();}else this.setState({nuxShown:true});}.bind(this);this.$CommerceInvoiceAdminButton3=function(){this.setState({dialogIsVisible:false});}.bind(this);this.$CommerceInvoiceAdminButton4=function(){c('CommerceContactMerchantAPI').markInvoicePaymentsInvoiceButtonNUXSeen({pageID:this.props.pageID});this.setState({nuxShown:false});}.bind(this);this.state={dialogIsVisible:false,isInvoiceSetupComplete:false,isShippingOptionsBlocking:false,nuxShown:m.shouldShowNUX};}l.getStores=function(){return [c('CommerceInvoiceAdminStore')];};l.calculateState=function(m,n){var o=c('CommerceInvoiceAdminStore').getConfig()||{},p=o.paymentMethods,q=o.shippingOptions,r=p&&p.length>0,s=q&&q.length>0,t=n.shouldShowShippingNUX&&!s;return {isInvoiceSetupComplete:r&&!t,isShippingOptionsBlocking:r&&t};};l.prototype.componentWillMount=function(){c('CommerceInvoiceAdminDispatcher').explicitlyRegisterStores([c('CommerceInvoiceAdminStore')]);c('CommerceInvoiceAdminActions').fetchConfig(this.props.pageID);};l.prototype.$CommerceInvoiceAdminButton5=function(){if(!this.state.isInvoiceSetupComplete)return (c('React').createElement(c('CommerceInvoiceButtonNUX.react'),{contextRef:this.$CommerceInvoiceAdminButton1,linkRef:'AdminButton',onNUXSeen:this.$CommerceInvoiceAdminButton4,pageID:this.props.pageID,shown:this.state.nuxShown,showSecondaryMessage:this.state.isShippingOptionsBlocking}));if(this.props.shouldShowPUX)return (c('React').createElement(c('CommerceInvoiceButtonPUX.react'),{contextRef:this.$CommerceInvoiceAdminButton1,pageID:this.props.pageID,recipientID:this.props.recipientID,shown:true}));return null;};l.prototype.render=function(){var m=i._("Request Payment"),n=c('joinClasses')("_4h_d",this.props.className),o=void 0;if(this.state.dialogIsVisible)o=this.props.shouldOpenNewFlow?c('React').createElement(c('FBPaymentsInvoiceFlowContainer.react'),{buyerID:this.props.recipientID,client:c('PaymentModulesClient').PAGES_COMMERCE,onClose:this.$CommerceInvoiceAdminButton3,sellerID:this.props.pageID}):c('React').createElement(c('CommerceInvoiceAdminDialogContainer.react'),{isVisible:this.state.dialogIsVisible,pageID:this.props.pageID,recipientID:this.props.recipientID,ref:'invoiceDialog'});return (c('React').createElement('div',{className:n},c('React').createElement(c('Link.react'),babelHelpers['extends']({className:"_4h_e",href:'#',onClick:this.$CommerceInvoiceAdminButton2},c('TooltipData').propsFor(m)),c('React').createElement(c('Image.react'),{className:"_4h_f",ref:'invoiceButton',src:c('CommerceCurrencyUtil').getIconSrc(this.props.defaultCurrency)}),this.$CommerceInvoiceAdminButton5()),o));};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('ChatFileUploaderMixin',['SubscriptionsHandler','React'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i={propTypes:{attachmentsShelf:h.object,onFileUploaderMounted:h.func,onUploadFinished:h.func,onUpdateAttachmentsShelf:h.func,onSubmit:h.func},setUpSubscriptionsHandler:function j(k){this._uploader=k;this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function j(){return this._uploader.isUploading();},getAttachments:function j(){return this._uploader.getAttachments();},getImageFiles:function j(){return this._uploader.getImageFiles();},getVideoFiles:function j(){return this._uploader.getVideoFiles();},getAudioFiles:function j(){return this._uploader.getAudioFiles();},getFiles:function j(){return this._uploader.getFiles();},removeAttachments:function j(){return this._uploader.removeAttachments();},_handleUploadFinished:function j(){if(this.props.onUploadFinished){var k;(k=this.props).onUploadFinished.apply(k,arguments);}},_handleUpdateAttachmentsShelf:function j(){if(this.props.onUpdateAttachmentsShelf){var k;(k=this.props).onUpdateAttachmentsShelf.apply(k,arguments);}},_handleSubmit:function j(){if(this.props.onSubmit){var k;(k=this.props).onSubmit.apply(k,arguments);}}};f.exports=i;}),null);
__d('MercuryFileUploader',['csx','fbt','ArbiterMixin','CSS','Dialog','DOM','Event','FileForm','FileFormResetOnSubmit','FileInput','FormSubmitOnChange','MercuryAttachment','MercuryAttachmentTemplates','MercuryConstants','PhotosUploadID','SubscriptionsHandler','getObjectValues','mixin','shield'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function l(n,o,p,q){'use strict';k.constructor.call(this);this.$MercuryFileUploader1=n;this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader8={};this.$MercuryFileUploader9={};this.$MercuryFileUploader10={};this.updateElements(o,p,q);}l.prototype.updateElements=function(n,o,p){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new (c('SubscriptionsHandler'))();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new (c('FileForm'))(n,[c('FormSubmitOnChange'),c('FileFormResetOnSubmit')]);this.$MercuryFileUploader12.setAllowCrossOrigin(true);this.$MercuryFileUploader12.setUploadInParallel(true);var q=c('DOM').find(n,"._4q60"),r=c('DOM').find(q,"._4q61");new (c('FileInput'))(q,r,o);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe('submit',function(){var s={count:0,file_sizes:[],files:[]};if(o.files){for(var t=0;t<o.files.length;t++)if(o.files[t].size>c('MercuryConstants').AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var u={};for(var v=0;v<o.files.length;v++){var w=this.$MercuryFileUploader13();this.$MercuryFileUploader14(w,o.files[v].name);s.count++;s.file_sizes.push(o.files[v].size);u[w]=o.files[v];s.files.push({upload_id:w,metadata:o.files[v]});}this.$MercuryFileUploader12.setFiles(u);}else{p.value=this.$MercuryFileUploader13();this.$MercuryFileUploader14(p.value,o.value);s.count=1;}this.inform('submit',s);}.bind(this)),this.$MercuryFileUploader12.subscribe('success',this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe('failure',this.$MercuryFileUploader16.bind(this)),c('Event').listen(r,'click',c('shield')(this.inform,this,'open')));};l.prototype.showAttachmentSizeErrorDialog=function(){'use strict';this.$MercuryFileUploader12.abort();this.$MercuryFileUploader12.clear();new (c('Dialog'))().setTitle(i._("The file you have selected is too large")).setBody(i._("The file you have selected is too large. The maximum size is 25MB.")).setButtons(c('Dialog').OK).setSemiModal(true).show();};l.prototype.addDroppedFiles=function(n){'use strict';if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var o={},p={count:0,file_sizes:[],files:[]};for(var q=0;q<n.length;q++){var r=n[q];if(r.size>c('MercuryConstants').AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var s=this.$MercuryFileUploader13();this.$MercuryFileUploader14(s,r.name);o[s]=r;p.file_sizes.push(r.size);p.count++;p.files.push({upload_id:s,metadata:r});}this.$MercuryFileUploader12.setFiles(o);this.$MercuryFileUploader12.forceSendViaXHR();this.inform('submit',p);};l.prototype.isUploading=function(){'use strict';return !!Object.keys(this.$MercuryFileUploader8).length;};l.prototype.addCachedAttachments=function(n){'use strict';n.forEach(function(o){var p=this.$MercuryFileUploader13();this.$MercuryFileUploader14(p,o.filename);this.inform('cached-file-added',{upload_id:p,metadata:o});this.$MercuryFileUploader17(p,o);}.bind(this));};l.prototype.addCachedImageFiles=function(n){'use strict';var o=i._("Photo");n.forEach(function(p){var q=this.$MercuryFileUploader13();this.$MercuryFileUploader14(q,o);this.$MercuryFileUploader17(q,{filename:p,image_id:p,filetype:'image/jpeg'});}.bind(this));};l.prototype.getAttachments=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader2);};l.prototype.getImageFiles=function(){'use strict';var n=Object.keys(this.$MercuryFileUploader3).sort(),o=[];n.forEach(function(p){return o.push(this.$MercuryFileUploader3[p]);}.bind(this));return o;};l.prototype.getAnimatedImageFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader4);};l.prototype.getVideoFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader5);};l.prototype.getAudioFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader6);};l.prototype.getFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader7);};l.prototype.removeOneAttachment=function(n){'use strict';this.$MercuryFileUploader18(n);};l.prototype.removeAttachments=function(){'use strict';if(this.$MercuryFileUploader1)c('DOM').empty(this.$MercuryFileUploader1);this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader9={};this.$MercuryFileUploader8={};this.$MercuryFileUploader10={};if(this.$MercuryFileUploader1)c('CSS').hide(this.$MercuryFileUploader1);this.inform('dom-updated');};l.prototype.destroy=function(){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.removeAttachments();};l.prototype.$MercuryFileUploader14=function(n,o){'use strict';var p=c('MercuryAttachmentTemplates')[':fb:mercury:upload-file-row'].build(),q={};this.$MercuryFileUploader9[n]=p;this.$MercuryFileUploader8[n]=true;this.$MercuryFileUploader10[n]=Date.now();var r=m(o);c('DOM').appendContent(p.getNode('iconText'),r);q.fileName=r;c('Event').listen(p.getNode('closeFileUpload'),'click',this.$MercuryFileUploader18.bind(this,n));if(this.$MercuryFileUploader1){c('DOM').appendContent(this.$MercuryFileUploader1,p.getRoot());c('CSS').show(this.$MercuryFileUploader1);}this.inform('dom-updated',q);};l.prototype.$MercuryFileUploader18=function(n,event){'use strict';if(this.$MercuryFileUploader8[n]){this.inform('upload-canceled-during-upload');}else if(this.$MercuryFileUploader2[n]||this.$MercuryFileUploader3[n]||this.$MercuryFileUploader4[n]||this.$MercuryFileUploader5[n]||this.$MercuryFileUploader6[n]||this.$MercuryFileUploader7[n])this.inform('upload-canceled-after-uploaded');delete this.$MercuryFileUploader2[n];delete this.$MercuryFileUploader3[n];delete this.$MercuryFileUploader4[n];delete this.$MercuryFileUploader5[n];delete this.$MercuryFileUploader6[n];delete this.$MercuryFileUploader7[n];delete this.$MercuryFileUploader8[n];delete this.$MercuryFileUploader10[n];var o=this.$MercuryFileUploader9[n];delete this.$MercuryFileUploader9[n];if(o){c('DOM').remove(o.getRoot());this.inform('dom-updated');}this.inform('upload-canceled');return false;};l.prototype.$MercuryFileUploader19=function(n,o){'use strict';var p=this.$MercuryFileUploader9[n],q=c('MercuryAttachment').getAttachIconClassByMime(o);c('CSS').addClass(p.getNode('iconText'),q);c('CSS').addClass(p.getRoot(),'done');};l.prototype.$MercuryFileUploader17=function(n,o){'use strict';if(this.$MercuryFileUploader8[n]){delete this.$MercuryFileUploader8[n];if(o.image_id){this.$MercuryFileUploader3[n]=o.image_id;}else if(o.gif_id){this.$MercuryFileUploader4[n]=o.gif_id;}else if(o.video_id){this.$MercuryFileUploader5[n]=o.video_id;}else if(o.audio_id){this.$MercuryFileUploader6[n]=o.audio_id;}else if(o.file_id){this.$MercuryFileUploader7[n]=o.file_id;}else this.$MercuryFileUploader2[n]=o;this.$MercuryFileUploader19(n,o.filetype);this.inform('one-upload-completed',{upload_time_ms:Date.now()-this.$MercuryFileUploader10[n],upload_id:n,metadata:o});}if(!this.isUploading())this.inform('all-uploads-completed',{count:this.getAttachments().length});};l.prototype.$MercuryFileUploader15=function(event,n){'use strict';var o=n.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(n),o.metadata[0]);};l.prototype.$MercuryFileUploader16=function(event,n){'use strict';this.inform('one-upload-failed');this.$MercuryFileUploader18(this.$MercuryFileUploader20(n),event);};l.prototype.$MercuryFileUploader13=function(){'use strict';return 'upload_'+c('PhotosUploadID').getNewID();};l.prototype.$MercuryFileUploader20=function(n){'use strict';var o=n.response.getPayload();if(n.upload){return n.upload.getName();}else return o.uploadID;};function m(n){if(n&&n.startsWith('C:\\fakepath\\'))return n.substring(12);return n;}f.exports=l;}),null);
__d('PagesMessengerFileUploader.react',['cx','fbt','ix','ChatFileUploaderMixin','Image.react','InlineBlock.react','Link.react','MercuryConfig','MercuryFileUploader','React','ReactDOM'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesMessengerFileUploader',mixins:[c('ChatFileUploaderMixin')],propTypes:{actionURI:k.string,iconSize:k.oneOf(['small','large'])},shouldComponentUpdate:function m(n,o){return n.actionURI!=this.props.actionURI;},componentDidMount:function m(){this._fileUploader=new (c('MercuryFileUploader'))(this.props.attachmentsShelf,c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(this._fileUploader);},addFiles:function m(n){this._fileUploader.addDroppedFiles(n);},getDefaultProps:function m(){return {actionURI:c('MercuryConfig').upload_url,iconSize:'small'};},render:function m(){return (c('React').createElement('form',{action:this.props.actionURI,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement(c('InlineBlock.react'),{className:"_m _4q60 _3rzn"},c('React').createElement(c('Link.react'),{className:"_4q61"+(this.props.iconSize==='small'?' '+"_509v":'')+(this.props.iconSize==='large'?' '+"_5njm":'')+(' '+"bizOK")},this._renderIcon()),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',multiple:'true',ref:'input'}))));},_renderIcon:function m(){if(this.props.iconSize==='small'){return (c('React').createElement(c('Image.react'),{alt:i._("File"),src:j("28652")}));}else if(this.props.iconSize==='large')return (c('React').createElement(c('Image.react'),{alt:i._("File"),src:j("94986")}));}});f.exports=l;}),null);
__d('MercuryShareLinkUploader',['ArbiterMixin','AsyncRequest','CSS','DOM','Event','Form','URLScraper','mixin','isEmpty'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.__initialize.apply(this,arguments);}j.prototype.__initialize=function(k,l,m,n,o){'use strict';this.$MercuryShareLinkUploader1=k;this.$MercuryShareLinkUploader2=l;this.$MercuryShareLinkUploader3=m;this.$MercuryShareLinkUploader4=o;this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;c('Event').listen(n,'click',this.close.bind(this));c('Event').listen(o,'keyup',function(){!o.value.length&&this.$MercuryShareLinkUploader8.enable();}.bind(this));this.$MercuryShareLinkUploader8=new (c('URLScraper'))(o);this.$MercuryShareLinkUploader8.subscribe('match',function(p,q){this.loadShare(q&&q.url);}.bind(this));};j.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4);};j.prototype.getShareDataFromStage=function(k,l){'use strict';var m=c('Form').serialize(l),n=m.attachment&&m.attachment.params;if(!n)return null;if(n instanceof Object){var o=[];o.push(n[0]);o.push(n[1]);n=o;}return {params:n,type:m.attachment.type};};j.prototype.loadAttachData=function(k,l,m,n){'use strict';if(k){var o=c('Form').serialize(l),p=o.attachment&&o.attachment.params,q=o.link_metrics?o.link_metrics.no_image:true;if(!p||c('isEmpty')(p))return null;var r=n?n():m.value;if(r.indexOf(p.url)===-1)return o;if(!p.summary&&!p.favicon&&q&&p.title&&p.url&&p.url.substr(0,p.title.length)===p.title)return null;return o;}return null;};j.prototype.check=function(){'use strict';this.$MercuryShareLinkUploader8.check();};j.prototype.close=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.disable();this.inform('closed');};j.prototype.clear=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.enable();};j.prototype.enable=function(){'use strict';this.$MercuryShareLinkUploader8.enable();};j.prototype.disable=function(){'use strict';this.$MercuryShareLinkUploader8.disable();};j.prototype.loadShare=function(k){'use strict';this.$MercuryShareLinkUploader6=k;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=new (c('AsyncRequest'))().setMethod('POST').setURI('/ajax/share_scrape.php').setData({u:k}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,k)).setStatusElement(this.$MercuryShareLinkUploader3);this.$MercuryShareLinkUploader7.send();this.inform('link-detected');};j.prototype.$MercuryShareLinkUploader10=function(k,l){'use strict';if(this.$MercuryShareLinkUploader6!==k)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;c('CSS').show(this.$MercuryShareLinkUploader1);c('DOM').empty(this.$MercuryShareLinkUploader2);c('DOM').setContent(this.$MercuryShareLinkUploader2,l.payload);this.$MercuryShareLinkUploader5=true;if(!this.getAttachData()){this.close();return;}};j.prototype.$MercuryShareLinkUploader9=function(){'use strict';c('CSS').hide(this.$MercuryShareLinkUploader1);this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=null;this.$MercuryShareLinkUploader8.reset();};f.exports=j;}),null);
__d("XShareScrapeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/share_scrape\/",{});}),null);
__d('ChatShareLinkUploader',['AsyncRequest','CSS','DOM','URLScraper','MercuryShareLinkUploader','MercuryAttachmentTemplates','XShareScrapeAsyncController','Event'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MercuryShareLinkUploader'));i=h&&h.prototype;j.prototype.__initialize=function(k,l,m,n,o){'use strict';this.$ChatShareLinkUploader1=k;this.$ChatShareLinkUploader2=l;this.$ChatShareLinkUploader3=m;this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader6=n;this.$ChatShareLinkUploader7=o;this.$ChatShareLinkUploader8=false;c('Event').listen(l,'keyup',function(){!this.getInputValue().length&&this.$ChatShareLinkUploader9.enable();}.bind(this));this.$ChatShareLinkUploader9=new (c('URLScraper'))(l,n);this.$ChatShareLinkUploader9.subscribe('match',function(p,q){this.loadShare(q&&q.url);}.bind(this));this.$ChatShareLinkUploader10=1337;this.$ChatShareLinkUploader11=null;};j.prototype.getInputValue=function(){'use strict';return this.$ChatShareLinkUploader6?this.$ChatShareLinkUploader6():this.$ChatShareLinkUploader2.value;};j.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2,this.$ChatShareLinkUploader6);};j.prototype.getShareData=function(){'use strict';if(!this.$ChatShareLinkUploader4)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1);};j.prototype.close=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.disable();this.inform('closed');};j.prototype.clear=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.enable();};j.prototype.$ChatShareLinkUploader12=function(){'use strict';var k=this.$ChatShareLinkUploader11;delete this.$ChatShareLinkUploader11;if(k){c('DOM').remove(k);this.inform('dom-updated');}this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader8=false;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader9&&this.$ChatShareLinkUploader9.reset();};j.prototype.loadShareFromParams=function(k,l){'use strict';this.$ChatShareLinkUploader8=true;this.$ChatShareLinkUploader14(new (c('AsyncRequest'))().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:k,share_params:l}));};j.prototype.__getLoadShareURI=function(){'use strict';return c('XShareScrapeAsyncController').getURIBuilder().getURI();};j.prototype.loadShare=function(k,l){'use strict';this.$ChatShareLinkUploader14(new (c('AsyncRequest'))(this.__getLoadShareURI()).setMethod('POST').setData({chat:true,extra_params:JSON.stringify(l),u:k}),k);};j.prototype.loadedFromFeed=function(){'use strict';return this.$ChatShareLinkUploader8;};j.prototype.$ChatShareLinkUploader13=function(){'use strict';return ++this.$ChatShareLinkUploader10;};j.prototype.$ChatShareLinkUploader15=function(){'use strict';return this.$ChatShareLinkUploader10;};j.prototype.$ChatShareLinkUploader14=function(k,l){'use strict';this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var m=c('MercuryAttachmentTemplates')[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploader11)c('DOM').remove(this.$ChatShareLinkUploader11);this.$ChatShareLinkUploader11=m.getRoot();c('Event').listen(m.getNode('closeFileUpload'),'click',function(event){this.close();event.kill();}.bind(this));c('DOM').appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader11);c('CSS').show(this.$ChatShareLinkUploader1);this.inform('dom-updated');var n=this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader5=k.setHandler(function(o){return this.$ChatShareLinkUploader16(n,o,l);}.bind(this));this.$ChatShareLinkUploader5.send();this.inform('link-detected');};j.prototype.$ChatShareLinkUploader16=function(k,l,m){'use strict';if(this.$ChatShareLinkUploader15()!==k)return;this.$ChatShareLinkUploader5=null;c('DOM').appendContent(this.$ChatShareLinkUploader11,l.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=true;this.inform('share-loaded');if(!this.getAttachData()){this.close();if(m&&this.getInputValue().indexOf(m)===-1)this.$ChatShareLinkUploader7(m);return;}c('CSS').addClass(this.$ChatShareLinkUploader11,'done');};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('PagesMessengerShareLinkUploader',['ActorURI','ChatShareLinkUploader','emptyFunction','SubscriptionsHandler','XShareScrapeAsyncController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ChatShareLinkUploader'));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this,k,l,c('emptyFunction'));this.$PagesMessengerShareLinkUploader1=new (c('SubscriptionsHandler'))();this.$PagesMessengerShareLinkUploader1.addSubscriptions(this.subscribe(['all-uploads-completed','upload-canceled'],m),this.subscribe('submit',n));this.actor_id=o;}j.prototype.__getLoadShareURI=function(){'use strict';return new (c('ActorURI').create)(c('XShareScrapeAsyncController').getURIBuilder().getURI(),this.actor_id);};j.prototype.destroy=function(){'use strict';this.$PagesMessengerShareLinkUploader1&&this.$PagesMessengerShareLinkUploader1.release();};f.exports=j;}),null);
__d("XPagesMessagingSuggestedResponseController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/",{});}),null);
__d("XPagesMessagingSuggestedResponseFeedbackController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/feedback\/",{});}),null);
__d('PagesMessageSuggestedResponseHandler',['invariant','ActorURI','AsyncRequest','XPagesMessagingSuggestedResponseController','XPagesMessagingSuggestedResponseFeedbackController','isEmpty'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$PagesMessageSuggestedResponseHandler2=j;this.$PagesMessageSuggestedResponseHandler1=k;this.$PagesMessageSuggestedResponseHandler3=false;this.$PagesMessageSuggestedResponseHandler5=false;}i.prototype.requestSuggestedResponseAsync=function(j,k){'use strict';this.$PagesMessageSuggestedResponseHandler3=true;var l=c('XPagesMessagingSuggestedResponseController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(c('ActorURI').create(l,this.$PagesMessageSuggestedResponseHandler1)).setData({message:this.$PagesMessageSuggestedResponseHandler2.body}).setMethod('POST').setHandler(function(m){return this.$PagesMessageSuggestedResponseHandler6(m.payload,j);}.bind(this)).setErrorHandler(k).send();};i.prototype.sendFeedback=function(j){'use strict';this.hasReceviedSuggestedResponse()||h(0);var k=c('XPagesMessagingSuggestedResponseFeedbackController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(c('ActorURI').create(k,this.$PagesMessageSuggestedResponseHandler1)).setMethod('POST').setData({message_id:this.$PagesMessageSuggestedResponseHandler4,accepted:j}).send();};i.prototype.$PagesMessageSuggestedResponseHandler6=function(j,k){'use strict';if(j.messageFound)this.$PagesMessageSuggestedResponseHandler4=j.messageID;k(this.$PagesMessageSuggestedResponseHandler2.message_id,j);};i.prototype.shouldBeTreatedAsRejected=function(){'use strict';return !this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse();};i.prototype.hasReceviedSuggestedResponse=function(){'use strict';return !c('isEmpty')(this.$PagesMessageSuggestedResponseHandler4);};i.prototype.alreadyRequested=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler3;};i.prototype.getMessageID=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler2.message_id;};i.prototype.getHasBeenAccepted=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler5;};f.exports=i;}),null);
__d('PagesMessengerSuggestedResponseView.react',['cx','fbt','LoadingIndicator.react','PagesMessageSuggestedResponseHandler','React','XUIGrayText.react','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'PagesMessengerSuggestedResponseView',propTypes:{onAccepted:j.func.isRequired,onDeclined:j.func,suggestedResponseHandler:j.instanceOf(c('PagesMessageSuggestedResponseHandler'))},getInitialState:function l(){return {shouldShowResult:false,shouldShowProgress:false,responseMessage:"",witMessageId:""};},_reset:function l(){this.setState(this.getInitialState());},componentWillReceiveProps:function l(m){if(m.suggestedResponseHandler!==this.props.suggestedResponseHandler){this._reset();var n=m.suggestedResponseHandler;if(!n||n.alreadyRequested())return;this.setState({shouldShowProgress:true});n.requestSuggestedResponseAsync(this._onSuggestedResponseReceived,this._onSuggestedResponseError);}},_onSuggestedResponseReceived:function l(m,n){if(!this._isMessageIDCurrent(m))return;this.setState({shouldShowProgress:false});if(!!n.responseMessage&&n.responseMessage.length>0)this.setState({shouldShowResult:true,responseMessage:n.responseMessage,witMessageId:n.message_id});},_onSuggestedResponseError:function l(m){if(!this._isMessageIDCurrent(m))return;this.setState({shouldShowProgress:false,shouldShowResult:false});},_isMessageIDCurrent:function l(m){return !!this.props.suggestedResponseHandler&&m===this.props.suggestedResponseHandler.getMessageID();},render:function l(){return (c('React').createElement('div',{className:"_710"+(' '+"_2ph-")+(!this.state.shouldShowResult&&!this.state.shouldShowProgress?' '+"hidden_elem":'')},this._renderProgressPart(),this._renderSuggestionPart()));},_renderSuggestionPart:function l(){return (c('React').createElement('div',{className:!this.state.shouldShowResult?"hidden_elem":''},c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("We found a suggested reply:"))),c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{shade:'dark',className:"_711"},this.state.responseMessage)),c('React').createElement('div',{className:"_712"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',className:"_3-90"},i._("Do you want to use this reply?")),c('React').createElement(c('XUIButton.react'),{label:i._("No"),use:'default',className:"_3-8_",onClick:this._onDeclined}),c('React').createElement(c('XUIButton.react'),{label:i._("Yes"),use:'confirm',onClick:this._onAccepted}))));},_renderProgressPart:function l(){return (c('React').createElement('div',{className:(!this.state.shouldShowProgress?"hidden_elem":'')+(' '+"_71d")},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("Looking for suggested responses")),c('React').createElement(c('LoadingIndicator.react'),{size:'small',color:'white',className:"_3-9a"})));},_hide:function l(){this.setState({shouldShowResult:false,shouldShowProgress:false});},_onAccepted:function l(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(true);this.props.onAccepted&&this.props.onAccepted(this.state.responseMessage);},_onDeclined:function l(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(false);this.props.onDeclined&&this.props.onDeclined();}});f.exports=k;}),null);
__d('PagesMessengerTextInput.react',['cx','AbstractTextField.react','React','TextAreaControl','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$PagesMessengerTextInput1=null,this.resetHeight=function(){this.$PagesMessengerTextInput1&&this.$PagesMessengerTextInput1.resetHeight();}.bind(this),this.updateHeight=function(){this.$PagesMessengerTextInput1&&this.$PagesMessengerTextInput1.updateHeight();}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';if(this.refs.input)this.$PagesMessengerTextInput1=new (c('TextAreaControl'))(this.refs.input);};l.prototype.render=function(){'use strict';var m=c('joinClasses')(this.props.className,"_58al"+(' '+"uiTextareaAutogrow"));return (c('React').createElement(c('AbstractTextField.react'),this.props,c('React').createElement('textarea',{type:'text',className:m,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste,onFocus:this.props.onFocus,ref:'input'})));};l.propTypes=babelHelpers['extends']({},c('AbstractTextField.react').propTypes,{onClick:k.func,onKeyUp:k.func,onPaste:k.func,onFocus:k.func});f.exports=l;}),null);
__d('MercuryPageMessageActions',['MercuryActionType','MercuryMessageActions','MercuryPageServerRequests','MercuryPayloadSource','MercurySingletonMixin'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MercuryMessageActions'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.__serverRequests=c('MercuryPageServerRequests').getForFBID(k);}j.prototype.createNote=function(k,l,m){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:c('MercuryActionType').CREATE_PAGE_ADMIN_NOTE,message_id:m,note:k,thread_id:l},c('MercuryPayloadSource').CLIENT_CREATE_PAGE_ADMIN_NOTE));this.__serverRequests.createNote(k.body.text,m,l);};Object.assign(j,c('MercurySingletonMixin'),{_instances:{}});f.exports=j;}),null);
__d('MessengerHotLikeGlyphIcon.react',['ix','cx','Image.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement(c('Image.react'),{className:"_43_3",src:h("134384")}));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('EmoticonUtils',['EmoticonsList','Parent'],(function a(b,c,d,e,f,g){var h='emoticon_',i=c('EmoticonsList').symbols,j={getEmoteFromTarget:function k(l){var m=c('Parent').byClass(l,'emoticon');if(!m)return null;var n=null;m.className.split(' ').forEach(function(o){if(o.startsWith(h))n=o.substring(h.length);});return i[n]||null;},insertEmoticon:function k(l,m,n){var o=m.substring(0,n.start),p=m.substring(n.end);if(n.start>0&&!o.endsWith(' '))l=' '+l;if(!p.startsWith(' '))l+=' ';var q=o+l+p;n.start+=l.length;n.end=n.start;return {result:q,start:n.start,end:n.end};}};f.exports=j;}),null);
__d('MercuryDragDropPrompt.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_4g6x"},c('React').createElement('div',{className:"_4g6y"},c('React').createElement('div',{className:"_4g6z _4g71"},i._("Drag Links\/Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('SelectionPosition',['Event','InputSelection','SubscriptionsHandler'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$SelectionPosition1=i;this.$SelectionPosition2={start:0,end:0};this.$SelectionPosition3=new (c('SubscriptionsHandler'))();this.$SelectionPosition4=false;this.updatePos();this.enable();}h.prototype.getPos=function(){'use strict';return babelHelpers['extends']({},this.$SelectionPosition2);};h.prototype.setPos=function(i,j){'use strict';this.$SelectionPosition2={start:i,end:j};this.restore();};h.prototype.updatePos=function(){'use strict';this.$SelectionPosition2=c('InputSelection').get(this.$SelectionPosition1);};h.prototype.restore=function(){'use strict';c('InputSelection').set(this.$SelectionPosition1,this.$SelectionPosition2.start,this.$SelectionPosition2.end);};h.prototype.enable=function(){'use strict';if(!this.$SelectionPosition4){this.$SelectionPosition3.addSubscriptions(c('Event').listen(this.$SelectionPosition1,'keyup',this.updatePos.bind(this)),c('Event').listen(this.$SelectionPosition1,'click',this.updatePos.bind(this)));this.$SelectionPosition4=true;}};h.prototype.disable=function(){'use strict';if(this.$SelectionPosition4){this.$SelectionPosition3.release();this.$SelectionPosition4=false;}};f.exports=h;}),null);
__d('SavedResponsesConstants',[],(function a(b,c,d,e,f,g){var h={editPanelViewMode:{LIST:'LIST',CREATE:'CREATE',EDIT:'EDIT',PERSONALIZE:'PERSONALIZE'},sortingKey:{LAST_USED:'LAST_USED',MOST_USED:'MOST_USED',LAST_CREATED:'LAST_CREATED'},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};f.exports=h;}),null);
__d('SavedResponsesActionButton.react',['cx','Image.react','React','XUIGrayText.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){var m=c('joinClasses')("_uvx",this.props.className);return (c('React').createElement('div',{className:m,onClick:this.props.onClick,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{src:this.props.image,className:"_uvy"}),c('React').createElement(c('XUIGrayText.react'),{shade:'medium',className:"_uvz"},this.props.label)));};l.propTypes={image:k.object.isRequired,label:k.string.isRequired,onClick:k.func.isRequired};f.exports=l;}),null);
__d("XPagesSavedResponseImagePreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/image\/preview\/",{});}),null);
__d('SavedResponsesImage.react',['cx','ActorURI','AsyncRequest','Image.react','LoadingIndicator.react','React','XPagesSavedResponseImagePreviewController','XUICloseButton.react','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.$SavedResponsesImage1=null;this.state={currentThumbnailImageId:'',imageUrl:null,isFetchingThumbnail:false};}l.prototype.componentWillReceiveProps=function(m){if(m.imageID!==this.props.imageID)this.$SavedResponsesImage2(m.imageID);};l.prototype.componentDidMount=function(){if(this.props.imageID)this.$SavedResponsesImage2(this.props.imageID);};l.prototype.componentWillUnmount=function(){if(this.$SavedResponsesImage1&&this.$SavedResponsesImage1.abort){this.$SavedResponsesImage1.abort();this.$SavedResponsesImage1=null;}};l.prototype.render=function(){if(!this.$SavedResponsesImage3()&&!this.state.imageUrl)return null;var m="_3mgf";if(this.$SavedResponsesImage3()){m=c('joinClasses')(m,this.props.loadingClassName);}else m=c('joinClasses')(m,this.props.displayClassName);return (c('React').createElement('div',{className:this.props.className},c('React').createElement('div',{className:m},this.$SavedResponsesImage4())));};l.prototype.$SavedResponsesImage2=function(m){if(c('isEmpty')(m)){this.setState({imageUrl:null});return;}this.setState({isFetchingThumbnail:true});var n=c('XPagesSavedResponseImagePreviewController').getURIBuilder().getURI();n=c('ActorURI').create(n,this.props.pageID);this.$SavedResponsesImage1=new (c('AsyncRequest'))();this.$SavedResponsesImage1.setURI(n).setHandler(function(o){return this.$SavedResponsesImage5(o);}.bind(this)).setMethod('POST').setData({image_id:m,target_width:this.props.width,target_height:this.props.height}).send();};l.prototype.$SavedResponsesImage3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading;};l.prototype.$SavedResponsesImage4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail){return (c('React').createElement(c('LoadingIndicator.react'),{size:'medium',color:'white',className:"_3mgg"}));}else if(this.state.imageUrl){return (c('React').createElement('div',null,c('React').createElement(c('XUICloseButton.react'),{className:"_3mgn"+(!this.props.shouldShowCloseButton?' '+"hidden_elem":''),size:'medium',onClick:this.props.onClose}),c('React').createElement(c('Image.react'),{src:this.state.imageUrl})));}else return null;};l.prototype.$SavedResponsesImage5=function(m){this.setState({imageUrl:m.payload.url,isFetchingThumbnail:false});};l.propTypes={displayClassName:k.string.isRequired,height:k.number.isRequired,imageID:k.string,isUploading:k.bool,loadingClassName:k.string.isRequired,onClose:k.func,pageID:k.string.isRequired,shouldShowCloseButton:k.bool.isRequired,width:k.number.isRequired};f.exports=l;}),null);
__d("SavedResponsesImageUploadHelper",[],(function a(b,c,d,e,f,g){function h(i,j){"use strict";this.$SavedResponsesImageUploadHelper1=i;this.$SavedResponsesImageUploadHelper2=j;}h.prototype.onUploaderMounted=function(i){"use strict";this.$SavedResponsesImageUploadHelper3=i;};h.prototype.onUploadFinished=function(){"use strict";if(!this.$SavedResponsesImageUploadHelper3)return;var i=this.$SavedResponsesImageUploadHelper3.getImageFiles().pop().toString();this.$SavedResponsesImageUploadHelper2(i);};h.prototype.onUploadStarted=function(){"use strict";this.$SavedResponsesImageUploadHelper1();};f.exports=h;}),null);
__d("XPagesSavedResponseNotifyAppliedController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/notify\/applied\/",{});}),null);
__d("XPagesSavedResponsesAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/",{page_id:{type:"Int",required:true},other_user_id:{type:"Int",required:true}});}),null);
__d('SavedResponsesUtils',['invariant','ActorURI','AsyncRequest','SavedResponsesConstants','XPagesSavedResponsesAsyncController','XPagesSavedResponseNotifyAppliedController'],(function a(b,c,d,e,f,g,h){var i={generateImageMetadata:function j(k){return {filename:'Photo.jpg',image_id:k,filetype:'image/jpeg'};},fetchSavedResponses:function j(k,l,m){var n=c('XPagesSavedResponsesAsyncController').getURIBuilder().setInt('other_user_id',l).setInt('page_id',k).getURI();n=c('ActorURI').create(n,k);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){return m(o.payload.responses,o.payload.tokens);}).send();},sortSavedResponses:function j(k,l){switch(l){case c('SavedResponsesConstants').sortingKey.LAST_USED:return k.slice().sort(function(m,n){return n.lastTimeUsed-m.lastTimeUsed;});case c('SavedResponsesConstants').sortingKey.MOST_USED:return k.slice().sort(function(m,n){return n.usageCount-m.usageCount;});case c('SavedResponsesConstants').sortingKey.LAST_CREATED:return k;default:h(0);}},notifySavedResponseApplied:function j(k,l){var m=c('XPagesSavedResponseNotifyAppliedController').getURIBuilder().getURI();m=c('ActorURI').create(m,l);new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({response_id:k.id}).send();}};f.exports=i;}),null);
__d('SavedResponsesImageUploader.react',['cx','ChatFileUploaderMixin','Image.react','MercuryConfig','MercuryFileUploader','React','ReactDOM','SavedResponsesUtils','URI','XUIGrayText.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'SavedResponsesImageUploader',mixins:[c('ChatFileUploaderMixin')],propTypes:{image:i.object.isRequired,label:i.string.isRequired,pageID:i.string},componentDidMount:function k(){this._fileUploader=new (c('MercuryFileUploader'))(this.props.attachmentsShelf,c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID));if(this.props.imageID)this._fileUploader.addCachedAttachments([c('SavedResponsesUtils').generateImageMetadata(this.props.imageID)]);this.setUpSubscriptionsHandler(this._fileUploader);},getActionURI:function k(){return this.props.pageID?new (c('URI'))(c('MercuryConfig').upload_url).addQueryData('request_user_id',this.props.pageID).toString():c('MercuryConfig').upload_url;},getDefaultProps:function k(){return {pageID:null};},componentDidUpdate:function k(l,m){if(this.props.imageID){this._fileUploader.removeAttachments();this._fileUploader.addCachedAttachments([c('SavedResponsesUtils').generateImageMetadata(this.props.imageID)]);}},render:function k(){var l=c('joinClasses')("_uvx",this.props.className);return (c('React').createElement('form',{action:this.getActionURI(),className:l,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('div',{className:"_4q60"},c('React').createElement('div',{className:"_4q61 _2d_p"},c('React').createElement(c('Image.react'),{src:this.props.image,className:"_uvy"}),c('React').createElement(c('XUIGrayText.react'),{shade:'medium',className:"_uvz"},this.props.label)),c('React').createElement('input',{type:'file',className:"_2d_q",name:'attachment[]',accept:this.props.imagesOnly?'image/*':'*',ref:'input'}))));}});f.exports=j;}),null);
__d('SavedResponsesEditResponseContentView.react',['cx','fbt','ix','AbstractTextArea.react','React','SavedResponsesActionButton.react','SavedResponsesImage.react','SavedResponsesImageUploader.react','SavedResponsesImageUploadHelper','ScrollableArea.react','MacroInput.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){'use strict';var o=i._("Enter reply title here"),p=i._("Enter your message here");return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AbstractTextArea.react'),{className:"_4451 _1vw8",onChange:function(q){return this.props.onTitleChange(q.target.value);}.bind(this),placeholder:o,value:this.props.responseTitle}),c('React').createElement('div',{className:"_38bw _57hg"},c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement(c('MacroInput.react'),{className:"_3jv6",editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:p,readOnly:false,ref:'macroInput'}),c('React').createElement(c('SavedResponsesImage.react'),{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:true,width:250}))),this.$SavedResponsesEditResponseContentView1()));};n.prototype.$SavedResponsesEditResponseContentView1=function(){'use strict';return (c('React').createElement('div',{className:"_57ho"},c('React').createElement(c('SavedResponsesImageUploader.react'),{className:"_3-8v",image:j("89617"),label:i._("Add Image"),onFileUploaderMounted:function(o){return this.props.uploadHandler.onUploaderMounted(o);}.bind(this),onSubmit:function(){return this.props.uploadHandler.onUploadStarted();}.bind(this),onUploadFinished:function(){return this.props.uploadHandler.onUploadFinished();}.bind(this),pageID:this.props.pageID}),c('React').createElement(c('SavedResponsesActionButton.react'),{image:j("89472"),className:"_3-8v",label:i._("Personalize"),onClick:this.props.onPersonalize})));};function n(){'use strict';k.apply(this,arguments);}n.propTypes={editorState:m.object.isRequired,isUploadingImage:m.bool.isRequired,pageID:m.string.isRequired,responseImageID:m.string,responseTitle:m.string,onContentChange:m.func.isRequired,onDeleteImage:m.func.isRequired,onPersonalize:m.func.isRequired,onTitleChange:m.func.isRequired,uploadHandler:m.instanceOf(c('SavedResponsesImageUploadHelper')).isRequired};f.exports=n;}),null);
__d('SavedResponsesFooterButton.react',['cx','Image.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){return (c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({},this.props,{className:"_3-8i"+(this.props.isHidden?' '+"hidden_elem":''),size:'large',label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?c('React').createElement(c('Image.react'),{src:this.props.image}):null})));};l.propTypes={image:k.object,isHidden:k.bool,label:k.string.isRequired,onClick:k.func.isRequired,use:k.oneOf(['default','special','confirm'])};l.defaultProps={use:'default',isHidden:false};f.exports=l;}),null);
__d('SavedResponsesMacroDetailView.react',['cx','fbt','React','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);}m.prototype.render=function(){var n=this.props.macro;if(!n)return null;return (c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement('div',null,c('React').createElement('div',{className:"_tpd"},n.key),c('React').createElement('div',{className:"_tpe"},n.description),c('React').createElement('div',{className:"_tpf"},i._("Example")),c('React').createElement('div',{className:"_tpg"},n.example))));};m.propTypes={macro:l.shape({description:l.string.isRequired,example:l.string.isRequired,key:l.string.isRequired,name:l.string.isRequired,value:l.string.isRequired})};f.exports=m;}),null);
__d('SavedResponsesMacroListItem.react',['cx','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={isHover:false};}m.prototype.render=function(){return (c('React').createElement('div',{className:"_5y_z",'data-id':this.props.macro.key,onClick:function(){return this.$SavedResponsesMacroListItem1();}.bind(this),onMouseOut:function(){return this.$SavedResponsesMacroListItem2();}.bind(this),onMouseOver:function(){return this.$SavedResponsesMacroListItem3();}.bind(this),role:'presentation'},c('React').createElement('div',{className:"_5y__"},this.props.macro.key),c('React').createElement('div',{className:"_5z00"+(!this.state.isHover?' '+"hidden_elem":'')},c('React').createElement(c('Image.react'),{src:i("94789")}))));};m.prototype.$SavedResponsesMacroListItem3=function(){this.props.onHover(this.props.macro);this.setState({isHover:true});};m.prototype.$SavedResponsesMacroListItem2=function(){this.setState({isHover:false});};m.prototype.$SavedResponsesMacroListItem1=function(){this.props.onSelect(this.props.macro);};m.propTypes={macro:l.shape({key:l.string.isRequired,value:l.string.isRequired}).isRequired,onHover:l.func.isRequired,onSelect:l.func.isRequired};f.exports=m;}),null);
__d('SavedResponsesMacroListView.react',['React','SavedResponsesMacroListItem.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l,m){i.constructor.call(this,l,m);}k.prototype.render=function(){return (c('React').createElement('ul',null,this.$SavedResponsesMacroListView1()));};k.prototype.$SavedResponsesMacroListView1=function(){var l=[];for(var m in this.props.macros){var n=this.props.macros[m];l.push(c('React').createElement(c('SavedResponsesMacroListItem.react'),{macro:n,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}));}return l;};k.propTypes={macros:j.object.isRequired,onMacroHover:j.func.isRequired,onMacroSelected:j.func.isRequired};f.exports=k;}),null);
__d('SavedResponsesMacroBrowseView.react',['cx','fbt','Grid.react','React','SavedResponsesFooterButton.react','SavedResponsesMacroDetailView.react','SavedResponsesMacroListView.react','ScrollableArea.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o,p){'use strict';k.constructor.call(this,o,p);this.state={activeMacro:null};}n.prototype.render=function(){'use strict';return (c('React').createElement('div',null,this.renderBodyPart(),c('React').createElement('div',{className:"_3ohz"},this.renderFooterPart())));};n.prototype.renderBodyPart=function(){'use strict';var o=c('joinClasses')("_552a",this.props.className);return (c('React').createElement('div',{className:o},c('React').createElement(c('Grid.react'),{cols:2,spacing:'none',className:"_552b"},c('React').createElement(l,{className:"_552c"},c('React').createElement('div',{className:"_552d"}),c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement('div',{className:"_2t-k"},c('React').createElement(c('SavedResponsesMacroListView.react'),{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:function(p){return this.$SavedResponsesMacroBrowseView1(p);}.bind(this)})))),c('React').createElement(l,{className:"_552e"},c('React').createElement(c('SavedResponsesMacroDetailView.react'),{macro:this.state.activeMacro})))));};n.prototype.renderFooterPart=function(){'use strict';var o=i._("Cancel");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_552g"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:this.props.onCancel}))));};n.prototype.$SavedResponsesMacroBrowseView1=function(o){'use strict';this.setState({activeMacro:o});};n.propTypes={macros:m.object.isRequired,onCancel:m.func.isRequired,onMacroSelected:m.func.isRequired};f.exports=n;}),null);
__d('SavedResponsesPanel.react',['cx','fbt','ix','Image.react','React','XUICloseButton.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){l.constructor.call(this,o,p);}n.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('XUIDialogTitle.react'),{className:"_3alh",showCloseButton:false},c('React').createElement('div',{className:"_2rp7"},c('React').createElement('div',{className:"_2rp8"+(!this.props.shouldShowBackButton?' '+"hidden_elem":''),onClick:this.props.onBackButtonClicked,role:'button',tabIndex:'0'},c('React').createElement(c('Image.react'),{src:j("76048"),className:"_2rp9"}),c('React').createElement(c('XUIGrayText.react'),{shade:'light',className:"_2rpa"},this.props.backButtonLabel),c('React').createElement('div',{className:"_2rpb"})),c('React').createElement('span',{className:"_5hp9"},this.props.title)),this.$SavedResponsesPanel1()),c('React').createElement(c('XUIDialogBody.react'),{className:"_2rpc"},this.props.children)));};n.prototype.$SavedResponsesPanel1=function(){var o=i._("Close");return (c('React').createElement(c('XUICloseButton.react'),{className:"_2rpe",label:o,onClick:this.props.onClose,shade:'dark',size:'medium',title:o,type:'button'}));};n.propTypes={backButtonLabel:m.string,onBackButtonClicked:m.func,onClose:m.func.isRequired,shouldShowBackButton:m.bool,title:m.string.isRequired};n.defaultProps={backButtonLabel:null,onBackButtonClicked:c('emptyFunction'),shouldShowBackButton:false};f.exports=n;}),null);
__d('MacroSpan.react',['cx','DraftEntity','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={isMouseOver:false},this.$MacroSpan4=function(r){var s=r.key in this.props.tokens?this.props.tokens[r.key].value:r.key,t=r.key in this.props.tokens?this.props.tokens[r.key].key:r.key;return this.state.isMouseOver?t:s;}.bind(this),this.$MacroSpan2=function(){this.setState({isMouseOver:true});}.bind(this),this.$MacroSpan3=function(){this.setState({isMouseOver:false});}.bind(this),this.$MacroSpan5=function(){this.props.onRemoveToken(this.props.offsetKey);}.bind(this),this.$MacroSpan1=function(){return c('DraftEntity').get(this.props.entityKey).getData();}.bind(this),n;}l.prototype.render=function(){var m=this.$MacroSpan1();return c('React').createElement('span',{className:"_vxd",onMouseEnter:this.$MacroSpan2,onMouseLeave:this.$MacroSpan3},c('React').createElement('span',{className:"_vxe",contentEditable:false,'data-offset-key':this.props.offsetKey,spellCheck:false},this.$MacroSpan4(m),c('React').createElement(c('XUICloseButton.react'),{size:'small',className:"_vxf",onClick:this.$MacroSpan5})));};l.propTypes={entityKey:k.string.isRequired,offsetKey:k.string.isRequired,onRemoveToken:k.func.isRequired,tokens:k.object.isRequired};f.exports=l;}),null);
__d('getMacrosInputDecorator',['CompositeDraftDecorator','MacroSpan.react','getEntityMatcher'],(function a(b,c,d,e,f,g){function h(i,j){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(k){return k.getType()==='TOKEN';}),component:c('MacroSpan.react'),props:{onRemoveToken:j,tokens:i}}]);}f.exports=h;}),null);
__d('SavedResponsesTokensUtils',['DraftEntity','createEditorStateWithEntities','getMacrosInputDecorator'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('{{(.*?)}}','ig'),i={_parseTemplateFieldTokens:function j(k){var l=k,m=[],n=void 0;while(n=h.exec(l)){var o={text:n[0],offset:n.index,length:n[0].length,entity:{token:n[0],key:n[1]}};m.push(o);l=l.replace(n[0],o.text);h.lastIndex=o.offset+o.length;}if(m.length>0){if(m[0].offset===0){l=" "+l;m.forEach(function(q){q.offset++;});}var p=m[m.length-1];if(p.length+p.offset===l.length)l=l+" ";}return {ranges:m,text:l};},createTemplateFieldsEditorStateWithText:function j(k,l,m){var n=i._parseTemplateFieldTokens(k),o=n.ranges,p=n.text;return c('createEditorStateWithEntities')({text:p,ranges:o,decorator:c('getMacrosInputDecorator')(m,l),entityCreationFn:function q(r){return c('DraftEntity').create('TOKEN','IMMUTABLE',r);}});},prepareforSend:function j(k,l){var m=k.match(/\{{(.*?)\}}/g);if(m)m.forEach(function(n){var o=n.replace('{{','').replace('}}',''),p=o in l?l[o].value:o;k=k.replace(n,p);});return k;}};f.exports=i;}),null);
__d("XPagesSavedResponsesAddController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/add\/",{owner_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},user_message:{type:"String"}});}),null);
__d("XPagesSavedResponsesDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/delete\/",{response_id:{type:"Int",required:true}});}),null);
__d("XPagesSavedResponsesEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/edit\/",{response_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},remove_photo_id:{type:"Int"}});}),null);
__d('SavedResponsesEditResponseView.react',['cx','fbt','invariant','ActorURI','AsyncRequest','DraftEntity','DraftModifier','DraftOffsetKey','EditorState','PagesEventObserver','PagesEventType','React','SavedResponsesEditResponseContentView.react','SavedResponsesFooterButton.react','SavedResponsesImageUploadHelper','SavedResponsesMacroBrowseView.react','SavedResponsesPanel.react','SavedResponsesTokensUtils','SelectionState','XPagesSavedResponsesAddController','XPagesSavedResponsesDeleteController','XPagesSavedResponsesEditController','XUISpinner.react','getMacrosInputDecorator'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);var q=!!this.props.initialResponse||false,r=!!this.props.initialResponse&&!!this.props.initialResponse.image?this.props.initialResponse.image.id:'',s=this.$SavedResponsesEditResponseView1(q);this.state={anyContent:s.getCurrentContent().hasText(),editorState:s,imageID:r,isEditing:q,isModified:false,isPersonalizing:false,isProcessing:false,isUploadingImage:false,message:s.getCurrentContent().getPlainText(),shouldShowDeleteWarning:false,shouldShowDiscardWarning:false,title:!!this.props.initialResponse?this.props.initialResponse.title:'',uploadHandler:new (c('SavedResponsesImageUploadHelper'))(function(){return this.$SavedResponsesEditResponseView2();}.bind(this),function(t){return this.$SavedResponsesEditResponseView3(t);}.bind(this))};}n.prototype.render=function(){'use strict';return (c('React').createElement(c('SavedResponsesPanel.react'),{backButtonLabel:this.$SavedResponsesEditResponseView4(),className:"_15ht",onBackButtonClicked:function(){return this.$SavedResponsesEditResponseView5();}.bind(this),onClose:this.props.onClose,shouldShowBackButton:true,title:this.$SavedResponsesEditResponseView6()},this.$SavedResponsesEditResponseView7(),c('React').createElement('div',{className:"_3ohz"},this.$SavedResponsesEditResponseView8())));};n.prototype.$SavedResponsesEditResponseView9=function(){'use strict';return i._("Cancel");};n.prototype.$SavedResponsesEditResponseView10=function(){'use strict';return i._("Delete");};n.prototype.$SavedResponsesEditResponseView11=function(){'use strict';return i._("Save reply");};n.prototype.$SavedResponsesEditResponseView7=function(){'use strict';if(this.state.isPersonalizing){return (c('React').createElement(c('SavedResponsesMacroBrowseView.react'),{className:"_1wxh",macros:this.props.supportedMacros,onCancel:function(){return this.$SavedResponsesEditResponseView12();}.bind(this),onMacroSelected:function(o){return this.$SavedResponsesEditResponseView13(o);}.bind(this)}));}else return (c('React').createElement(c('SavedResponsesEditResponseContentView.react'),{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:function(o){return this.$SavedResponsesEditResponseView14(o);}.bind(this),onDeleteImage:function(){return this.$SavedResponsesEditResponseView15();}.bind(this),onPersonalize:function(){return this.$SavedResponsesEditResponseView16();}.bind(this),onTitleChange:function(o){this.setState({title:o,isModified:true});}.bind(this),pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler}));};n.prototype.$SavedResponsesEditResponseView8=function(){'use strict';if(this.state.isPersonalizing){return (c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.$SavedResponsesEditResponseView12();}.bind(this)}));}else return this.$SavedResponsesEditResponseView17();};n.prototype.$SavedResponsesEditResponseView18=function(){'use strict';var o=i._("Continue Editing"),p=i._("Discard");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ln1"},i._("Are you sure you want to discard your edit?")),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:p,onClick:function(){return this.$SavedResponsesEditResponseView19();}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:function(){return this.$SavedResponsesEditResponseView20();}.bind(this),use:'confirm'}))));};n.prototype.$SavedResponsesEditResponseView21=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ln1"},i._("Are you sure you want to delete this saved reply?")),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView10(),onClick:function(){return this.$SavedResponsesEditResponseView22();}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.$SavedResponsesEditResponseView23();}.bind(this),use:'confirm'}))));};n.prototype.$SavedResponsesEditResponseView24=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView10(),onClick:function(){return this.$SavedResponsesEditResponseView25();}.bind(this),isHidden:!this.state.isEditing}),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.props.onEditDone(false);}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{disabled:!this.state.anyContent,label:this.$SavedResponsesEditResponseView11(),onClick:function(){return this.$SavedResponsesEditResponseView26();}.bind(this),use:'confirm'}),c('React').createElement(c('XUISpinner.react'),{size:'small',className:(!this.state.isProcessing?"hidden_elem":'')+(' '+"_3-91")+(' '+"_3-99")}))));};n.prototype.$SavedResponsesEditResponseView17=function(){'use strict';if(this.state.shouldShowDeleteWarning){return this.$SavedResponsesEditResponseView21();}else if(this.state.shouldShowDiscardWarning){return this.$SavedResponsesEditResponseView18();}else return this.$SavedResponsesEditResponseView24();};n.prototype.$SavedResponsesEditResponseView4=function(){'use strict';if(!this.state.isPersonalizing){return i._("List");}else return i._("Edit");};n.prototype.$SavedResponsesEditResponseView6=function(){'use strict';if(this.state.isPersonalizing){return i._("Add Personalization");}else if(this.state.isEditing){return i._("Edit Reply");}else return i._("Create Reply");};n.prototype.$SavedResponsesEditResponseView27=function(o){'use strict';var p={text:'{{'+o.name+'}}',key:o.name},q=this.state.editorState,r=q.getSelection(),s=q.getCurrentContent(),t=r.getStartKey(),u=r.getStartOffset(),v=s.getBlockForKey(t),w;if(v.getText().substr(u-1,1).trim().length>0){var x=c('DraftModifier').replaceText(s,r,' ');r=x.getSelectionAfter();w=c('DraftModifier').insertText(x,r,p.text,q.getCurrentInlineStyle(),c('DraftEntity').create('TOKEN','IMMUTABLE',p));}else w=c('DraftModifier').replaceText(s,r,p.text,q.getCurrentInlineStyle(),c('DraftEntity').create('TOKEN','IMMUTABLE',p));w=c('DraftModifier').insertText(w,w.getSelectionAfter(),' ');q=c('EditorState').push(q,w,'insert-fragment');q=c('EditorState').forceSelection(q,q.getSelection());this.$SavedResponsesEditResponseView14(q);};n.prototype.$SavedResponsesEditResponseView28=function(){'use strict';var o=this.state.editorState.getCurrentContent().getPlainText();c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:o},null);var p=this.props.initialResponse;!!p||j(0);var q=this.state.imageID?this.state.imageID.toString():'',r=c('XPagesSavedResponsesEditController').getURIBuilder().setInt('response_id',p.id).setString('message',o).setString('title',this.state.title);if(!q&&p.image&&p.image.id){r.setInt('remove_photo_id',p.image.id);}else r.setInt('photo_id',q);r=c('ActorURI').create(r.getURI(),this.props.pageID);new (c('AsyncRequest'))().setURI(r).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView29=function(){'use strict';var o=this.state.editorState.getCurrentContent().getPlainText();c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:o},null);var p=this.state.imageID?this.state.imageID.toString():'',q=c('XPagesSavedResponsesAddController').getURIBuilder().setInt('owner_id',this.props.pageID).setString('message',o).setString('title',this.state.title).setInt('photo_id',p).getURI();q=c('ActorURI').create(q,this.props.pageID);new (c('AsyncRequest'))().setURI(q).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView1=function(o){'use strict';if(o&&this.props.initialResponse){var p=this.props.initialResponse.message||'';return c('SavedResponsesTokensUtils').createTemplateFieldsEditorStateWithText(p,function(q){return this.$SavedResponsesEditResponseView30(q);}.bind(this),this.props.supportedMacros);}else return c('EditorState').createEmpty(c('getMacrosInputDecorator')(this.props.supportedMacros||{},function(q){return this.$SavedResponsesEditResponseView30(q);}.bind(this)));};n.prototype.$SavedResponsesEditResponseView15=function(){'use strict';this.setState({imageID:null});};n.prototype.$SavedResponsesEditResponseView5=function(){'use strict';if(this.state.isPersonalizing){this.setState({isPersonalizing:false});}else if(this.state.isModified){this.setState({shouldShowDiscardWarning:true});}else this.props.onBackButtonClicked();};n.prototype.$SavedResponsesEditResponseView12=function(){'use strict';this.setState({isPersonalizing:false});};n.prototype.$SavedResponsesEditResponseView13=function(o){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null);this.setState({isPersonalizing:false});this.$SavedResponsesEditResponseView27(o);};n.prototype.$SavedResponsesEditResponseView16=function(){'use strict';this.setState({isPersonalizing:true});this.props.onEnterPersonalizeView();};n.prototype.$SavedResponsesEditResponseView14=function(o){'use strict';this.setState({anyContent:o.getCurrentContent().hasText(),editorState:o,isModified:true});};n.prototype.$SavedResponsesEditResponseView2=function(){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null);this.setState({imageID:null,isUploadingImage:true});};n.prototype.$SavedResponsesEditResponseView3=function(o){'use strict';this.setState({imageID:o,isUploadingImage:false});};n.prototype.$SavedResponsesEditResponseView30=function(o){'use strict';var p=this.state.editorState,q=c('DraftOffsetKey').decode(o),r=q.blockKey,s=q.decoratorKey,t=p.getBlockTree(r).getIn([s]),u=new (c('SelectionState'))({anchorKey:r,anchorOffset:t.get('start'),focusKey:r,focusOffset:t.get('end'),isBackward:false,hasFocus:true}),v=c('DraftModifier').removeRange(p.getCurrentContent(),u,'forward'),w=c('EditorState').push(p,v,'remove-range');this.$SavedResponsesEditResponseView14(w);};n.prototype.$SavedResponsesEditResponseView25=function(){'use strict';this.setState({shouldShowDeleteWarning:true});};n.prototype.$SavedResponsesEditResponseView26=function(){'use strict';this.setState({isProcessing:true});this.state.isEditing?this.$SavedResponsesEditResponseView28():this.$SavedResponsesEditResponseView29();};n.prototype.$SavedResponsesEditResponseView23=function(){'use strict';this.setState({shouldShowDeleteWarning:false});};n.prototype.$SavedResponsesEditResponseView22=function(){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:false,isProcessing:true});var o=this.props.initialResponse;!!o||j(0);var p=c('XPagesSavedResponsesDeleteController').getURIBuilder().setInt('response_id',o.id).getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView19=function(){'use strict';this.props.onBackButtonClicked();};n.prototype.$SavedResponsesEditResponseView20=function(){'use strict';this.setState({shouldShowDiscardWarning:false});};n.propTypes={initialResponse:m.shape({id:m.string.isRequired,title:m.string,message:m.string,image:m.object}),onBackButtonClicked:m.func.isRequired,onClose:m.func.isRequired,onEditDone:m.func.isRequired,onEnterPersonalizeView:m.func.isRequired,pageID:m.string.isRequired,supportedMacros:m.object};f.exports=n;}),null);
__d('SavedResponsesListItem.react',['cx','fbt','ClientIDs','Link.react','React','ReactDOM','SavedResponsesImage.react','SavedResponsesConstants'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={shouldShowSeeMoreLink:false,shouldLimitHeight:true},this.$SavedResponsesListItem1=function(){if(this.state.shouldLimitHeight===false||this.state.shouldShowSeeMoreLink)return;var s=c('ReactDOM').findDOMNode(this.refs.message);if(s.scrollHeight>s.clientHeight)this.setState({shouldShowSeeMoreLink:true});}.bind(this),this.$SavedResponsesListItem4=function(s){var t=0,u=0,v=/\{{(.*?)\}}/g,w=v.exec(s),x=[];while(w!=null){u=w.index;x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID()},s.substring(t,u)));t=u+w[0].length;var y=w[1] in this.props.tokens?this.props.tokens[w[1]].value:w[1];x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID(),className:"_-8"},y));w=v.exec(s);}x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID()},s.substring(t,s.length)));return x;}.bind(this),this.$SavedResponsesListItem2=function(){this.props.onResponseSelected(this.props.response,this.props.tokens);}.bind(this),this.$SavedResponsesListItem3=function(){this.props.onResponseHover&&this.props.onResponseHover(this.props.response,this.props.tokens);}.bind(this),this.$SavedResponsesListItem5=function(s){this.setState({shouldShowSeeMoreLink:false,shouldLimitHeight:false});s.stopPropagation();}.bind(this),o;}m.prototype.componentDidMount=function(){this.$SavedResponsesListItem1();};m.prototype.componentDidUpdate=function(){this.$SavedResponsesListItem1();};m.prototype.render=function(){var n=this.props.response.image&&true;return c('React').createElement('div',{className:"_33w3"+(n?' '+"_33w4":''),'data-id':this.props.response.id,onClick:this.$SavedResponsesListItem2,onMouseEnter:this.$SavedResponsesListItem3,onMouseLeave:this.props.onResponseUnhover,role:'presentation'},c('React').createElement('div',{className:"_33w5"+(n?' '+"_33w6":'')+(' '+"fwb")},this.props.response.title),c('React').createElement('div',{className:"_33w7"+(this.state.shouldLimitHeight?' '+"_4en5":'')+(!this.props.response.title&&this.props.response.image?' '+"_2pid":''),ref:'message'},this.props.response.image?c('React').createElement(c('SavedResponsesImage.react'),{className:"_33w8",displayClassName:"_33w9",height:c('SavedResponsesConstants').listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:false,width:c('SavedResponsesConstants').listItemImageWidth}):null,this.$SavedResponsesListItem4(this.props.response.message)),c('React').createElement(c('Link.react'),{className:"_4en6"+(!this.state.shouldShowSeeMoreLink?' '+"hidden_elem":''),onClick:this.$SavedResponsesListItem5},i._("See more")));};m.propTypes={onResponseHover:l.func,onResponseSelected:l.func.isRequired,onResponseUnhover:l.func,pageID:l.string.isRequired,response:l.shape({id:l.string.isRequired,title:l.string,message:l.string.isRequired,image:l.object}),tokens:l.object.isRequired};f.exports=m;}),null);
__d('SavedResponsesListView.react',['cx','React','SavedResponsesListItem.react','SavedResponsesUtils','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){if(this.props.isLoadingResponses)return (c('React').createElement('div',{className:"_e19"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var m=this.props.searchQuery.trim().toLowerCase(),n=function p(q){return (q.message.toLowerCase().indexOf(m)!==-1||(q.title||'').toLowerCase().indexOf(m)!==-1);},o=c('SavedResponsesUtils').sortSavedResponses(this.props.responses,this.props.sortingKey);return (c('React').createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},o.filter(n).map(function(p){return (c('React').createElement(c('SavedResponsesListItem.react'),{key:p.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:p,tokens:this.props.supportedMacros}));}.bind(this))));};l.propTypes={isLoadingResponses:k.bool.isRequired,onResponseHover:k.func,onResponseSelected:k.func.isRequired,onResponseUnhover:k.func,pageID:k.string.isRequired,responses:k.array.isRequired,searchQuery:k.string.isRequired,shouldAdjustRightMargin:k.bool};f.exports=l;}),null);
__d('SavedResponsesOrderingMenu.react',['cx','fbt','ContextualDialogArrow','PopoverMenu.react','React','ReactXUIMenu','SavedResponsesConstants','XUIPopoverButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactXUIMenu').Item;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);var o=[{key:c('SavedResponsesConstants').sortingKey.MOST_USED,title:i._("Frequently used")},{key:c('SavedResponsesConstants').sortingKey.LAST_USED,title:i._("Recently used")},{key:c('SavedResponsesConstants').sortingKey.LAST_CREATED,title:i._("Recently created")}];this.$SavedResponsesOrderingMenu1=o;}m.prototype.$SavedResponsesOrderingMenu2=function(){return this.$SavedResponsesOrderingMenu1.find(function(n){return n.key===this.props.activeSortingOptionKey;}.bind(this));};m.prototype.render=function(){var n=c('React').createElement(c('ReactXUIMenu'),null,this.$SavedResponsesOrderingMenu1.map(function(o){return this.$SavedResponsesOrderingMenu3(o);}.bind(this)));return (c('React').createElement('div',{className:this.props.className},c('React').createElement('span',{className:"_4mjo"},i._("Sort by")),c('React').createElement(c('PopoverMenu.react'),{alignv:'baseline',menu:n,layerBehaviors:[c('ContextualDialogArrow')]},c('React').createElement(c('XUIPopoverButton.react'),{label:this.$SavedResponsesOrderingMenu2().title}))));};m.prototype.$SavedResponsesOrderingMenu3=function(n){return (c('React').createElement(l,{onclick:function(){return this.props.onSortingKeyChanged(n.key);}.bind(this),key:n.key},n.title));};f.exports=m;}),null);
__d('SavedResponsesListViewContainer.react',['cx','fbt','Layout.react','LeftFillRightFitLayout.react','React','SavedResponsesOrderingMenu.react','XUICloseButton.react','XUITextInput.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=c('joinClasses')("_3ohy",this.props.className);return (c('React').createElement('div',{className:p},c('React').createElement(c('LeftFillRightFitLayout.react'),{className:"_1x3h"},this.$SavedResponsesListViewContainer1(),c('React').createElement(c('SavedResponsesOrderingMenu.react'),{className:"_4b4m",activeSortingOptionKey:this.props.activeSortingOptionKey,onSortingKeyChanged:this.props.onSortingKeyChanged})),this.props.children,c('React').createElement('div',{className:"_3ohz"},this.props.footerPart)));};o.prototype.$SavedResponsesListViewContainer1=function(){return (c('React').createElement(c('Layout.react'),{className:"_4b4n"},c('React').createElement(l,null,c('React').createElement('div',{className:"_1x3i"})),c('React').createElement(m,null,c('React').createElement(c('XUITextInput.react'),{onChange:this.props.onSearchQueryChanged,ref:'inputField',placeholder:i._("Search replies"),value:this.props.searchQuery})),c('React').createElement(l,null,c('React').createElement(c('XUICloseButton.react'),{size:'small',onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":''}))));};function o(){j.apply(this,arguments);}o.propTypes={footerPart:n.object.isRequired,onSearchQueryChanged:n.func.isRequired,onSearchQueryCleared:n.func.isRequired,searchQuery:n.string.isRequired};f.exports=o;}),null);
__d('SavedResponsesManageListView.react',['cx','ix','fbt','React','SavedResponsesConstants','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesPanel.react','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.$SavedResponsesManageListView1=function(q){this.setState({activeSortingOptionKey:q});}.bind(this);this.state={searchQuery:"",activeSortingOptionKey:c('SavedResponsesConstants').sortingKey.LAST_CREATED};}n.prototype.render=function(){'use strict';return (c('React').createElement(c('SavedResponsesPanel.react'),{className:"_15ht",shouldShowBackButton:false,onClose:this.props.onClose,title:j._("Saved Replies")},c('React').createElement(c('SavedResponsesListViewContainer.react'),{footerPart:this.$SavedResponsesManageListView2(),onSearchQueryChanged:function(o){return this.$SavedResponsesManageListView3(o);}.bind(this),onSearchQueryCleared:function(){return this.$SavedResponsesManageListView4();}.bind(this),searchQuery:this.state.searchQuery,activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$SavedResponsesManageListView1},this.$SavedResponsesManageListView5())));};n.prototype.$SavedResponsesManageListView5=function(){'use strict';return (c('React').createElement('div',{className:"_4pno"},c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement(c('SavedResponsesListView.react'),{isLoadingResponses:false,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros,sortingKey:this.state.activeSortingOptionKey}),this.$SavedResponsesManageListView6())));};n.prototype.$SavedResponsesManageListView2=function(){'use strict';var o=j._("Create Reply"),p=j._("Done");return (c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:this.props.onCreateNewReplyClicked,image:i("88945")}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:p,onClick:this.props.onDoneClicked})));};n.prototype.$SavedResponsesManageListView6=function(){'use strict';return (c('React').createElement('div',{className:"_4pnq"},c('React').createElement('div',{className:"_50f8"+(' '+"_4pnr")},j._("End of saved replies"))));};n.prototype.$SavedResponsesManageListView3=function(o){'use strict';this.setState({searchQuery:o.target.value});};n.prototype.$SavedResponsesManageListView4=function(){'use strict';this.setState({searchQuery:""});};n.propTypes={onClose:m.func.isRequired,onCreateNewReplyClicked:m.func.isRequired,onDoneClicked:m.func.isRequired,onResponseSelected:m.func.isRequired,otherUserID:m.string.isRequired,pageID:m.string.isRequired,responses:m.array.isRequired,supportedMacros:m.object.isRequired};f.exports=n;}),null);
__d('SavedResponsesManagePanel.react',['cx','React','SavedResponsesConstants','SavedResponsesEditResponseView.react','SavedResponsesManageListView.react','SavedResponsesUtils','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.state={isLoadingResponses:true,responseToEdit:null,responses:[],supportedMacros:null,viewType:this.props.initialViewType};}l.prototype.componentWillMount=function(){this.$SavedResponsesManagePanel1();};l.prototype.render=function(){if(this.state.isLoadingResponses)return (c('React').createElement('div',{className:"_15ht"},c('React').createElement('div',{className:"_15hu"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));switch(this.state.viewType){case c('SavedResponsesConstants').editPanelViewMode.LIST:return (c('React').createElement(c('SavedResponsesManageListView.react'),{onCreateNewReplyClicked:function(){return this.$SavedResponsesManagePanel2();}.bind(this),onDoneClicked:function(){return this.$SavedResponsesManagePanel3();}.bind(this),otherUserID:this.props.otherUserID,onResponseSelected:function(m,n){return (this.$SavedResponsesManagePanel4(m,n));}.bind(this),onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros}));case c('SavedResponsesConstants').editPanelViewMode.EDIT:case c('SavedResponsesConstants').editPanelViewMode.CREATE:case c('SavedResponsesConstants').editPanelViewMode.PERSONALIZE:return (c('React').createElement(c('SavedResponsesEditResponseView.react'),{initialResponse:this.state.responseToEdit,onBackButtonClicked:function(){return this.$SavedResponsesManagePanel5(false);}.bind(this),onClose:this.props.onClose,onEditDone:function(m){return this.$SavedResponsesManagePanel5(m);}.bind(this),onEnterPersonalizeView:function(){return this.$SavedResponsesManagePanel6();}.bind(this),pageID:this.props.pageID,supportedMacros:this.state.supportedMacros}));}};l.prototype.$SavedResponsesManagePanel1=function(){this.setState({isLoadingResponses:true});c('SavedResponsesUtils').fetchSavedResponses(this.props.pageID,this.props.otherUserID,function(m,n){return (this.setState({responses:m,supportedMacros:n,isLoadingResponses:false}));}.bind(this));};l.prototype.$SavedResponsesManagePanel5=function(m){if(this.props.initialViewType===c('SavedResponsesConstants').editPanelViewMode.CREATE){this.props.onClose();return;}if(m)this.$SavedResponsesManagePanel1();this.setState({responseToEdit:null,viewType:c('SavedResponsesConstants').editPanelViewMode.LIST});};l.prototype.$SavedResponsesManagePanel2=function(){this.setState({responseToEdit:null,viewType:c('SavedResponsesConstants').editPanelViewMode.CREATE});};l.prototype.$SavedResponsesManagePanel3=function(){this.props.onClose();};l.prototype.$SavedResponsesManagePanel6=function(){this.setState({viewType:c('SavedResponsesConstants').editPanelViewMode.PERSONALIZE});};l.prototype.$SavedResponsesManagePanel4=function(m){this.setState({responseToEdit:m,viewType:c('SavedResponsesConstants').editPanelViewMode.EDIT});};l.propTypes={initialViewType:k.string,onClose:k.func.isRequired,otherUserID:k.string.isRequired,pageID:k.string.isRequired};l.defaultProps={initialViewType:c('SavedResponsesConstants').editPanelViewMode.LIST};f.exports=l;}),null);
__d('PagesManagerLogger',['immutable','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map,i=new h(c('PagesAdminToolUIActionType')).toArray();j.prototype.$PagesManagerLogger1=function(k){if(i.indexOf(k)<0)return false;return true;};j.prototype.$PagesManagerLogger2=function(k,l,m,n){if(!this.$PagesManagerLogger1(l))return;var o=n||{};o.action_type=l;c('PagesEventObserver').notify(k,m,o);};j.prototype.logContextCardUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_CONTEXT_CARD_UI_ACTION,k,l,m);};j.prototype.logManageTagUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_MANAGE_TAG_UI_ACTION,k,l,m);};j.prototype.logMessageInboxUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_MESSAGE_INBOX_UI_ACTION,k,l,m);};j.prototype.logHovercardUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_HOVERCARD_UI_ACTION,k,l,m);};function j(){}f.exports=new j();}),null);
__d('PagesManagerActionType',['ImmutableObject','keyMirrorRecursive'],(function a(b,c,d,e,f,g){var h=new (c('ImmutableObject'))(c('keyMirrorRecursive')({LIST:{FETCH:'',FETCHED:'',UPDATED:'',LOAD_MORE:'',LOADING:'',PREVENT_SCROLL:'',SELECT:'',DESELECT_ALL:'',VIEW:'',INITIAL_VIEW:'',CLEAR_INITIAL_VIEW:'',SET_RESPONSE_DATA:'',ITEM_FOLDER_CHANGE:'',REMOVE_ITEM_FOLDER_CHANGE:''},NAVIGATION_UNIT:{CHANGE:'',NOTIFICATION_COUNT_CHANGE:''},FILTER_PANEL:{TOGGLE_PANEL:''},LAYOUT:{HEIGHT_CHANGE:'',LIST_HEIGHT_CHANGE:''},SEARCH:{TOGGLE_SEARCH:'',CHANGE_SEARCH_TERM:'',IS_SEARCHING_CHANGED:'',ADD_SEARCH_CUSTOM_TAG:'',REMOVE_SEARCH_CUSTOM_TAG:'',FETCH_CUSTOM_TAG_THREAD_COUNTS:'',UPDATE_CUSTOM_TAG_THREAD_COUNTS:''}}));f.exports=h;}),null);
__d('PagesManagerDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerAction',['PagesManagerActionType','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={viewListItem:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.VIEW,listItem:j});},clearViewListItem:function i(){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.VIEW,listItem:null});},setInitialViewItem:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.INITIAL_VIEW,item:j});},clearInitialViewItem:function i(){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.CLEAR_INITIAL_VIEW});},setHeight:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LAYOUT.HEIGHT_CHANGE,heights:j});},setListNavigationHeight:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LAYOUT.LIST_HEIGHT_CHANGE,height:j});},handleSelectionChange:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.SELECT,rowsAdded:j,rowsRemoved:k,selectedRows:l});},deselectAll:function i(){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.DESELECT_ALL});}};f.exports=h;}),null);
__d('PagesManagerResizeListener',['EventEmitter'],(function a(b,c,d,e,f,g){f.exports=new (c('EventEmitter'))();}),null);
__d('PagesManagerListDetailLayout.react',['cx','Arbiter','PagesManagerAction','PagesManagerResizeListener','React','ReactDOM','ResizeListener','SubscriptionsHandler','Vector','XUICard.react','Grid.react','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Grid.react').GridItem,l=200;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this,n,o);this.recalculateHeight=function(){var p=c('Vector').getViewportDimensions().y-c('ReactDOM').findDOMNode(this).getBoundingClientRect().top;if(!this.props.fullScreen){p-=30;p-=2;}var q=Math.max(l,p);this.setState({height:q});var r=this.props.navigationSection?c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.navigationSection)).y:0;c('PagesManagerAction').setHeight({layoutHeight:q,navigationHeight:r});var s=this.props.fullScreen?0:8;this.setState({top:r+s});}.bind(this);this.state={top:0,height:l};}m.prototype.componentDidMount=function(){'use strict';this.recalculateHeight();this.$PagesManagerListDetailLayout1=new (c('SubscriptionsHandler'))();this.$PagesManagerListDetailLayout1.addSubscriptions(c('Arbiter').subscribe('reflow',function(){return c('setImmediate')(this.recalculateHeight);}.bind(this)),c('ResizeListener').add(function(){return this.recalculateHeight();}.bind(this)),c('PagesManagerResizeListener').addListener('change',function(){return this.recalculateHeight();}.bind(this)));};m.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerListDetailLayout1&&this.$PagesManagerListDetailLayout1.release();};m.prototype.render=function(){'use strict';var n=this.state.height,o=this.state.top,p=!this.props.navigationSection?null:c('React').createElement('div',{className:"_2-97",ref:'navigationSection'},this.props.navigationSection);return (c('React').createElement(c('XUICard.react'),{className:this.props.fullScreen?"_4sno":'',style:{height:n}},p,c('React').createElement('div',{className:"_10ua",style:{top:o}},c('React').createElement(c('Grid.react'),{alignv:'top',className:"_10ue",cols:2},c('React').createElement(k,{className:c('joinClasses')("_10uf",this.props.listClassName)},this.props.listSection),c('React').createElement(k,{className:this.props.detailClassName},this.props.detailSection)))));};f.exports=m;}),null);
__d('PagesManagerStore',['PagesManagerActionType','FluxStore','Map','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerStore6=null;this.$PagesManagerStore1=0;this.$PagesManagerStore2=0;this.$PagesManagerStore3=0;this.$PagesManagerStore4=[];this.$PagesManagerStore5=new (c('Map'))();}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerActionType').LIST.VIEW:this.$PagesManagerStore6=k.listItem;this.__emitChange();break;case c('PagesManagerActionType').LIST.SELECT:this.$PagesManagerStore8(k);this.__emitChange();break;case c('PagesManagerActionType').LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore1=k.heights.navigationHeight;this.$PagesManagerStore2=k.heights.layoutHeight;this.__emitChange();break;case c('PagesManagerActionType').LAYOUT.LIST_HEIGHT_CHANGE:this.$PagesManagerStore3=k.height;this.__emitChange();break;case c('PagesManagerActionType').LIST.DESELECT_ALL:this.$PagesManagerStore8({rowsAdded:[],rowsRemoved:this.$PagesManagerStore4,selectedRows:[]});this.__emitChange();break;case c('PagesManagerActionType').LIST.INITIAL_VIEW:this.$PagesManagerStore9(k.item);break;case c('PagesManagerActionType').LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore7=null;break;default:return;}};j.prototype.$PagesManagerStore9=function(k){'use strict';this.$PagesManagerStore7=k;this.$PagesManagerStore6=k;};j.prototype.$PagesManagerStore8=function(k){'use strict';this.$PagesManagerStore4=k.selectedRows;k.rowsAdded.forEach(function(l){this.$PagesManagerStore5.set(l,true);}.bind(this));k.rowsRemoved.forEach(function(l){this.$PagesManagerStore5.set(l,false);}.bind(this));};j.prototype.getViewingListItem=function(){'use strict';return this.$PagesManagerStore6;};j.prototype.getInitialViewingItem=function(){'use strict';return this.$PagesManagerStore7;};j.prototype.getLayoutHeight=function(){'use strict';return this.$PagesManagerStore2;};j.prototype.getNavigationHeight=function(){'use strict';return this.$PagesManagerStore1;};j.prototype.getListNavigationHeight=function(){'use strict';return this.$PagesManagerStore3;};j.prototype.getIsRowSelected=function(k){'use strict';return this.$PagesManagerStore5.has(k)?this.$PagesManagerStore5.get(k):false;};j.prototype.getSelectedRows=function(){'use strict';return this.$PagesManagerStore4;};j.prototype.isSelectionMode=function(){'use strict';return this.$PagesManagerStore4.length!==0;};f.exports=new j(c('PagesManagerDispatcher'));}),null);
__d('PagesManagerDetailContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.state={height:0,viewingListItem:null};}j.getStores=function(){'use strict';return [c('PagesManagerStore')];};j.calculateState=function(k){'use strict';var l=c('PagesManagerStore').getLayoutHeight()-c('PagesManagerStore').getNavigationHeight();return {height:l,viewingListItem:c('PagesManagerStore').getViewingListItem()};};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildContainerClass,m=babelHelpers.objectWithoutProperties(k,['ChildContainerClass']);return (c('React').createElement(l,babelHelpers['extends']({height:this.state.height,viewingListItem:this.state.viewingListItem,listItemKey:this.props.getListItemKey(this.state.viewingListItem)},m)));};f.exports=c('FluxContainer').create(j);}),null);
__d('PagesManagerListContainer.react',['FluxContainer','PagesManagerAction','PagesManagerStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.state={height:0};}j.getStores=function(){return [c('PagesManagerStore')];};j.calculateState=function(k){var l=c('PagesManagerStore').getLayoutHeight()-c('PagesManagerStore').getNavigationHeight();return {height:l};};j.prototype.render=function(){var k=this.props,l=k.ChildContainerClass,m=babelHelpers.objectWithoutProperties(k,['ChildContainerClass']);return (c('React').createElement(l,babelHelpers['extends']({height:this.state.height,onSelectionChange:this.$PagesManagerListContainer1},m)));};j.prototype.$PagesManagerListContainer1=function(k){var l=k.rowsAdded,m=k.rowsRemoved,n=k.selectedRows;c('PagesManagerAction').handleSelectionChange(l,m,n);};f.exports=c('FluxContainer').create(j);}),null);
__d('AbstractPagesManagerListStore',['invariant','PagesManagerActionType','FluxStore','Map'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.__hasMoreItem=new (c('Map'))();this.__isLoading=false;}k.prototype.__onDispatch=function(l){'use strict';switch(l.type){case c('PagesManagerActionType').LIST.FETCH:this.__handleListFetch(l);break;case c('PagesManagerActionType').LIST.FETCHED:case c('PagesManagerActionType').LIST.UPDATED:this.__emitChange();break;case c('PagesManagerActionType').LIST.LOADING:this.__isLoading=true;this.__emitChange();break;case c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE:case c('PagesManagerActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:this.__handleNavigationUnitChange(l);break;default:return;}};k.prototype.__handleListFetch=function(l){'use strict';h(0);};k.prototype.__handleNavigationUnitChange=function(l){'use strict';h(0);};k.prototype.hasMoreItem=function(l){'use strict';return this.__hasMoreItem.get(l);};k.prototype.getItemList=function(l,m){'use strict';h(0);};k.prototype.isLoading=function(){'use strict';return this.__isLoading;};f.exports=k;}),null);
__d("XPageInboxInterfaceSwitchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/inbox\/interfaceswitch\/",{});}),null);
__d("XPagesManagerInboxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/inbox\/{?selected_item_id}\/",{page_token:{type:"String",required:true},business_id:{type:"Int"},selected_item_id:{type:"FBID"}});}),null);
__d('PagesManagerInboxSwitcherUtil',['ActorURI','AsyncRequest','XPageInboxInterfaceSwitchController','XPagesManagerMessagesController','XPagesManagerInboxController'],(function a(b,c,d,e,f,g){'use strict';function h(j,k,l){var m=c('XPageInboxInterfaceSwitchController').getURIBuilder().getURI();m=c('ActorURI').create(m,k);new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({is_unified_inbox:j}).setHandler(function(n){var o=n.payload.isUnifiedInbox,p=o?c('XPagesManagerInboxController'):c('XPagesManagerMessagesController');p.getURIBuilder().setString('page_token',l).getURI().go();}).send();}var i={switchToInbox:function j(k,l){return h(true,k,l);},switchToMessage:function j(k,l){return h(false,k,l);}};f.exports=i;}),null);
__d('PagesManagerMessagingActionType',['PagesManagerActionType','keyMirrorRecursive'],(function a(b,c,d,e,f,g){var h=c('keyMirrorRecursive')({THREAD_LEVEL:{READ_STATUS:'',ARCHIVE_STATUS:'',SPAM_STATUS:'',UPDATE_THREAD:''},MESSAGE_LEVEL:{READ_RECEIPTS:''},SET_SCROLL_HEIGHT:null,SET_APPOINTMENT_BANNER_HEIGHT:null,AWAY_STATE:{UPDATE:null,FETCH:null,SET:null},SET_IS_CONTEXT_CARD_HIDDEN:null,MESSAGE_SEARCH:{NAME_SEARCH_UPDATE:null,SNIPPET_SEARCH_UPDATE:null,LOAD_MORE_NAME_RESULT:null,LOAD_MORE_SNIPPET_RESULT:null},HOT_LIKE:{END:null,START:null},BAN:{RESET:null,UPDATE:null},CLASSIFIER:{INITIALIZE_STORE:null,CHECK_FOR_INTENT:null,NOTIFY_INTENT_CLASSIFIED:null,THREAD_INTENT_UPDATED:null,VERIFY_INTENT:null}});Object.assign(h,c('PagesManagerActionType'));f.exports=h;}),null);
__d('PagesManagerMessagingMessagelistDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingClassifierActions',['PagesManagerMessagingMessagelistDispatcher','PagesManagerMessagingActionType'],(function a(b,c,d,e,f,g){'use strict';var h=c('PagesManagerMessagingActionType').CLASSIFIER,i={ActionTypes:h,checkForIntent:function j(k,l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.CHECK_FOR_INTENT,message:k,userID:l,pageID:m});},initializeStore:function j(k,l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.INITIALIZE_STORE,config:k,pageID:l});},notifyIntentClassified:function j(k){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.NOTIFY_INTENT_CLASSIFIED,intent:k});},notifyThreadIntentUpdated:function j(k){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.THREAD_INTENT_UPDATED,payload:k});},verifyIntentClassification:function j(k,l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.VERIFY_INTENT,messageID:k,message:l,result:m});}};f.exports=i;}),null);
__d('PagesMessagingIntent',[],(function a(b,c,d,e,f,g){'use strict';f.exports={PRICE:'#prices',HOURS:'#hours',APPOINTMENT:'#appointment',LOCATION:'#location',PAYMENTS:'#payments',PURCHASE:'#purchase',CONTACT:'#contact',AVAILABILITY:'#availability',DELIVERY:'#delivery',SUPPORT:'#support',PRODUCT_INQUIRY:'#product_inquiry',COMPLAINTS:'#complaints',EXCHANGE_REFUND:'#exchange_refund',SOLICITATION:'#solicitation',THANKS:'#thanks'};}),null);
__d('PagesManagerMessagingClassifierUtil',['fbt','PagesMessagingIntent'],(function a(b,c,d,e,f,g,h){'use strict';var i={getIntentDescription:function j(k){switch(k){case c('PagesMessagingIntent').PRICE:return h._("Pricing");case c('PagesMessagingIntent').HOURS:return h._("Business Hours");case c('PagesMessagingIntent').DELIVERY:return h._("Delivery");case c('PagesMessagingIntent').APPOINTMENT:return h._("Appointment or Booking");case c('PagesMessagingIntent').LOCATION:return h._("Location");case c('PagesMessagingIntent').PAYMENTS:return h._("Payment");case c('PagesMessagingIntent').PURCHASE:return h._("Purchasing");case c('PagesMessagingIntent').CONTACT:return h._("Getting In Touch");case c('PagesMessagingIntent').EXCHANGE_REFUND:return h._("Exchange or Refund");case c('PagesMessagingIntent').AVAILABILITY:return h._("Availability");case c('PagesMessagingIntent').THANKS:return h._("Thanks");case c('PagesMessagingIntent').PRODUCT_INQUIRY:return h._("Product Inquiry");case c('PagesMessagingIntent').COMPLAINTS:return h._("Complaints");case c('PagesMessagingIntent').SOLICITATION:return h._("Solicitation");case c('PagesMessagingIntent').SUPPORT:return h._("Support");default:throw new Error('invalid intent provided');}}};f.exports=i;}),null);
__d('PagesManagerMessagingThreadIntentTaggingSubscription',['GraphQLSubscription','Relay','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('GraphQLSubscription'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,{page_id:k},function(m){var n=m.pages_inbox_intent_tagging_subscribe.context;l({intent:n.last_classified_intent,messageID:n.last_classified_message_id,userID:n.user.id,isVerified:n.is_last_classification_verified,score:n.last_classified_score});});}j.getSubscriptionQuery=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'pages_inbox_intent_tagging_subscribe',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{children:[{fieldName:'last_classified_intent',kind:'Field',metadata:{},type:'String'},{fieldName:'last_classified_message_id',kind:'Field',metadata:{},type:'ID'},{fieldName:'is_last_classification_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'last_classified_score',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'context',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'PageThreadAutomationContext'},{fieldName:'client_subscription_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Subscription',metadata:{inputType:'PagesInboxIntentTaggingSubscribeData!'},name:'PagesManagerMessagingThreadIntentTaggingSubscription',responseType:'PagesInboxIntentTaggingSubscribeResponsePayload'};}();};j.prototype.getQueryParams=function(k){return {page_id:c('nullthrows')(k.page_id)};};f.exports=j;}),null);
__d("XPagesMessagingIntentClassifierController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/intent\/classify\/",{});}),null);
__d("XPagesMessagingIntentVerificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/intent\/verify\/",{});}),null);
__d('PagesManagerMessagingClassifierStore',['invariant','PagesManagerMessagingClassifierActions','AsyncRequest','BatchingQueue','PagesManagerMessagingClassifierUtil','PagesManagerMessagingMessagelistDispatcher','FluxStore','IntentClassifierRequestAction','Map','RelayGraphQLSubscriber','RelayGraphQLSubscriptionNetworkLayer','PagesManagerMessagingThreadIntentTaggingSubscription','XDliteGraphQLSkywalkerController','XPagesMessagingIntentClassifierController','XPagesMessagingIntentVerificationController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PagesManagerMessagingClassifierActions').ActionTypes,l=500;i=babelHelpers.inherits(m,c('FluxStore'));j=i&&i.prototype;function m(){j.constructor.call(this,c('PagesManagerMessagingMessagelistDispatcher'));this.$PagesManagerMessagingClassifierStore1=false;this.$PagesManagerMessagingClassifierStore2=false;this.$PagesManagerMessagingClassifierStore3=null;this.$PagesManagerMessagingClassifierStore4=null;this.$PagesManagerMessagingClassifierStore5=new (c('Map'))();this.$PagesManagerMessagingClassifierStore7=new (c('Map'))();this.$PagesManagerMessagingClassifierStore8=new (c('BatchingQueue'))(this.$PagesManagerMessagingClassifierStore10,{timeout:l});this.$PagesManagerMessagingClassifierStore9=new (c('BatchingQueue'))(this.$PagesManagerMessagingClassifierStore11,{timeout:l});}m.prototype.getIntentDescriptionByMessageID=function(n){var o=this.$PagesManagerMessagingClassifierStore7.get(n);return o?c('PagesManagerMessagingClassifierUtil').getIntentDescription(o.intent).toString().toLowerCase():null;};m.prototype.getLastIntent=function(){return this.$PagesManagerMessagingClassifierStore3;};m.prototype.getIsClassifierVerificationEnabled=function(){return this.$PagesManagerMessagingClassifierStore2;};m.prototype.getIntentOnThread=function(n,o){if(!this.$PagesManagerMessagingClassifierStore1)return null;var p=this.$PagesManagerMessagingClassifierStore12(n,o);if(this.$PagesManagerMessagingClassifierStore5.has(p)){var q=this.$PagesManagerMessagingClassifierStore5.get(p);if(q)return c('PagesManagerMessagingClassifierUtil').getIntentDescription(q.intent);return null;}this.$PagesManagerMessagingClassifierStore13(o,n);this.$PagesManagerMessagingClassifierStore5.set(p,null);return null;};m.prototype.__onDispatch=function(n){var o=true;switch(n.type){case k.INITIALIZE_STORE:this.$PagesManagerMessagingClassifierStore14(n.config,n.pageID);break;case k.CHECK_FOR_INTENT:o=this.$PagesManagerMessagingClassifierStore15(n.message,n.userID,n.pageID);break;case k.NOTIFY_INTENT_CLASSIFIED:this.$PagesManagerMessagingClassifierStore3=n.intent;break;case k.THREAD_INTENT_UPDATED:n.payload.forEach(function(p){return this.$PagesManagerMessagingClassifierStore16(p.pageID,p);}.bind(this));break;case k.VERIFY_INTENT:this.$PagesManagerMessagingClassifierStore17(n.messageID,n.message,n.result);break;default:o=false;break;}if(o)this.__emitChange();};m.prototype.$PagesManagerMessagingClassifierStore14=function(n,o){this.$PagesManagerMessagingClassifierStore1=n.enableSubjecLineTagging;this.$PagesManagerMessagingClassifierStore2=n.enableClassifierVerification;if(this.$PagesManagerMessagingClassifierStore1){c('RelayGraphQLSubscriptionNetworkLayer').injectGraphQLSubscriber(c('RelayGraphQLSubscriber')(c('XDliteGraphQLSkywalkerController').getURIBuilder().getURI()));this.$PagesManagerMessagingClassifierStore6=new (c('PagesManagerMessagingThreadIntentTaggingSubscription'))(o,function(p){c('PagesManagerMessagingClassifierActions').notifyThreadIntentUpdated([{pageID:o,context:p}]);});}};m.prototype.$PagesManagerMessagingClassifierStore18=function(n,o,p){this.$PagesManagerMessagingClassifierStore4=n;this.$PagesManagerMessagingClassifierStore9.add({message:n,pageID:p,userID:o});};m.prototype.$PagesManagerMessagingClassifierStore11=function(n){var o=c('XPagesMessagingIntentClassifierController').getURIBuilder().getURI(),p=n.map(function(s){return s.pageID;}),q=n.map(function(s){return s.userID;}),r=n.map(function(s){return s.message;});new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({action:c('IntentClassifierRequestAction').REQUEST_MESSAGE_INTENT,messages:r,page_ids:p,user_ids:q}).setHandler(function(s){var t=s.getPayload();if(t&&t.length){var u=t[t.length-1].intent;c('PagesManagerMessagingClassifierActions').notifyIntentClassified(u);}}).send();};m.prototype.$PagesManagerMessagingClassifierStore13=function(n,o){this.$PagesManagerMessagingClassifierStore8.add({pageID:o,userID:n});};m.prototype.$PagesManagerMessagingClassifierStore10=function(n){var o=c('XPagesMessagingIntentClassifierController').getURIBuilder().getURI(),p=n.map(function(r){return r.pageID;}),q=n.map(function(r){return r.userID;});new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({action:c('IntentClassifierRequestAction').REQUEST_THREAD_INTENT,page_ids:p,user_ids:q}).setHandler(function(r){c('PagesManagerMessagingClassifierActions').notifyThreadIntentUpdated(r.getPayload());}).send();};m.prototype.$PagesManagerMessagingClassifierStore15=function(n,o,p){if(!n){this.$PagesManagerMessagingClassifierStore4=null;this.$PagesManagerMessagingClassifierStore3=null;return true;}if(this.$PagesManagerMessagingClassifierStore19&&n!==this.$PagesManagerMessagingClassifierStore4){this.$PagesManagerMessagingClassifierStore18(n,o,p);return true;}else return false;};m.prototype.$PagesManagerMessagingClassifierStore17=function(n,o,p){var q=this.$PagesManagerMessagingClassifierStore7.get(n);q||h(0);var r=c('XPagesMessagingIntentVerificationController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(r).setMethod('POST').setData({page_id:q.pageID,user_id:q.userID,intent:q.intent,is_correct:p,message_id:n,score:q.score,message:o}).send();this.$PagesManagerMessagingClassifierStore7['delete'](n);if(!p)this.$PagesManagerMessagingClassifierStore5.set(this.$PagesManagerMessagingClassifierStore12(q.pageID,q.userID),null);};m.prototype.$PagesManagerMessagingClassifierStore16=function(n,o){var p=o.userID,q=o.messageID,r=o.isVerified,s=o.intent,t=o.score,u=s?{intent:s,pageID:n,userID:p,score:t}:null;this.$PagesManagerMessagingClassifierStore5.set(this.$PagesManagerMessagingClassifierStore12(n,p),u);if(u&&!r)this.$PagesManagerMessagingClassifierStore7.set(q,u);};m.prototype.$PagesManagerMessagingClassifierStore12=function(n,o){return n+':'+o;};f.exports=new m();}),null);
__d('PagesManagerMessagingIntentVerifier.react',['cx','fbt','PagesManagerMessagingClassifierActions','Link.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$PagesManagerMessagingIntentVerifier1=function(r){c('PagesManagerMessagingClassifierActions').verifyIntentClassification(this.props.messageID,this.props.message,false);r.stopPropagation();}.bind(this),this.$PagesManagerMessagingIntentVerifier2=function(r){c('PagesManagerMessagingClassifierActions').verifyIntentClassification(this.props.messageID,this.props.message,true);r.stopPropagation();}.bind(this),n;}l.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_45zu")},c('React').createElement('span',null,i._("Is this about {intent}?",[i.param('intent',this.props.intent)])),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingIntentVerifier2},i._("Yes")),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingIntentVerifier1},i._("No"))));};f.exports=l;}),null);
__d('PagesManagerMessagingIntentVerificationContainer.react',['PagesManagerMessagingClassifierStore','FluxContainer','PagesManagerMessagingIntentVerifier.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(k){return [c('PagesManagerMessagingClassifierStore')];};j.calculateState=function(k,l){return {intentDescription:c('PagesManagerMessagingClassifierStore').getIntentDescriptionByMessageID(l.message.message_id),isFeatureEnabled:c('PagesManagerMessagingClassifierStore').getIsClassifierVerificationEnabled()};};function j(k){i.constructor.call(this,k);}j.prototype.render=function(){var k=this.state.intentDescription;if(!k||!this.state.isFeatureEnabled)return null;return (c('React').createElement(c('PagesManagerMessagingIntentVerifier.react'),{intent:k,messageID:this.props.message.message_id,message:this.props.message.body}));};f.exports=c('FluxContainer').create(j,{withProps:true,pure:true});}),null);
__d('PagesManagerMessagingComposerActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({ATTACHMENT:{ALL_COMPLETE:'attachment/attach/complete/all',ATTACH_CACHED:'attachment/attach/cached',ATTACH_COMPLETE:'attachment/attach/complete',ATTACH_START:'attachment/attach/start',CANCEL:'attachment/cancel',DETACH:'attachment/detach',DETACH_ALL:'attachment/detach/all'},MESSAGE:{CLEAR:'message/clear',SET:'message/set'},PARTICIPANT:{SET:'participant/set'},SAVED_REPLIES:{LOADING:'saved-replies/loading',SET:'saved-replies/set'},SHARE_UPLOADER:{READY:'share-uploader/ready',CLEAR:'share-uploader/clear'},UPLOADER:{READY:'uploader/ready'}});f.exports=h;}),null);
__d('PagesManagerMessagingComposerDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingComposerActions',['PagesManagerMessagingComposerActionTypes','PagesManagerMessagingComposerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={clearMessage:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').MESSAGE.CLEAR});},clearShareLinkUploader:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.CLEAR});},completeAllAttachments:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ALL_COMPLETE});},completeAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_COMPLETE,attachment:j});},detachAllAttachments:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH_ALL});},detachAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH,uploadID:j});},fileUploaderReady:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').UPLOADER.READY,uploader:j});},setIsSavedRepliesLoading:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.LOADING,isLoading:j});},setMessage:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').MESSAGE.SET,message:j});},setParticipant:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').PARTICIPANT.SET,participant:j});},setSavedReplies:function i(j,k){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.SET,replies:j,tokens:k});},setShareLinkUploader:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.READY,uploader:j});},startAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_START,files:j});}};f.exports=h;}),null);
__d("XPagesBanUserStatusFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/admin\/ban_user\/status\/",{page_id:{type:"FBID",required:true},user_id:{type:"FBID",required:true}});}),null);
__d('PagesManagerMessagingMessagelistAction',['AsyncRequest','PagesManagerMessagingActionType','Map','PagesManagerMessagingMessagelistDispatcher','XPagesBanUserStatusFetchController'],(function a(b,c,d,e,f,g){var h=c('PagesManagerMessagingActionType').LIST,i=new (c('Map'))(),j={updateMessagelist:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOADED,pageID:l,threadID:m,data:n});},setHotLikeEnd:function k(){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').HOT_LIKE.END});},setHotLikeStart:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').HOT_LIKE.START,preview:l});},setIsLoading:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOADING,isLoading:l});},setIsLoadingMore:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOAD_MORE,isLoadingMore:l});},setScrollAreaHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_SCROLL_HEIGHT,height:l});},setAppointmentBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},setAppointmentScheduleBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},setAppointmentStatusBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},updateReadReceipts:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_LEVEL.READ_RECEIPTS,pageID:l,threadID:m,readReceipts:n});},updateThread:function k(l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').THREAD_LEVEL.UPDATE_THREAD,pageID:l,threadID:m});},setIsContextCardHidden:function k(l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_IS_CONTEXT_CARD_HIDDEN,pageID:l,isHidden:m});},updateIsUserBanned:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').BAN.UPDATE,pageID:l,userID:m,isBanned:n});},_getBanningMapKey:function k(l,m){return l+'_'+m;},fetchIsUserBanned:function k(l,m){var n=this._getBanningMapKey(l,m);if(i.has(n)&&i.get(n))return;var o=c('XPagesBanUserStatusFetchController').getURIBuilder().setFBID('page_id',l).setFBID('user_id',m).getURI();new (c('AsyncRequest'))().setURI(o).setHandler(function(p){j.updateIsUserBanned(l,m,p.payload);}).send();i.set(n,true);},resetIsUserBanned:function k(l,m){i.set(this._getBanningMapKey(l,m),false);}};f.exports=j;}),null);
__d('PagesManagerMessagingNUXActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RESET_STEP:'',SET_IS_VISIBLE:'',SET_ROOT_ELEMENT:'',SET_STEP:'',SET_SHOULD_SHOW_BANNER:'',SET_SHOULD_SHOW_CONTEXT_CARD_STEP:'',SET_DEPENDENCY_READY:{COMPOSER:'',CONTEXT_CARD:'',THREADLIST:''}});f.exports=h;}),null);
__d('PagesManagerMessagingNUXDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingNUXActions',['PagesManagerMessagingNUXActionTypes','PagesManagerMessagingNUXDispatcher','PagesManagerMessagingMessagelistDispatcher','PagesManagerMessagingActionType'],(function a(b,c,d,e,f,g){'use strict';var h={resetStep:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').RESET_STEP});},setComposerReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.COMPOSER});},setContextCardReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.CONTEXT_CARD});},setThreadlistReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.THREADLIST});},setIsVisible:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_IS_VISIBLE,isVisible:j});},setRootElement:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_ROOT_ELEMENT,rootElement:j});},setStep:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_STEP,step:j});},setShouldShowBanner:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_SHOULD_SHOW_BANNER,shouldShow:j});},setShouldShowContextCardStep:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_SHOULD_SHOW_CONTEXT_CARD_STEP,shouldShow:j});}};f.exports=h;}),null);
__d('PagesMessagingSearchMode',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({ALL:'',NAME_SEARCH:'',KEYWORD_SEARCH:'',MESSAGE_SEARCH:'',NONE:''});f.exports=h;}),null);
__d('PagesManagerMessagingThreadlistAction',['PagesManagerMessagingActionType','PagesManagerDispatcher','MercuryThreadlistConstants','PagesAdminToolUIActionType','PagesManagerLogger','PagesMessagingSearchMode'],(function a(b,c,d,e,f,g){var h={initThreadlist:function i(j){this.fetchThreadlist(j,0,c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT);},fetchThreadlist:function i(j,k,l){c('PagesManagerDispatcher').dispatch({offset:k,limit:l,pageID:j,type:c('PagesManagerMessagingActionType').LIST.FETCH});},updateThreadlist:function i(j){c('PagesManagerDispatcher').dispatch({pageID:j,type:c('PagesManagerMessagingActionType').LIST.UPDATED});},changeSearchTerm:function i(j,k,l,m){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.CHANGE_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l,searchMode:m});},changeIsSearchingNameStatus:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.NAME_SEARCH_UPDATE,isSearching:j});},changeIsSearchingSnippetStatus:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE,isSearching:j});},loadMoreNameResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT,searchTerm:k,pageID:j,activeFolder:l});},loadMoreSnippetResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT,searchTerm:k,pageID:j,activeFolder:l});},resetSearch:function i(j){h.changeSearchTerm(j,'','',c('PagesMessagingSearchMode').NONE);},addSearchCustomTag:function i(j,k,l){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS,j,{tag_name:k,position:l});c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG,pageID:j,tagName:k});},removeSearchCustomTag:function i(j,k,l){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS,j,{tag_name:k,position:l});c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG,pageID:j,tagName:k});},fetchCustomTagThreadCounts:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.FETCH_CUSTOM_TAG_THREAD_COUNTS,pageID:j});},searchNameResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.CHANGE_NAME_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l});},searchMessageResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.CHANGE_MESSAGE_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l});}};f.exports=h;}),null);
__d('PagesManagerMessagingComposerStore',['PagesManagerMessagingComposerActionTypes','FluxStore','Map','MercuryConfig','PagesManagerMessagingComposerDispatcher','PagesMessagingConfig','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerMessagingComposerStore1=new (c('Map'))();this.$PagesManagerMessagingComposerStore2=null;this.$PagesManagerMessagingComposerStore3=false;this.$PagesManagerMessagingComposerStore4='';this.$PagesManagerMessagingComposerStore5=null;this.$PagesManagerMessagingComposerStore6={replies:[],tokens:{}};this.$PagesManagerMessagingComposerStore7=null;}j.prototype.getAllAttachmentsMeta=function(){var k=this.$PagesManagerMessagingComposerStore8(),l=[];for(var m=this.$PagesManagerMessagingComposerStore1.values(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p;if(q.id&&k.indexOf(q.id)!==-1||q.isUploading)l.push(q);}return l;};j.prototype.getAttachedAttachmentIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAttachments();return [];};j.prototype.getAttachedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getImageFiles();return [];};j.prototype.getAttachedAnimatedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAnimatedImageFiles();return [];};j.prototype.getAttachedVideoIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getVideoFiles();return [];};j.prototype.getAttachedAudioFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAudioFiles();return [];};j.prototype.getAttachedFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getFiles();return [];};j.prototype.getFileUploader=function(){return this.$PagesManagerMessagingComposerStore2;};j.prototype.getIsAttachmentUploading=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.isUploading();return false;};j.prototype.getIsSavedRepliesLoading=function(){return this.$PagesManagerMessagingComposerStore3;};j.prototype.getMessage=function(){return this.$PagesManagerMessagingComposerStore4;};j.prototype.getQuickReplyMode=function(){return c('PagesMessagingConfig').sendOnEnter;};j.prototype.getParticipant=function(){return this.$PagesManagerMessagingComposerStore5;};j.prototype.getSavedReplies=function(){return this.$PagesManagerMessagingComposerStore6;};j.prototype.getShareLink=function(){if(this.$PagesManagerMessagingComposerStore7)return this.$PagesManagerMessagingComposerStore7.getAttachData();};j.prototype.getUploadActionFromUserID=function(k){if(!k)return null;return new (c('URI'))(c('MercuryConfig').upload_url).addQueryData('request_user_id',k).toString();};j.prototype.$PagesManagerMessagingComposerStore9=function(k,l){this.$PagesManagerMessagingComposerStore1.set(l.upload_id,{id:'',isUploading:true,name:l.metadata.filename,type:l.metadata.filetype,uploadID:l.upload_id});};j.prototype.$PagesManagerMessagingComposerStore10=function(k){k.map(function(l){this.$PagesManagerMessagingComposerStore1.set(l.upload_id,{id:'',isUploading:true,name:l.metadata.name,type:l.metadata.type,uploadID:l.upload_id});}.bind(this));};j.prototype.$PagesManagerMessagingComposerStore11=function(){this.$PagesManagerMessagingComposerStore4='';};j.prototype.$PagesManagerMessagingComposerStore12=function(k){if(this.$PagesManagerMessagingComposerStore1.has(k))this.$PagesManagerMessagingComposerStore1['delete'](k);};j.prototype.$PagesManagerMessagingComposerStore13=function(){if(this.$PagesManagerMessagingComposerStore7)this.$PagesManagerMessagingComposerStore7.clear();};j.prototype.$PagesManagerMessagingComposerStore14=function(k){var l=void 0;if(this.$PagesManagerMessagingComposerStore1.has(k.upload_id)){l=this.$PagesManagerMessagingComposerStore1.get(k.upload_id);l.id=this.$PagesManagerMessagingComposerStore15(k);l.isUploading=false;this.$PagesManagerMessagingComposerStore1.set(k.upload_id,l);}};j.prototype.$PagesManagerMessagingComposerStore8=function(){if(!this.$PagesManagerMessagingComposerStore2)return [];var k=this.$PagesManagerMessagingComposerStore2;return [].concat(k.getAttachments(),k.getImageFiles(),k.getAnimatedImageFiles(),k.getVideoFiles(),k.getAudioFiles(),k.getFiles());};j.prototype.$PagesManagerMessagingComposerStore15=function(k){return k.metadata.image_id||k.metadata.gif_id||k.metadata.video_id||k.metadata.audio_id||k.metadata.file_id;};j.prototype.__onDispatch=function(k){switch(k.actionType){case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ALL_COMPLETE:this.$PagesManagerMessagingComposerStore16();this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_COMPLETE:this.$PagesManagerMessagingComposerStore14(k.attachment);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_START:this.$PagesManagerMessagingComposerStore10(k.files);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH:this.$PagesManagerMessagingComposerStore17(k.uploadID);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH_ALL:this.$PagesManagerMessagingComposerStore18();this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').MESSAGE.CLEAR:this.$PagesManagerMessagingComposerStore11();break;case c('PagesManagerMessagingComposerActionTypes').MESSAGE.SET:this.$PagesManagerMessagingComposerStore19(k.message);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').PARTICIPANT.SET:this.$PagesManagerMessagingComposerStore20(k.participant);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.LOADING:this.$PagesManagerMessagingComposerStore21(k.isLoading);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.SET:this.$PagesManagerMessagingComposerStore22(k.replies,k.tokens);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.READY:this.$PagesManagerMessagingComposerStore23(k.uploader);break;case c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.CLEAR:this.$PagesManagerMessagingComposerStore13();break;case c('PagesManagerMessagingComposerActionTypes').UPLOADER.READY:this.$PagesManagerMessagingComposerStore24(k.uploader);this.$PagesManagerMessagingComposerStore25();break;}};j.prototype.$PagesManagerMessagingComposerStore18=function(){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeAttachments();this.$PagesManagerMessagingComposerStore1.clear();}};j.prototype.$PagesManagerMessagingComposerStore17=function(k){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeOneAttachment(k);this.$PagesManagerMessagingComposerStore12(k);}};j.prototype.$PagesManagerMessagingComposerStore16=function(){this.$PagesManagerMessagingComposerStore1.forEach(function(k,l){if(k.isUploading)this.$PagesManagerMessagingComposerStore1['delete'](k.uploadID);}.bind(this));};j.prototype.$PagesManagerMessagingComposerStore24=function(k){this.$PagesManagerMessagingComposerStore2=k;};j.prototype.$PagesManagerMessagingComposerStore21=function(k){this.$PagesManagerMessagingComposerStore3=k;};j.prototype.$PagesManagerMessagingComposerStore19=function(k){this.$PagesManagerMessagingComposerStore4=k;};j.prototype.$PagesManagerMessagingComposerStore20=function(k){this.$PagesManagerMessagingComposerStore5=k;};j.prototype.$PagesManagerMessagingComposerStore22=function(k,l){this.$PagesManagerMessagingComposerStore6={replies:k,tokens:l};};j.prototype.$PagesManagerMessagingComposerStore23=function(k){this.$PagesManagerMessagingComposerStore7=k;};j.prototype.$PagesManagerMessagingComposerStore25=function(){var k=this.$PagesManagerMessagingComposerStore2;if(k)k.subscribe('cached-file-added',this.$PagesManagerMessagingComposerStore9.bind(this));};f.exports=new j(c('PagesManagerMessagingComposerDispatcher'));}),null);
__d('PagesManagerMessagingComposerAttachmentListItem.react',['cx','ix','Image.react','React','XUICloseButton.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$PagesManagerMessagingComposerAttachmentListItem1=function(){return this.props.onDetach(this.props.uploadID);}.bind(this);}m.prototype.$PagesManagerMessagingComposerAttachmentListItem2=function(){if(this.props.type.startsWith('image')){return i("94995");}else if(this.props.type.startsWith('video')){return i("94998");}else if(this.props.type.startsWith('audio')){return i("94984");}else if(this.props.type.startsWith('text'))return i("94997");return i("94992");};m.prototype.$PagesManagerMessagingComposerAttachmentListItem3=function(){return (c('React').createElement(c('XUICloseButton.react'),{className:"_2uia",onClick:this.$PagesManagerMessagingComposerAttachmentListItem1}));};m.prototype.$PagesManagerMessagingComposerAttachmentListItem4=function(){return (c('React').createElement('span',{className:"_2uib"},this.props.isUploading?c('React').createElement(c('XUISpinner.react'),{size:'large'}):c('React').createElement(c('Image.react'),{src:this.$PagesManagerMessagingComposerAttachmentListItem2(),alt:this.props.type})));};m.prototype.$PagesManagerMessagingComposerAttachmentListItem5=function(){return (c('React').createElement('span',{className:"_2uic"},this.props.name));};m.prototype.render=function(){return (c('React').createElement('li',{className:"clearfix _2uid"},c('React').createElement('span',{className:"_kqe _kqf"},this.$PagesManagerMessagingComposerAttachmentListItem4()),c('React').createElement('span',{className:"_kqe _kqh"},this.$PagesManagerMessagingComposerAttachmentListItem5()),c('React').createElement('span',{className:"_kqe _kqi"},this.$PagesManagerMessagingComposerAttachmentListItem3())));};m.propTypes={attachmentID:l.string,isUploading:l.bool,key:l.string,name:l.string,onDetach:l.func,type:l.string,uploadID:l.string};f.exports=m;}),null);
__d('PagesManagerMessagingComposerAttachmentList.react',['cx','PagesManagerMessagingComposerAttachmentListItem.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.$PagesManagerMessagingComposerAttachmentList1=function(m){return (c('React').createElement(c('PagesManagerMessagingComposerAttachmentListItem.react'),{isUploading:m.isUploading,key:m.uploadID,name:m.name,onDetach:this.props.onDetach,type:m.type,uploadID:m.uploadID}));};l.prototype.render=function(){if(this.props.attachments.length>0)return (c('React').createElement('ul',{className:"_27ru"},this.props.attachments.map(this.$PagesManagerMessagingComposerAttachmentList1,this)));return null;};l.propTypes={attachments:k.array.isRequired,onDetach:k.func.isRequired};l.defaultProps={attachments:[]};f.exports=l;}),null);
__d("XPagesSavedResponsesImageDuplicationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/image\/duplication\/",{});}),null);
__d('PagesManagerMessagingSavedRepliesListItem.react',['cx','ActorURI','AsyncRequest','LeftRight.react','React','SavedResponsesImage.react','SavedResponsesTokensUtils','SavedResponsesUtils','XPagesSavedResponsesImageDuplicationController','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=53,m=53;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.state={isHovering:false};}n.prototype.$PagesManagerMessagingSavedRepliesListItem1=function(){if(this.props.reply.image){var o=this.props.reply.image.id;return (c('React').createElement(c('SavedResponsesImage.react'),{className:"_3-9b _wba",displayClassName:"_wba",height:l,imageID:o,loadingClassName:"_wba",pageID:this.props.pageID,shouldShowCloseButton:false,width:m}));}};n.prototype.$PagesManagerMessagingSavedRepliesListItem2=function(){if(this.props.reply.title)return (c('React').createElement('h4',{className:"_wbb"},this.props.reply.title));};n.prototype.$PagesManagerMessagingSavedRepliesListItem3=function(){var o=c('SavedResponsesTokensUtils').prepareforSend(this.props.reply.message,this.props.tokens),p=null,q=void 0,r=void 0;if(!this.props.reply.image){this.props.onClick(this.props.reply,o,p);return;}p=this.props.reply.image.id;q=c('XPagesSavedResponsesImageDuplicationController').getURIBuilder().getURI();r=c('ActorURI').create(q,this.props.pageID);new (c('AsyncRequest'))().setURI(r).setMethod('POST').setData({image_id:p}).setHandler(function(s){var t=c('SavedResponsesUtils').generateImageMetadata(''+s.payload.duplicatedImageID);this.props.onClick(this.props.reply,o,t);}.bind(this)).send();};n.prototype.$PagesManagerMessagingSavedRepliesListItem4=function(){var o=c('SavedResponsesTokensUtils').prepareforSend(this.props.reply.message,this.props.tokens);this.props.onMouseEnter(o);};n.prototype.$PagesManagerMessagingSavedRepliesListItem5=function(o){var p=0,q=0,r=/\{{(.*?)\}}/g,s=r.exec(o),t=0,u=[];while(s!=null){q=s.index;u.push(c('React').createElement('span',{key:'token:'+t},o.substring(p,q)));p=q+s[0].length;t+=1;var v=s[1] in this.props.tokens?this.props.tokens[s[1]].value:s[1];u.push(c('React').createElement('span',{className:"_3p6b",key:'token:'+t},v));s=r.exec(o);t+=1;}u.push(c('React').createElement('span',{key:'token:'+t},o.substring(p,o.length)));t+=1;return u;};n.prototype.render=function(){return (c('React').createElement('li',{className:c('joinClasses')("_2ph_ _1_2c",this.props.className),onClick:function(){return this.$PagesManagerMessagingSavedRepliesListItem3();}.bind(this),onMouseEnter:function(){return this.$PagesManagerMessagingSavedRepliesListItem4();}.bind(this),onMouseLeave:function(){return this.props.onMouseLeave();}.bind(this),ref:'replyItem'},c('React').createElement(c('LeftRight.react'),{direction:'right'},c('React').createElement('div',null,this.$PagesManagerMessagingSavedRepliesListItem2(),this.$PagesManagerMessagingSavedRepliesListItem5(this.props.reply.message)),this.$PagesManagerMessagingSavedRepliesListItem1())));};n.propTypes={className:k.string,onClick:k.func.isRequired,onMouseEnter:k.func.isRequired,onMouseLeave:k.func.isRequired,pageID:k.string.isRequired,reply:k.object.isRequired,tokens:k.object.isRequired};f.exports=n;}),null);
__d('PagesManagerMessagingSavedRepliesList.react',['cx','fbt','Link.react','React','PagesManagerMessagingSavedRepliesListItem.react','ScrollableArea.react','XUISpinner.react','SavedResponsesUtils'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$PagesManagerMessagingSavedRepliesList1=function(n){var o=this.props.filter.toLowerCase();return (n.message.toLowerCase().indexOf(o)!==-1||(n.title||'').toLowerCase().indexOf(o)!==-1);};m.prototype.render=function(){return (c('React').createElement('div',{className:"_1_25"+(this.props.isLoading?' '+"_1_26":'')+(!this.props.isLoading&&this.props.replies.length===0?' '+"_1_27":'')},this.props.isLoading?this.$PagesManagerMessagingSavedRepliesList2():null,this.$PagesManagerMessagingSavedRepliesList3()));};m.prototype.$PagesManagerMessagingSavedRepliesList4=function(){return (c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onCreateNewReply();}.bind(this),className:"_1_2a"},i._("Create new reply")));};m.prototype.$PagesManagerMessagingSavedRepliesList5=function(){return (c('React').createElement('div',{className:"_2ph_ _1_28"},c('React').createElement('p',null,this.$PagesManagerMessagingSavedRepliesList6()),c('React').createElement('p',null,this.$PagesManagerMessagingSavedRepliesList4())));};m.prototype.$PagesManagerMessagingSavedRepliesList2=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ph_ _1_29"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));};m.prototype.$PagesManagerMessagingSavedRepliesList6=function(){return i._("End of saved replies");};m.prototype.$PagesManagerMessagingSavedRepliesList3=function(){var n=c('SavedResponsesUtils').sortSavedResponses(this.props.replies,this.props.sortingKey);return (c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:false,height:300},c('React').createElement('ul',{className:"_1_2b"},n.map(this.$PagesManagerMessagingSavedRepliesList7,this),c('React').createElement('li',{className:"_2ph_ _1_2c"},this.$PagesManagerMessagingSavedRepliesList5()))));};m.prototype.$PagesManagerMessagingSavedRepliesList7=function(n,o){return (c('React').createElement(c('PagesManagerMessagingSavedRepliesListItem.react'),{className:!this.$PagesManagerMessagingSavedRepliesList1(n)?"hidden_elem":'',key:o,onClick:this.props.onReplySelected,onMouseEnter:this.props.onReplyMouseEnter,onMouseLeave:this.props.onReplyMouseLeave,pageID:this.props.pageID,reply:n,tokens:this.props.tokens}));};function m(){j.apply(this,arguments);}m.defaultProps={filter:''};m.propTypes={filter:l.string,isLoading:l.bool.isRequired,onCreateNewReply:l.func.isRequired,onReplyMouseEnter:l.func.isRequired,onReplyMouseLeave:l.func.isRequired,onReplySelected:l.func.isRequired,pageID:l.string.isRequired,replies:l.array.isRequired,tokens:l.object.isRequired};f.exports=m;}),null);
__d('PagesManagerMessagingSavedRepliesFlyout.react',['cx','fbt','ix','Layout.react','Image.react','LeftFillRightFitLayout.react','LeftRight.react','Link.react','PagesManagerMessagingSavedRepliesList.react','React','SavedResponsesConstants','SavedResponsesOrderingMenu.react','XUICloseButton.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$PagesManagerMessagingSavedRepliesFlyout1=function(r){this.setState({activeSortingOptionKey:r});}.bind(this);this.state={searchQuery:'',activeSortingOptionKey:c('SavedResponsesConstants').sortingKey.MOST_USED};}p.prototype.$PagesManagerMessagingSavedRepliesFlyout2=function(q){var r=q.target.value;this.setState({searchQuery:r});};p.prototype.$PagesManagerMessagingSavedRepliesFlyout3=function(){this.setState({searchQuery:''});};p.prototype.render=function(){return (c('React').createElement('div',{className:"_201v"},this.$PagesManagerMessagingSavedRepliesFlyout4(),c('React').createElement(c('LeftFillRightFitLayout.react'),null,this.$PagesManagerMessagingSavedRepliesFlyout5(),c('React').createElement(c('SavedResponsesOrderingMenu.react'),{className:"_2tws",activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$PagesManagerMessagingSavedRepliesFlyout1})),this.$PagesManagerMessagingSavedRepliesFlyout6()));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout4=function(){return (c('React').createElement('div',{className:"_2ph_ _201w"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('h3',{className:"_201x"},i._("Saved Replies")),c('React').createElement(c('Link.react'),{className:'PagesManagerMessagingSavedRepliesFlyout/manageLink',onClick:this.props.onManageReplies},i._("Manage Replies")))));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout6=function(){return (c('React').createElement(c('PagesManagerMessagingSavedRepliesList.react'),{filter:this.state.searchQuery,isLoading:this.props.isLoading,onCreateNewReply:this.props.onCreateNewReply,onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,sortingKey:this.state.activeSortingOptionKey,tokens:this.props.tokens}));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout5=function(){return (c('React').createElement(c('Layout.react'),{className:"_2ph_ _201y"},c('React').createElement(m,null,c('React').createElement(c('Image.react'),{className:"_201z",src:j("27278")})),c('React').createElement(n,null,c('React').createElement(c('XUITextInput.react'),{className:"_201-",onChange:this.$PagesManagerMessagingSavedRepliesFlyout2.bind(this),ref:'inputField',placeholder:i._("Search Saved Replies"),value:this.state.searchQuery})),c('React').createElement(m,null,c('React').createElement(c('XUICloseButton.react'),{size:'small',onClick:this.$PagesManagerMessagingSavedRepliesFlyout3.bind(this),className:(this.state.searchQuery.length===0?"hidden_elem":'')+(' '+"_2twt")}))));};p.propTypes={isLoading:o.bool.isRequired,onCreateNewReply:o.func.isRequired,onManageReplies:o.func.isRequired,onReplyMouseEnter:o.func.isRequired,onReplyMouseLeave:o.func.isRequired,onReplySelected:o.func.isRequired,pageID:o.string.isRequired,replies:o.array.isRequired,tokens:o.object.isRequired};f.exports=p;}),null);
__d('PagesManagerMessagingSavedRepliesButton.react',['cx','fbt','ix','Image.react','Link.react','PagesEventObserver','PagesEventType','PagesManagerMessagingSavedRepliesFlyout.react','React','SavedResponsesConstants','SavedResponsesManagePanel.react','XUIContextualDialog.react','XUIDialog.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=600,o=405;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.state={initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.LIST,isFlyoutShown:false,isManageDialogVisible:false};}p.prototype.$PagesManagerMessagingSavedRepliesButton1=function(){this.props.onFetchReplies();c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:!this.state.isFlyoutShown});this.setState({isFlyoutShown:!this.state.isFlyoutShown});};p.prototype.$PagesManagerMessagingSavedRepliesButton2=function(){this.props.onFetchReplies();this.setState({isManageDialogVisible:false});};p.prototype.$PagesManagerMessagingSavedRepliesButton3=function(){setTimeout(function(){c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:false});this.setState({isFlyoutShown:false});}.bind(this),0);};p.prototype.render=function(){var q=i._("Choose a Saved Reply");return (c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.props.showTooltip?q:null,className:"_3xmz",'data-hover':'tooltip','data-tooltip-align':'right','data-tooltip-content':this.props.showTooltip?q:null,onClick:this.$PagesManagerMessagingSavedRepliesButton1.bind(this)},c('React').createElement(c('Image.react'),{alt:'',className:"_3xm-",ref:'icon',src:j("94988"),tabIndex:0})),this.$PagesManagerMessagingSavedRepliesButton4(),this.$PagesManagerMessagingSavedRepliesButton5()));};p.prototype.$PagesManagerMessagingSavedRepliesButton4=function(){if(this.state.isFlyoutShown)return (c('React').createElement(c('XUIContextualDialog.react'),{alignment:'right',className:"_3xm_",contextRef:function(){return this.refs.icon;}.bind(this),hasActionableContext:true,hideOnEscape:false,onBlur:this.$PagesManagerMessagingSavedRepliesButton3.bind(this),position:'above',ref:'flyoutDialog',shown:this.state.isFlyoutShown,width:o},c('React').createElement(c('PagesManagerMessagingSavedRepliesFlyout.react'),{isLoading:this.props.isSavedRepliesLoading,onCreateNewReply:function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.CREATE});}.bind(this),onManageReplies:function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.LIST});}.bind(this),onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens})));};p.prototype.$PagesManagerMessagingSavedRepliesButton5=function(){if(this.state.isManageDialogVisible)return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,ref:'managementDialog',shown:this.state.isManageDialogVisible,width:n},c('React').createElement(c('SavedResponsesManagePanel.react'),{initialViewType:this.state.initialSavedResponsesManageViewType,onClose:this.$PagesManagerMessagingSavedRepliesButton2.bind(this),otherUserID:this.props.recipientID,pageID:this.props.pageID})));};p.propTypes={isSavedRepliesLoading:m.bool.isRequired,onFetchReplies:m.func.isRequired,onReplyMouseEnter:m.func.isRequired,onReplyMouseLeave:m.func.isRequired,onReplySelected:m.func.isRequired,pageID:m.string.isRequired,recipientID:m.string.isRequired,replies:m.array.isRequired,showTooltip:m.bool,tokens:m.object.isRequired};p.defaultProps={showTooltip:true};f.exports=p;}),null);
__d('PagesManagerMessagingComposerView.react',['cssVar','cx','fbt','ix','PagesManagerMessagingComposerAttachmentList.react','CommerceInvoiceAdminButton.react','Image.react','MercuryDragDropPrompt.react','MercuryShareAttachmentRenderLocations','MessengerHotLikeButton.react','MessengerHotLikeGlyphIcon.react','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType','PagesManagerLogger','PagesManagerMessagingSavedRepliesButton.react','PagesMessagingPerfTypedLogger','PagesMessagingPerfLoggerEvent','PagesMessageSuggestedResponseHandler','PagesMessengerFileUploader.react','PagesMessengerSuggestedResponseView.react','PagesMessengerTextInput.react','React','ReactDOM','SavedResponsesUtils','Tooltip.react','TooltipData','UFIStickerButton.react','XUIButton.react','fbglyph','Grid.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=function r(){},p=c('Grid.react').GridItem;l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;function q(r){m.constructor.call(this,r);this.$PagesManagerMessagingComposerView1=false;this.state={isAttachmentsButtonVisible:true,isSavedRepliesButtonVisible:true,isStickerButtonVisible:true,placeholder:''};}q.prototype.componentDidUpdate=function(r,s){if(this.props.onInitialRender&&this.props.participant&&this.refs.textInput&&!this.$PagesManagerMessagingComposerView1){this.props.onInitialRender();this.$PagesManagerMessagingComposerView1=true;}if(r&&r.message!==this.props.message)this.refs.textInput.updateHeight();};q.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerView2(this.props);};q.prototype.componentWillReceiveProps=function(r){this.$PagesManagerMessagingComposerView2(r,this.state);};q.prototype.$PagesManagerMessagingComposerView2=function(r){var s=r.attachments.length,t=r.message.length;this.setState({isSavedRepliesButtonVisible:t<1&&s<1,isStickerButtonVisible:t<1&&s<1});};q.prototype.$PagesManagerMessagingComposerView3=function(){return (this.props.canAttachFiles&&this.state.isAttachmentsButtonVisible);};q.prototype.$PagesManagerMessagingComposerView4=function(){return (this.props.canUseSavedReplies&&this.state.isSavedRepliesButtonVisible);};q.prototype.$PagesManagerMessagingComposerView5=function(){return (this.props.canUseStickers&&this.state.isStickerButtonVisible);};q.prototype.$PagesManagerMessagingComposerView6=function(r){this.props.onEmoticonSelected(r,c('ReactDOM').findDOMNode(this.refs.textInput.refs.input));};q.prototype.$PagesManagerMessagingComposerView7=function(r){r.preventDefault();var s=Date.now();c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEND_MESSAGE,this.props.userID);new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesMessagingPerfLoggerEvent').SEND_MESSAGE_JS_START).log();this.props.onSend(s);};q.prototype.$PagesManagerMessagingComposerView8=function(){if(!this.$PagesManagerMessagingComposerView3())return null;var r=j._("Send a file");return (c('React').createElement('div',babelHelpers['extends']({className:"_4dvy"},c('TooltipData').propsFor(r)),c('React').createElement(c('PagesMessengerFileUploader.react'),{actionURI:this.props.uploaderActionURI,iconSize:'large',onFileUploaderMounted:this.props.onFileUploaderMounted,onSubmit:this.props.onFileUploaderSubmit,onUpdateAttachmentsShelf:this.props.onFileUploadUpdateUI,onUploadFinished:this.props.onFileUploadFinished,ref:'fileUploader'})));};q.prototype.$PagesManagerMessagingComposerView9=function(){if(!this.props.canAttachFiles)return null;return (c('React').createElement(c('PagesManagerMessagingComposerAttachmentList.react'),{attachments:this.props.attachments,attachmentsUploading:this.props.attachmentsUploading,onDetach:this.props.onAttachmentDetach,ref:'attachmentList'}));};q.prototype.$PagesManagerMessagingComposerView10=function(){if(this.props.threadID&&this.props.message.length<1&&this.props.attachments.length<1){var r=this.props.threadID;return (c('React').createElement('span',{className:"_1z9h"},c('React').createElement(c('MessengerHotLikeButton.react'),{CustomRenderer:this.props.isInboxDetailView?c('MessengerHotLikeGlyphIcon.react'):undefined,customColor:this.props.isInboxDetailView?undefined:"#0084ff",disabled:!this.props.threadID,location:c('MercuryShareAttachmentRenderLocations').PAGES_INBOX,sendSticker:this.props.onStickerSelected,renderSize:24,threadID:r})));}return null;};q.prototype.$PagesManagerMessagingComposerView11=function(){var r=this.state.placeholder||j._("Write a reply...");return (c('React').createElement('div',{className:"_4dv-"},c('React').createElement(c('PagesMessengerTextInput.react'),{className:"_1p7p _5id1 _4dv_",onNoShiftEnter:this.props.isQuickReplyMode?function(s){return this.$PagesManagerMessagingComposerView7(s);}.bind(this):null,onFocus:this.props.onFocus,placeholder:r,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};q.prototype.$PagesManagerMessagingComposerView12=function(){return (c('React').createElement('div',{className:"_6fk",ref:'linkPreview'}));};q.prototype.$PagesManagerMessagingComposerView13=function(){return (c('React').createElement('div',{className:"_4dw0"},c('React').createElement(c('Image.react'),{className:"_1cjc",src:this.props.participant.image_src})));};q.prototype.$PagesManagerMessagingComposerView14=function(){if(!this.$PagesManagerMessagingComposerView4()||!this.props.recipientID)return null;return (c('React').createElement('span',{className:"_4dw1"},c('React').createElement(c('PagesManagerMessagingSavedRepliesButton.react'),{recipientID:this.props.recipientID,isSavedRepliesLoading:this.props.isSavedRepliesLoading,onFetchReplies:this.props.onFetchReplies,onReplyMouseEnter:this.$PagesManagerMessagingComposerView15.bind(this),onReplyMouseLeave:this.$PagesManagerMessagingComposerView16.bind(this),onReplySelected:this.$PagesManagerMessagingComposerView17.bind(this),pageID:this.props.userID,replies:this.props.savedReplies.replies,showTooltip:true,tokens:this.props.savedReplies.tokens})));};q.prototype.$PagesManagerMessagingComposerView18=function(){var r=j._("Send");return (c('React').createElement('div',{className:"_4dw3"+(this.props.message.length<1&&this.props.attachments.length<1?' '+"hidden_elem":'')},c('React').createElement(c('XUIButton.react'),{disabled:this.props.isSendBlocked,label:r,onClick:function(s){return this.$PagesManagerMessagingComposerView7(s);}.bind(this),use:'confirm'})));};q.prototype.$PagesManagerMessagingComposerView19=function(){if(!this.$PagesManagerMessagingComposerView5())return null;var r=j._("Post a sticker");return (c('React').createElement('span',{className:"_4dw4"},c('React').createElement(c('UFIStickerButton.react'),{onStickerSelected:this.props.onStickerSelected,onEmoticonSelected:function(s){return this.$PagesManagerMessagingComposerView6(s);}.bind(this)},c('React').createElement(c('Image.react'),{alt:r,className:"_3fhi",src:k("94989")}))));};q.prototype.$PagesManagerMessagingComposerView20=function(){if(!this.props.shouldShowCommerceInvoiceButton||this.props.recipientID==null)return null;return (c('React').createElement('div',{className:"_3w8o"},c('React').createElement(c('CommerceInvoiceAdminButton.react'),{defaultCurrency:this.props.defaultCurrency,pageID:this.props.userID,recipientID:this.props.recipientID,shouldOpenNewFlow:this.props.shouldShowCommerceInvoiceNewFlow,shouldShowNUX:this.props.shouldShowCommerceInvoiceButtonNUX,shouldShowPUX:this.props.shouldShowCommerceInvoiceButtonPUX,shouldShowShippingNUX:this.props.shouldShowInvoiceShippingNUX})));};q.prototype.$PagesManagerMessagingComposerView21=function(){return (c('React').createElement(c('PagesMessengerSuggestedResponseView.react'),{suggestedResponseHandler:this.props.suggestedResponseHandler,onAccepted:this.props.onSuggestedResponseAccept,onDeclined:this.props.onSuggestedResponseDecline}));};q.prototype.render=function(){if(!this.props.recipientID||!this.props.threadID||!this.props.participant){return c('React').createElement('div',{className:"__1d"});}else if(this.props.isBlocked){new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesMessagingPerfLoggerEvent').COMPOSER_BLOCKED_WITH_WARNING).log();return (c('React').createElement(p,{alignv:'middle',className:"_50wh"},c('React').createElement('div',{className:"_50wn"},j._("Your Page is no longer able to send messages to this person."),c('React').createElement(c('Tooltip.react'),{tooltip:j._("A Page may be unable to send messages to someone if they are no longer on Facebook, if they pose a security risk, or if they have chosen not to receive messages.")},c('React').createElement('a',{href:'https://www.facebook.com/help/307375982614147'},c('React').createElement(c('Image.react'),{src:k("126341"),style:{verticalAlign:'-2px'}}))))));}return (c('React').createElement('div',{className:"__1d"},c('React').createElement(c('MercuryDragDropPrompt.react'),null),c('React').createElement('div',{className:"_4dw9"},this.$PagesManagerMessagingComposerView13(),this.$PagesManagerMessagingComposerView11(),c('React').createElement('div',{className:"_3-8o _4dwa"},this.$PagesManagerMessagingComposerView20(),this.$PagesManagerMessagingComposerView8(),this.$PagesManagerMessagingComposerView19(),this.$PagesManagerMessagingComposerView14(),this.$PagesManagerMessagingComposerView10(),this.$PagesManagerMessagingComposerView18())),c('React').createElement('div',{className:"_6fl"},this.$PagesManagerMessagingComposerView21(),this.$PagesManagerMessagingComposerView12()),this.$PagesManagerMessagingComposerView9()));};q.prototype.$PagesManagerMessagingComposerView15=function(r){this.setState({placeholder:r});};q.prototype.$PagesManagerMessagingComposerView16=function(){this.setState({placeholder:''});};q.prototype.$PagesManagerMessagingComposerView17=function(r,s,t){this.setState({placeholder:''});this.props.onReplySelected(s,t);c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_APPLY_REPLY,this.props.userID);c('SavedResponsesUtils').notifySavedResponseApplied(r,this.props.userID);};q.propTypes={attachments:n.array,canAttachFiles:n.bool,canUseSavedReplies:n.bool,canUseStickers:n.bool,isQuickReplyMode:n.bool,isSavedRepliesLoading:n.bool,isSendBlocked:n.bool,message:n.string.isRequired,onAttachmentDetach:n.func,onEmoticonSelected:n.func,onFetchReplies:n.func.isRequired,onFileUploaderSubmit:n.func,onFileUploaderMounted:n.func,onFileUploadFinished:n.func,onFocus:n.func,onInitialRender:n.func,onInputChange:n.func,onSend:n.func,onStickerSelected:n.func,onSuggestedResponseAccept:n.func,onSuggestedResponseDecline:n.func,participant:n.object,recipientID:n.string,savedReplies:n.object,shouldShowInvoiceShippingNUX:n.bool,suggestedResponseHandler:n.instanceOf(c('PagesMessageSuggestedResponseHandler')),uploaderActionURI:n.string,userID:n.string};q.defaultProps={attachments:[],canAttachFiles:true,canUseSavedReplies:true,canUseStickers:true,isSendBlocked:false,onAttachmentDetach:o,onEmoticonSelected:o,onFileUploaderMounted:o,onFileUploaderSubmit:o,onFileUploadFinished:o,onInputChange:o,onSend:o,onStickerSelected:o,onSuggestedResponseAccept:o,shouldShowCommerceInvoiceButton:false,shouldShowCommerceInvoiceButtonNUX:false,shouldShowCommerceInvoiceButtonPUX:false,shouldShowInvoiceShippingNUX:false};f.exports=q;}),null);
__d("XPagesMessagingBlockController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/message\/isblocked\/",{recipient_id:{type:"String",required:true}});}),null);
__d('PagesManagerMessagingComposerContainer.react',['invariant','AsyncRequest','DragDropTarget','EmoticonsList','EmoticonUtils','FluxContainer','MercuryIDs','MercuryPageMessageActions','MercuryMessageObject','MercuryParticipants','MercurySourceType','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerActions','PagesManagerMessagingComposerStore','PagesManagerMessagingComposerView.react','PagesManagerMessagingNUXActions','PagesMessagingConfig','PagesMessagingPerfTypedLogger','PagesMessagingPerfLoggerEvent','PagesMessengerShareLinkUploader','React','ReactDOM','SavedResponsesUtils','SelectionPosition','SubscriptionsHandler','XPagesMessagingBlockController','emptyFunction','ActorURI'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.getStores=function(){return [c('PagesManagerMessagingComposerStore')];};l.calculateState=function(m,n){var o=m?m.isShareLinkUploading:false,p=m?m.isBlocked:false;return {attachments:c('PagesManagerMessagingComposerStore').getAllAttachmentsMeta(),isAttachmentUploading:c('PagesManagerMessagingComposerStore').getIsAttachmentUploading(),isSavedRepliesLoading:c('PagesManagerMessagingComposerStore').getIsSavedRepliesLoading(),isQuickReplyMode:c('PagesManagerMessagingComposerStore').getQuickReplyMode(),isShareLinkUploading:o,message:c('PagesManagerMessagingComposerStore').getMessage(),participant:c('PagesManagerMessagingComposerStore').getParticipant(),savedReplies:c('PagesManagerMessagingComposerStore').getSavedReplies(),uploaderActionURI:c('PagesManagerMessagingComposerStore').getUploadActionFromUserID(n.userID),isBlocked:p};};l.prototype.$PagesManagerMessagingComposerContainer6=function(m){this.__subscriptions.addSubscriptions(m.subscribe('one-upload-completed',this.__onFileUploaderOneUploadComplete.bind(this)));};l.prototype.componentDidUpdate=function(m){if(this.props.recipientID&&this.props.threadID&&(!m.recipientID||!m.threadID)){c('PagesManagerMessagingNUXActions').setComposerReady();if(this.props.onInitialRender)this.props.onInitialRender();}if(this.props.recipientID!==null&&this.props.recipientID!==m.recipientID)this.isRecipientBlocked(this.props.recipientID);};l.prototype.componentDidMount=function(){this.$PagesManagerMessagingComposerContainer7(this.props.userID);};l.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerContainer8(this.props);this.__subscriptions=new (c('SubscriptionsHandler'))();};l.prototype.componentWillReceiveProps=function(m){this.$PagesManagerMessagingComposerContainer8(m);if(m.threadID!==this.props.threadID){c('PagesManagerMessagingComposerActions').clearMessage();c('PagesManagerMessagingComposerActions').detachAllAttachments();}if(m.userID!==this.props.userID)this.$PagesManagerMessagingComposerContainer7(m.userID);};l.prototype.componentWillUpdate=function(m,n){if(this.props.onMessageOrAttachmentUpdate&&(n.attachments.length!==this.state.attachments.length||n.message!==this.state.message))this.props.onMessageOrAttachmentUpdate();};l.prototype.componentWillUnmount=function(){this.__subscriptions&&this.__subscriptions.release();};l.prototype.$PagesManagerMessagingComposerContainer9=function(){var m=new (c('PagesMessengerShareLinkUploader'))(c('ReactDOM').findDOMNode(this.refs.composer.refs.linkPreview),this.refs.composer.refs.textInput.refs.input,c('emptyFunction'),c('emptyFunction'),this.props.userID);this.__subscriptions.addSubscriptions(m.subscribe('link-detected',function(){this.setState({isShareLinkUploading:true});this.props.onMessageOrAttachmentUpdate();}.bind(this)),m.subscribe('share-loaded',function(){this.setState({isShareLinkUploading:false});}.bind(this)),m.subscribe('closed',function(){this.props.onMessageOrAttachmentUpdate();}.bind(this)));if(c('PagesMessagingConfig').dragdropEnabled){this.$PagesManagerMessagingComposerContainer1=this.$PagesManagerMessagingComposerContainer1||new (c('DragDropTarget'))(c('ReactDOM').findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer1.setOnURLDropCallback(function(n){return (m.loadShare(n));});}c('PagesManagerMessagingComposerActions').setShareLinkUploader(m);};l.prototype.__fetchSavedReplies=function(){if(this.state.isSavedRepliesLoading||!this.props.userID||!this.props.recipientID)return;c('PagesManagerMessagingComposerActions').setIsSavedRepliesLoading(true);c('SavedResponsesUtils').fetchSavedResponses(this.props.userID,this.props.recipientID,function(m,n){c('PagesManagerMessagingComposerActions').setIsSavedRepliesLoading(false);c('PagesManagerMessagingComposerActions').setSavedReplies(m,n);});};l.prototype.$PagesManagerMessagingComposerContainer8=function(m){var n=m.userID;n||h(0);this.$PagesManagerMessagingComposerContainer2=c('MercuryMessageObject').getForFBID(n);this.$PagesManagerMessagingComposerContainer3=c('MercuryPageMessageActions').getForFBID(n);};l.prototype.$PagesManagerMessagingComposerContainer7=function(m){var n=c('MercuryIDs').getParticipantIDFromUserID(m);c('MercuryParticipants').get(n,function(o){c('PagesManagerMessagingComposerActions').setParticipant(o);});};l.prototype.isSendBlocked=function(){if(this.state.isAttachmentUploading||this.state.isShareLinkUploading||this.state.message===''&&this.state.attachments.length<1)return true;return false;};l.prototype.isRecipientBlocked=function(m){var n=c('ActorURI').create(c('XPagesMessagingBlockController').getURIBuilder().setString('recipient_id',m).getURI(),this.props.userID);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){var p=o.payload;this.setState({isBlocked:p});return;}.bind(this)).send();};l.prototype.__onAttachmentDetach=function(m){c('PagesManagerMessagingComposerActions').detachAttachment(m);};l.prototype.__onEmoticonSelected=function(m,n){var o=c('EmoticonsList').symbols[m];if(!o)return;this.$PagesManagerMessagingComposerContainer4=this.$PagesManagerMessagingComposerContainer4||new (c('SelectionPosition'))(n);var p=c('EmoticonUtils').insertEmoticon(o,this.state.message,this.$PagesManagerMessagingComposerContainer4.getPos());this.$PagesManagerMessagingComposerContainer4.setPos(p.start,p.end);c('PagesManagerMessagingComposerActions').setMessage(p.result);};l.prototype.__onFileUploaderMounted=function(m){this.$PagesManagerMessagingComposerContainer6(m);if(c('PagesMessagingConfig').dragdropEnabled){this.$PagesManagerMessagingComposerContainer1=this.$PagesManagerMessagingComposerContainer1||new (c('DragDropTarget'))(c('ReactDOM').findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer1.setOnFilesDropCallback(this.$PagesManagerMessagingComposerContainer10.bind(this));}c('PagesManagerMessagingComposerActions').fileUploaderReady(m);};l.prototype.__onFileUploaderOneUploadComplete=function(m,n){c('PagesManagerMessagingComposerActions').completeAttachment(n);};l.prototype.__onFileUploaderSubmit=function(m,n){c('PagesManagerMessagingComposerActions').startAttachment(n.files);if(this.refs.composer&&this.refs.composer.refs.textInput&&this.refs.composer.refs.textInput.refs.input)c('ReactDOM').findDOMNode(this.refs.composer.refs.textInput.refs.input).focus();};l.prototype.__onFileUploadFinished=function(m){if(m==='all-uploads-completed'){c('PagesManagerMessagingComposerActions').completeAllAttachments();}else m==='upload-canceled';};l.prototype.__onInputValueChange=function(m){c('PagesManagerMessagingComposerActions').setMessage(m.target.value);};l.prototype.__onReplySelected=function(m,n){var o=c('PagesManagerMessagingComposerStore').getFileUploader();c('PagesManagerMessagingComposerActions').detachAllAttachments();c('PagesManagerMessagingComposerActions').setMessage(m);if(n&&o)o.addCachedAttachments([n]);if(this.refs.composer&&this.refs.composer.refs.textInput)c('ReactDOM').findDOMNode(this.refs.composer.refs.textInput.refs.input).focus();};l.prototype.__onSendMessageHandleException=function(m){try{this.__onSendMessage(m);}catch(n){new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesMessagingPerfLoggerEvent').SEND_MESSAGE_JS_EXCEPTION).setExceptionMessage(n.message).setStack(n.stack).log();}};l.prototype.__onSendMessage=function(m){var n=this.state.message,o=c('PagesManagerMessagingComposerStore').getAttachedAttachmentIds(),p=c('PagesManagerMessagingComposerStore').getAttachedImageIds(),q=c('PagesManagerMessagingComposerStore').getAttachedAnimatedImageIds(),r=c('PagesManagerMessagingComposerStore').getAttachedVideoIds(),s=c('PagesManagerMessagingComposerStore').getAttachedAudioFilesIds(),t=c('PagesManagerMessagingComposerStore').getAttachedFilesIds(),u=c('PagesManagerMessagingComposerStore').getShareLink(),v=this.$PagesManagerMessagingComposerContainer2.constructUserGeneratedMessageObject(n,c('MercurySourceType').TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);if(this.isSendBlocked()||!n&&!o.length&&!s.length&&!p.length&&!t.length&&!q.length&&!r.length&&!u)return;if(u){v.has_attachment=true;v.content_attachment=u;}if(o.length>0){v.has_attachment=true;v.raw_attachments=o;}if(p.length>0){v.image_ids=p;v.has_attachment=true;}if(q.length>0){v.gif_ids=q;v.has_attachment=true;}if(r.length>0){v.video_ids=r;v.has_attachment=true;}if(s.length>0){v.audio_ids=s;v.has_attachment=true;}if(t.length>0){v.file_ids=t;v.has_attachment=true;}c('PagesEventObserver').logData_DEPRECATED({page_id:this.props.user,event_name:c('PagesEventType').MESSAGES_DIALOG_SEND,thread_id:this.props.threadElementID},null);this.$PagesManagerMessagingComposerContainer3.send(v);c('PagesManagerMessagingComposerActions').detachAllAttachments();c('PagesManagerMessagingComposerActions').clearMessage();c('PagesManagerMessagingComposerActions').clearShareLinkUploader();if(this.props.onSendMessage)this.props.onSendMessage();new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesMessagingPerfLoggerEvent').SEND_MESSAGE_JS_END).setPerfTime(Date.now()-m).log();};l.prototype.__onStickerSelected=function(m){var n=this.$PagesManagerMessagingComposerContainer2.constructUserGeneratedMessageObject('',c('MercurySourceType').TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);n.has_attachment=true;n.sticker_id=m;this.$PagesManagerMessagingComposerContainer3.send(n);c('PagesManagerMessagingComposerActions').clearMessage();};l.prototype.$PagesManagerMessagingComposerContainer10=function(m){if(this.refs.composer&&this.refs.composer.refs.fileUploader)this.refs.composer.refs.fileUploader.addFiles(m);};l.prototype.render=function(){return (c('React').createElement(c('PagesManagerMessagingComposerView.react'),babelHelpers['extends']({},this.props,this.state,{isSendBlocked:this.isSendBlocked(),onAttachmentDetach:this.__onAttachmentDetach.bind(this),onEmoticonSelected:this.__onEmoticonSelected.bind(this),onFetchReplies:this.__fetchSavedReplies.bind(this),onFileUploaderMounted:this.__onFileUploaderMounted.bind(this),onFileUploaderSubmit:this.__onFileUploaderSubmit.bind(this),onFileUploadFinished:this.__onFileUploadFinished.bind(this),onInitialRender:function(){return this.$PagesManagerMessagingComposerContainer9();}.bind(this),onInputChange:function(m){return this.__onInputValueChange(m);}.bind(this),onReplySelected:this.__onReplySelected.bind(this),onSend:function(m){return this.__onSendMessageHandleException(m);}.bind(this),onStickerSelected:this.__onStickerSelected.bind(this),ref:'composer'})));};function l(){i.apply(this,arguments);}l.propTypes={creatorInfo:k.object,onInitialRender:k.func,onMessageOrAttachmentUpdate:k.func,shouldShowCommerceInvoiceButton:k.bool,shouldShowCommerceInvoiceButtonNUX:k.bool,shouldShowCommerceInvoiceButtonPUX:k.bool,shouldShowCommerceInvoiceNewFlow:k.bool,shouldShowInvoiceShippingNUX:k.bool,threadElementID:k.string,threadID:k.string,userID:k.string};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d("XPagesContextCardSetIsHiddenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/customer\/context_card\/set_is_hidden\/",{});}),null);
__d('PagesManagerMessagingMessagelistStore',['PagesManagerMessagingActionType','ActorURI','AsyncRequest','FluxStore','immutable','Map','MercuryMessages','PagesManagerMessagingMessagelistDispatcher','MercuryThreadlistConstants','XPagesContextCardSetIsHiddenController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('PagesManagerMessagingMessagelistDispatcher'));this.$PagesManagerMessagingMessagelistStore1='';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore3=false;this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore6=[];this.$PagesManagerMessagingMessagelistStore7=c('immutable').OrderedMap();this.$PagesManagerMessagingMessagelistStore8=0;this.$PagesManagerMessagingMessagelistStore10=new (c('Map'))();this.$PagesManagerMessagingMessagelistStore11=0;}j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerMessagingActionType').LIST.LOADED:this.$PagesManagerMessagingMessagelistStore12(k);this.__emitChange();break;case c('PagesManagerMessagingActionType').LIST.LOADING:this.$PagesManagerMessagingMessagelistStore2=k.isLoading;this.__emitChange();break;case c('PagesManagerMessagingActionType').LIST.LOAD_MORE:this.$PagesManagerMessagingMessagelistStore3=k.isLoadingMore;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_LEVEL.READ_RECEIPTS:this.$PagesManagerMessagingMessagelistStore13(k);this.__emitChange();break;case c('PagesManagerMessagingActionType').SET_SCROLL_HEIGHT:var l=k.height;if(l!==this.$PagesManagerMessagingMessagelistStore8){this.$PagesManagerMessagingMessagelistStore8=l;this.__emitChange();}break;case c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT:this.$PagesManagerMessagingMessagelistStore11=k.appointmentBannerHeight;this.__emitChange();break;case c('PagesManagerMessagingActionType').THREAD_LEVEL.UPDATE_THREAD:this.__emitChange();break;case c('PagesManagerMessagingActionType').SET_IS_CONTEXT_CARD_HIDDEN:this.$PagesManagerMessagingMessagelistStore14(k.pageID,k.isHidden);this.__emitChange();break;case c('PagesManagerMessagingActionType').HOT_LIKE.END:this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore5=null;break;case c('PagesManagerMessagingActionType').HOT_LIKE.START:this.$PagesManagerMessagingMessagelistStore4=true;this.$PagesManagerMessagingMessagelistStore5=k.preview;this.__emitChange();break;case c('PagesManagerMessagingActionType').BAN.UPDATE:this.$PagesManagerMessagingMessagelistStore15(k.pageID,k.userID,k.isBanned);this.__emitChange();break;default:return;}};j.prototype.$PagesManagerMessagingMessagelistStore12=function(k){this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore1=k.threadID;this.$PagesManagerMessagingMessagelistStore6=k.data.messages;};j.prototype.$PagesManagerMessagingMessagelistStore13=function(k){if(this.$PagesManagerMessagingMessagelistStore1!==k.threadID)this.$PagesManagerMessagingMessagelistStore6=[];this.$PagesManagerMessagingMessagelistStore1=k.threadID;this.$PagesManagerMessagingMessagelistStore7=k.readReceipts;};j.prototype.isLoading=function(){return this.$PagesManagerMessagingMessagelistStore2;};j.prototype.isLoadingMore=function(){return this.$PagesManagerMessagingMessagelistStore3;};j.prototype.getMessagelist=function(k,l){var m;if(l!=this.$PagesManagerMessagingMessagelistStore1)return c('MercuryMessages').getForFBID(k).getThreadMessagesRangeNow(l,0,c('MercuryThreadlistConstants').WEBMESSENGER_MORE_MESSAGES_COUNT).reverse();if(this.$PagesManagerMessagingMessagelistStore4&&this.$PagesManagerMessagingMessagelistStore5){m=this.$PagesManagerMessagingMessagelistStore6.slice();if(this.$PagesManagerMessagingMessagelistStore5)m.push(this.$PagesManagerMessagingMessagelistStore5);return m;}return this.$PagesManagerMessagingMessagelistStore6;};j.prototype.getScrollHeight=function(){return this.$PagesManagerMessagingMessagelistStore8;};j.prototype.getReadReceipts=function(k){if(k!=this.$PagesManagerMessagingMessagelistStore1)return c('immutable').OrderedMap();return this.$PagesManagerMessagingMessagelistStore7;};j.prototype.isCardHidden=function(){if(this.$PagesManagerMessagingMessagelistStore9===undefined||this.$PagesManagerMessagingMessagelistStore9===null)return null;return this.$PagesManagerMessagingMessagelistStore9;};j.prototype.getAppointmentBannerHeight=function(){return this.$PagesManagerMessagingMessagelistStore11;};j.prototype.$PagesManagerMessagingMessagelistStore14=function(k,l){this.$PagesManagerMessagingMessagelistStore9=l;var m=c('ActorURI').create(c('XPagesContextCardSetIsHiddenController').getURIBuilder().getURI(),k);new (c('AsyncRequest'))().setURI(m).setData({is_hidden:l}).setMethod('POST').send();};j.prototype.$PagesManagerMessagingMessagelistStore16=function(k,l){return k+'_'+l;};j.prototype.getIsUserBanned=function(k,l){return this.$PagesManagerMessagingMessagelistStore10.get(this.$PagesManagerMessagingMessagelistStore16(k,l));};j.prototype.$PagesManagerMessagingMessagelistStore15=function(k,l,m){this.$PagesManagerMessagingMessagelistStore10.set(this.$PagesManagerMessagingMessagelistStore16(k,l),m);};f.exports=new j(c('PagesManagerMessagingMessagelistDispatcher'));}),null);
__d('PagesManagerMessagingLogger',['invariant','MessagingTag','PageCommItemStatus','PagesEventObserver','PagesEventType'],(function a(b,c,d,e,f,g,h){var i='messages',j='inbox',k=':',l={logMessagesSectionViewEvent:function m(n,o){var p=o||j,q=[];if(p.indexOf(':')){q=p.split(k);p=q[q.length-1];}c('PagesEventObserver').notify(c('PagesEventType').VIEW_MESSAGES,n,{section:i,subsection:p});},logPageViewFolderEvent:function m(n,o,p){var event='';switch(o.getKey()){case c('MessagingTag').INBOX:event=c('PagesEventType').MESSAGES_VIEW_INBOX;break;case c('MessagingTag').ACTION_ARCHIVED:event=c('PagesEventType').MESSAGES_VIEW_ARCHIVED;break;case c('MessagingTag').SPAM:event=c('PagesEventType').MESSAGES_VIEW_SPAM;break;default:h(0);}c('PagesEventObserver').notify(event,n,{source:p});},logPageViewFolderEventForInbox:function m(n,o,p){var event='';switch(o){case c('PageCommItemStatus').TODO:case c('PageCommItemStatus').FOLLOW_UP:event=c('PagesEventType').MESSAGES_VIEW_INBOX;break;case c('PageCommItemStatus').DONE:event=c('PagesEventType').MESSAGES_VIEW_ARCHIVED;break;case c('PageCommItemStatus').SPAM:event=c('PagesEventType').MESSAGES_VIEW_SPAM;break;default:h(0);}c('PagesEventObserver').notify(event,n,{source:p});}};f.exports=l;}),null);
__d('PagesManagerMessagingMessageDateBreak.react',['cx','MessengerDateBreak.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);}k.prototype.render=function(){'use strict';return (c('React').createElement(c('MessengerDateBreak.react'),{className:"_2hvw",date:this.props.date}));};f.exports=k;}),null);
__d('PagesManagerMessagingMessageGroup.react',['MessengerMessageGroup.react','PagesManagerMessagingIntentVerificationContainer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('MessengerMessageGroup.react'),babelHelpers['extends']({},this.props,{pageCustomAction:c('PagesManagerMessagingIntentVerificationContainer.react')})));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('PagesManagerMessagingMessageList.react',['cx','ChatTypingIndicators.react','DOM','Event','immutable','MessageList.react','MessengerCollapsedLogMessageGroup.react','MessengerLogMessage.react','MessengerSpinner.react','MessengerTypingIndicator.react','PagesEventObserver','PagesEventType','PagesManagerMessagingMessageDateBreak.react','PagesManagerMessagingMessageGroup.react','React','ReactDOM','MercuryShareAttachmentRenderLocations','ScrollableArea.react','debounce'],(function a(b,c,d,e,f,g,h){var i,j,k='message_tab';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m,n);this.$PagesManagerMessagingMessageList1=true;this.prevScrollTop=0;this.prevScrollHeight=0;}l.prototype.componentDidUpdate=function(m){'use strict';var n=this.props.messagelist.last()&&this.props.messagelist.last().thread_fbid,o=m.messagelist.last()&&m.messagelist.last().thread_fbid;if(m.messagelist.size===0&&this.props.messagelist.size!==0||n!==o||m.threadID!==this.props.threadID){this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();this.$PagesManagerMessagingMessageList2();}else if(this.props.messagelist.size!==m.messagelist.size){this.$PagesManagerMessagingMessageList3(this.prevScrollHeight,this.prevScrollTop);this.$PagesManagerMessagingMessageList2();}};l.prototype.$PagesManagerMessagingMessageList3=function(m,n){'use strict';if(!this.refs.scrollableArea)return;var o=this.refs.scrollableArea.getArea(),p=o.getScrollHeight()-m+n;o.setScrollTop(p,false);};l.prototype.$PagesManagerMessagingMessageList4=function(){'use strict';if(!this.refs.scrollableArea)return;var m=this.refs.scrollableArea.getArea(),n=this.prevScrollTop,o=this.prevScrollHeight;this.$PagesManagerMessagingMessageList5();if(m.isScrolledToTop()){this.props.fetchEarlierMessages();}else if(m.isScrolledToBottom()){this.$PagesManagerMessagingMessageList6();}else{if(m.getScrollTop()===n&&m.getScrollHeight()!==o)this.$PagesManagerMessagingMessageList3(o,n);this.$PagesManagerMessagingMessageList7();}};l.prototype.$PagesManagerMessagingMessageList6=function(){'use strict';if(!this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=true;};l.prototype.$PagesManagerMessagingMessageList7=function(){'use strict';if(this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=false;};l.prototype.$PagesManagerMessagingMessageList5=function(){'use strict';var m=this.refs.scrollableArea;this.prevScrollHeight=m?m.getArea().getScrollHeight():0;this.prevScrollTop=m?m.getArea().getScrollTop():0;};l.prototype.$PagesManagerMessagingMessageList8=function(m){'use strict';return function(){if(this.props.threadID!==m)return;if(this.$PagesManagerMessagingMessageList1)this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}.bind(this);};l.prototype.$PagesManagerMessagingMessageList2=function(){'use strict';c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(m){if(m.complete)return;var n=this.props.threadID,o=c('Event').listen(m,'load',function(){if(this.props.threadID===n&&this.$PagesManagerMessagingMessageList1)this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();o.remove();}.bind(this));}.bind(this));};l.prototype.$PagesManagerMessagingMessageList9=function(){'use strict';var m=Math.floor(this.props.scrollHeight/130);return (c('React').createElement('div',{className:"_31m6",style:{height:this.props.scrollHeight}},c('React').createElement('div',{className:"_31m7",style:{height:130*m}},this.$PagesManagerMessagingMessageList10(m))));};l.prototype.$PagesManagerMessagingMessageList10=function(m){'use strict';var n=c('React').createElement('div',{className:"_1vrr"},c('React').createElement('div',{className:"_31m8"}),c('React').createElement('div',{className:"_31ma"}),c('React').createElement('div',{className:"_31mb"}),c('React').createElement('div',{className:"_31mc"}),c('React').createElement('div',{className:"_31me"}),c('React').createElement('div',{className:"_31mf"}),c('React').createElement('div',{className:"_31mg"}),c('React').createElement('div',{className:"_31mh"}),c('React').createElement('div',{className:"_31mi"}),c('React').createElement('div',{className:"_31mj"}),c('React').createElement('div',{className:"_31mk"}),c('React').createElement('div',{className:"_31ml"}),c('React').createElement('div',{className:"_31mm"}),c('React').createElement('div',{className:"_31mn"}),c('React').createElement('div',{className:"_31mo"}),c('React').createElement('div',{className:"_31mp"}),c('React').createElement('div',{className:"_31mq"})),o=[];for(var p=0;p<m;p++)o.push(c('React').cloneElement(n,{key:'loading'+p}));return (c('React').createElement('div',{className:"_1vrs"},o));};l.prototype.$PagesManagerMessagingMessageList11=function(){'use strict';if(!this.props.isLoadingMore)return null;return (c('React').createElement('div',{className:"_2k8v"},c('React').createElement(c('MessengerSpinner.react'),null)));};l.prototype.$PagesManagerMessagingMessageList12=function(){'use strict';c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_VIEW_THREAD,this.props.pageID,{source:k,thread_id:this.props.threadID});return (c('React').createElement('div',{className:"clearfix _1ej0 _2mpc"},c('React').createElement(c('MessageList.react'),{DateBreak:c('PagesManagerMessagingMessageDateBreak.react'),deliveryTimestamp:0,isCanonical:true,isPageMessage:true,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),LogMessage:c('MessengerLogMessage.react'),MessageGroup:c('PagesManagerMessagingMessageGroup.react'),onAttachmentLoad:this.$PagesManagerMessagingMessageList8(this.props.threadID),messages:this.props.messagelist,readReceipts:this.props.readReceipts,viewer:this.props.pageID}),c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsWillShow:function m(){},indicatorsDidShow:function(){this.$PagesManagerMessagingMessageList1&&this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}.bind(this),rootClassName:"clearfix _17pz _4gv2",threadID:this.props.threadID,viewer:this.props.pageID})));};l.prototype.render=function(){'use strict';if(this.props.initLoading)return this.$PagesManagerMessagingMessageList9();return (c('React').createElement(c('ScrollableArea.react'),{className:"_11y7",fade:false,height:this.props.scrollHeight,onScroll:c('debounce')(function(){return this.$PagesManagerMessagingMessageList4();}.bind(this),500),ref:'scrollableArea',shadow:false},this.$PagesManagerMessagingMessageList11(),c('React').createElement('div',{className:"_14y3"},this.props.threadID?this.$PagesManagerMessagingMessageList12():c('React').createElement('div',null))));};f.exports=l;}),null);