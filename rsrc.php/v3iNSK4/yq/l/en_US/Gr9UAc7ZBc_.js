if (self.CavalryLogger) { CavalryLogger.start_js(["iq8Gi"]); }

__d('ReactComposerMediaFilePickerController.react',['fbt','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerLoggingName','ComposerTargetData','Bootloader','CurrentUser','FileInput.react','ReactComponentWithPureRenderMixin','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerMediaFilePickerController',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{loggingName:i.oneOf(Object.values(c('ReactComposerLoggingName'))).isRequired,disableFaceRecognition:i.bool.isRequired,mediaAcceptParam:i.shape({photos:i.string,both:i.string}).isRequired,photoLimit:i.number.isRequired,targetData:i.instanceOf(c('ComposerTargetData')).isRequired,mediaConfig:i.object.isRequired,containerClassName:i.string,onClick:i.func,onFilesSelected:i.func,display:c('FileInput.react').propTypes.display,webDriverTestID:i.string},getDefaultProps:function k(){return {disableFaceRecognition:false,display:'inline'};},render:function k(){return (c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam.both,containerClassName:this.props.containerClassName,multiple:this.props.targetData.targetSupportsMultiplePhotos,name:'composer_photo[]',display:this.props.display,onChange:this._onFilesSelected,onClick:this._onFileInputClick,ref:'fileInput',role:'button',tabIndex:'0','data-testid':this.props.webDriverTestID},this.props.children));},_onFileInputClick:function k(event){c('ReactComposerAttachmentActions').initializeAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA);c('Bootloader').loadModules(["ReactComposerLoggingActions"],function(l){l.mediaUploadInputClicked(this.context.composerID,this.props.loggingName);}.bind(this),'ReactComposerMediaFilePickerController.react');this.props.onClick&&this.props.onClick(event);},_validFileTypes:function k(l){if(!this.props.mediaAcceptParam.both)return true;var m=this.props.mediaAcceptParam.both.replace(/,\s*/g,'|').replace(/\*/g,'.*');m='^('+m+')$';var n=new RegExp(m,'i');for(var o=0;o<l.length;++o)if(l[o].type&&!n.test(l[o].type))return false;return true;},_onFilesSelected:function k(event){event.persist&&event.persist();this.props.onFilesSelected&&this.props.onFilesSelected();var l=this.refs.fileInput.getFileInput();if(!this._validFileTypes(l.input.files)){c('Bootloader').loadModules(["Dialog"],function(m){var n=h._("Invalid file type"),o=void 0;if(l.input.files.length&&l.input.files[0].type){o=h._("{file type} is not allowed, please upload an image (JPG, PNG, GIF or TIFF) or a video type listed here:",[h.param('file type',l.input.files[0].type)]);}else o=h._("The file you selected is not allowed, please upload an image (JPG, PNG, GIF or TIFF) or a video type listed here:");var p=void 0;if(c('CurrentUser').isWorkUser()){p=new (c('URI'))().setProtocol('https').setDomain(document.location.hostname).setPath('/help/work/885144448260143');}else p='https://www.facebook.com/help/218673814818907';var q=h._("What video file formats can I upload?");q=typeof q==='string'?q.replace(/"/g,'&#39;'):'';var r='<a href="'+p+'"'+' title="'+q+'" target="_blank">'+p+'</a>';new m().setTitle(n).setButtons(m.OK).setBody(o.toString()+' '+r).setSemiModal(true).show();},'ReactComposerMediaFilePickerController.react');return;}c('Bootloader').loadModules(["ReactComposerPhotoUploader","ReactComposerMediaUtils","ReactComposerLoggingActions"],function(m,n,o){var p=n.handleSpecialMediaUpload(event,l,this.props.mediaConfig,this.context);if(!p){var q=new m(this.context,this.props.photoLimit,{disableFaceRecognition:this.props.disableFaceRecognition});c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true,this.props.loggingName);n.uploadPhotosOrVideoFromTarget(this.context.composerID,event.target,q,this.props.targetData.targetSupportsMultiplePhotos,this.props.targetData.targetSupportsMultiMedia);}o.mediaUploadInputDone(this.context.composerID,this.props.loggingName);n.clearInput(l,!p);}.bind(this),'ReactComposerMediaFilePickerController.react');}});f.exports=j;}),null);
__d('ReactComposerPhotoTaggerButton.react',['cx','fbt','ReactComposerMediaUtils','ComposerTargetData','ReactComponentWithPureRenderMixin','React','TooltipLink.react','VideoUploadConfig','XUIAmbientNUX.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoTaggerButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{photoLimit:j.number.isRequired,hasData:j.bool,selected:j.bool,multimediaNuxShown:j.bool,onNUXCloseButtonClick:j.func},getDefaultProps:function l(){return {hasData:false,selected:false};},render:function l(){var m=c('joinClasses')("_2vwi"+(' '+"_lnh")+(this.props.hasData?' '+"_6xe":''),this.props.className),n=this._renderMultimediaAttachmentsNux(),o,p=this.props.photoLimit>1,q=c('VideoUploadConfig').allowMultimedia&&this.props.targetData.targetSupportsMultiMedia;if(p){if(q){o=i._("Add photos and videos to your post");}else o=i._("Add photos or a video to your post");}else o=i._("Add a photo or a video to your post");return (c('React').createElement(c('TooltipLink.react'),{className:"_3xem",'data-testid':'react-composer-photo-tagger',onClick:this._onSelect,tooltip:o},c('React').createElement('span',{className:"accessible_elem"},this.props.photoLimit>1?i._("Add photos"):i._("Add photo")),c('React').createElement('div',{className:m}),n));},_renderMultimediaAttachmentsNux:function l(){return (c('React').createElement(c('XUIAmbientNUX.react'),{position:'below',width:'custom',contextRef:function(){return this.refs.fileInput;}.bind(this),customwidth:400,shown:this.props.multimediaNuxShown,onCloseButtonClick:this.props.onNUXCloseButtonClick},i._("You can now add photos and videos to the same post.")));}});f.exports=k;}),null);
__d('ReactComposerPhotoTaggerButtonWithOptions.react',['cx','fbt','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerMediaFilePickerController.react','ReactComposerMediaUtils','ReactComposerPhotoCarouselActions','ReactComposerPhotoTaggerButton.react','ReactComposerSlideshowActions','Bootloader','CarouselPagesComposerSource','ComposerTargetData','FileInput.react','Grid.react','LayerHideOnBlur','Link.react','ReactComponentWithPureRenderMixin','React','ReactObjectiveFirstPagesComposerGlobalFlags','SlideshowEntrypoint','TooltipLink.react','XUIContextualDialog.react','XUIContextualDialogBody.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoTaggerButtonWithOptions',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{mediaAcceptParam:k.shape({photos:k.string,both:k.string}).isRequired,disableFaceRecognition:k.bool.isRequired,onClick:k.func,photoLimit:k.number.isRequired,targetData:k.instanceOf(c('ComposerTargetData')).isRequired,hasData:k.bool,selected:k.bool,uploadSize:k.number},getDefaultProps:function m(){return {hasData:false,mediaAcceptParam:{},selected:false};},getInitialState:function m(){return {dialogShown:false};},onLinkClick:function m(){if(c('ReactObjectiveFirstPagesComposerGlobalFlags').getIsObjectiveFirstPagesComposer())c('Bootloader').loadModules(["PagesPublishingLoggingActions"],function(n){n.clickedTagger(c('ReactComposerLoggingName').MEDIA_TAGGER);},'ReactComposerPhotoTaggerButtonWithOptions.react');this.setState({dialogShown:!this.state.dialogShown});},onToggle:function m(n){if(n!==this.state.dialogShown)this.setState({dialogShown:n});},render:function m(){if(this.props.uploadSize)return (c('React').createElement(c('ReactComposerMediaFilePickerController.react'),babelHelpers['extends']({},this.props,{loggingName:c('ReactComposerLoggingName').MEDIA_TAGGER}),c('React').createElement(c('ReactComposerPhotoTaggerButton.react'),this.props)));var n=c('joinClasses')("_2vwi"+(' '+"_lnh")+(this.props.hasData?' '+"_6xe":'')+(this.state.dialogShown?' '+"_50hx":''),this.props.className),o=this.props.photoLimit>1?i._("Add photos to your post"):i._("Add a photo to your post"),p=i._("Create a Photo Carousel"),q=i._("Upload Photos\/Video"),r=i._("Create a Slideshow"),s=c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.cameraIcon;}.bind(this),offsetY:10,onToggle:this.onToggle,position:'above',shown:this.state.dialogShown,width:c('XUIContextualDialog.react').WIDTH.SMALL},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('Grid.react'),{cols:1,spacing:"_2phz"},c('React').createElement(j,null,c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onSlideshowCreationClicked},r)),c('React').createElement(j,null,c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onCarouselCreationClicked},p)),c('React').createElement(j,null,c('React').createElement(c('ReactComposerMediaFilePickerController.react'),babelHelpers['extends']({},this.props,{loggingName:c('ReactComposerLoggingName').MEDIA_TAGGER}),c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onSelect},q))))));return (c('React').createElement('div',{className:"_3xem _3xen",ref:'cameraIcon'},c('React').createElement(c('TooltipLink.react'),{className:n,onClick:this.onLinkClick,tooltip:o},c('React').createElement('span',{className:"accessible_elem"},this.props.photoLimit>1?i._("Add photos"):i._("Add photo"))),s));},_onFilesSelected:function m(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_onCarouselCreationClicked:function m(event){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);c('ReactComposerPhotoCarouselActions').showPhotoCarouselUrlEditArea(this.context.composerID,c('CarouselPagesComposerSource').CAROUSEL_CAMERA_ICON,this.context.targetID);},_onSlideshowCreationClicked:function m(event){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);c('ReactComposerSlideshowActions').showSlideshowDialog(this.context.composerID,c('SlideshowEntrypoint').COMPOSER_CAMERA_ICON);}});f.exports=l;}),null);