if (self.CavalryLogger) { CavalryLogger.start_js(["eSsN+"]); }

__d('ConversationNubCollapsedSelectorMenu.react',['cx','fbt','ConversationNubUtils','LeftRight.react','PinnedConversationNubsConfig','PopoverMenu.react','PopoverMenuOverlappingBorder','React','ReactMenu','Tooltip.react','XUIBadge.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactMenu').Item,m=300;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={hasTooltip:true};this.$ConversationNubCollapsedSelectorMenu1=false;}n.prototype.componentDidMount=function(){this.$ConversationNubCollapsedSelectorMenu2(this.props.menuTabs);};n.prototype.componentDidUpdate=function(o){this.$ConversationNubCollapsedSelectorMenu2(this.$ConversationNubCollapsedSelectorMenu3(o,this.props));};n.prototype.$ConversationNubCollapsedSelectorMenu2=function(o){o.forEach(c('ConversationNubUtils').informShouldRecheckTabVisibility);};n.prototype.$ConversationNubCollapsedSelectorMenu3=function(o,p){var q=o.menuTabs,r=p.menuTabs,s={};q.forEach(function(t){s[t.getTabID()]=t;});return r.filter(function(t){return s[t.getTabID()]!==t;});};n.prototype.$ConversationNubCollapsedSelectorMenu4=function(){var o=this.props.menuTabs;return (o.map(function(p){return p.getBadgeCount();}).reduce(function(p,q){return p+(q||0);},0));};n.prototype.$ConversationNubCollapsedSelectorMenu5=function(o,p){if(o)return (c('React').createElement(c('XUIBadge.react'),{type:'special',count:o,className:"_4frs"+(p?' '+"_30ql":''),'aria-hidden':p}));return null;};n.prototype.$ConversationNubCollapsedSelectorMenu6=function(){var o=this.$ConversationNubCollapsedSelectorMenu4();return this.$ConversationNubCollapsedSelectorMenu5(o,false);};n.prototype.$ConversationNubCollapsedSelectorMenu7=function(o,p){var q=this.$ConversationNubCollapsedSelectorMenu5(p,true),r=this.$ConversationNubCollapsedSelectorMenu5(o,false),s=null;if(r)s=c('React').createElement('span',{className:"_2ja6"},r);return (c('React').createElement('span',{className:"_2ja7"},q,s));};n.prototype.$ConversationNubCollapsedSelectorMenu8=function(o,p){var q=o.getTabID(),r=o.getFeedbackTargetID(),s=o.getTitle(),t=o.getBadgeCount(),u=this.$ConversationNubCollapsedSelectorMenu7(t,p),v=false;return (c('React').createElement(l,{key:q,className:"_30qm",onclick:function(){if(v){v=false;return;}this.$ConversationNubCollapsedSelectorMenu1=false;this.refs.menu.hidePopover();this.props.onTabSelected&&this.props.onTabSelected(o);}.bind(this)},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('span',null,u,c('React').createElement('span',null,s)),c('React').createElement('i',{className:"_30qn uiCloseButton uiCloseButtonSmall",onClick:function(w){w.stopPropagation();w.preventDefault();if(this.props.menuTabs.length>1)this.$ConversationNubCollapsedSelectorMenu1=true;c('ConversationNubUtils').informShouldCloseTab(q,r,c('ConversationNubUtils').CLOSE_REASON_OVERFLOW_X_OUT);}.bind(this),onMouseDown:function w(){v=true;},role:'button',tabIndex:'0'}))));};n.prototype.$ConversationNubCollapsedSelectorMenu9=function(){var o=this.props.menuTabs;return o.reduce(function(p,q){return Math.max(p,q.getBadgeCount());},1);};n.prototype.$ConversationNubCollapsedSelectorMenu10=function(){var o=this.props.menuTabs,p=this.$ConversationNubCollapsedSelectorMenu9(),q=o.map(function(r){return this.$ConversationNubCollapsedSelectorMenu8(r,p);}.bind(this));return (c('React').createElement(c('ReactMenu'),{maxheight:m},q));};n.prototype.$ConversationNubCollapsedSelectorMenu11=function(){return i._("Posts");};n.prototype.$ConversationNubCollapsedSelectorMenu12=function(){var o=this.$ConversationNubCollapsedSelectorMenu6(),p=c('React').createElement('div',{className:"_4fs1"},o,c('React').createElement('i',{className:"_4fs2"}));if(this.state.hasTooltip)p=c('React').createElement(c('Tooltip.react'),{tooltip:this.$ConversationNubCollapsedSelectorMenu11(),display:'block',alignH:'right'},p);return (c('React').createElement('div',{className:"_2ja9"},p));};n.prototype.render=function(){var o=this.$ConversationNubCollapsedSelectorMenu10(),p=c('PinnedConversationNubsConfig').pinnedToLeft?'left':'right';return (c('React').createElement(c('PopoverMenu.react'),{menu:o,ref:'menu',position:'above',alignh:p,behaviors:[c('PopoverMenuOverlappingBorder')],onShow:function(){this.$ConversationNubCollapsedSelectorMenu1=false;this.setState({hasTooltip:false});}.bind(this),onHide:function(){if(this.$ConversationNubCollapsedSelectorMenu1){this.$ConversationNubCollapsedSelectorMenu1=false;this.refs.menu.showPopover();}else this.setState({hasTooltip:true});}.bind(this)},this.$ConversationNubCollapsedSelectorMenu12()));};f.exports=n;}),null);