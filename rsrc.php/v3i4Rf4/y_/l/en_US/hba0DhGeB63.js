if (self.CavalryLogger) { CavalryLogger.start_js(["6OAO1"]); }

__d("OptimisticVideoPostEvent",[],(function a(b,c,d,e,f,g){f.exports={VIDEO_POST_ADDED:"video_post_added",VIDEO_POST_REMOVED:"video_post_removed",POST_REMOVED_WITHOUT_REPLACEMENT:"post_removed_without_replacement"};}),null);
__d("OptimisticVideoPostSource",[],(function a(b,c,d,e,f,g){f.exports={PAGES_TIMELINE:"pages_timeline",VIDEO_HUB:"video_hub",USERS_TIMELINE:"users_timeline"};}),null);
__d("TimelineSeenStateConstants",[],(function a(b,c,d,e,f,g){f.exports={FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"};}),null);
__d("TimelineViewportTrackingLogType",[],(function a(b,c,d,e,f,g){f.exports={IMPRESSION:"impression",DURATION:"duration"};}),null);
__d("VideoLibraryNuxAction",[],(function a(b,c,d,e,f,g){f.exports={IMPRESSION:"impression",DISMISS:"dismiss"};}),null);
__d("VideoLibraryNuxType",[],(function a(b,c,d,e,f,g){f.exports={HIGHLIGHTED_VIDEOS_NUX:"highlighted_videos_nux",OPTIMISTIC_POST_NUX:"optimistic_post_nux",VIDEO_HUB_NUX:"video_hub_nux",VIDEO_INSIGHTS_NUX:"video_insights_nux"};}),null);
__d("VideoLibrarySource",[],(function a(b,c,d,e,f,g){f.exports={VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_INSIGHTS:"video_insights",VIDEOS_HUB:"videos_hub"};}),null);
__d('OptimisticPostMetadata.react',['cx','React','XUIText.react','Link.react','BackgroundImage.react','getDOMImageSize'],(function a(b,c,d,e,f,g,h){var i,j,k=470,l=263,m=472;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:l},this.onGetSize=function(t,u,v){var w=t<u?k:l;this.setState({height:w});}.bind(this),p;}n.prototype.componentDidMount=function(){'use strict';c('getDOMImageSize')(this.props.image,this.onGetSize);};n.prototype.render=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1gi0"},c('React').createElement(c('XUIText.react'),{size:'medium',weight:'bold',display:'block'},c('React').createElement(c('Link.react'),null,this.props.title)),c('React').createElement(c('XUIText.react'),{size:'medium',weight:'normal',display:'block'},this.props.description)),c('React').createElement('div',{className:"_2bc-"},c('React').createElement(c('BackgroundImage.react'),{src:this.props.image,backgroundSize:'contain',width:m,height:this.state.height}))));};f.exports=n;}),null);
__d('VideoThumbnail',['invariant'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoThumbnail1=j;}i.prototype.getURL=function(){'use strict';return this.$VideoThumbnail1;};i.prototype.getData=function(){'use strict';h(0);};f.exports=i;}),null);
__d('CanvasToBlobImpl',['BlobFactory'],(function a(b,c,d,e,f,g){function h(i,j){var k=atob(i.substr(i.indexOf(',')+1)),l=new Uint8Array(k.length);for(var m=0;m<k.length;m++)l[m]=k.charCodeAt(m);return c('BlobFactory').getBlob([l],{type:j});}f.exports={getBlob:h};}),null);
__d('dataURLToBlob',['Promise','BlobFactory','CanvasToBlobResource','WebWorker','CanvasToBlobImpl'],(function a(b,c,d,e,f,g){var h=c('CanvasToBlobImpl').getBlob,i=b.URL||b.webkitURL||{};function j(k,l){if(!i.createObjectURL||!c('BlobFactory').isSupported)return c('Promise').reject("Browser doesn't support this feature");if(c('WebWorker').isSupported()){return new (c('Promise'))(function(m,n){var o=new (c('WebWorker'))(c('CanvasToBlobResource')).setMessageHandler(function(p){m(p);o.terminate();}).setErrorHandler(function(event){n(event.message);o.terminate();}).execute().postMessage({dataURL:k,fileType:l});});}else return c('Promise').resolve(h(k,l));}f.exports=j;}),null);
__d('canvasToBlob',['Promise','dataURLToBlob'],(function a(b,c,d,e,f,g){function h(i,j,k){return new (c('Promise'))(function(l,m){if(i.toBlob){i.toBlob(l,j,k);}else{var n=i.toDataURL(j,k);c('dataURLToBlob')(n,j).then(function(o){l(o);},m).done();}});}f.exports=h;}),null);
__d('CanvasVideoThumbnail',['Promise','DOM','EventListener','VideoThumbnail','canvasToBlob'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('VideoThumbnail'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,null);this.$CanvasVideoThumbnail1=k;this.$CanvasVideoThumbnail2=l;this.$CanvasVideoThumbnail3=m;}j.prototype.getTime=function(){'use strict';return this.$CanvasVideoThumbnail3?this.$CanvasVideoThumbnail3:0;};j.prototype.getURL=function(){'use strict';if(!this.$CanvasVideoThumbnail4)this.$CanvasVideoThumbnail4=this.$CanvasVideoThumbnail1.toDataURL('image/jpeg');return this.$CanvasVideoThumbnail4;};j.prototype.getData=function(){'use strict';var k=c('DOM').create('canvas'),l=k.getContext('2d'),m=this.$CanvasVideoThumbnail2;return new (c('Promise'))(function(n,o){var p=c('EventListener').listen(m,'seeked',function(){p.remove();k.width=m.videoWidth;k.height=m.videoHeight;l.drawImage(m,0,0,k.width,k.height);c('canvasToBlob')(k,'image/jpeg').then(n,o);});m.currentTime=this.$CanvasVideoThumbnail3;}.bind(this));};f.exports=j;}),null);
__d('generateVideoThumbnails',['Promise','CanvasVideoThumbnail','EventListener','VideoFrameBuffer','VideoThumbnail'],(function a(b,c,d,e,f,g){function h(i,j,k,l){var m=arguments.length<=4||arguments[4]===undefined?'contain':arguments[4],n=arguments.length<=5||arguments[5]===undefined?0:arguments[5];return new (c('Promise'))(function(o,p){var q=document.createElement('canvas'),r=[],s=0,t=(i.duration-n)/l,u=new (c('VideoThumbnail'))(''),v=new (c('VideoFrameBuffer'))(q,i,m),w;q.width=j;q.height=k;var x=function z(){v.updateFrameBuffer();var aa=new (c('CanvasVideoThumbnail'))(q,i,n+(s-1)*t);r.push(aa);if(aa.getURL().length>u.getURL().length)u=aa;y();},y=function z(){if(s===0)w=c('EventListener').listen(i,'seeked',x);if(s<l){i.currentTime=n+s*t;s++;}else{if(w)w.remove();o({thumbnails:r,selectedThumbnail:u});}};if(i.videoWidth===0||i.videoHeight===0){p();return;}y();});}f.exports=h;}),null);
__d('OptimisticPostMetadataWithoutThumbnail.react',['cx','EventListener','OptimisticPostMetadata.react','React','ReactDOM','generateVideoThumbnails'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={thumbnail:''},this.$OptimisticPostMetadataWithoutThumbnail1=null,this.generateVideoThumbnails=function(){var q=c('ReactDOM').findDOMNode(this.refs.videoPlayer);c('generateVideoThumbnails')(q,200,200,1).done(function(r){this.setState({thumbnail:r.thumbnails[0].getURL()});}.bind(this));}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';var l=c('ReactDOM').findDOMNode(this.refs.videoPlayer);this.$OptimisticPostMetadataWithoutThumbnail1=c('EventListener').listen(l,'loadedmetadata',this.generateVideoThumbnails);};k.prototype.componentWillUnmount=function(){'use strict';if(this.$OptimisticPostMetadataWithoutThumbnail1){this.$OptimisticPostMetadataWithoutThumbnail1.remove();this.$OptimisticPostMetadataWithoutThumbnail1=null;}};k.prototype.render=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('OptimisticPostMetadata.react'),{title:this.props.title,description:this.props.description,image:this.state.thumbnail}),c('React').createElement('video',{key:'videoPlayer',ref:'videoPlayer',className:"_2mpk",src:this.props.videoFileUrl})));};f.exports=k;}),null);
__d('OptimisticPostUFISection.react',['cx','fbt','Image.react','React','UFICommentLink.react','UFILikeLink.react','UFIShareLink.react','XUICardSection.react','XUIPopoverButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';var m=null;if(this.props.isPagePost)m=c('React').createElement('div',{className:"_1f6t _3uni"},c('React').createElement('div',{className:"_3m9g"},c('React').createElement('div',{className:"_40yk"},c('React').createElement(c('XUIPopoverButton.react'),{haschevron:true,image:c('React').createElement(c('Image.react'),{width:16,height:16,src:this.props.profilePicture}),ref:'open-menu-button',suppressed:true,type:'button'}))));return (c('React').createElement(c('XUICardSection.react'),null,c('React').createElement('div',{className:"_sa_"},m,c('React').createElement('div',{className:"_a7s _3399"},c('React').createElement('div',{className:"_524d"},c('React').createElement('div',{className:"_42nr"},c('React').createElement('span',null,c('React').createElement(c('UFILikeLink.react'),{likeAction:true})),c('React').createElement('span',null,c('React').createElement(c('UFICommentLink.react'),null,i._("Comment"))),c('React').createElement('span',null,c('React').createElement(c('UFIShareLink.react'),null))))))));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('StoryProfile.react',['cx','BackgroundImage.react','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','InlineBlock.react','Link.react','PrivacyConst','React','XUIGrayText.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$StoryProfile1=function(){var r=null;if(this.props.privacyIndicator){r=this.props.privacyIndicator;}else if(this.props.privacySetting){var s=this.props.privacySetting==c('PrivacyConst').BaseValue.EVERYONE,t=this.props.privacySetting==c('PrivacyConst').BaseValue.ALL_FRIENDS;r=c('React').createElement(c('BackgroundImage.react'),{width:13,height:12,'data-hover':'tooltip','data-tooltip-content':this.props.privacyTooltip,className:"_14g-"+(s?' '+"_14g_":'')+(t?' '+"_5qhp":'')+(!t&&!s?' '+"_14h0":'')});}if(!r)return null;return (c('React').createElement('span',null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small',display:'inline'},'\u00A0\u00B7\u00A0'),r));}.bind(this),this.$StoryProfile2=function(){var r,s;if(this.props.profileURL){var t;if(this.props.openProfileURLInNewPage)t='_blank';s='bold';r=c('React').createElement(c('Link.react'),{href:this.props.profileURL,target:t},this.props.username);}else r=this.props.username;if(this.props.description){return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_14gz",size:'medium',weight:s},r),' ',this.props.description));}else return (c('React').createElement(c('XUIText.react'),{className:"_14gz",size:'medium',weight:s,display:'block'},r));}.bind(this),this.$StoryProfile3=function(){if(this.props.additionalLinks)return (c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small',display:'inline'},this.props.additionalLinks.map(function(r,s){return (c('React').createElement('span',{key:s},'\u00A0\u00B7\u00A0',c('React').createElement(c('Link.react'),{href:r.URL,target:'_blank'},r.text)));})));return null;}.bind(this),n;}l.prototype.render=function(){'use strict';return (c('React').createElement(c('ImageBlock.react'),{spacing:'medium',className:c('joinClasses')(this.props.className,"_56-3")},c('React').createElement(c('FBProfilePhotoShadow.react'),null,c('React').createElement(c('Image.react'),{className:"_56-4",src:this.props.profilePicture})),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:40,fullWidth:true},this.$StoryProfile2(),c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small',display:'inline'},this.props.uploadTime),this.$StoryProfile1(),this.$StoryProfile3()))));};l.propTypes={privacySetting:k.number,privacyIndicator:k.object,profilePicture:k.string.isRequired,privacyTooltip:k.node,username:k.string.isRequired,uploadTime:k.node.isRequired,profileURL:k.string,openProfileURLInNewPage:k.bool,additionalLinks:k.arrayOf(k.shape({URL:k.string,text:k.node})),description:k.string};l.defaultProps={openProfileURLInNewPage:false};f.exports=l;}),null);
__d("XPagesManagerPublishingToolsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/publishing_tools\/",{page_token:{type:"String",required:true},business_id:{type:"Int"},current_page:{type:"Int"},section:{type:"String"},source:{type:"Enum",enumType:1},refSource:{type:"Enum",enumType:1},initial_data:{type:"StringToStringMap"}});}),null);
__d('VideoLibraryButton.react',['cx','fbt','PublishingToolsSource','React','URI','VideoLibrarySource','XPagesManagerPublishingToolsController','XUIDialogButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$VideoLibraryButton1=function(){'use strict';return c('XPagesManagerPublishingToolsController').getURIBuilder().setString('page_token',this.props.pageID).setString('section','VIDEOS').setEnum('source',this.props.source).setEnum('refSource',this.props.refSource).getURI();};l.prototype.$VideoLibraryButton2=function(){'use strict';this.$VideoLibraryButton1().go();};l.prototype.render=function(){'use strict';return (c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_2bhc",label:i._("Video Library"),size:this.props.size,onClick:this.$VideoLibraryButton2.bind(this)}));};function l(){'use strict';j.apply(this,arguments);}l.defaultProps={size:'small'};f.exports=l;}),null);
__d("XVideoEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/edit\/",{v:{type:"Int",required:true},album:{type:"Int"},source:{type:"Enum",enumType:1}});}),null);
__d('OptimisticVideoPost.react',['fbt','cx','ActorURI','AsyncRequest','Layout.react','LeftRight.react','OptimisticPostMetadata.react','OptimisticPostMetadataWithoutThumbnail.react','OptimisticPostUFISection.react','PrivacyConst','ProgressBar.react','PublishingToolsSource','React','StoryProfile.react','VideoEditSource','VideoLibraryButton.react','VideoLibrarySource','VideoThumbnailConfig','XUIAmbientNUX.react','XUIButton.react','XUICard.react','XUICardSection.react','XVideoEditController','XVideoEditDialogController'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0},this.getThumbnail=function(){if(this.props.thumbnail)return this.props.thumbnail;return c('VideoThumbnailConfig').defaultThumbnailURL;}.bind(this),this.onEditClick=function(){var u;if(this.props.shouldShowVideoEditDialog){u=c('XVideoEditDialogController').getURIBuilder().setInt('video_id',this.props.videoID).setEnum('source',c('VideoEditSource').OPTIMISTIC_VIDEO_POST).getURI();if(this.props.targetID)u=c('ActorURI').create(u,this.props.targetID);new (c('AsyncRequest'))(u).send();}else{u=c('XVideoEditController').getURIBuilder().setInt('v',this.props.videoID).setEnum('source',c('VideoEditSource').OPTIMISTIC_VIDEO_POST).getURI();window.open(u,'_blank');}}.bind(this),this.onNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:false});this.props.onVideoLibraryNuxDismiss();}.bind(this),this.renderLayers=function(){if(!this.props.shouldShowVideoLibraryNux)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.video_library_button;}.bind(this),shown:true,position:'above',onCloseButtonClick:this.props.onVideoLibraryNuxDismiss,key:'videoLibraryNux'},'Manage your videos, all in one place.'));}.bind(this),q;}o.prototype.render=function(){'use strict';var p=h._("Just Now"),q=void 0;if(this.props.progress>=100&&this.props.progressCompleteText){q=this.props.progressCompleteText;}else q=h._("Preparing... {number} \u0025",[h.param('number',this.props.progress)]);var r=null;if(this.props.shouldShowVideoLibraryButton)r=c('React').createElement(c('VideoLibraryButton.react'),{ref:'video_library_button',pageID:this.props.targetID,source:c('VideoLibrarySource').OPTIMISTIC_VIDEO_POST,refSource:c('PublishingToolsSource').OPTIMISTIC_VIDEO_POST});var s=null;if(this.props.shouldShowVideoEditButton)s=c('React').createElement(c('XUIButton.react'),{className:"_4p26",label:'Edit',size:'small',onClick:this.onEditClick});var t=c('React').createElement(c('XUICardSection.react'),{background:'light-wash'},c('React').createElement('div',{className:"_pro"},c('React').createElement('div',{className:"_2uu3"},c('React').createElement(c('Layout.react'),{className:"_1mg"},c('React').createElement(m,null,c('React').createElement('div',null,c('React').createElement(c('ProgressBar.react'),{className:"_prp",value:this.props.progress,label:q}))),c('React').createElement(l,null,c('React').createElement('div',null,r,s)))))),u=this.props.profilePicture||'',v=this.props.username||'',w=this.props.privacySetting||-1,x=c('React').createElement(c('StoryProfile.react'),{className:"_4r8g",profilePicture:u,username:v,uploadTime:p,privacySetting:w}),y=this.props.thumbnail?c('React').createElement(c('OptimisticPostMetadata.react'),{title:this.props.metadataTitle,description:this.props.metadataDescription,image:this.getThumbnail()}):c('React').createElement(c('OptimisticPostMetadataWithoutThumbnail.react'),{title:this.props.metadataTitle,description:this.props.metadataDescription,videoFileUrl:this.props.videoFileUrl}),z=h._("Boost Post"),aa=this.props.isPagePost?c('React').createElement('div',{className:"_5c_1"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null),c('React').createElement(c('XUIButton.react'),{label:z,use:'confirm'}))):null,ba=c('React').createElement(c('OptimisticPostUFISection.react'),{profilePicture:this.props.profilePicture,isPagePost:this.props.isPagePost}),ca=c('React').createElement('div',null,x,y,aa,ba),da=c('React').createElement('div',{className:"_5c_3"});return (c('React').createElement('div',{className:!!this.props.isPagePost?"_5ctl":''},c('React').createElement(c('XUICard.react'),{className:"_4p28"},t,c('React').createElement('div',{className:"_prq"},ca,da)),this.renderLayers()));};o.propTypes={profilePicture:n.string,username:n.string,privacySetting:n.number,metadataTitle:n.string,metadataDescription:n.string,thumbnail:n.string,videoID:n.string,isPagePost:n.bool,progress:n.number,progressCompleteText:n.string,shouldShowVideoEditButton:n.bool,shouldShowVideoEditDialog:n.bool,targetID:n.string,videoFileUrl:n.string,shouldShowVideoLibraryNux:n.bool};o.defaultProps={profilePicture:'',username:'',privacySetting:c('PrivacyConst').BaseValue.EVERYONE,metadataTitle:'',metadataDescription:'',thumbnail:'',progress:0,videoID:'',isPagePost:false,progressCompleteText:'',shouldShowVideoEditButton:true,shouldShowVideoEditDialog:false,videoFileUrl:'',shouldShowVideoLibraryNux:false};f.exports=o;}),null);
__d('OptimisticVideoPostLogger',['BanzaiLogger'],(function a(b,c,d,e,f,g){var h={logEvent:function i(event,j,k,l,m){c('BanzaiLogger').log('OptimisticVideoPostLoggerConfig',{number_of_posts:k,source:j,event:event,target_id:l,video_id:m});}};f.exports=h;}),null);
__d('OptimisticVideoPostUtils',['AsyncRequest'],(function a(b,c,d,e,f,g){var h={shouldShowOptimisticPost:function i(j){if(j.isScheduledPost||j.isHiddenFromTimeline||j.isSecret||!j.isPageToPage&&!j.isToUserProfile||j.isDraft)return false;return true;},checkVideoStatus:function i(j,k,l,m){new (c('AsyncRequest'))().setURI('/ajax/video/encode/feedback/ping/').setData({video_id:j}).setHandler(function(n){var o=n.getPayload();if(n.error||o.error){l(j,n);}else if(o.is_ready){k(j);}else m(j);}).send();}};f.exports=h;}),null);
__d('ProfileVideoWWWFrontendActionTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ProfileVideoWWWFrontendActionLoggerConfig',this.$ProfileVideoWWWFrontendActionTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ProfileVideoWWWFrontendActionLoggerConfig',this.$ProfileVideoWWWFrontendActionTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ProfileVideoWWWFrontendActionTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ProfileVideoWWWFrontendActionTypedLogger1=babelHelpers['extends']({},this.$ProfileVideoWWWFrontendActionTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$ProfileVideoWWWFrontendActionTypedLogger1.event=j;return this;};h.prototype.setSessionID=function(j){this.$ProfileVideoWWWFrontendActionTypedLogger1.session_id=j;return this;};h.prototype.setUploadError=function(j){this.$ProfileVideoWWWFrontendActionTypedLogger1.upload_error=j;return this;};var i={event:true,session_id:true,upload_error:true};f.exports=h;}),null);
__d("XVideoCaptionRenderGenerateHeaderAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/captioneditor\/pagePosts\/",{video_id:{type:"Int"}});}),null);
__d('VideoPostGenerateCaptionHeader',['csx','AsyncRequest','DOM','Parent','XVideoCaptionRenderGenerateHeaderAsyncController'],(function a(b,c,d,e,f,g,h){var i={renderHeader:function j(k,l){var m=c('Parent').bySelector(k,"#pagelet_timeline_main_column");if(!m)return;var n=c('DOM').scry(m,"._5sem")[0];if(n){var o=c('DOM').create('div');c('DOM').prependContent(n,o);var p=c('XVideoCaptionRenderGenerateHeaderAsyncController').getURIBuilder().setInt('video_id',l).getURI();new (c('AsyncRequest'))().setMethod('GET').setRelativeTo(o).setURI(p).setReadOnly(true).setAllowCrossPageTransition(true).send();}}};f.exports=i;}),null);
__d("XProfileVideoRefreshController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/profile\/picture\/refresh_profile_video\/",{video_id:{type:"FBID",required:true}});}),null);
__d("XVideoGenerateStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/generate_story\/",{video_id:{type:"Int"},feed_location:{type:"Enum",enumType:0},timeline_identifier:{type:"String"}});}),null);
__d("XVideoLibraryNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/video_library\/nux\/",{action:{type:"Enum",required:true,enumType:1},nux_type:{type:"Enum",required:true,enumType:1}});}),null);
__d("XVideoOptimisticPostingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/optimistic_posting\/",{video_id:{type:"Int",required:true}});}),null);
__d('OptimisticVideoPostList.react',['Arbiter','AsyncRequest','ChannelConstants','FBFeedLocations','OptimisticVideoPost.react','OptimisticVideoPostEvent','OptimisticVideoPostLogger','OptimisticVideoPostSource','OptimisticVideoPostUtils','PagesComposer','ProfileVideoWWWFrontendActionTypedLogger','React','ReactDOM','ReloadPage','Run','TimelineComposer','VideoLibraryNuxAction','VideoLibraryNuxType','VideoPostGenerateCaptionHeader','XProfileVideoRefreshController','XVideoGenerateStoryController','XVideoLibraryNuxController','XVideoOptimisticPostingController'],(function a(b,c,d,e,f,g){var h,i,j=b.URL||b.webkitURL||{},k='video_encode',l=7,m=99.8,n=5000,o=2,p=1000;h=babelHelpers.inherits(q,c('React').Component);i=h&&h.prototype;function q(){var r,s;'use strict';for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.state={videoPostsMetadata:{},videoPosts:[],shouldRefreshAfterEncoding:false,shouldShowVideoEditButton:true,shouldShowVideoLibraryButton:this.props.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:this.props.shouldShowVideoLibraryNux,videoLibraryNuxImpression:0,videoLibraryNuxImpressionLogged:false},this.initializePosts=function(){var w=[],x={};for(var y=0;y<this.props.data.length;y++){if(!c('OptimisticVideoPostUtils').shouldShowOptimisticPost(this.props.data[y]))break;var z=babelHelpers['extends']({},this.props.data[y],{shouldRender:false});z.progress=0;z.progressWithoutFake=0;var aa=z.videoID;z.inactivityTimer=this.startInactivityTimer(aa);w.push(aa);x[aa]=z;}this.setState({videoPostsMetadata:x,videoPosts:w});}.bind(this),this.getChannelType=function(){return c('ChannelConstants').getArbiterType(k);},this.updateVideoData=function(w){var x={};x[w.videoID]=babelHelpers['extends']({},w,{shouldRender:true,fakeProgressTimer:setInterval(function(){return this.fakeInitialProgress(w.videoID);}.bind(this),3000),inactivityTimer:this.startInactivityTimer(w.videoID)});x[w.videoID].progress=0;x[w.videoID].progressWithoutFake=0;var y=babelHelpers['extends']({},this.state.videoPostsMetadata,x),z=[w.videoID].concat(this.state.videoPosts);this.$OptimisticVideoPostList1=w.refreshTimeout;this.$OptimisticVideoPostList2=w.originalComposerID;this.$OptimisticVideoPostList3=w.progressCompleteText;this.setState({shouldRefreshAfterEncoding:!!w.shouldRefreshAfterEncoding,shouldShowVideoEditButton:w.shouldShowVideoEditButton!=null?w.shouldShowVideoEditButton:true,shouldShowVideoLibraryButton:w.shouldShowVideoLibraryButton!=null?w.shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,videoPostsMetadata:y,videoPosts:z});this.logEvent(c('OptimisticVideoPostEvent').VIDEO_POST_ADDED,w.videoID);}.bind(this),this.onVideoPostSubmitted=function(w,x){if(!c('OptimisticVideoPostUtils').shouldShowOptimisticPost(x))return;if(!x.isToUserProfile){this.updateVideoData(x);return;}var y=c('XVideoOptimisticPostingController').getURIBuilder().setInt('video_id',x.videoID).getURI();new (c('AsyncRequest'))().setURI(y).setHandler(function(z){this.updateVideoData(babelHelpers['extends']({},z.payload,{videoFileUrl:x.videoFileURL}));}.bind(this)).send();}.bind(this),this.checkVideoStatus=function(w){c('OptimisticVideoPostUtils').checkVideoStatus(w,this.onEncodeFinish,this.onEncodeFinish,this.restartInactivityTimer);}.bind(this),this.startInactivityTimer=function(w){return setTimeout(function(){return this.checkVideoStatus(w);}.bind(this),n);}.bind(this),this.restartInactivityTimer=function(w){this.stopInactivityTimer(w);var x=babelHelpers['extends']({},this.state.videoPostsMetadata),y=babelHelpers['extends']({},x[w]);y.inactivityTimer=this.startInactivityTimer(w);x[w]=y;this.setState({videoPostsMetadata:x});}.bind(this),this.stopInactivityTimer=function(w){clearTimeout(this.state.videoPostsMetadata[w].inactivityTimer);}.bind(this),this.logEvent=function(event,w){c('OptimisticVideoPostLogger').logEvent(event,this.props.isPagePost?c('OptimisticVideoPostSource').PAGES_TIMELINE:c('OptimisticVideoPostSource').USERS_TIMELINE,this.state.videoPosts.length,this.props.targetID,w);}.bind(this),this.fakeInitialProgress=function(w){var x=this.state.videoPostsMetadata[w].progress;if(x>l){this.stopFakeInitialProgress(w);return;}var y=babelHelpers['extends']({},this.state.videoPostsMetadata),z=babelHelpers['extends']({},y[w]);z.progress+=1;y[w]=z;this.setState({videoPostsMetadata:y});this.restartInactivityTimer(w);}.bind(this),this.stopFakeInitialProgress=function(w){if(!this.state.videoPostsMetadata[w].fakeProgressTimer)return;var x=babelHelpers['extends']({},this.state.videoPostsMetadata);clearTimeout(x[w].fakeProgressTimer);var y=babelHelpers['extends']({},x[w]);y.fakeProgressTimer=null;x[w]=y;this.setState({videoPostsMetadata:x});}.bind(this),this.onEncodeUpdate=function(w,x){var y=String(x.obj.videoID);if(!this.state.videoPostsMetadata[y])return;var z=babelHelpers['extends']({},this.state.videoPostsMetadata),aa=babelHelpers['extends']({},z[y]),ba={progress:aa.progress,progressWithoutFake:aa.progressWithoutFake};if(x.obj.extra&&x.obj.extra.cached_progress&&ba.progress<x.obj.extra.cached_progress){ba.progress=x.obj.extra.cached_progress;ba.progressWithoutFake=x.obj.extra.cached_progress;}var ca=this.getOptimizedProgress(x.obj.progress,ba,x.obj.stage,x.obj.extra?x.obj.extra.is_sve:false,x.obj.extra?x.obj.extra.max_percent:0);if(ca.progress!==-1){this.stopFakeInitialProgress(y);aa.progress=ca.progress;aa.shouldRender=true;}aa.progressWithoutFake=ca.progressWithoutFake;z[y]=aa;this.setState({videoPostsMetadata:z});if(this.$OptimisticVideoPostList4(x.obj.stage)){this.onEncodeFinish(y);}else this.restartInactivityTimer(y);}.bind(this),this.$OptimisticVideoPostList4=function(w){return w==='finish';},this.onEncodeFinish=function(w){if(!this.state.videoPostsMetadata[w])return;this.stopInactivityTimer(w);var x=this.props.isPagePost?c('FBFeedLocations').PAGE_TIMELINE:c('FBFeedLocations').TIMELINE,y=c('XVideoGenerateStoryController').getURIBuilder().setInt('video_id',w).setEnum('feed_location',x).getURI();new (c('AsyncRequest'))().setURI(y).setData({video_id:w,feed_location:x}).setHandler(function(z){return this.handleRequest(z,w);}.bind(this)).send();}.bind(this),this.refreshWhenDone=function(w){var x=true,y=Date.now(),z=setInterval(function(){if(x){x=false;var aa=c('XProfileVideoRefreshController').getURIBuilder().setFBID('video_id',w).getURI();new (c('AsyncRequest'))().setURI(aa).setHandler(function(ba){x=true;if(ba.payload.profile_video_is_set){clearInterval(z);new (c('ProfileVideoWWWFrontendActionTypedLogger'))().setEvent('profile_video_set').setSessionID(this.$OptimisticVideoPostList2).log();c('ReloadPage').now();}else if(Date.now()-y>this.$OptimisticVideoPostList1)clearInterval(z);}.bind(this)).send();}}.bind(this),p);}.bind(this),this.removeOptimisticPost=function(w){var x=babelHelpers['extends']({},this.state.videoPostsMetadata);delete x[w];var y=this.state.videoPosts;y=this.removeVideoID(y,w);this.setState({videoPostsMetadata:x,videoPosts:y});this.logEvent(c('OptimisticVideoPostEvent').VIDEO_POST_REMOVED,w);}.bind(this),this.removeVideoID=function(w,x){var y=w.indexOf(x);w.splice(y,1);return w;},this.onVideoLibraryNuxShown=function(){var w=this.state.videoLibraryNuxImpression+1;this.setState({videoLibraryNuxImpression:w});if(w>=o)this.setState({shouldShowVideoLibraryNux:false});}.bind(this),this.onVideoLibraryNuxDismiss=function(){this.setState({shouldShowVideoLibraryNux:false});var w=c('XVideoLibraryNuxController').getURIBuilder().setEnum('action',c('VideoLibraryNuxAction').DISMISS).setEnum('nux_type',c('VideoLibraryNuxType').OPTIMISTIC_POST_NUX).getURI();new (c('AsyncRequest'))().setURI(w).send();}.bind(this),this.renderOptimisticPost=function(w,x){if(!w.shouldRender)return c('React').createElement('div',{key:w.videoID});var y;if(w.videoThumbnail){y=w.videoThumbnail;}else if(j.createObjectURL&&w&&w.videoThumbnailBlob){y=j.createObjectURL(w.videoThumbnailBlob);this.setThumbnailURL(y,w.videoID);}else y='';return (c('React').createElement(c('OptimisticVideoPost.react'),{username:w.userDisplayName,profilePicture:w.userProfilePictureURI,metadataTitle:w.videoTitle,metadataDescription:w.videoDescription,thumbnail:y,videoID:w.videoID,videoFileUrl:w.videoFileUrl,key:w.videoID,progress:w.progress,privacySetting:w.privacySetting,isPagePost:this.props.isPagePost,shouldShowVideoEditButton:this.state.shouldShowVideoEditButton,shouldShowVideoEditDialog:this.props.shouldShowVideoEditDialog,targetID:this.props.targetID,progressCompleteText:this.$OptimisticVideoPostList3,shouldShowVideoLibraryButton:this.state.shouldShowVideoLibraryButton,shouldShowVideoLibraryNux:x,onVideoLibraryNuxDismiss:this.onVideoLibraryNuxDismiss,onVideoLibraryNuxShown:this.onVideoLibraryNuxShown}));}.bind(this),this.setThumbnailURL=function(w,x){var y=babelHelpers['extends']({},this.state.videoPostsMetadata);y[x].videoThumbnail=w;this.setState({videoPostsMetadata:y});}.bind(this),s;}q.prototype.componentDidUpdate=function(){'use strict';if(!this.state.videoLibraryNuxImpressionLogged&&this.state.videoPosts.length>0&&this.state.shouldShowVideoLibraryNux){var r=c('XVideoLibraryNuxController').getURIBuilder().setEnum('action',c('VideoLibraryNuxAction').IMPRESSION).setEnum('nux_type',c('VideoLibraryNuxType').OPTIMISTIC_POST_NUX).getURI();new (c('AsyncRequest'))().setURI(r).send();this.setState({videoLibraryNuxImpressionLogged:true});}};q.prototype.componentDidMount=function(){'use strict';var r=c('Arbiter').subscribe('videoUpload/complete',this.onVideoPostSubmitted),s=c('Arbiter').subscribe(this.getChannelType(),this.onEncodeUpdate);c('Run').onLeave(function(){return r.unsubscribe();});c('Run').onLeave(function(){return s.unsubscribe();});if(this.props.data.length>0)this.initializePosts();};q.prototype.getOptimizedProgress=function(r,s,t,u,v){'use strict';var w={progress:r,progressWithoutFake:s.progressWithoutFake},x=s.progress+r;if(!(r>0)||v>0&&x>v){w.progress=-1;return w;}x=Number(x.toFixed(1));if(t==='finish'||t==='notify'){x=100;}else if(x>=100)x=s.progress<100?s.progress:m;w.progress=x;w.progressWithoutFake=x;return w;};q.prototype.handleRequest=function(r,s){'use strict';var t=r.payload;if(t){if(this.props.isPagePost){c('PagesComposer').renderStory(c('ReactDOM').findDOMNode(this),t);if(this.props.shouldShowVideoCaptionHeader)c('VideoPostGenerateCaptionHeader').renderHeader(c('ReactDOM').findDOMNode(this),s);}else c('TimelineComposer').renderCapsuleBasedStory(c('ReactDOM').findDOMNode(this),t);}else this.logEvent(c('OptimisticVideoPostEvent').POST_REMOVED_WITHOUT_REPLACEMENT,s);if(this.state.shouldRefreshAfterEncoding){this.refreshWhenDone(s);}else this.removeOptimisticPost(s);};q.prototype.render=function(){'use strict';var r=this.state.videoPostsMetadata,s=this.state.videoPosts.map(function(t,u){return (this.renderOptimisticPost(r[t],u===0&&this.state.shouldShowVideoLibraryNux));}.bind(this));return (c('React').createElement('ul',null,s));};f.exports=q;}),null);
__d('OptimisticVideoPostController',['React','ReactDOM','CSS','OptimisticVideoPostList.react'],(function a(b,c,d,e,f,g){var h={init:function i(j,k,l,m,n,o,p,q){this._postsContainer=j;c('ReactDOM').render(c('React').createElement(c('OptimisticVideoPostList.react'),{data:k,targetID:l,isPagePost:m,shouldShowVideoEditDialog:n,shouldShowVideoLibraryButton:o,shouldShowVideoLibraryNux:p,shouldShowVideoCaptionHeader:q}),this._postsContainer);c('CSS').show(this._postsContainer);}};f.exports=h;}),null);
__d('Optimus',['Event','Parent'],(function a(b,c,d,e,f,g){'use strict';var h={};function i(k,l){var m=l.getTarget();if(!m)return;var n=h[k];for(var o in n){var p=c('Parent').byAttribute(m,o);if(p)do{var q=n[o][p.getAttribute(o)];if(q&&q.handleOptimus(k,p,l)===false)break;}while(p=c('Parent').byAttribute(p.parentNode,o));}}function j(k,l,m,n){if(!h[k]){h[k]={};c('Event').listen(document.documentElement,k,i.bind(null,k));}if(!h[k][l])h[k][l]={};if(!h[k][l][m])h[k][l][m]=n;}f.exports={addRelClick:function k(l,m){j('click','rel',l,m);},addEventListener:j};}),null);
__d('ProfileActionBarLogger',['FBJSON','MarauderLogger','Optimus'],(function a(b,c,d,e,f,g){function h(){c('Optimus').addEventListener('mouseup','data-loggable','ProfileHighQualityLogger',{handleOptimus:function i(j,k,l){c('MarauderLogger').log('profile_high_quality_action',null,c('FBJSON').parse(k.getAttribute('data-store')));return false;}});}g.init=h;}),null);
__d('ProfileEscapeHatch',['CSS','ProfileTabUtils','Run','TimelineComponentKeys','TimelineController'],(function a(b,c,d,e,f,g){var h=[],i=false;function j(k){'use strict';this.$ProfileEscapeHatch1=k;h.push(this);if(!i){c('TimelineController').register(c('TimelineComponentKeys').ESCAPE_HATCH,j);c('Run').onLeave(function(){h=[];});i=true;}}j.handleTabChange=function(k){'use strict';h.forEach(function(l){c('CSS').conditionShow(l.$ProfileEscapeHatch1,c('CSS').shown(l.$ProfileEscapeHatch1)||c('ProfileTabUtils').isTimelineTab(k));});};f.exports=j;}),null);
__d('ProfileNavigation',['Arbiter','CSS','PageTransitions','ProfileDOMID','ProfileOverviewDOMID','ProfileTabConst','ProfileTabUtils','ScriptPath','TimelineComponentKeys','TimelineController','TimelineDOMID','TimelineURI','UIPagelet','URI','$','ge'],(function a(b,c,d,e,f,g){var h=7,i='/profile_book.php',j=null,k=null;function l(w){var x=c('URI').getMostRecentURI(),y=c('TimelineURI').getSectionKeyFromURI(x),z=c('TimelineURI').getTabKeyFromURI(x),aa=c('TimelineURI').getSectionKeyFromURI(w),ba=c('TimelineURI').getTabKeyFromURI(w),ca=w.getQueryData();if(s(x,w)||t(ba)||t(z)||!!ca.and||c('TimelineURI').isVideoPermalink(w))return false;if(ca.hc_location==='profile_browser')return false;if(Object.prototype.hasOwnProperty.call(ca,'theater')){c('Arbiter').subscribeOnce('PhotoSnowlift.CLOSE',u);return false;}if(Object.prototype.hasOwnProperty.call(ca,'force-refresh'))return false;if(c('ProfileTabUtils').isTimelineTab(z)&&!c('ProfileTabUtils').isTimelineTab(ba)&&r(aa)){j=aa;m(aa,'TimelineMedleyView',c('TimelineDOMID').TAB_CONTENT,c('ProfileOverviewDOMID').MEDLEY_ROOT,ca);return true;}if(!c('ProfileTabUtils').isTimelineTab(z)&&c('ProfileTabUtils').isTimelineTab(ba)){j=y;m(c('ProfileTabConst').TIMELINE,'TimelineWallColumn',c('ProfileOverviewDOMID').MEDLEY_ROOT,c('TimelineDOMID').TAB_CONTENT,ca);return true;}return false;}function m(w,x,y,z,aa){c('CSS').hide(c('$')(y));c('Arbiter').inform('save_facebar_query',true);var ba=c('ge')(z);if(ba){c('CSS').show(ba);q(w);}else n(x,w,aa);c('TimelineController').registerCurrentKey(w);}function n(w,x,y){o();var z=babelHelpers['extends']({},k,{tab_key:x});if(y)z=babelHelpers['extends']({},z,y);var aa=function ca(da){p();da();},ba={append:true,displayCallback:aa,finallyHandler:q.bind(null,x),usePipe:true};c('UIPagelet').loadFromEndpoint(w,c('ProfileDOMID').MAIN_COLUMN_PERSONAL,z,ba);}function o(){c('CSS').show(c('$')(c('ProfileDOMID').TAB_LOAD_INDICATOR));}function p(){c('CSS').hide(c('$')(c('ProfileDOMID').TAB_LOAD_INDICATOR));}function q(w){var x=i;if(w&&!c('ProfileTabUtils').isTimelineTab(w))x+=':'+w;c('ScriptPath').set(x);c('PageTransitions').transitionComplete();}function r(w){return j===null||w===j;}function s(w,x){var y=c('TimelineURI').getVanityFromURI(w),z=w.getQueryData().id,aa=c('TimelineURI').getVanityFromURI(x),ba=x.getQueryData().id;if(y&&aa)return y!==aa;if(z&&ba)return z!==ba;return true;}function t(w){return (c('ProfileTabUtils').isActivityLogTab(w)||w===c('ProfileTabConst').MEMORIAL_CONTACT||w===c('ProfileTabConst').POSTS);}function u(){c('PageTransitions').registerHandler(l,h);}var v={init:function w(x){k=x.profileContextData;c('TimelineController').register(c('TimelineComponentKeys').ASYNC_NAV,this);u();},reset:function w(){k=null;j=null;c('PageTransitions').removeHandler(l);}};f.exports=v;}),null);
__d('TimelineContextItemLogger',['cx','BanzaiLogger','Event','FBJSON','Parent','Run','tidyEvent'],(function a(b,c,d,e,f,g,h){var i='MTimelineXContextItemsLoggerConfig',j='impression',k='click',l='context_item_url',m='event',n="_md0",o=[];function p(r,s,t){var u=c('FBJSON').parse(r.getAttribute('data-store'));u[m]=s;if(t)u[l]=t;c('BanzaiLogger').log(i,u);}var q={logWhenVisible:function r(s){if(!o.length)c('Run').onLeave(function(){o=[];});o.push(s);},logWhenClicked:function r(s){c('tidyEvent')(c('Event').listen(s,'click',function(t){var u=t.getTarget();if(u.nodeName!=='A')return;var v=c('Parent').byClass(u,n);v&&p(v,k,u.href);}));},listenToExpand:function r(s){c('tidyEvent')(s.addListener('expanded',function(){while(o.length)p(o.pop(),j);}));}};f.exports=q;}),null);
__d('TimelineNavLight',['csx','cx','invariant','Arbiter','CSS','DataStore','DOM','DOMQuery','Event','Parent','ProfileOverviewDOMID','ProfileOverviewSection','ProfileTabConst','ProfileTimelineUILogger','TimelineAppSectionConstants','TimelineComponentKeys','TimelineController','destroyOnUnload','queryThenMutateDOM','requireWeak'],(function a(b,c,d,e,f,g,h,i,j){var k="_6-7",l="_6-6",m="_529n",n="_5215",o="_9rw",p="_70k",q="._6-7",r="._6-6";function s(t){'use strict';!s.$TimelineNavLight1||j(0);this.$TimelineNavLight2=t;this.$TimelineNavLight3=c('DOMQuery').scry(t,q)[0];this.$TimelineNavLight4=c('DOMQuery').scry(t,r);this.$TimelineNavLight5();c('ProfileOverviewSection').subscribe('Medley/transitionToSection',function(v,w){this.$TimelineNavLight6(w.slice(c('ProfileOverviewDOMID').PREFIX_MEDLEY.length));}.bind(this));c('TimelineController').register(c('TimelineComponentKeys').COVER_NAV,this);var u=c('Event').listen(this.$TimelineNavLight2,'click',this.$TimelineNavLight7.bind(this));s.$TimelineNavLight1=this;c('destroyOnUnload')(function(){this.$TimelineNavLight2=null;this.$TimelineNavLight3=null;this.$TimelineNavLight4=null;u.remove();if(this.$TimelineNavLight8)this.$TimelineNavLight8.remove();s.$TimelineNavLight1=null;}.bind(this));}s.prototype.handleTabChange=function(t){'use strict';this.$TimelineNavLight6(t);};s.prototype.setMoreMenuInstance=function(t){'use strict';this.$TimelineNavLight8=c('Event').listen(t.getRoot(),'click',this.$TimelineNavLight9.bind(this));};s.setMoreMenuInstance=function(t){'use strict';!!s.$TimelineNavLight1||j(0);s.$TimelineNavLight1.setMoreMenuInstance(t);};s.prototype.$TimelineNavLight6=function(t){'use strict';this.$TimelineNavLight3&&c('CSS').removeClass(this.$TimelineNavLight3,k);this.$TimelineNavLight4.some(function(u){var v=c('TimelineAppSectionConstants').collectionTabKeyToAppTabKey[t]||t;if(c('DataStore').get(u,'tab-key')===v){c('CSS').addClass(u,k);this.$TimelineNavLight3=u;return true;}}.bind(this));if(t===c('ProfileTabConst').TIMELINE)c('requireWeak')('ScrollColumn.react',function(u){c('Arbiter').inform(u.EVENT_SHOULD_ADJUST);});};s.prototype.$TimelineNavLight5=function(){'use strict';var t=this.$TimelineNavLight4.length-1,u=this.$TimelineNavLight4[t],v,w,x,y=0;c('queryThenMutateDOM')(function(){v=c('Parent').byClass(this.$TimelineNavLight2,p).offsetWidth;w=u.offsetLeft;x=u.offsetWidth;for(var z=t;z>1;z--){var aa=this.$TimelineNavLight4[z];if(aa.offsetLeft+aa.offsetWidth>v){y++;}else break;}}.bind(this),function(){if(w+x>v)c('CSS').addClass(this.$TimelineNavLight2,n);for(var z=t;z>t-y;z--)c('DOM').remove(this.$TimelineNavLight4[z]);c('CSS').removeClass(c('Parent').byClass(this.$TimelineNavLight2,m),m);}.bind(this));};s.prototype.$TimelineNavLight10=function(t,u){'use strict';var v=c('Parent').byClass(t,u);if(v)return c('DataStore').get(v,'tab-key');return null;};s.prototype.$TimelineNavLight7=function(event){'use strict';var t=this.$TimelineNavLight10(event.target,l);if(t)c('ProfileTimelineUILogger').logCoverNavItemClick(t);};s.prototype.$TimelineNavLight9=function(event){'use strict';var t=this.$TimelineNavLight10(event.target,o);if(t)c('ProfileTimelineUILogger').logCoverNavMoreItemClick(t);};f.exports=s;}),null);
__d('TimelineSection',['Arbiter','CSS','DOM','Parent','ScrollingPager','TimelineConstants','TimelineLegacySections','TimelineScrubberKey','UIPagelet'],(function a(b,c,d,e,f,g){function h(i,j,k,l,m){'use strict';this.$TimelineSection1=i;this.$TimelineSection2=l;this.$TimelineSection3=j;this.$TimelineSection4=null;this.$TimelineSection5=null;this.$TimelineSection6=true;this.$TimelineSection7=true;this.$TimelineSection8=j!==c('TimelineScrubberKey').RECENT_ACTIVITY;this.$TimelineSection9=m;this.$TimelineSection10=k;this.$TimelineSection11={};this.$TimelineSection12=false;this.$TimelineSection13=[];this.$TimelineSection14=false;}h.prototype.load=function(i,j){'use strict';if(this.$TimelineSection2){this.activateContentScrollLoad();return;}var k=this.$TimelineSection10;c('Arbiter').inform(c('TimelineConstants').SECTION_LOADING,{data:k,scrubberKey:this.$TimelineSection3});this.$TimelineSection2=true;c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var l=c('TimelineLegacySections').shouldForceNoFriendActivity();k=babelHelpers['extends']({},k,{highlight_unit_data:i,parent_key:this.$TimelineSection4,force_no_friend_activity:l});c('CSS').addClass(this.$TimelineSection1,'fbTimelineSectionLoading');this.$TimelineSection6=false;this.activateContentScrollLoad();if(j){this.$TimelineSection1.style.minHeight=window.innerHeight+'px';c('Arbiter').subscribeOnce(c('TimelineConstants').SECTION_FULLY_LOADED,function(m,n){if(n.scrubberKey===this.$TimelineSection3){this.$TimelineSection1.style.minHeight='';c('TimelineLegacySections').destroyOnVisible(this.$TimelineSection3);}}.bind(this));}c('TimelineLegacySections').addLoadPagelet(this.$TimelineSection3,c('UIPagelet').loadFromEndpoint('ProfileTimelineSectionPagelet',this.$TimelineSection1.id,k,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));c('TimelineLegacySections').collapsePlaceHolderHeaders();};h.prototype.preload=function(){'use strict';c('CSS').addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var i=c('DOM').find(this.$TimelineSection1,'span.sectionLabel');if(i.getAttribute('data-original-label')){c('DOM').setContent(i,i.getAttribute('data-original-label'));i.removeAttribute('data-original-label');}};h.prototype.unload=function(){'use strict';if(!this.$TimelineSection2||!this.$TimelineSection8)return;this.$TimelineSection2=false;c('TimelineLegacySections').cancelLoadPagelet(this.$TimelineSection3);c('CSS').addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');if(this.$TimelineSection1.nextSibling&&c('CSS').hasClass(this.$TimelineSection1.nextSibling,'fbTimelineSection')){c('DOM').setContent(this.$TimelineSection1,this.$TimelineSection1.nextSibling);c('CSS').show(this.$TimelineSection1.firstChild);}else c('DOM').empty(this.$TimelineSection1);this.deactivateScrollLoad();};h.prototype.canScrollLoad=function(){'use strict';return this.$TimelineSection6;};h.prototype.activateScrollLoad=function(){'use strict';this.$TimelineSection6=true;c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');c('CSS').addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var i=c('TimelineLegacySections').getOnVisible(this.$TimelineSection3);if(i)i.reset();return this;};h.prototype.deactivateScrollLoad=function(){'use strict';if(!this.$TimelineSection2){this.$TimelineSection6=false;c('CSS').removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');c('CSS').addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var i=c('TimelineLegacySections').getOnVisible(this.$TimelineSection3);if(i)i.remove();}c('DOM').scry(this.$TimelineSection1,'.fbTimelineSectionExpandPager').forEach(function(j){var k=c('ScrollingPager').getInstance(j.id);k&&k.removeOnVisible();var l=c('Parent').byClass(j,'stat_elem');if(l)c('CSS').removeClass(l,'async_saving');});return this;};h.prototype.canContentScrollLoad=function(){'use strict';return this.$TimelineSection7;};h.prototype.activateContentScrollLoad=function(){'use strict';this.$TimelineSection7=true;return this;};h.prototype.deactivateContentScrollLoad=function(){'use strict';this.$TimelineSection7=false;return this;};h.prototype.getNode=function(){'use strict';return this.$TimelineSection1;};h.prototype.getScrubberKey=function(){'use strict';return this.$TimelineSection3;};h.prototype.getParentKey=function(){'use strict';return this.$TimelineSection4;};h.prototype.setParentKey=function(i){'use strict';this.$TimelineSection4=i;return this;};h.prototype.addSubSection=function(i,j){'use strict';if(!Array.isArray(this.$TimelineSection5))this.$TimelineSection5=[];if(Array.isArray(this.$TimelineSection5))this.$TimelineSection5[i]=j;return this;};h.prototype.getSubSections=function(){'use strict';return this.$TimelineSection5;};h.prototype.isLoaded=function(){'use strict';return this.$TimelineSection2;};h.prototype.isRightColumnFinished=function(){'use strict';return this.$TimelineSection12;};h.prototype.setRightColumnFinished=function(){'use strict';this.$TimelineSection12=true;return this;};h.prototype.getHistoricUnitCount=function(){'use strict';return this.$TimelineSection9;};h.prototype.expand=function(i){'use strict';if(!this.$TimelineSection2)return this;var j=c('DOM').find(this.$TimelineSection1,'.fbTimelineSectionExpander');c('CSS').addClass(j.firstChild,'async_saving');i&&c('CSS').addClass(i,'async_saving');c('Arbiter').inform(c('TimelineConstants').SECTION_EXPAND,this.$TimelineSection3);c('DOM').scry(this.$TimelineSection1,'.fbTimelineCapsule').forEach(c('DOM').remove);this.$TimelineSection11.new_expand=true;c('TimelineLegacySections').cancelLoadPagelet(this.$TimelineSection3);c('TimelineLegacySections').addLoadPagelet(this.$TimelineSection3,c('UIPagelet').loadFromEndpoint('ProfileTimelineSectionPagelet',j.id,this.$TimelineSection11,{usePipe:true,jsNonblock:true,constHeight:true}));return this;};h.prototype.isPermalinkPeriod=function(){'use strict';return !!this.$TimelineSection10.is_permalink_period;};h.prototype.isHidden=function(){'use strict';return this.$TimelineSection14;};h.prototype.hide=function(){'use strict';this.$TimelineSection14=true;c('CSS').hide(c('DOM').find(this.$TimelineSection1,'.fbTimelineSection'));return this;};h.prototype.isHiddenFromView=function(){'use strict';return (!this.$TimelineSection2||this.$TimelineSection14||c('CSS').hasClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded'));};h.prototype.hasPendingCallbacks=function(){'use strict';return this.$TimelineSection13.length>0;};h.prototype.queueDisplayCallback=function(i,j){'use strict';this.$TimelineSection13[i]=j;return this;};h.prototype.runPendingDisplayCallbacks=function(){'use strict';while(this.hasPendingCallbacks()){var i=this.$TimelineSection13.shift();if(i)i();}return this;};f.exports=h;}),null);
__d('TimelineContentLoader',['csx','$','Arbiter','CSS','DOM','DOMScroll','Event','OnVisible','Parent','ScrollingPager','TimelineComponentKeys','TimelineConstants','TimelineController','TimelineDOMID','TimelineLegacySections','TimelineScrubberKey','TimelineSection','TimelineSmartInsert','Vector','arrayContains','debounce','ge','queryThenMutateDOM','setImmediate'],(function a(b,c,d,e,f,g,h){var i=false,j=null,k={},l={},m=[],n={},o=null,p=null,q=80,r=250,s=500;function t(){if(i)return;c('TimelineController').register(c('TimelineComponentKeys').CONTENT,z);p=c('Arbiter').subscribe(c('TimelineConstants').SECTION_EXPAND,function(aa,ba){z.navigateToSection(ba);});i=true;}var u=c('debounce')(function(aa,ba,ca){var da=c('TimelineLegacySections').get(aa).getHistoricUnitCount();ba-=da;ca-=1;if(da==-1||ca<=0||ba<0)return;var ea=z.getNextSectionKey(aa);if(ea){c('TimelineLegacySections').get(ea).load();u(ea,ba,ca);}},s);function v(aa,ba){if(!ba)ba=0;if(ba<q&&!aa())setTimeout(v.bind(null,aa,ba+1),r);}function w(aa){v(function(){if(aa===c('TimelineScrubberKey').WAY_BACK)return true;var ba=z.getNextSectionKey(aa);if(ba){y(ba);return true;}return false;});}function x(aa,ba,ca){v(function(){if(ba===c('TimelineScrubberKey').WAY_BACK)return true;var da=z.getNextSectionKey(ba);if(da){c('TimelineLegacySections').addOnVisible(da,new (c('OnVisible'))(aa,y.bind(null,da),false,ca||1000));return true;}return false;});}function y(aa){var ba=c('TimelineLegacySections').get(aa);if(ba&&ba.canScrollLoad()){ba.load();if(o)u(aa,o.required_units,o.max_parallelism);}}var z={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function aa(ba,ca,da,ea,fa,ga,ha){t();if(c('arrayContains')(m,ca))return;if(l)Object.assign(da||{},l);var ia=new (c('TimelineSection'))(ba,ca,da,ea,ha);if(!fa){c('TimelineLegacySections').setMainSectionOrder(ca,ga);k[ca]=true;}else{ia.setParentKey(fa);var ja=c('TimelineLegacySections').get(fa);if(ja)ja.addSubSection(ga,ia);}c('TimelineLegacySections').set(ca,ia);z.checkCurrentSectionChange();c('Arbiter').inform(c('TimelineConstants').SECTION_REGISTERED,{scrubberKey:ca,section:ia});},reset:function aa(){c('TimelineLegacySections').removeAllOnVisibles();c('TimelineLegacySections').cancelLoadPagelets();for(var ba in n){n[ba].unsubscribe();delete n[ba];}p&&p.unsubscribe();p=null;c('TimelineLegacySections').removeAll();j=null;k={};l={};m=[];i=false;},checkCurrentSectionChange:function aa(){var ba=null;c('queryThenMutateDOM')(function(){ba=z.getCurrentSection();},function(){var ca=j&&j.getScrubberKey();if(ba&&ba.getScrubberKey()!==ca&&!ba.isPermalinkPeriod()){j=ba;var da=ba.getScrubberKey(),ea=ba.getParentKey();if(!ea){ea=da;da=null;}c('TimelineController').sectionHasChanged(ea,da);}});},setParallelLoadConfig:function aa(ba){o=ba;},getCurrentSection:function aa(){var ba={},ca=c('TimelineLegacySections').getAll();for(var da in ca){var ea=ca[da];if(!ea||ea.isHiddenFromView())continue;var fa=c('Vector').getElementPosition(ea.getNode(),'viewport').y;if(ea.getScrubberKey()===c('TimelineScrubberKey').RECENT_ACTIVITY)fa--;if(fa<z.CURRENT_SECTION_OFFSET)ba[fa]=ea;}var ga=Math.max.apply(null,Object.keys(ba)),ha=c('TimelineLegacySections').getMainSectionOrder(),ia=ga==-Infinity;if(!ia){return ba[ga];}else if(ha[0])return c('TimelineLegacySections').get(ha[0]);return null;},getLastVisibleSection:function aa(){var ba=c('TimelineLegacySections').getMainSectionOrder();for(var ca=ba.length-1;ca>=0;ca--){var da=c('TimelineLegacySections').get(ba[ca]);if(da&&!da.isHiddenFromView())return da;}return null;},getRecentActivitySection:function aa(){return c('TimelineLegacySections').get(c('TimelineScrubberKey').RECENT_ACTIVITY);},capsuleForCurrentSection:function aa(){var ba=z.getCurrentSection();return ba&&c('DOM').scry(ba.getNode(),'.fbTimelineCapsule')[0];},enableScrollLoad:function aa(ba,ca,da,ea){ba=c('$')(ba);var fa=c('Parent').byClass(ba,'fbTimelineSection')||ba.parentNode,ga=fa&&c('DOM').scry(fa,'.fbTimelineCapsule')[0];if(!ga)return;if(da===null){x(ba,ca,ea);}else c('TimelineController').runOnceWhenSectionFullyLoaded(x.bind(null,ba,ca,ea),ca,da);},getNextSectionKey:function aa(ba){var ca=c('TimelineLegacySections').getMainSectionOrder();for(var da=0;da<ca.length-1;da++)if(ca[da]==ba){while(da<ca.length-1&&!ca[da+1])da++;return ca[da+1];}var ea=c('TimelineLegacySections').get(ba);if(!ea||!ea.getParentKey())return;var fa=c('TimelineLegacySections').get(ea.getParentKey());if(!fa)return;var ga=fa.getSubSections(),ha=ga[ga.length-1];if(ea.getScrubberKey()===ha.getScrubberKey())return z.getNextSectionKey(ea.getParentKey());for(var ia=0;ia<ga.length-1;ia++)if(ga[ia].getScrubberKey()==ba)return ga[ia+1].getScrubberKey();},hideSection:function aa(ba){var ca=c('TimelineLegacySections').get(ba);if(ca)ca.hide();var da=c('TimelineController').getCurrentScrubber();if(da){var ea=null;if(!k[ba]){ea=c('TimelineController').getCurrentScrubber().getSubnav(ca.getParentKey(),ba);}else ea=c('TimelineController').getCurrentScrubber().getNav(ba);ea&&c('CSS').hide(ea);}var fa=c('TimelineController').getCurrentStickyHeaderNav();fa&&fa.removeTimePeriod(ba);},loadSectionOnClick:function aa(ba,ca){c('Event').listen(ba,'click',function(da){da.prevent();c('TimelineLegacySections').get(ca).load();});},removeSection:function aa(ba){c('TimelineLegacySections').removeOnVisible(ba);c('TimelineLegacySections').remove(ba);delete k[ba];var ca=c('TimelineController').getCurrentStickyHeaderNav();ca&&ca.removeTimePeriod(ba);m.push(ba);},navigateToSection:function aa(ba,ca,da){ca=!!ca;var ea=ba,fa=c('TimelineLegacySections').get(ba);if(!fa)return;if(!fa.isLoaded()){c('TimelineSmartInsert').enable();c('DOM').scry(c('$')(c('TimelineDOMID').TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(c('DOM').remove);}if(!k[ba]){if(!fa.isLoaded())fa.getNode().style.minHeight=c('Vector').getViewportDimensions().y+'px';var ga=c('Arbiter').subscribe(c('TimelineConstants').SECTION_FULLY_LOADED,function(qa,ra){if(ra.scrubberKey===ba){fa.getNode().style.minHeight='';ga.unsubscribe();}});ea=fa.getParentKey();var ha=c('TimelineLegacySections').get(ea);if(ha){var ia=ha.getNode();if(!c('CSS').hasClass(ia,'fbTimelineSectionExpanded')){c('DOMScroll').scrollTo(ia,0);c('CSS').addClass(ia,'fbTimelineSectionExpanded');c('DOM').scry(ia,'.fbTimelineCapsule').forEach(c('DOM').remove);c('DOM').scry(ia,'div.fbTimelineSectionExpandPager').forEach(c('DOM').remove);c('DOM').scry(ia,'div.fbTimelineContentHeader').forEach(c('DOM').remove);c('DOM').scry(ia,"._5vf").forEach(function(qa){if(!qa.getAttribute('data-subsection'))c('DOM').remove(qa);});}}var ja=z.getNextSectionKey(ea),ka=c('TimelineLegacySections').getOnVisible(ja);if(ka)ka.setBuffer(0);}var la=c('TimelineLegacySections').getMainSectionOrder();for(var ma=0;ma<la.length;ma++){var na=la[ma];if(!na)continue;if(na==ea)break;c('TimelineLegacySections').get(na).deactivateScrollLoad().deactivateContentScrollLoad();}fa.load(da,true);c('TimelineLegacySections').collapsePlaceHolderHeaders();var oa=c('Vector').getScrollPosition().x,pa=c('Vector').getElementPosition(fa.getNode()).y;if(!ca)c('DOMScroll').scrollTo(new (c('Vector'))(oa,pa-c('TimelineConstants').SCROLL_TO_OFFSET,'document'),true,false,false,0,function(){var qa=c('Vector').getElementPosition(fa.getNode()).y;c('DOMScroll').scrollTo(new (c('Vector'))(oa,qa-c('TimelineConstants').SCROLL_TO_OFFSET,'document'),false);if(ba!==c('TimelineScrubberKey').RECENT_ACTIVITY){var ra=c('DOM').scry(fa.getNode(),'h3.uiHeaderTitle')[0];if(ra){ra.tabIndex=0;ra.focus();}}});},appendContentAfterLoad:function aa(ba,ca,da){c('TimelineController').runOnceWhenSectionFullyLoaded(c('DOM').appendContent.bind(null,c('$')(ba),ca),da,'0');},markSectionAsLoaded:function aa(ba,ca,da){c('TimelineController').runOnceWhenSectionFullyLoaded(function(){c('ge')(ba)&&c('CSS').removeClass(c('$')(ba).parentNode,'fbTimelineSectionLoading');},ca,da);},suppressSectionsAbove:function aa(ba){var ca,da,ea=c('TimelineLegacySections').getMainSectionOrder();for(var fa=0;fa<ea.length;fa++){var ga=ea[fa];if(!ga)continue;ca=c('TimelineLegacySections').get(ga).getNode();da=null;if(Array.from(ba.parentNode.children).indexOf(ba)<=Array.from(ca.parentNode.children).indexOf(ca)){da=ga;break;}c('TimelineLegacySections').get(ga).deactivateScrollLoad();}if(da)z.navigateToSection(da,true);},removeDupes:function aa(ba){var ca=c('ge')(ba);if(!ca)return;var da=c('DOM').scry(ca,'li.fbTimelineUnit'),ea={};for(var fa=0;fa<da.length;fa++){var ga=da[fa];if(ga.id&&ga.id.startsWith('tl_unit_')){var ha=ga.id.substring(8,ga.id.length),ia=c('DOM').scry(ga,'div.timelineUnitContainer');if(ia.length>0)ha=ha+ia[0].getAttribute('data-time');if(Object.prototype.hasOwnProperty.call(ea,ha)){ga.id='dupe_unit_'+Math.random();ga.className="hidden_elem";}else ea[ha]=1;}}},removeLoadingState:function aa(ba){c('ge')(ba)&&c('CSS').removeClass(c('$')(ba),'fbTimelineSectionLoading');},updatePagerAfterLoad:function aa(ba,ca,da,ea,fa){var ga=c('ScrollingPager').getInstance(ba.firstChild.id);if(!ga){n[ba.firstChild.id]=c('Arbiter').subscribe(c('ScrollingPager').REGISTERED,function(ia,ja){n[ba.firstChild.id].unsubscribe();delete n[ba.firstChild.id];if(ja.id===ba.firstChild.id)z.updatePagerAfterLoad(ba,ca,da,ea,fa);});return;}var ha=ga.getHandler();ga.setHandler(function(ia){c('CSS').addClass(ba,'async_saving');ha(ia);});c('TimelineController').runOnceWhenSectionFullyLoaded(function(){c('CSS').removeClass(ba,'fbTimelineHiddenPager');ga.checkBuffer();},da,ea);if(fa)c('TimelineController').runOnceWhenSectionFullyLoaded(c('TimelineController').adjustScrollingPagerBuffer.bind(null,ba.firstChild.id,da),da,ea);},repositionDialog:function aa(ba){c('Arbiter').subscribe(c('TimelineConstants').SECTION_LOADED,function(){ba.updatePosition();});},rightColumnFinished:function aa(ba){var ca=c('TimelineLegacySections').get(ba);ca.setRightColumnFinished();},loadNextSection:function aa(ba){w(ba);}};f.exports=z;}),null);
__d('TimelineLogging',['TimelineComponentKeys','TimelineController','reportData'],(function a(b,c,d,e,f,g){var h=false,i=0,j=null,k=null,l={init:function m(n){if(h)return;i=n;c('TimelineController').register(c('TimelineComponentKeys').LOGGING,this);},reset:function m(){h=false;i=0;j=null;},log:function m(n,o){o.profile_id=i;c('reportData')(n,{gt:o});},logSectionChange:function m(n,o){var p={timeline_section_change:1,key:n};if(j&&n==j){p.timeline_scrubber=1;j=null;}if(k&&n==k){p.sticky_header_nav=1;k=null;}l.log('timeline',p);},logScrubberClick:function m(n){j=n;},logStickyHeaderNavClick:function m(n){k=n;}};f.exports=l;}),null);
__d('TimelineViewportTracking',['csx','Arbiter','Banzai','DataAttributeUtils','DOM','TimelineSeenStateConstants','TimelineViewportTrackingLogType','ViewportTracking','$','tidyEvent','viewportTrackingBuilder'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(n,o){return {_stream:null,_streamDOMID:o,getDataFromConfig:function p(q,r){r.isSeenStateLoggingEnabled=q.is_seen_state_logging_enabled;r.isTimetrackingEnabled=q.is_timetracking_enabled;r.vpvdDebug=!!q.vpvd_debug;r.trackingHooks=!!q.tracking_hooks;c('tidyEvent')(c('Arbiter').subscribe(['TimelineConstants/unitSegmentLoaded'],function(){r.invalidateAllStoriesCache();r.invalidateVisibleStoriesCache();}));},getAllStories:function p(){var q=c('DOM').scry(this.getStream(),"._5pat"),r=[];for(var s=0;s<q.length;s++)if(this.getStoryID(q[s]))r.push(q[s]);return r;},getStream:function p(){if(!this._stream)this._stream=c('$')(this._streamDOMID);return this._stream;},getStoryID:function p(q){var r=JSON.parse(c('DataAttributeUtils').getDataFt(q)||null);if(r){var s=c('TimelineSeenStateConstants').FT_TIMELINE_HASH_IDENTIFIER_KEY;return r[s];}return null;},getDataToLog:function p(q){var r=JSON.parse(c('DataAttributeUtils').getDataFt(q));return {ft:r,log_type:c('TimelineViewportTrackingLogType').IMPRESSION};}};}i=babelHelpers.inherits(l,c('ViewportTracking'));j=i&&i.prototype;l.prototype.getTimetrackingDataToLog=function(n){var o=j.getTimetrackingDataToLog.call(this,n);o.log_type=c('TimelineViewportTrackingLogType').DURATION;return o;};l.prototype.sendDataToLog=function(n,o,p,q){if(!o.ft)return;var r={};if(q)r.retry=q;if(p)r.delay=2000;c('Banzai').post('timeline_feed_tracking',o,r);};l.prototype.cleanup=function(){m.clearSingleton();j.cleanup.call(this);};function l(){i.apply(this,arguments);}var m=c('viewportTrackingBuilder')(function(n,o){var p=new l(k(n,o));p.init(n);return p;});m.init=m.singleton.bind(m);f.exports=m;}),null);