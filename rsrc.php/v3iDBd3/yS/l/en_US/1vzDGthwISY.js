if (self.CavalryLogger) { CavalryLogger.start_js(["ryWvY"]); }

__d("SpatialAudioFallbackReasons",[],(function a(b,c,d,e,f,g){f.exports={CHANNEL:"channel",SCROLL:"scroll"};}),null);
__d("SphericalMediaPerformanceEvents",[],(function a(b,c,d,e,f,g){f.exports={SNAPSHOT:"snapshot",AUDIO_FALLBACK:"audio_fallback"};}),null);
__d('SphericalMediaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:SphericalMediaPerformanceLoggerConfig',this.$SphericalMediaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:SphericalMediaPerformanceLoggerConfig',this.$SphericalMediaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$SphericalMediaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$SphericalMediaPerformanceTypedLogger1=babelHelpers['extends']({},this.$SphericalMediaPerformanceTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$SphericalMediaPerformanceTypedLogger1.event=j;return this;};h.prototype.setFallbackDuration=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_duration=j;return this;};h.prototype.setFallbackReason=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_reason=j;return this;};h.prototype.setNormalizedFrameTime=function(j){this.$SphericalMediaPerformanceTypedLogger1.normalized_frame_time=j;return this;};h.prototype.setNumSpatialAudioStutters=function(j){this.$SphericalMediaPerformanceTypedLogger1.num_spatial_audio_stutters=j;return this;};var i={event:true,fallback_duration:true,fallback_reason:true,normalized_frame_time:true,num_spatial_audio_stutters:true};f.exports=h;}),null);
__d('ElementVisibilityObserver',['EventEmitter','getElementRect'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={notvisible:'notvisible',visible:'visible',fullyvisible:'fullyvisible'},k={visiblestart:'visiblestart',visibleend:'visibleend',fullyvisiblestart:'fullyvisiblestart',fullyvisibleend:'fullyvisibleend'};function l(n,o){var p=(n?1:0)+(o?1:0);switch(p){case 0:return j.notvisible;case 1:return j.visible;case 2:return j.fullyvisible;}throw new Error('This cannot happen but keeps flow happy. Happy flow.');}h=babelHelpers.inherits(m,c('EventEmitter'));i=h&&h.prototype;function m(n){i.constructor.call(this);this.$ElementVisibilityObserver1=n;this.$ElementVisibilityObserver2=false;this.$ElementVisibilityObserver3=false;}m.prototype.getCurrentState=function(){return l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3);};m.prototype.onMove=function(n){var o=c('getElementRect')(this.$ElementVisibilityObserver1),p=o.top>n.top&&o.top<n.bottom,q=o.bottom>n.top&&o.bottom<n.bottom,r=l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3),s=l(q,p);if(r==s)return;switch(r){case j.notvisible:this.emit(k.visiblestart);break;case j.fullyvisible:this.emit(k.fullyvisibleend);break;}switch(s){case j.notvisible:this.emit(k.visibleend);break;case j.fullyvisible:this.emit(k.fullyvisiblestart);break;}this.$ElementVisibilityObserver2=q;this.$ElementVisibilityObserver3=p;};f.exports.ElementVisibilityObserver=m;f.exports.VISIBILITY=j;f.exports.VISIBILITY_CHANGE=k;}),null);
__d('VisibilityObserver',['ElementVisibilityObserver','EmitterSubscription','onViewportChanged'],(function a(b,c,d,e,f,g){'use strict';var h=c('ElementVisibilityObserver').ElementVisibilityObserver;function i(){this.$VisibilityObserver1=[];var j=c('onViewportChanged')(this.$VisibilityObserver4.bind(this));this.$VisibilityObserver2=j.scheduleCheck;this.$VisibilityObserver3=j.remove;}i.prototype.removeSubscriptions=function(){this.$VisibilityObserver3();};i.prototype.addListener=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.addListener(k,l);};i.prototype.once=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.once(k,l);};i.prototype.getCurrentState=function(j){return this.$VisibilityObserver5(j).getCurrentState();};i.prototype.$VisibilityObserver5=function(j){for(var k=this.$VisibilityObserver1,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++];}else{m=k.next();if(m.done)break;n=m.value;}var o=n;if(o.element===j)return o;}var p=new h(j);this.$VisibilityObserver1.push(p);this.$VisibilityObserver2();return p;};i.prototype.$VisibilityObserver4=function(j){this.$VisibilityObserver1.forEach(function(k){return k.onMove(j);});};f.exports.instance=new i();f.exports.VISIBILITY=c('ElementVisibilityObserver').VISIBILITY;f.exports.VISIBILITY_CHANGE=c('ElementVisibilityObserver').VISIBILITY_CHANGE;}),null);
__d('ExposureTimers',['performanceNow','EventSubscription','Visibility','VisibilityObserver','VideoPlayerController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('VisibilityObserver').instance;function m(p,q,r){this.$ExposureTimer1=p;this.$ExposureTimer3=q;this.$ExposureTimer2=0;this.$ExposureTimer4=false;this.$ExposureTimer6=!c('Visibility').isHidden();this.$ExposureTimer7=true;this.$ExposureTimer8=r.isState('playing');this.$ExposureTimer9=null;this.$ExposureTimer10=[];this.$ExposureTimer11=r;this.addSubscription(c('Visibility').addListener(c('Visibility').VISIBLE,function(){return this.$ExposureTimer12();}.bind(this)));this.addSubscription(c('Visibility').addListener(c('Visibility').HIDDEN,function(){return this.$ExposureTimer13();}.bind(this)));this.addSubscription(r.addListener('stateChange',function(){return this.$ExposureTimer14();}.bind(this)));this.$ExposureTimer15();}m.prototype.onElementInViewport=function(){this.$ExposureTimer7=true;this.$ExposureTimer15();};m.prototype.onElementNotInViewport=function(){this.$ExposureTimer7=false;this.$ExposureTimer15();};m.prototype.$ExposureTimer12=function(){this.$ExposureTimer6=true;this.$ExposureTimer15();};m.prototype.$ExposureTimer13=function(){this.$ExposureTimer6=false;this.$ExposureTimer15();};m.prototype.$ExposureTimer14=function(){this.$ExposureTimer8=this.$ExposureTimer11.isState('playing');this.$ExposureTimer15();};m.prototype.$ExposureTimer15=function(){var p=this.$ExposureTimer6&&this.$ExposureTimer7,q=this.$ExposureTimer8,r=this.$ExposureTimer9!==null;if(p&&q&&!r){this.$ExposureTimer16();}else if((!p||!q)&&r)this.$ExposureTimer17();};m.prototype.$ExposureTimer16=function(){var p=this.$ExposureTimer1-this.$ExposureTimer2;if(p>0){this.$ExposureTimer9=window.setTimeout(function(){return this.$ExposureTimer18();}.bind(this),p);this.$ExposureTimer5=c('performanceNow')();}else this.$ExposureTimer19();};m.prototype.$ExposureTimer17=function(){if(this.$ExposureTimer9!==null){window.clearTimeout(this.$ExposureTimer9);this.$ExposureTimer9=null;var p=c('performanceNow')(),q=p-this.$ExposureTimer5;this.$ExposureTimer2+=q;if(this.$ExposureTimer2>=this.$ExposureTimer1)this.$ExposureTimer19();}};m.prototype.$ExposureTimer18=function(){this.$ExposureTimer19();};m.prototype.$ExposureTimer19=function(){if(!this.$ExposureTimer4){this.$ExposureTimer4=true;this.$ExposureTimer3();this.$ExposureTimer20();if(this.$ExposureTimer9!==null)window.clearTimeout(this.$ExposureTimer9);}};m.prototype.addSubscription=function(p){this.$ExposureTimer10.push(p);};m.prototype.$ExposureTimer20=function(){this.$ExposureTimer10.forEach(function(p){return p.remove();});this.$ExposureTimer10=[];};m.prototype.cancel=function(){this.$ExposureTimer4=true;this.$ExposureTimer20();this.$ExposureTimer17();};m.prototype.setElementVisibility=function(p){this.$ExposureTimer7=p;this.$ExposureTimer15();};h=babelHelpers.inherits(n,m);i=h&&h.prototype;function n(p,q,r,s){i.constructor.call(this,q,r,s);this.$FullVisibilityExposureTimer1=p;this.setElementVisibility(this.getElementVisibility());this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.fullyvisiblestart,function(){return this.onElementInViewport();}.bind(this)));this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.fullyvisibleend,function(){return this.onElementNotInViewport();}.bind(this)));}n.prototype.getElementVisibility=function(){return l.getCurrentState(this.$FullVisibilityExposureTimer1)===c('VisibilityObserver').VISIBILITY.fullyvisible;};j=babelHelpers.inherits(o,m);k=j&&j.prototype;function o(p,q,r,s){k.constructor.call(this,q,r,s);this.$PartialVisibilityExposureTimer1=p;this.setElementVisibility(this.getElementVisibility());this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.visiblestart,function(){return this.onElementInViewport();}.bind(this)));this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.visibleend,function(){return this.onElementNotInViewport();}.bind(this)));}o.prototype.getElementVisibility=function(){return l.getCurrentState(this.$PartialVisibilityExposureTimer1)!==c('VisibilityObserver').VISIBILITY.notvisible;};f.exports={createFullElementVisibilityTimer:function p(q,r,s,t){return new n(q,r,s,t);},createPartialElementVisibilityTimer:function p(q,r,s,t){return (new o(q,r,s,t));},createViewportVisibilityTimer:function p(q,r,s){return new m(q,r,s);},ExposureTimer:m};}),null);
__d('VideoWithPlayerVersionInvariant',['VideoPlayerStates'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$VideoWithPlayerVersionInvariant1=i;this.$VideoWithPlayerVersionInvariant2=j;this.$VideoWithPlayerVersionInvariant3=i.addListener('stateChange',function(){return this.$VideoWithPlayerVersionInvariant4();}.bind(this));}h.prototype.$VideoWithPlayerVersionInvariant4=function(){'use strict';if(!this.$VideoWithPlayerVersionInvariant1.isState(c('VideoPlayerStates').READY))return;if(!this.$VideoWithPlayerVersionInvariant1.isPlayerVersion(this.$VideoWithPlayerVersionInvariant2))this.$VideoWithPlayerVersionInvariant1.setState(c('VideoPlayerStates').FALLBACK);this.$VideoWithPlayerVersionInvariant3.remove();};f.exports=h;}),null);
__d('SphericalGyroOverlay',['cx','CSS','DOM','EventEmitter'],(function a(b,c,d,e,f,g,h){var i,j,k=800;i=babelHelpers.inherits(l,c('EventEmitter'));j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this);this.$SphericalGyroOverlay2=false;this.$SphericalGyroOverlay3=true;this.$SphericalGyroOverlay4=n;this.$SphericalGyroOverlay1=m;}l.prototype.startAnimation=function(){'use strict';if(!this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=true;this.emit('animationStarted');this.$SphericalGyroOverlay5();c('CSS').addClass(this.$SphericalGyroOverlay1,"_2dz7");}};l.prototype.pauseAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=false;c('CSS').addClass(this.$SphericalGyroOverlay1,"_4z8p");}};l.prototype.restartAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2)return;if(this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=true;c('CSS').removeClass(this.$SphericalGyroOverlay1,"_4z8p");}};l.prototype.$SphericalGyroOverlay5=function(){'use strict';var m=c('DOM').create('div',{className:"_4z8q"});this.$SphericalGyroOverlay1.appendChild(m);var n=c('DOM').create('div',{className:"_4z8r"});if(this.$SphericalGyroOverlay4)c('CSS').addClass(this.$SphericalGyroOverlay1,"_4z8s");m.appendChild(n);var o=c('DOM').create('div',{className:"_4z8t"});n.appendChild(o);var p=c('DOM').create('div',{className:"_4z8u"});n.appendChild(p);var q=c('DOM').create('div',{className:"_4z8v"});m.appendChild(q);var r=c('DOM').create('span',{className:"_4z8w"},'360');q.appendChild(r);};l.prototype.$SphericalGyroOverlay6=function(){'use strict';if(this.$SphericalGyroOverlay1.parentElement){this.$SphericalGyroOverlay1.parentElement.removeChild(this.$SphericalGyroOverlay1);this.emit('animationFinished');}};l.prototype.stopAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){c('CSS').removeClass(this.$SphericalGyroOverlay1,"_2dz7");setTimeout(function(){this.$SphericalGyroOverlay2=false;this.$SphericalGyroOverlay3=false;this.$SphericalGyroOverlay6();this.emit('animationFinished');}.bind(this),k);}};f.exports=l;}),null);
__d('SphericalMouseOverlay',['cx','fbt','CSS','DOM','Event','EventEmitter'],(function a(b,c,d,e,f,g,h,i){var j,k,l=800;j=babelHelpers.inherits(m,c('EventEmitter'));k=j&&j.prototype;function m(n){'use strict';k.constructor.call(this);this.$SphericalMouseOverlay10=false;this.$SphericalMouseOverlay11=true;this.$SphericalMouseOverlay12=[];this.$SphericalMouseOverlay1=n;}m.prototype.$SphericalMouseOverlay13=function(){'use strict';this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay1);this.$SphericalMouseOverlay2=c('DOM').create('div',{className:"_2661"});this.$SphericalMouseOverlay1.appendChild(this.$SphericalMouseOverlay2);this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay2);this.$SphericalMouseOverlay3=c('DOM').create('div',{className:"_2662"},i._("Click and drag to look around"));this.$SphericalMouseOverlay1.appendChild(this.$SphericalMouseOverlay3);this.$SphericalMouseOverlay4=c('DOM').create('div',{className:"_2663"});this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay4);this.$SphericalMouseOverlay2.appendChild(this.$SphericalMouseOverlay4);this.$SphericalMouseOverlay5=c('DOM').create('div',{className:"_2664"});this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay5);this.$SphericalMouseOverlay4.appendChild(this.$SphericalMouseOverlay5);var n=c('DOM').create('div',{className:"_15nj"});this.$SphericalMouseOverlay5.appendChild(n);this.$SphericalMouseOverlay6=c('DOM').create('div',{className:"_2665"});this.$SphericalMouseOverlay5.appendChild(this.$SphericalMouseOverlay6);this.$SphericalMouseOverlay7=c('DOM').create('div',{className:"_2666"});this.$SphericalMouseOverlay6.appendChild(this.$SphericalMouseOverlay7);this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay7);this.$SphericalMouseOverlay8=c('DOM').create('div',{className:"_2667"});this.$SphericalMouseOverlay6.appendChild(this.$SphericalMouseOverlay8);this.$SphericalMouseOverlay9=c('DOM').create('div',{className:"_266m"});this.$SphericalMouseOverlay5.appendChild(this.$SphericalMouseOverlay9);};m.prototype.$SphericalMouseOverlay14=function(){'use strict';if(this.$SphericalMouseOverlay1.parentElement)this.$SphericalMouseOverlay1.parentElement.removeChild(this.$SphericalMouseOverlay1);this.emit('animationFinished');};m.prototype.updatePosition=function(n){'use strict';if(!this.$SphericalMouseOverlay11)return;this.$SphericalMouseOverlay1.style.bottom=12+n+'px';};m.prototype.startAnimation=function(){'use strict';if(!this.$SphericalMouseOverlay10&&this.$SphericalMouseOverlay11){this.$SphericalMouseOverlay10=true;this.emit('animationStarted');this.$SphericalMouseOverlay13();this.$SphericalMouseOverlay12.forEach(function(n){return c('CSS').addClass(n,"_2dz7");});}};m.prototype.stopAnimation=function(){'use strict';if(this.$SphericalMouseOverlay10){c('CSS').removeClass(this.$SphericalMouseOverlay1,"_2dz7");this.$SphericalMouseOverlay10=false;this.$SphericalMouseOverlay11=false;var n=c('Event').listen(this.$SphericalMouseOverlay1,'transitionend',function(){this.$SphericalMouseOverlay14();n.remove();}.bind(this));window.setTimeout(function(){return this.$SphericalMouseOverlay14();}.bind(this),l);}};m.prototype.cancelAnimation=function(){'use strict';this.$SphericalMouseOverlay11=false;this.stopAnimation();};f.exports=m;}),null);
__d('SphericalVideoComponentDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('SphericalVideoComponentActions',['SphericalVideoComponentDispatcher','immutable'],(function a(b,c,d,e,f,g){var h={registerVideoPlayerController:function i(j){var k={type:'SphericalVideoComponent/registerVideoPlayerController',controller:j,id:j.getVideoPlayerID()};c('SphericalVideoComponentDispatcher').dispatch(k);},updateIsPlaying:function i(j,k){var l={type:'SphericalVideoComponent/updateIsPlaying',id:j,isPlaying:k};c('SphericalVideoComponentDispatcher').dispatch(l);},togglePlay:function i(j,k){var l={type:'SphericalVideoComponent/togglePlay',id:j,nextIsPlaying:k};c('SphericalVideoComponentDispatcher').dispatch(l);},setCurrentVideoTime:function i(j,k){var l={type:'SphericalVideoComponent/setCurrentPlaytime',id:j,time:k};c('SphericalVideoComponentDispatcher').dispatch(l);},setVideoDuration:function i(j,k){var l={type:'SphericalVideoComponent/setVideoDuration',id:j,durationSeconds:k};c('SphericalVideoComponentDispatcher').dispatch(l);},registerSphericalViewportControl:function i(j,k){var l={type:'SphericalVideoComponent/registerSphericalViewportControl',id:j,sphericalViewportControl:k};c('SphericalVideoComponentDispatcher').dispatch(l);},changeViewport:function i(j,k,l,m){var n={type:'SphericalVideoComponent/changeViewport',id:j,yaw:k,pitch:l,fieldOfView:m};c('SphericalVideoComponentDispatcher').dispatch(n);},toggleViewportGrabbed:function i(j){var k={type:'SphericalVideoComponent/toggleViewportGrabbed',id:j};c('SphericalVideoComponentDispatcher').dispatch(k);},updateViewportSize:function i(j,k){var l={type:'SphericalVideoComponent/updateViewportSize',id:j,viewportRect:k};c('SphericalVideoComponentDispatcher').dispatch(l);},registerNewSpatialReactionsState:function i(j){var k={type:'SphericalVideoComponent/registerNewSpatialReactionsState',id:j};c('SphericalVideoComponentDispatcher').dispatch(k);},registerFeedbackTargetId:function i(j,k){var l={type:'SphericalVideoComponent/registerFeedbackTargetId',id:j,ftIdentifier:k};c('SphericalVideoComponentDispatcher').dispatch(l);},addSpatialReactionClusters:function i(j,k){var l={type:'SphericalVideoComponent/addSpatialReactions',id:j,reactionClusters:k};c('SphericalVideoComponentDispatcher').dispatch(l);},setMouseDown:function i(j,k,l){var m={type:'SphericalVideoComponent/setMouseDown',id:j,isMouseDown:k,wasVideoPlaying:l};c('SphericalVideoComponentDispatcher').dispatch(m);},setIsDragging:function i(j,k,l){var m={type:'SphericalVideoComponent/setIsDragging',id:j,isDragging:k,vector:l};c('SphericalVideoComponentDispatcher').dispatch(m);},dropReaction:function i(j,k,l,m,n,o){var p={type:'SphericalVideoComponent/dropReaction',id:j,mousePositionVector:k,viewportRect:l,viewportYaw:m,viewportPitch:n,viewportFieldOfView:o};c('SphericalVideoComponentDispatcher').dispatch(p);}};f.exports=h;}),null);
__d('SphericalVideoComponentConstants',[],(function a(b,c,d,e,f,g){var h={ACTIONS:{REGISTER_VIDEO_PLAYER_CONTROLLER:'SphericalVideoComponent/registerVideoPlayerController',UPDATE_IS_PLAYING:'SphericalVideoComponent/updateIsPlaying',TOGGLE_PLAY:'SphericalVideoComponent/togglePlay',SET_CURRENT_PLAY_TIME:'SphericalVideoComponent/setCurrentPlaytime',SET_VIDEO_DURATION:'SphericalVideoComponent/setVideoDuration',REGISTER_SPHERICAL_VIEWPORT_CONTROL:'SphericalVideoComponent/registerSphericalViewportControl',CHANGE_VIEWPORT:'SphericalVideoComponent/changeViewport',UPDATE_VIEWPORT_SIZE:'SphericalVideoComponent/updateViewportSize',TOGGLE_VIEWPORT_GRABBED:'SphericalVideoComponent/toggleViewportGrabbed',REGISTER_NEW_REACTIONS_STATE:'SphericalVideoComponent/registerNewSpatialReactionsState',REGISTER_FEEDBACK_TARGET_ID:'SphericalVideoComponent/registerFeedbackTargetId',ADD_SPATIAL_REACTIONS:'SphericalVideoComponent/addSpatialReactions',SET_MOUSE_DOWN:'SphericalVideoComponent/setMouseDown',SET_IS_DRAGGING:'SphericalVideoComponent/setIsDragging',DROP_REACTION:'SphericalVideoComponent/dropReaction'},SPATIAL_REACTION_AGGREGATION_TYPE:{SINGLE_FRIEND:'SphericalVideoComponent/singleFriendReactionAggregation',ANONYMOUS:'SphericalVideoComponent/anonymousReactionAggregation',MULTIPLE_FRIEND:'SphericalVideoComponent/multipleFriendAggregation',FRIEND_AND_ANONYMOUS:'SphericalVideoComponent/friendAndAnonymousAggregation'}};f.exports=h;}),null);
__d('SphericalViewportControlStore',['SphericalVideoComponentActions','SphericalVideoComponentDispatcher','immutable','FluxMapStore','SphericalVideoComponentConstants','Rect','throttle'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l={yaw:-1,pitch:-1,fieldOfView:-1,viewportGrabbed:false,viewportPanStart:false,viewportRect:new (c('Rect'))(0,0,0,0)};h=babelHelpers.inherits(m,c('immutable').Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxMapStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return c('immutable').Map({sphericalViewportControls:c('immutable').Map({}),sphericalViewportControlStates:c('immutable').Map({})});};n.prototype.reduce=function(o,p){var q=p.id;switch(p.type){case c('SphericalVideoComponentConstants').ACTIONS.REGISTER_SPHERICAL_VIEWPORT_CONTROL:var r=p.sphericalViewportControl;o=this.$SphericalViewportStore1(o,q,r);break;case c('SphericalVideoComponentConstants').ACTIONS.CHANGE_VIEWPORT:var s=p.yaw,t=p.pitch,u=p.fieldOfView;o=this.$SphericalViewportStore2(o,q,s,t,u);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_VIEWPORT_GRABBED:o=this.$SphericalViewportStore3(o,q);break;case c('SphericalVideoComponentConstants').ACTIONS.UPDATE_VIEWPORT_SIZE:var v=p.viewportRect;o=this.$SphericalViewportStore4(o,q,v);break;default:break;}return o;};n.prototype.getSphericalViewportControl=function(o){var p=this.get('sphericalViewportControls');if(p&&p.has(o)){return p.get(o);}else throw new Error('Video player controller with id '+o+' is not registered');};n.prototype.getOrientation=function(o){var p=this.$SphericalViewportStore5(this.getState(),o),q=p.yaw,r=p.pitch;return {yaw:q,pitch:r};};n.prototype.getFieldOfView=function(o){return this.$SphericalViewportStore5(this.getState(),o).fieldOfView;};n.prototype.getViewportGrabbed=function(o){return this.$SphericalViewportStore5(this.getState(),o).viewportGrabbed;};n.prototype.getViewportDimensions=function(o){return {width:this.getViewportBoundingRect(o).w(),height:this.getViewportBoundingRect(o).h()};};n.prototype.getViewportBoundingRect=function(o){return this.$SphericalViewportStore6(o,this.getState());};n.prototype.$SphericalViewportStore6=function(o,p){return this.$SphericalViewportStore5(p,o).viewportRect;};n.prototype.onViewportGrabbed=function(o){return function(){c('SphericalVideoComponentActions').toggleViewportGrabbed(o);};};n.prototype.onViewportPanStart=function(o){return function(p){return;};};n.prototype.onViewportPanEnd=function(o){return function(){c('SphericalVideoComponentActions').toggleViewportGrabbed(o);};};n.prototype.onViewportChange=function(o){return function(p,q,r){c('SphericalVideoComponentActions').changeViewport(o,p,q,r);};};n.prototype.$SphericalViewportStore1=function(o,p,q){var r=o.get('sphericalViewportControls');if(r.has(p))return o;r=r.set(p,q);o=o.set('sphericalViewportControls',r);var s=o.get('sphericalViewportControlStates'),t=new m({yaw:q.getOrientation().x,pitch:q.getOrientation().y,fieldOfView:q.getVerticalFieldOfView()});s=s.set(p,t);o=o.set('sphericalViewportControlStates',s);q.addListener('viewportChange',c('throttle')(this.onViewportChange(p),16));q.addListener('updateViewportBegin',this.onViewportGrabbed(p));q.addListener('updateViewportEnd',this.onViewportPanEnd(p));return o;};n.prototype.$SphericalViewportStore2=function(o,p,q,r,s){var t=[['yaw',q],['pitch',r],['fieldOfView',s]];for(var u=t,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x,z=y[0],aa=y[1];o=this.$SphericalViewportStore7(o,p,z,aa);}var ba=this.getSphericalViewportControl(p);ba.setSphericalOrientation(q,r);ba.setFieldOfView(s);return o;};n.prototype.$SphericalViewportStore4=function(o,p,q){o=this.$SphericalViewportStore7(o,p,'viewportRect',q);return o;};n.prototype.$SphericalViewportStore3=function(o,p){var q=this.$SphericalViewportStore5(o,p).viewportGrabbed;return this.$SphericalViewportStore7(o,p,'viewportGrabbed',!q);};n.prototype.$SphericalViewportStore7=function(o,p,q,r){var s=this.$SphericalViewportStore5(o,p),t=o.get('sphericalViewportControlStates');s=s.set(q,r);t=t.set(p,s);return o.set('sphericalViewportControlStates',t);};n.prototype.$SphericalViewportStore5=function(o,p){var q=o.get('sphericalViewportControlStates').get(p);if(!q)this.$SphericalViewportStore8(p);return q;};n.prototype.$SphericalViewportStore8=function(o){throw new Error('Viewport control with id '+o+' does not exist');};function n(){j.apply(this,arguments);}f.exports=new n(c('SphericalVideoComponentDispatcher'));}),null);
__d('VideoPlayerControllerStore',['SphericalVideoComponentActions','SphericalVideoComponentDispatcher','immutable','FluxMapStore','SphericalVideoComponentConstants','VideoPlayerStates','curry'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k;h=babelHelpers.inherits(l,c('immutable').Record({currentTime:-1,isPlaying:false,durationSeconds:-1,videoId:'',unpauseOnMouseUp:false}));i=h&&h.prototype;function l(){h.apply(this,arguments);}j=babelHelpers.inherits(m,c('FluxMapStore'));k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onVideoPlayerControllerStateChange=function(s){var t=s.getVideoPlayerID(),u=this.$VideoPlayerControllerStore7(this.getState(),t),v=u.isPlaying,w=s.isState(c('VideoPlayerStates').PLAYING);if(v!==w)c('SphericalVideoComponentActions').updateIsPlaying(t,w);}.bind(this),o;}m.prototype.getInitialState=function(){return c('immutable').Map({videoPlayerControllers:c('immutable').Map({}),videoPlayerControllerStates:c('immutable').Map({})});};m.prototype.reduce=function(n,o){var p=o.id,q=void 0;switch(o.type){case c('SphericalVideoComponentConstants').ACTIONS.REGISTER_VIDEO_PLAYER_CONTROLLER:var r=o.controller;n=this.$VideoPlayerControllerStore1(n,r,p);break;case c('SphericalVideoComponentConstants').ACTIONS.UPDATE_IS_PLAYING:n=this.$VideoPlayerControllerStore2(n,p,o.isPlaying);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_PLAY:n=this.$VideoPlayerControllerStore3(n,p,o.nextIsPlaying);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_CURRENT_PLAY_TIME:n=this.$VideoPlayerControllerStore4(n,p,o.time);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_VIDEO_DURATION:n=this.$VideoPlayerControllerStore5(n,p,o.durationSeconds);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_MOUSE_DOWN:n=this.$VideoPlayerControllerStore6(n,p,'unpauseOnMouseUp',o.wasVideoPlaying);n=this.$VideoPlayerControllerStore3(n,p,false);break;case c('SphericalVideoComponentConstants').ACTIONS.DROP_REACTION:q=this.$VideoPlayerControllerStore7(n,p);if(q.unpauseOnMouseUp){n=this.$VideoPlayerControllerStore3(n,p,true);n=this.$VideoPlayerControllerStore6(n,p,'unpauseOnMouseUp',false);}break;default:break;}return n;};m.prototype.getVideoPlayerController=function(n){var o=this.get('videoPlayerControllers');if(o&&o.has(n)){return o.get(n);}else throw new Error('Video player controller with id '+n+' is not registered');};m.prototype.getIsPlaying=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).isPlaying;};m.prototype.getCurrentTime=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).currentTime;};m.prototype.getVideoID=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).videoId;};m.prototype.$VideoPlayerControllerStore1=function(n,o,p){var q=n.get('videoPlayerControllers');if(q.has(p))return n;q=q.set(p,o);n=n.set('videoPlayerControllers',q);var r=n.get('videoPlayerControllerStates'),s=new l({isPlaying:o.isState(c('VideoPlayerStates').PLAYING),currentTime:o.getCurrentTimePosition(),videoId:o.getVideoID()});r=r.set(p,s);n=n.set('videoPlayerControllerStates',r);o.addListener('stateChange',c('curry')(this.onVideoPlayerControllerStateChange,o));o.addListener('updateStatus',c('curry')(this.onTimeUpdate,o));o.addListener('updateMetadata',c('curry')(this.onUpdateMetaData,o));return n;};m.prototype.onTimeUpdate=function(n,event){c('SphericalVideoComponentActions').setCurrentVideoTime(n.getVideoPlayerID(),event.position);};m.prototype.onUpdateMetaData=function(n){c('SphericalVideoComponentActions').setVideoDuration(n.getVideoPlayerID(),n.getPlaybackDuration());};m.prototype.$VideoPlayerControllerStore3=function(n,o,p){var q=this.getVideoPlayerController(o);p?q.play():q.pause();return this.$VideoPlayerControllerStore2(n,o,p);};m.prototype.$VideoPlayerControllerStore4=function(n,o,p){var q=n.get('videoPlayerControllerStates'),r=this.$VideoPlayerControllerStore7(n,o);r=r.set('currentTime',p);q=q.set(o,r);return n.set('videoPlayerControllerStates',q);};m.prototype.$VideoPlayerControllerStore2=function(n,o,p){var q=n.get('videoPlayerControllerStates'),r=this.$VideoPlayerControllerStore7(n,o);r=r.set('isPlaying',p);q=q.set(o,r);n=n.set('videoPlayerControllerStates',q);return n;};m.prototype.$VideoPlayerControllerStore5=function(n,o,p){var q=n.get('videoPlayerControllerStates'),r=this.$VideoPlayerControllerStore7(n,o);r=r.set('durationSeconds',p);q=q.set(o,r);return n.set('videoPlayerControllerStates',q);};m.prototype.$VideoPlayerControllerStore7=function(n,o){var p=n.get('videoPlayerControllerStates').get(o);if(!p)this.$VideoPlayerControllerStore8(o);return p;};m.prototype.$VideoPlayerControllerStore6=function(n,o,p,q){var r=n.get('videoPlayerControllerStates'),s=this.$VideoPlayerControllerStore7(n,o);s=s.set(p,q);r=r.set(o,s);return n.set('videoPlayerControllerStates',r);};m.prototype.$VideoPlayerControllerStore8=function(n){throw new Error('Video player controller with id '+n+' does not exist');};f.exports=new m(c('SphericalVideoComponentDispatcher'));}),null);
__d('SphericalVideoErrorCTA',['cx','fbt','CSS','React','ReactDOM','UFIVideoPlayerRegistry','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){function j(k,l){var m,n=this;'use strict';this.$SphericalVideoErrorCTA5=function(){this.$SphericalVideoErrorCTA1.logEvent(c('VideoPlayerLoggerEvent').SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED);}.bind(this);this.$SphericalVideoErrorCTA2=k;var o=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(k,l);if(o){this.$SphericalVideoErrorCTA1=o;this.$SphericalVideoErrorCTA3();}else (function(){var p=function(){o=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(k,l);if(o){this.$SphericalVideoErrorCTA1=o;c('UFIVideoPlayerRegistry').removeOnRegisterListener(p);this.$SphericalVideoErrorCTA3();}}.bind(n);c('UFIVideoPlayerRegistry').addOnRegisterListener(p);})();}j.prototype.$SphericalVideoErrorCTA3=function(){var k,l=this;'use strict';if(this.$SphericalVideoErrorCTA1.getOption('SphericalVideoPlayer','isUnavailable')){this.$SphericalVideoErrorCTA4();}else (function(){var m=l.$SphericalVideoErrorCTA1.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){m.remove();this.$SphericalVideoErrorCTA4();}.bind(l));})();};j.prototype.$SphericalVideoErrorCTA4=function(){'use strict';c('CSS').show(this.$SphericalVideoErrorCTA2);var k=this.$SphericalVideoErrorCTA1.getLastError(),l=void 0;if(k&&(k.error==='SPHERICAL_SETUP_FAILED'||k.error==='SPHERICAL_RENDER_ERROR')){l=i._("360 videos are not available on this browser. Click to learn more.");}else l=i._("There was an issue playing this video. Please refresh the page and try again.");c('ReactDOM').render(c('React').createElement('div',{className:"_4tgy"},c('React').createElement('div',{className:"_4th5"},l),c('React').createElement('div',{className:"_4th6"},c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SphericalVideoErrorCTA5,label:i._("Learn More"),href:'https://www.facebook.com/help/851697264925946',target:'_blank'}))),this.$SphericalVideoErrorCTA2);};f.exports=j;}),null);
__d('ComposerVideoUploadSphericalEvents',[],(function a(b,c,d,e,f,g){'use strict';f.exports={GUIDE:{KEYFRAMES_UPDATE:'ComposerVideoUploadSphericalVideoPreviewGuide/keyframesUpdate',CURRENT_POI_UPDATE:'ComposerVideoUploadSphericalVideoPreviewGuide/currentPOIUpdate'},PREVIEW:{INITAL_VIEWPORT_UPDATE:'ComposerVideoUploadSphericalVideoPreview/initialViewportUpdate',GUIDE_KEYFRAMES_UPDATE:'ComposerVideoUploadSphericalVideoPreview/guideKeyframesUpdate',GUIDE_STATE_UPDATE:'ComposerVideoUploadSphericalVideoPreview/guideStateUpdate',KEYFRAME_EDITING_STATE_UPDATE:'ComposerVideoUploadSphericalVideoPreview/keyframeEditingStateUpdate',FIELD_OF_VIEW_UPDATE:'ComposerVideoUploadSphericalVideoPreview/fieldOfViewUpdate'},OVERLAY_BUTTONS:{ADD_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/addPOI',SAVE_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/savePOI',EDIT_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/editPOI',REMOVE_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/removePOI',CLEAR_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/clearPOI',CREATE_THUMBNAIL:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/createThumbnail'},VIEWPORT_CONTROL:{VIEWPORT_UPDATE:'ComposerVideoUploadSphericalVideoPreviewViewportControl/viewportUpdate',FIELD_OF_VIEW_UPDATE:'ComposerVideoUploadSphericalVideoPreviewViewportControl/fieldOfViewUpdate'}};}),null);
__d('SphericalMediaUtils',['UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isBrowser('Chrome'),i=c('UserAgent').isBrowser('Safari'),j=c('UserAgent').isBrowser('Firefox');f.exports={getZoomLevel:function k(){var l=void 0;if(h||i){l=Math.round(window.outerWidth/window.innerWidth);}else if(j)l=Math.round(window.devicePixelRatio);return l||1;},getPixelRatio:function k(){return window.devicePixelRatio||1;}};}),null);
__d('easeInOutInterpolate',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){k>=0&&k<=1||h(0);return Math.cos((k+1)*Math.PI)/2+.5;};f.exports=i;}),null);
__d('SphericalMediaHeadingIndicator.react',['cx','DOM','React','SphericalMediaCanvasPool','degToRad','easeInOutInterpolate','requestAnimationFrame','uniqueID','SphericalMediaUtils','SphericalMediaConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('SphericalMediaUtils').getZoomLevel,l=c('SphericalMediaUtils').getPixelRatio,m=c('SphericalMediaConstants').HI_SIZE_NORMAL,n=c('SphericalMediaConstants').HI_SIZE_FULL,o=c('SphericalMediaConstants').HI_ALPHA_BG,p=c('SphericalMediaConstants').HI_ALPHA_ELEMENT,q=c('SphericalMediaConstants').HI_ALPHA_DURATION,r=c('SphericalMediaConstants').HI_FADE_OUT_DELAY,s=c('SphericalMediaConstants').HI_BLINK_ARC_RAD,t=c('SphericalMediaConstants').HI_BLINK_DURATION,u='SphericalMediaHeadingIndicator',v=function aa(){return l()*k();},w=function aa(ba){return ba!==undefined&&ba!==null;},x=function aa(ba,ca,da,ea){ba.beginPath();ba.arc(ca.x,ca.y,da*v(),0,2*Math.PI,false);ba.fillStyle=ea;ba.lineWidth=0;ba.fill();},y=function aa(ba,ca,da,ea,fa,ga,ha){ba.beginPath();ba.arc(ca.x,ca.y,da*v(),ea,fa,false);ba.lineWidth=ga*v();ba.strokeStyle=ha;ba.stroke();};i=babelHelpers.inherits(z,c('React').Component);j=i&&i.prototype;function z(aa){j.constructor.call(this,aa);this.$SphericalMediaHeadingIndicator23=function(){var ca=this.__getDrawData();if(!w(ca.poiYaw)){this.$SphericalMediaHeadingIndicator10=false;this.draw(ca);return;}var da=(Date.now()-this.__blinkStartTime)%t<t/2;if(this.$SphericalMediaHeadingIndicator10!==da){this.$SphericalMediaHeadingIndicator10=da;this.draw(ca);}c('requestAnimationFrame')(this.$SphericalMediaHeadingIndicator23);}.bind(this);this.$SphericalMediaHeadingIndicator12=function(){if(this.$SphericalMediaHeadingIndicator5===o.end)return;this.$SphericalMediaHeadingIndicator24(o.start,o.end,p.start,p.end);}.bind(this);this.$SphericalMediaHeadingIndicator13=function(){if(this.$SphericalMediaHeadingIndicator5===o.start)return;this.$SphericalMediaHeadingIndicator24(o.end,o.start,p.end,p.start);}.bind(this);this.$SphericalMediaHeadingIndicator2=c('uniqueID')();this.$SphericalMediaHeadingIndicator4=0;this.$SphericalMediaHeadingIndicator5=o.start;this.$SphericalMediaHeadingIndicator6=p.start;this.$SphericalMediaHeadingIndicator7=0;this.$SphericalMediaHeadingIndicator8=false;this.$SphericalMediaHeadingIndicator9=false;this.$SphericalMediaHeadingIndicator10=false;if(!this.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var ba in this.constructor.__subClassMethods)if(typeof this[ba]!=='function')throw new Error('Must implement "'+ba+'"');}z.prototype.componentWillReceiveProps=function(aa){var ba=aa.isActive&&aa.isPanning!==this.props.isPanning;if(ba)this.$SphericalMediaHeadingIndicator11(aa.isPanning);};z.prototype.shouldComponentUpdate=function(aa){var ba=aa.aspectRatio!==this.props.aspectRatio||aa.isActive!==this.props.isActive||aa.isFullScreen!==this.props.isFullScreen||aa.isGuideAuto!==this.props.isGuideAuto;return ba;};z.prototype.$SphericalMediaHeadingIndicator11=function(aa){var ba=arguments.length<=1||arguments[1]===undefined?true:arguments[1];this.$SphericalMediaHeadingIndicator4+=aa?1:-1;if(aa){this.$SphericalMediaHeadingIndicator7>0&&clearTimeout(this.$SphericalMediaHeadingIndicator7);this.$SphericalMediaHeadingIndicator12();}else if(this.$SphericalMediaHeadingIndicator4===0)this.$SphericalMediaHeadingIndicator7=setTimeout(function(){this.$SphericalMediaHeadingIndicator7=0;this.$SphericalMediaHeadingIndicator13();}.bind(this),ba?r:0);};z.prototype.$SphericalMediaHeadingIndicator14=function(){var aa=this.$SphericalMediaHeadingIndicator15();return {width:aa.width*v(),height:aa.height*v()};};z.prototype.$SphericalMediaHeadingIndicator15=function(){return this.props.isFullScreen?n:m;};z.prototype.$SphericalMediaHeadingIndicator16=function(){return {x:this.$SphericalMediaHeadingIndicator14().width/2,y:this.$SphericalMediaHeadingIndicator14().height/2};};z.prototype.$SphericalMediaHeadingIndicator17=function(){if(!this.$SphericalMediaHeadingIndicator3)throw new Error('setup was called before render(). (missing wrapper)');var aa={canvasAttrs:{width:this.$SphericalMediaHeadingIndicator14().width,height:this.$SphericalMediaHeadingIndicator14().height,className:''},beforeCanvasLost:function(){this.$SphericalMediaHeadingIndicator1=null;this.$SphericalMediaHeadingIndicator8=false;this.$SphericalMediaHeadingIndicator9=true;}.bind(this)};aa.canvasAttrs.className="_5nxw _17ay";var ba=c('SphericalMediaCanvasPool').get(this.$SphericalMediaHeadingIndicator2,aa,this.__namespace?this.__namespace:u);c('DOM').appendContent(this.$SphericalMediaHeadingIndicator3,ba);this.$SphericalMediaHeadingIndicator1=ba;};z.prototype.draw=function(aa){if(!this.$SphericalMediaHeadingIndicator1)return;var ba=this.$SphericalMediaHeadingIndicator1,ca=this.$SphericalMediaHeadingIndicator1.getContext('2d');if(!ca)return;var da=this.$SphericalMediaHeadingIndicator14();ca.clearRect(0,0,da.width,da.height);ba.width=da.width;ba.height=da.height;this.$SphericalMediaHeadingIndicator18(ca,aa);this.$SphericalMediaHeadingIndicator19(ca,aa);this.$SphericalMediaHeadingIndicator20(ca,aa);};z.prototype.$SphericalMediaHeadingIndicator18=function(aa,ba){var ca=this.$SphericalMediaHeadingIndicator15(),da=this.$SphericalMediaHeadingIndicator16(),ea=ba.fov*this.props.aspectRatio,fa=c('degToRad')(ea)/2;x(aa,da,ca.background_radius,this.$SphericalMediaHeadingIndicator21());if(this.props.isGuideAuto){var ga=ca.inner_radius+ca.inner_stroke/2-ca.center_radius;y(aa,da,ca.center_radius+ga/2,0,2*Math.PI,ga,this.$SphericalMediaHeadingIndicator22());}else{x(aa,da,ca.center_radius,this.$SphericalMediaHeadingIndicator22());var ha=this.props,ia=ha.partialLeftDegrees,ja=ha.partialRightDegrees;if(ia&&ja){y(aa,da,ca.inner_radius,0,2*Math.PI,ca.inner_stroke,this.getPartialPanoElementColor());var ka=270-ba.initialYaw,la=c('degToRad')(ia*-1+ka+fa),ma=c('degToRad')(ja+ka-fa);y(aa,da,ca.inner_radius,la||0,ma||0,ca.inner_stroke,this.$SphericalMediaHeadingIndicator22());}else y(aa,da,ca.inner_radius,0,2*Math.PI,ca.inner_stroke,this.$SphericalMediaHeadingIndicator22());}};z.prototype.$SphericalMediaHeadingIndicator20=function(aa,ba){var ca=this.$SphericalMediaHeadingIndicator15(),da=this.$SphericalMediaHeadingIndicator16();if(this.$SphericalMediaHeadingIndicator10){var ea=c('degToRad')((ba.poiYaw||0)-ba.initialYaw)-Math.PI/2;y(aa,da,ca.rim_radius,ea-s/2,ea+s/2,ca.rim_stroke,this.$SphericalMediaHeadingIndicator22());}var fa=v(),ga=ca.triangle[0]*fa,ha=ca.triangle[1]*fa,ia=ca.triangle[2]*fa;aa.translate(da.x,da.y);if(ba.pointerYaw)aa.rotate(c('degToRad')(ba.pointerYaw-ba.initialYaw));aa.beginPath();aa.moveTo(0,ga-da.y);aa.lineTo(-ha,ia-da.y);aa.lineTo(ha,ia-da.y);aa.fillStyle=this.$SphericalMediaHeadingIndicator22();aa.fill();};z.prototype.$SphericalMediaHeadingIndicator19=function(aa,ba){var ca=this.$SphericalMediaHeadingIndicator15(),da=this.$SphericalMediaHeadingIndicator16(),ea=ba.fov*this.props.aspectRatio,fa=c('degToRad')(ea)/2,ga=ba.yaw-ba.initialYaw,ha=c('degToRad')(ga)-Math.PI/2,ia=this.props.isGuideAuto;if(ia){aa.save();aa.beginPath();aa.lineWidth=ca.arc_stroke*v();aa.arc(da.x,da.y,(ca.arc_radius+ca.arc_stroke/2)*v(),ha-fa,ha+fa,false);aa.arc(da.x,da.y,(ca.arc_radius-ca.arc_stroke/2)*v(),ha+fa,ha-fa,true);aa.clip();var ja=this.$SphericalMediaHeadingIndicator14();aa.clearRect(0,0,ja.width,ja.height);aa.restore();}y(aa,da,ca.arc_radius,ha-fa,ha+fa,ca.arc_stroke,ia?this.$SphericalMediaHeadingIndicator21():this.$SphericalMediaHeadingIndicator22());};z.prototype.getPartialPanoElementColor=function(){return 'rgba(255, 255, 255, '+this.$SphericalMediaHeadingIndicator6*.4+')';};z.prototype.$SphericalMediaHeadingIndicator22=function(){return 'rgba(255, 255, 255, '+this.$SphericalMediaHeadingIndicator6+')';};z.prototype.$SphericalMediaHeadingIndicator21=function(){return 'rgba(0, 0, 0, '+this.$SphericalMediaHeadingIndicator5+')';};z.prototype.$SphericalMediaHeadingIndicator24=function(aa,ba,ca,da){this.$SphericalMediaHeadingIndicator9=this.$SphericalMediaHeadingIndicator8;this.$SphericalMediaHeadingIndicator8=true;var ea=Date.now(),fa=function(ia){var ja=Date.now();if(this.$SphericalMediaHeadingIndicator9){this.$SphericalMediaHeadingIndicator9=false;return;}if(ja-ea>q){this.$SphericalMediaHeadingIndicator8=false;this.$SphericalMediaHeadingIndicator5=ba;this.$SphericalMediaHeadingIndicator6=da;return;}c('requestAnimationFrame')(function(){fa(ia);});var ka=c('easeInOutInterpolate')((ja-ea)/q),la=ia.deltaAlphaBG*ka+ia.startAlphaBG,ma=ia.deltaAlphaElement*ka+ia.startAlphaElement;this.$SphericalMediaHeadingIndicator5=la;this.$SphericalMediaHeadingIndicator6=ma;this.draw(this.__getDrawData());}.bind(this),ga=ba-aa,ha=da-ca;c('requestAnimationFrame')(function(){fa({startAlphaBG:aa,deltaAlphaBG:ga,startAlphaElement:ca,deltaAlphaElement:ha});});};z.prototype.componentDidMount=function(){if(this.props.isActive){this.$SphericalMediaHeadingIndicator17();this.draw(this.__getDrawData());}};z.prototype.componentDidUpdate=function(){if(this.props.isActive){if(!this.$SphericalMediaHeadingIndicator1)this.$SphericalMediaHeadingIndicator17();this.draw(this.__getDrawData());}c('requestAnimationFrame')(this.$SphericalMediaHeadingIndicator23);};z.prototype.componentWillUnmount=function(){c('SphericalMediaCanvasPool').release(this.$SphericalMediaHeadingIndicator2,'SphericalMediaHeadingIndicator');this.$SphericalMediaHeadingIndicator1=null;};z.prototype.render=function(){var aa=this.$SphericalMediaHeadingIndicator15(),ba=this.props.isActive;return (c('React').createElement('button',{onClick:function(event){return this.__onClick(event);}.bind(this),onMouseOver:function(){return this.$SphericalMediaHeadingIndicator11(true);}.bind(this),onMouseOut:function(){return this.$SphericalMediaHeadingIndicator11(false,false);}.bind(this),className:"_17az"+(' '+"sphericalHeadingIndicator")+(!ba?' '+"hidden_elem":''),style:{width:aa.width,height:aa.height}},c('React').createElement('div',{className:"_17a-",ref:function(ca){return this.$SphericalMediaHeadingIndicator3=ca;}.bind(this)})));};f.exports=z;}),null);
__d('SphericalVideoHeadingIndicator.react',['cx','fbt','BasicFBNux','ComposerVideoUploadSphericalEvents','React','SphericalVideoExperiments','SphericalViewportControlStore','SphericalMediaHeadingIndicator.react','SubscriptionsHandler','SphericalMediaCanvasPool','VideoPlayerStates','XUIAmbientNUX.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n='SphericalVideoHeadingIndicator',o=4320,p=4596,q=i._("Use the compass to toggle a preview of how your interest points look."),r=i._("You're watching only the best views from this 360 video. You can swipe or drag the video to watch it manually.");c('SphericalMediaCanvasPool').setLimit(Infinity,n);var s=function v(w){return w!==undefined&&w!==null;};j=babelHelpers.inherits(t,c('SphericalMediaHeadingIndicator.react'));k=j&&j.prototype;function t(){var v,w;'use strict';for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=k.constructor).call.apply(v,[this].concat(y)),this.__namespace=n,w;}t.prototype.__onClick=function(event){'use strict';this.props.onClick(event);};t.prototype.__getDrawData=function(){'use strict';return {fov:this.props.fov,initialYaw:this.props.initialYaw,pointerYaw:this.props.pointerYaw,poiYaw:this.props.poiYaw,yaw:this.props.yaw};};t.prototype.$SphericalHeadingIndicatorImpl1=function(v){'use strict';return {fov:v.fov,initialYaw:v.initialYaw,pointerYaw:v.pointerYaw,poiYaw:v.poiYaw,yaw:v.yaw};};t.prototype.componentWillReceiveProps=function(v){'use strict';k.componentWillReceiveProps.call(this,v);if(!s(this.props.poiYaw)&&s(v.poiYaw))this.__blinkStartTime=Date.now();var w=v.isActive===this.props.isActive&&(v.initialYaw!==this.props.initialYaw||v.aspectRatio!==this.props.aspectRatio||v.fov!==this.props.fov||v.yaw!==this.props.yaw||v.pointerYaw!==this.props.pointerYaw||v.poiYaw!==this.props.poiYaw);if(w)this.draw(this.$SphericalHeadingIndicatorImpl1(v));};t.prototype.shouldComponentUpdate=function(v){'use strict';var w=k.shouldComponentUpdate.call(this,v)||v.poiYaw!==this.props.poiYaw;return w;};t.__subClassMethods={__onClick:true,__getDrawData:true};l=babelHelpers.inherits(u,c('React').Component);m=l&&l.prototype;function u(v){'use strict';m.constructor.call(this,v);this.$SphericalVideoHeadingIndicator6=false;this.$SphericalVideoHeadingIndicator1=v.controller;this.$SphericalVideoHeadingIndicator5=v.isComposer;if(this.$SphericalVideoHeadingIndicator5){this.$SphericalVideoHeadingIndicator3=p;this.$SphericalVideoHeadingIndicator4=c('React').createElement(c('XUIText.react'),{size:'small',display:'block'},q);}else{this.$SphericalVideoHeadingIndicator3=o;this.$SphericalVideoHeadingIndicator4=r;}this.$SphericalVideoHeadingIndicator2=new (c('SubscriptionsHandler'))();}u.prototype.componentDidMount=function(){'use strict';if(this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','isReady')){this.$SphericalVideoHeadingIndicator7();}else this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.once('SphericalVideoPlayer/ready',function(){return this.$SphericalVideoHeadingIndicator7();}.bind(this)));};u.prototype.componentWillUnmount=function(){'use strict';this.$SphericalVideoHeadingIndicator2.release();};u.prototype.$SphericalVideoHeadingIndicator7=function(){'use strict';var v=this.$SphericalVideoHeadingIndicator1.getVideoPlayerID();this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.addListener('PhotoSnowlift/enterSnowlift',function(){return this.$SphericalVideoHeadingIndicator8(true);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('PhotoSnowlift/exitSnowlift',function(){return this.$SphericalVideoHeadingIndicator8(false);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('toggleFullscreen',function(){return this.$SphericalVideoHeadingIndicator9();}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('beginPlayback',function(){return this.$SphericalVideoHeadingIndicator10(true);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('finishPlayback',function(){return this.$SphericalVideoHeadingIndicator10(false);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoChannelController/enterChannel',function(){return this.$SphericalVideoHeadingIndicator11(true);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoChannelController/exitChannel',function(){return this.$SphericalVideoHeadingIndicator11(false);}.bind(this)),c('SphericalViewportControlStore').addListener(function(){var w=c('SphericalViewportControlStore'),x=w.getOrientation(v),y=x.pitch,z=x.yaw;this.setState({isActive:w.getViewportGrabbed(v),pitch:y,yaw:z,fov:w.getFieldOfView(v)});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('SphericalVideoRecenterControl/animationStart',function(){return this.$SphericalVideoHeadingIndicator12(true);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('SphericalVideoRecenterControl/animationEnd',function(){return this.$SphericalVideoHeadingIndicator12(false);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoControls/visibilityUpdate',function(w){var x=w.areControlsVisible;return this.$SphericalVideoHeadingIndicator12(x);}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('viewportChange',function(w,x){return this.forceUpdate();}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuidedTour/viewportChange',function(w){return this.setState({pointerYaw:w});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuidedTour/intervalUpdate',function(w){var x=w.deltaPitch===0&&w.deltaYaw===0;this.setState({poiYaw:x?undefined:w.baseYaw+w.deltaYaw,isActive:!x});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuidedTour/toggle',function(w){return this.setState({isGuideAuto:w});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuidedTour/stateToggle',function(w){if(!w)this.setState({isGuideAuto:false,poiYaw:undefined,pointerYaw:0});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener(c('ComposerVideoUploadSphericalEvents').PREVIEW.GUIDE_KEYFRAMES_UPDATE,function(w){return this.setState({numGuidePoints:w.length});}.bind(this)));this.setState({isVisible:this.$SphericalVideoHeadingIndicator1.isState(c('VideoPlayerStates').PLAYING),isActive:false,inChannel:this.$SphericalVideoHeadingIndicator1.getIsInChannel(),inSnowlift:this.$SphericalVideoHeadingIndicator1.getOption('PhotoSnowlift','isInSnowlift'),inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen(),isGuideAuto:this.$SphericalVideoHeadingIndicator1.getOption('VideoWithSphericalGuidedTour','auto'),showGuideNux:c('SphericalVideoExperiments').showGuideNux,showComposerNux:c('SphericalVideoExperiments').showComposerNux,numGuidePoints:0,pitch:c('SphericalViewportControlStore').getOrientation(v).pitch,yaw:c('SphericalViewportControlStore').getOrientation(v).yaw,fov:c('SphericalViewportControlStore').getFieldOfView(v)});this.$SphericalVideoHeadingIndicator6=true;};u.prototype.$SphericalVideoHeadingIndicator10=function(v){'use strict';this.setState({isVisible:v});};u.prototype.$SphericalVideoHeadingIndicator9=function(){'use strict';this.setState({inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen()});};u.prototype.$SphericalVideoHeadingIndicator11=function(v){'use strict';this.setState({inChannel:v});};u.prototype.$SphericalVideoHeadingIndicator8=function(v){'use strict';this.setState({inSnowlift:v});};u.prototype.$SphericalVideoHeadingIndicator12=function(v){'use strict';this.setState({isActive:v});};u.prototype.$SphericalVideoHeadingIndicator13=function(){'use strict';this.setState({showGuideNux:false,showComposerNux:false});c('BasicFBNux').onDismiss(this.$SphericalVideoHeadingIndicator5?p:o);};u.prototype.render=function(){'use strict';if(!this.$SphericalVideoHeadingIndicator6)return null;var v=this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','getDimensions'),w=v.width,x=v.height,y=!this.state.inChannel&&!this.state.inSnowlift&&!this.state.inFullscreen,z=this.$SphericalVideoHeadingIndicator1.getOption('VideoWithSphericalGuidedTour','enabled'),aa=void 0;if(this.$SphericalVideoHeadingIndicator5){aa=this.state.showComposerNux&&this.state.numGuidePoints>2;}else aa=this.state.showGuideNux&&z;return (c('React').createElement('div',{className:"_3ldo"+(y?' '+"_42a0":'')},c('React').createElement(t,{ref:'compass',aspectRatio:w/x,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,isFullScreen:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw}),c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.compass;}.bind(this),shown:aa,position:'left',onCloseButtonClick:function(){return this.$SphericalVideoHeadingIndicator13();}.bind(this)},this.$SphericalVideoHeadingIndicator4)));};f.exports=u;}),null);
__d("MovingAverage",[],(function a(b,c,d,e,f,g){function h(i,j){"use strict";j=j||0;this.$MovingAverage1=0;this.$MovingAverage2=j*i;this.$MovingAverage3=i;this.$MovingAverage4=[];for(var k=0;k<i;k++)this.$MovingAverage4[k]=j;}h.prototype.add=function(i){"use strict";this.$MovingAverage2-=this.$MovingAverage4[this.$MovingAverage1];this.$MovingAverage2+=i;this.$MovingAverage4[this.$MovingAverage1]=i;this.$MovingAverage1=(this.$MovingAverage1+1)%this.$MovingAverage3;return this;};h.prototype.get=function(i){"use strict";i=i===undefined?0:i;var j=(this.$MovingAverage1-i-1+this.$MovingAverage3)%this.$MovingAverage3;return this.$MovingAverage4[j];};h.prototype.getAvg=function(){"use strict";return this.$MovingAverage2/this.$MovingAverage3;};h.prototype.getMax=function(){"use strict";return Math.max.apply(Math,this.$MovingAverage4);};h.prototype.getMin=function(){"use strict";return Math.min.apply(Math,this.$MovingAverage4);};g.MovingAverage=h;}),null);
__d('SphericalVideoPerformanceTracker',['MovingAverage','SpatialAudioFallbackReasons','SphericalMediaPerformanceTypedLogger','SphericalMediaPerformanceEvents','Visibility','performance'],(function a(b,c,d,e,f,g){var h=c('MovingAverage').MovingAverage,i=60,j=1000,k=10*j,l=15,m=j/i;function n(){'use strict';n.$SphericalVideoPerformanceTracker1=false;this.$SphericalVideoPerformanceTracker8=new h(500,m);this.$SphericalVideoPerformanceTracker9=new (c('SphericalMediaPerformanceTypedLogger'))();this.$SphericalVideoPerformanceTracker10=false;this.$SphericalVideoPerformanceTracker6=-1;this.$SphericalVideoPerformanceTracker5=false;var o=function(){this.$SphericalVideoPerformanceTracker4=false;this.$SphericalVideoPerformanceTracker13();}.bind(this),p=function(){this.$SphericalVideoPerformanceTracker4=true;}.bind(this);c('Visibility').isHidden()?o():p();c('Visibility').addListener(c('Visibility').HIDDEN,o);c('Visibility').addListener(c('Visibility').VISIBLE,p);}n.get=function(){'use strict';if(!n.$SphericalVideoPerformanceTracker2)n.$SphericalVideoPerformanceTracker2=new n();return n.$SphericalVideoPerformanceTracker2;};n.prototype.addFrameAtTime=function(o){'use strict';if(!this.$SphericalVideoPerformanceTracker4)return;if(o!==this.$SphericalVideoPerformanceTracker7){n.$SphericalVideoPerformanceTracker1=true;this.$SphericalVideoPerformanceTracker7=o;if(!this.$SphericalVideoPerformanceTracker3){this.$SphericalVideoPerformanceTracker3=o;}else{var p=o-this.$SphericalVideoPerformanceTracker3;this.$SphericalVideoPerformanceTracker3=o;this.$SphericalVideoPerformanceTracker8.add(p);if(!this.$SphericalVideoPerformanceTracker10){this.$SphericalVideoPerformanceTracker14();this.$SphericalVideoPerformanceTracker10=true;}}}};n.prototype.trackSpatialAudioMetrics=function(){'use strict';this.$SphericalVideoPerformanceTracker5=true;this.$SphericalVideoPerformanceTracker12=0;};n.prototype.isTrackingSpatialAudioMetrics=function(){'use strict';return this.$SphericalVideoPerformanceTracker5;};n.prototype.addAudioStutter=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker12++;};n.prototype.enterSpatialAudioFallback=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker6=c('performance').now();};n.prototype.exitSpatialAudioFallback=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();if(this.$SphericalVideoPerformanceTracker6>0){var o=Math.trunc(c('performance').now()-this.$SphericalVideoPerformanceTracker6);this.$SphericalVideoPerformanceTracker6=-1;this.$SphericalVideoPerformanceTracker9.setEvent(c('SphericalMediaPerformanceEvents').AUDIO_FALLBACK);this.$SphericalVideoPerformanceTracker9.setFallbackDuration(o);this.$SphericalVideoPerformanceTracker9.setFallbackReason(c('SpatialAudioFallbackReasons').CHANNEL);this.$SphericalVideoPerformanceTracker9.log();this.$SphericalVideoPerformanceTracker9.clear();}};n.prototype.isOne360VideoActive=function(){'use strict';return n.$SphericalVideoPerformanceTracker1;};n.prototype.log=function(){'use strict';if(!this.isOne360VideoActive()){return;}else{var o=Math.trunc(this.$SphericalVideoPerformanceTracker15()*Math.pow(10,l));this.$SphericalVideoPerformanceTracker9.setEvent(c('SphericalMediaPerformanceEvents').SNAPSHOT);this.$SphericalVideoPerformanceTracker9.setNormalizedFrameTime(o);if(this.$SphericalVideoPerformanceTracker5){this.$SphericalVideoPerformanceTracker9.setNumSpatialAudioStutters(this.$SphericalVideoPerformanceTracker12);this.$SphericalVideoPerformanceTracker12=0;}this.$SphericalVideoPerformanceTracker9.log();this.$SphericalVideoPerformanceTracker9.clear();}this.$SphericalVideoPerformanceTracker13();};n.prototype.destroy=function(){'use strict';clearInterval(this.$SphericalVideoPerformanceTracker11);n.$SphericalVideoPerformanceTracker2=null;};n.prototype.$SphericalVideoPerformanceTracker15=function(){'use strict';return this.$SphericalVideoPerformanceTracker8.getAvg()/m;};n.prototype.$SphericalVideoPerformanceTracker13=function(){'use strict';this.$SphericalVideoPerformanceTracker3=null;n.$SphericalVideoPerformanceTracker1=false;};n.prototype.$SphericalVideoPerformanceTracker14=function(){'use strict';this.$SphericalVideoPerformanceTracker11=setInterval(this.log.bind(this),k);};f.exports=n;}),null);
__d('SphericalRenderer',['DOM','EventEmitter','EventListener','VideoStereoFormat','VideoProjection','GLMatrix','getErrorNameFromWebGLErrorCode'],(function a(b,c,d,e,f,g){var h,i,j=c('GLMatrix').glMatrix,k=c('GLMatrix').mat4,l=c('GLMatrix').vec3,m=Math.max(window.devicePixelRatio||1,1);h=babelHelpers.inherits(n,c('EventEmitter'));i=h&&h.prototype;function n(o,p,q){'use strict';i.constructor.call(this);this.$SphericalRenderer2=q;this.$SphericalRenderer21=q.fieldOfView;this.$SphericalRenderer16=true;this.$SphericalRenderer15=o;this.$SphericalRenderer1=p;this.$SphericalRenderer9=k.create();this.$SphericalRenderer10=k.create();this.$SphericalRenderer3=false;this.$SphericalRenderer18=[];this.$SphericalRenderer20=null;this.$SphericalRenderer19=null;this.$SphericalRenderer17=q.projectionType===c('VideoProjection').UNPADDED_CUBESTRIP;this.$SphericalRenderer7=q.projectionType===c('VideoProjection').ROTATED_CUBEMAP;this.$SphericalRenderer22={x:q.stereoFormat===c('VideoStereoFormat').LEFT_RIGHT?2:1,y:q.stereoFormat===c('VideoStereoFormat').TOP_BOTTOM?2:1};this.$SphericalRenderer11=null;this.$SphericalRenderer12=null;this.$SphericalRenderer8=null;this.$SphericalRenderer4=this.$SphericalRenderer23.bind(this);this.$SphericalRenderer5=this.$SphericalRenderer24.bind(this);this.$SphericalRenderer1.addEventListener('webglcontextlost',this.$SphericalRenderer4);this.$SphericalRenderer1.addEventListener('webglcontextrestored',this.$SphericalRenderer5);this.$SphericalRenderer25();}n.prototype.destroy=function(){'use strict';this.removeAllListeners();this.$SphericalRenderer1.removeEventListener('webglcontextlost',this.$SphericalRenderer4);this.$SphericalRenderer1.removeEventListener('webglcontextrestored',this.$SphericalRenderer5);};n.prototype.reconfigure=function(o,p){'use strict';this.$SphericalRenderer21=p.fieldOfView;this.$SphericalRenderer15=o;this.$SphericalRenderer2=p;this.$SphericalRenderer17=p.projectionType===c('VideoProjection').UNPADDED_CUBESTRIP;this.$SphericalRenderer7=p.projectionType===c('VideoProjection').ROTATED_CUBEMAP;this.$SphericalRenderer25();};n.prototype.hasRenderingContext=function(){'use strict';return !this.$SphericalRenderer3;};n.prototype.$SphericalRenderer23=function(o){'use strict';o.preventDefault();this.emit('renderingContextLost');this.$SphericalRenderer3=true;};n.prototype.$SphericalRenderer24=function(o){'use strict';this.$SphericalRenderer3=false;this.$SphericalRenderer25();this.emit('renderingContextRestore');};n.prototype.setAutoUpdateTexture=function(o){'use strict';this.$SphericalRenderer16=o;};n.prototype.updateFieldOfView=function(o){'use strict';if(this.$SphericalRenderer21!==o){this.$SphericalRenderer21=o;this.$SphericalRenderer26();}};n.prototype.updateViewportDimensions=function(o,p){'use strict';this.$SphericalRenderer1.width=o*m;this.$SphericalRenderer1.height=p*m;this.$SphericalRenderer26();};n.prototype.$SphericalRenderer26=function(){'use strict';k.perspective(this.$SphericalRenderer9,j.toRadian(this.$SphericalRenderer21),this.$SphericalRenderer1.width/this.$SphericalRenderer1.height,.1,100);this.$SphericalRenderer6.viewport(0,0,this.$SphericalRenderer6.drawingBufferWidth,this.$SphericalRenderer6.drawingBufferHeight);};n.prototype.$SphericalRenderer25=function(){'use strict';this.$SphericalRenderer27();this.updateViewportDimensions(this.$SphericalRenderer1.clientWidth,this.$SphericalRenderer1.clientHeight);if(!this.$SphericalRenderer28())throw new Error('Failed to intialize shaders: '+c('getErrorNameFromWebGLErrorCode')(this.$SphericalRenderer6.getError()));this.$SphericalRenderer29();this.$SphericalRenderer6.clearColor(0,0,0,1);this.$SphericalRenderer15.setAttribute('crossorigin','anonymous');if(this.$SphericalRenderer2.projectionType===c('VideoProjection').ROTATED_CUBEMAP)this.$SphericalRenderer30();};n.prototype.getScreenshotDataURL=function(o,p,q,r){'use strict';if(!this.$SphericalRenderer6||this.$SphericalRenderer3)return '';this.render(o,p);return this.$SphericalRenderer1.toDataURL(q,r);};n.prototype.$SphericalRenderer27=function(){'use strict';if(this.$SphericalRenderer6&&!this.$SphericalRenderer3)return;if(!b.WebGLRenderingContext)throw new Error('WebGLRenderingContext not available.');var o=['webgl','experimental-webgl','webkit-3d','moz-webgl'],p=null,q=null,r=c('EventListener').listen(this.$SphericalRenderer1,'webglcontextcreationerror',function(u){return q=u.statusMessage;});for(var s=0;s<o.length;s++){try{p=this.$SphericalRenderer1.getContext(o[s]);}catch(t){}if(p)break;}r.remove();if(!p){if(!q)q='Unknown error.';throw new Error('Failed to acquire 3D rendering context: '+q);}this.$SphericalRenderer6=p;this.$SphericalRenderer3=false;};n.prototype.$SphericalRenderer28=function(){'use strict';var o=this.$SphericalRenderer31();if(!o)return false;var p=this.$SphericalRenderer32();if(!p)return false;this.$SphericalRenderer14=this.$SphericalRenderer6.createProgram();this.$SphericalRenderer6.attachShader(this.$SphericalRenderer14,o);this.$SphericalRenderer6.attachShader(this.$SphericalRenderer14,p);this.$SphericalRenderer6.linkProgram(this.$SphericalRenderer14);if(!this.$SphericalRenderer6.getProgramParameter(this.$SphericalRenderer14,this.$SphericalRenderer6.LINK_STATUS))return false;this.$SphericalRenderer6.useProgram(this.$SphericalRenderer14);this.$SphericalRenderer14.vertexPositionAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer14,'aVertexPosition');this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer14.vertexPositionAttribute);this.$SphericalRenderer14.pMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,'uPMatrix');this.$SphericalRenderer14.mvMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,'uMVMatrix');this.$SphericalRenderer14.samplerUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,'uSampler');if(!this.$SphericalRenderer17){this.$SphericalRenderer14.textureCoordAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer14,'aTextureCoord');this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer14.textureCoordAttribute);}return true;};n.prototype.$SphericalRenderer29=function(){'use strict';this.$SphericalRenderer13=this.$SphericalRenderer6.createTexture();this.$SphericalRenderer13.image=this.$SphericalRenderer15;var o=this.$SphericalRenderer17?this.$SphericalRenderer6.TEXTURE_CUBE_MAP:this.$SphericalRenderer6.TEXTURE_2D;this.$SphericalRenderer6.bindTexture(o,this.$SphericalRenderer13);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MAG_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MIN_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_S,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_T,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.bindTexture(o,null);};n.prototype.$SphericalRenderer33=function(o){'use strict';var p=30,q=30,r=2,s=[],t=[],u,v;for(u=0;u<=p;u++){var w=(u/p-.5)*Math.PI,x=Math.sin(w),y=Math.cos(w);for(v=0;v<=q;v++){var z=(v/q-.5)*2*Math.PI,aa=Math.sin(z),ba=Math.cos(z),ca=ba*y,da=x,ea=aa*y,fa=v/q/this.$SphericalRenderer22.x,ga=u/p/this.$SphericalRenderer22.y;t.push(fa);t.push(ga);s.push(r*ca);s.push(r*da);s.push(r*ea);}}var ha=[];for(u=0;u<p;u++)for(v=0;v<q;v++){var ia=u*(q+1)+v,ja=ia+q+1;ha.push(ia);ha.push(ja);ha.push(ia+1);ha.push(ja);ha.push(ja+1);ha.push(ia+1);}this.$SphericalRenderer18[o]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[o]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(t),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer18[o].itemSize=2;this.$SphericalRenderer18[o].numItems=t.length/2;this.$SphericalRenderer20=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(s),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer20){this.$SphericalRenderer20.itemSize=3;this.$SphericalRenderer20.numItems=s.length/3;}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(ha),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=1;this.$SphericalRenderer19.numItems=ha.length;}};n.prototype.$SphericalRenderer34=function(o,p,q){'use strict';var r=[5,1,3,7,0,4,6,2,6,7,3,2,0,1,5,4,4,5,7,6,1,0,2,3],s=[];for(var t=0;t<r.length;t++){var u=r[t]>>2&1,v=r[t]>>1&1,w=r[t]>>0&1;s.push(u*2-1);s.push(v*2-1);s.push(w*2-1);}this.$SphericalRenderer20=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(s),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer20){this.$SphericalRenderer20.itemSize=3;this.$SphericalRenderer20.numItems=s.length/3;}if(!this.$SphericalRenderer17){var x,y,z,aa,ba,ca=[];if(this.$SphericalRenderer7){var da=this.$SphericalRenderer13.image.videoWidth/2;p=da/(Math.floor(da/32)*32);z=(p-1)/2;x=3;y=2;aa=1/y;ba=1/x;ca.push((0+z)*aa);ca.push((1-z)*ba);ca.push((0+z)*aa);ca.push((0+z)*ba);ca.push((1-z)*aa);ca.push((0+z)*ba);ca.push((1-z)*aa);ca.push((1-z)*ba);ca.push((0+z)*aa);ca.push((3-z)*ba);ca.push((0+z)*aa);ca.push((2+z)*ba);ca.push((1-z)*aa);ca.push((2+z)*ba);ca.push((1-z)*aa);ca.push((3-z)*ba);ca.push((2-z)*aa);ca.push((3-z)*ba);ca.push((1+z)*aa);ca.push((3-z)*ba);ca.push((1+z)*aa);ca.push((2+z)*ba);ca.push((2-z)*aa);ca.push((2+z)*ba);ca.push((2-z)*aa);ca.push((1-z)*ba);ca.push((1+z)*aa);ca.push((1-z)*ba);ca.push((1+z)*aa);ca.push((0+z)*ba);ca.push((2-z)*aa);ca.push((0+z)*ba);ca.push((0+z)*aa);ca.push((2-z)*ba);ca.push((0+z)*aa);ca.push((1+z)*ba);ca.push((1-z)*aa);ca.push((1+z)*ba);ca.push((1-z)*aa);ca.push((2-z)*ba);ca.push((1+z)*aa);ca.push((1+z)*ba);ca.push((2-z)*aa);ca.push((1+z)*ba);ca.push((2-z)*aa);ca.push((2-z)*ba);ca.push((1+z)*aa);ca.push((2-z)*ba);}else{z=(p-1)/2;x=2;y=3;aa=1/y;ba=1/x;for(var ea=0;ea<x;++ea)for(var fa=0;fa<y;++fa){var ga=x-1-ea,ha=fa;ca.push((ha+z)*aa);ca.push((ga+z)*ba);ca.push((ha+1-z)*aa);ca.push((ga+z)*ba);ca.push((ha+1-z)*aa);ca.push((ga+1-z)*ba);ca.push((ha+z)*aa);ca.push((ga+1-z)*ba);}}this.$SphericalRenderer18[q]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[q]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(ca),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer18[q].itemSize=2;this.$SphericalRenderer18[q].numItems=ca.length/2;}var ia=[];for(var ja=0;ja<r.length;ja+=4){ia.push(ja);ia.push(ja+2);ia.push(ja+1);ia.push(ja);ia.push(ja+3);ia.push(ja+2);}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(ia),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=1;this.$SphericalRenderer19.numItems=ia.length;}};n.prototype.$SphericalRenderer30=function(){'use strict';this.$SphericalRenderer11=l.fromValues(1,1,-1);this.$SphericalRenderer12=l.fromValues(-1,1,0);var o=k.create();k.rotate(o,o,j.toRadian(15),this.$SphericalRenderer12);l.transformMat4(this.$SphericalRenderer11,this.$SphericalRenderer11,o);this.$SphericalRenderer8=k.create();k.lookAt(this.$SphericalRenderer8,l.fromValues(0,0,0),l.fromValues(1,1,1),this.$SphericalRenderer12);};n.prototype.$SphericalRenderer31=function(){'use strict';var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.VERTEX_SHADER),p='\n      attribute vec3 aVertexPosition;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec3 vVertexDirectionVector;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vVertexDirectionVector = aVertexPosition;\n      }\n    ',q='\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    ',r=this.$SphericalRenderer17?p:q;this.$SphericalRenderer6.shaderSource(o,r);this.$SphericalRenderer6.compileShader(o);if(!this.$SphericalRenderer6.getShaderParameter(o,this.$SphericalRenderer6.COMPILE_STATUS))return null;return o;};n.prototype.$SphericalRenderer32=function(){'use strict';var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.FRAGMENT_SHADER),p='\n      varying highp vec3 vVertexDirectionVector;\n      uniform samplerCube uSampler;\n\n      void main(void) {\n        gl_FragColor = textureCube(uSampler, vVertexDirectionVector);\n      }\n    ',q='\n      varying highp vec2 vTextureCoord;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        gl_FragColor = texture2D(\n          uSampler,\n          vec2(vTextureCoord.s, vTextureCoord.t)\n        );\n      }\n    ',r=this.$SphericalRenderer17?p:q;this.$SphericalRenderer6.shaderSource(o,r);this.$SphericalRenderer6.compileShader(o);if(!this.$SphericalRenderer6.getShaderParameter(o,this.$SphericalRenderer6.COMPILE_STATUS))return null;return o;};n.prototype.$SphericalRenderer35=function(){'use strict';if(this.$SphericalRenderer17){this.$SphericalRenderer36();}else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer13);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,true);try{this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_2D,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer13.image);}catch(o){this.emit('renderingError',o);}this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,null);}};n.prototype.renderWithRotationMatrix=function(o){'use strict';if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer16)this.$SphericalRenderer35();this.$SphericalRenderer10=o;this.$SphericalRenderer37();};n.prototype.render=function(o,p){'use strict';if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer16)this.$SphericalRenderer35();if(this.$SphericalRenderer7){k.copy(this.$SphericalRenderer10,this.$SphericalRenderer8);k.rotate(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(p),this.$SphericalRenderer11);k.rotate(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(o-80),this.$SphericalRenderer12);}else{k.identity(this.$SphericalRenderer10);k.rotateX(this.$SphericalRenderer10,this.$SphericalRenderer10,-j.toRadian(p));k.rotateY(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(o));}this.$SphericalRenderer37();};n.prototype.$SphericalRenderer37=function(){'use strict';this.$SphericalRenderer6.clear(this.$SphericalRenderer6.COLOR_BUFFER_BIT|this.$SphericalRenderer6.DEPTH_BUFFER_BIT);this.$SphericalRenderer6.activeTexture(this.$SphericalRenderer6.TEXTURE0);if(this.$SphericalRenderer17){this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer13);if(this.$SphericalRenderer20===null)this.$SphericalRenderer34(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,0);}else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer13);var o=this.$SphericalRenderer13.image.videoWidth;if(this.$SphericalRenderer2.projectionType===c('VideoProjection').CUBEMAP||this.$SphericalRenderer2.projectionType===c('VideoProjection').ROTATED_CUBEMAP){if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer34(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,o);}else if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer33(o);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[o]);this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer14.textureCoordAttribute,this.$SphericalRenderer18[o].itemSize,this.$SphericalRenderer6.FLOAT,false,0,0);}this.$SphericalRenderer6.uniform1i(this.$SphericalRenderer14.samplerUniform,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);if(this.$SphericalRenderer20)this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer14.vertexPositionAttribute,this.$SphericalRenderer20.itemSize,this.$SphericalRenderer6.FLOAT,false,0,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer14.pMatrixUniform,false,this.$SphericalRenderer9);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer14.mvMatrixUniform,false,this.$SphericalRenderer10);if(this.$SphericalRenderer19)this.$SphericalRenderer6.drawElements(this.$SphericalRenderer6.TRIANGLES,this.$SphericalRenderer19.numItems,this.$SphericalRenderer6.UNSIGNED_SHORT,0);this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,null);};n.prototype.$SphericalRenderer38=function(){'use strict';var o=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_CUBE_MAP_TEXTURE_SIZE),p=this.$SphericalRenderer13.image.width;return Math.min(o,p);};n.prototype.$SphericalRenderer36=function(){'use strict';var o=this.$SphericalRenderer38(),p=this.$SphericalRenderer13.image.width,q=c('DOM').create('canvas',{width:o,height:o}),r=q.getContext('2d');this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,false);this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer13);for(var s=0;s<6;s++){r.drawImage(this.$SphericalRenderer13.image,0,s*p,p,p,0,0,o,o);var t=new Uint8Array(r.getImageData(0,0,o,o).data);this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,this.$SphericalRenderer6.RGBA,o,o,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,t);}this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,null);};f.exports=n;}),null);
__d('SphericalVideoPlayer',['cx','Arbiter','Banzai','CSS','DOM','DOMDimensions','EmitterSubscription','Event','FullScreen','SphericalVideoPerformanceTracker','Rect','SphericalMediaCanvasPool','SphericalVideoComponentActions','SphericalVideoExperiments','SphericalVideoPlayerEvents','SphericalViewportControl','SphericalVideoComponentDispatcher','SubscriptionsHandler','SphericalRenderer','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','VideoPlayerReason','VideoPlayerStates','forwardEvent','requestAnimationFrame','throttle','uniqueID','SphericalViewportControlStore','VideoPlayerControllerStore'],(function a(b,c,d,e,f,g,h){'use strict';var i='SphericalVideoPlayer',j=1000;c('SphericalMediaCanvasPool').setLimit(c('SphericalVideoExperiments').canvasLimit,i);function k(l,m){this.$SphericalVideoPlayer36=function(n){this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','isUnavailable',function(){return true;});var event={error:'SPHERICAL_RENDER_ERROR',message:n.message};this.$SphericalVideoPlayer1.logError(event);this.$SphericalVideoPlayer1.emit(c('VideoPlayerLoggerEvent').ERROR,event);}.bind(this);this.$SphericalVideoPlayer34=function(){if(!this.$SphericalVideoPlayer1.isState(c('VideoPlayerStates').PAUSED))this.$SphericalVideoPlayer1.pause(c('VideoPlayerReason').SPHERICAL_SWITCH_CANVAS);this.$SphericalVideoPlayer39();this.$SphericalVideoPlayer31();}.bind(this);this.$SphericalVideoPlayer38=function(n){if(!this.$SphericalVideoPlayer13)return;var o=this.$SphericalVideoPlayer13;if(this.$SphericalVideoPlayer2.readyState>=this.$SphericalVideoPlayer2.HAVE_CURRENT_DATA)if(this.$SphericalVideoPlayer29()||this.$SphericalVideoPlayer7){c('SphericalVideoPerformanceTracker').get().addFrameAtTime(n);this.$SphericalVideoPlayer7=false;var p=this.$SphericalVideoPlayer12.getOrientation();o.render(p.x+90,p.y);if(this.$SphericalVideoPlayer15){this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=null;}}c('requestAnimationFrame')(this.$SphericalVideoPlayer38);}.bind(this);this.$SphericalVideoPlayer22=function(n,o){this.$SphericalVideoPlayer12.setRelativeSphericalOrientation(n,o);}.bind(this);this.$SphericalVideoPlayer24=function(n,o){this.$SphericalVideoPlayer12.setSphericalOrientation(n,o);}.bind(this);this.$SphericalVideoPlayer25=function(n){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.updateFieldOfView(n);this.$SphericalVideoPlayer12.setFieldOfView(n);this.$SphericalVideoPlayer19=n;this.$SphericalVideoPlayer21();}}.bind(this);this.$SphericalVideoPlayer26=function(n,o){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer5.width=n;this.$SphericalVideoPlayer5.height=o;this.$SphericalVideoPlayer37(this.$SphericalVideoPlayer13,this.$SphericalVideoPlayer3,n,o);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c('DOMDimensions').getElementDimensions(this.$SphericalVideoPlayer4);this.$SphericalVideoPlayer21();}else this.$SphericalVideoPlayer5={width:n,height:o};}.bind(this);this.$SphericalVideoPlayer35=function(n,o){n=n>=0?(n+180)%360-180:(n-180)%360+180;this.$SphericalVideoPlayer40(n,o);this.$SphericalVideoPlayer18.yaw=n;this.$SphericalVideoPlayer18.pitch=o;if(!this.$SphericalVideoPlayer13)this.$SphericalVideoPlayer30();this.$SphericalVideoPlayer21();}.bind(this);this.$SphericalVideoPlayer40=c('throttle')(function(n,o){c('Banzai').post('spherical_video_viewport',{video_fbid:this.$SphericalVideoPlayer1.getVideoID(),yaw_degrees:n,pitch_degrees:o,roll_degrees:0,field_of_view_y:this.$SphericalVideoPlayer10.fieldOfView,aspect_ratio:this.$SphericalVideoPlayer5.height/this.$SphericalVideoPlayer5.width,video_player_position:this.$SphericalVideoPlayer2.currentTime,timestamp:Date.now()});}.bind(this),j);this.$SphericalVideoPlayer10=l;this.$SphericalVideoPlayer11=Object.assign({viewportClassName:"_2a6s",canvasClassName:"_38vt",placeholderImgClassName:"_44h9",videoID:'',playerID:undefined,eagerPreload:undefined,preventScrollDefaultAction:undefined,useViewportDimension:undefined},m);}k.prototype.enable=function(l){if(this.$SphericalVideoPlayer1)return;this.$SphericalVideoPlayer1=l;if(typeof b.WebGLRenderingContext!=='function'){this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','isUnavailable',function(){return true;});var event={error:'SPHERICAL_SETUP_FAILED',message:'WebGLRenderingContext not available.'};this.$SphericalVideoPlayer1.logError(event);this.$SphericalVideoPlayer1.emit(c('VideoPlayerLoggerEvent').ERROR,event);return;}var m=l.getVideoNode();this.$SphericalVideoPlayer2=m;this.$SphericalVideoPlayer7=false;this.$SphericalVideoPlayer17=true;this.$SphericalVideoPlayer8=new (c('SubscriptionsHandler'))();this.$SphericalVideoPlayer8.addSubscriptions(c('Event').listen(this.$SphericalVideoPlayer2,'loadeddata',function(){return this.$SphericalVideoPlayer21();}.bind(this)),c('Event').listen(this.$SphericalVideoPlayer2,'seeked',function(){return this.$SphericalVideoPlayer21();}.bind(this)),c('Event').listen(this.$SphericalVideoPlayer2,'ended',function(){return this.$SphericalVideoPlayer22(0,0);}.bind(this)),l.addListener('stateChange',function(){if(l.isState(c('VideoPlayerStates').DESTROYED))this.$SphericalVideoPlayer23();}.bind(this)),l.addListener(c('VideoPlayerFallbackEvents').RECOVER,function(){this.$SphericalVideoPlayer23();c('CSS').removeClass(this.$SphericalVideoPlayer2,"_3axk");this.$SphericalVideoPlayer1.play();}.bind(this)),l.addListener(c('SphericalVideoPlayerEvents').SET_ABSOLUTE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer24),l.addListener(c('SphericalVideoPlayerEvents').SET_RELATIVE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer22),l.addListener(c('SphericalVideoPlayerEvents').SET_FIELD_OF_VIEW,this.$SphericalVideoPlayer25),l.addListener('dimensionsChange',this.$SphericalVideoPlayer26),l.once('changeVolume',function(){return this.$SphericalVideoPlayer17=false;}.bind(this)),l.once('muteVideo',function(){return this.$SphericalVideoPlayer17=false;}.bind(this)),l.once('unmuteVideo',function(){return this.$SphericalVideoPlayer17=false;}.bind(this)));this.$SphericalVideoPlayer5=c('DOMDimensions').getElementDimensions(m);if(this.$SphericalVideoPlayer5.width===0||this.$SphericalVideoPlayer5.height===0)this.$SphericalVideoPlayer5={width:m.width,height:m.height};this.$SphericalVideoPlayer14=this.$SphericalVideoPlayer1.getVideoPlayerID()||c('uniqueID')();this.$SphericalVideoPlayer18={yaw:this.$SphericalVideoPlayer10.initialHeading,pitch:this.$SphericalVideoPlayer10.initialPitch};this.$SphericalVideoPlayer19=this.$SphericalVideoPlayer10.fieldOfView;c('CSS').addClass(m,"_3axk");this.$SphericalVideoPlayer27();l.registerOption('SphericalVideoPlayer','getDimensions',function(){return this.$SphericalVideoPlayer11.useViewportDimension?this.$SphericalVideoPlayer6:this.$SphericalVideoPlayer5;}.bind(this));l.registerOption('SphericalVideoPlayer','isReady',function(){return !!this.$SphericalVideoPlayer13;}.bind(this));l.registerOption('SphericalVideoPlayer','getScreenshotDataURL',function(){return this.$SphericalVideoPlayer28();}.bind(this));if(this.$SphericalVideoPlayer29()||this.$SphericalVideoPlayer11.eagerPreload){this.$SphericalVideoPlayer30();}else this.$SphericalVideoPlayer31();};k.prototype.disable=function(){this.$SphericalVideoPlayer23();};k.prototype.$SphericalVideoPlayer30=function(){if(this.$SphericalVideoPlayer1.getOption('SphericalVideoPlayer','isUnavailable'))return;this.$SphericalVideoPlayer9=new (c('SubscriptionsHandler'))();if(this.$SphericalVideoPlayer16){this.$SphericalVideoPlayer16.remove();this.$SphericalVideoPlayer16=null;}this.$SphericalVideoPlayer32();this.$SphericalVideoPlayer1.setStillFrameEnabled(false);this.$SphericalVideoPlayer21();this.$SphericalVideoPlayer1.emit('SphericalVideoPlayer/ready');};k.prototype.$SphericalVideoPlayer31=function(){this.$SphericalVideoPlayer16=this.$SphericalVideoPlayer1.addListener('stateChange',function(){if(this.$SphericalVideoPlayer29())this.$SphericalVideoPlayer30();}.bind(this));};k.prototype.$SphericalVideoPlayer33=function(){if(!this.$SphericalVideoPlayer13)return;var l=this.$SphericalVideoPlayer28(),m=c('DOM').create('img',{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,src:l,className:this.$SphericalVideoPlayer11.placeholderImgClassName});c('DOM').insertAfter(this.$SphericalVideoPlayer2,m);if(this.$SphericalVideoPlayer15)this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=m;this.$SphericalVideoPlayer34();};k.prototype.$SphericalVideoPlayer28=function(l,m){if(!this.$SphericalVideoPlayer13)return '';var n=this.$SphericalVideoPlayer13,o=this.$SphericalVideoPlayer12.getOrientation(),p=o.x,q=o.y;return n.getScreenshotDataURL(p+90,q,l,m);};k.prototype.$SphericalVideoPlayer27=function(){var l=c('DOM').create('div',{className:this.$SphericalVideoPlayer11.viewportClassName,tabIndex:0}),m=new (c('SphericalViewportControl'))(l,this.$SphericalVideoPlayer10);this.$SphericalVideoPlayer8.addSubscriptions(m.addListener('DOM/click',function(o){if(o.button!==0)return;this.$SphericalVideoPlayer1.clickVideo();o.preventDefault();}.bind(this)),m.addListener('viewportChange',this.$SphericalVideoPlayer35),m.addListener('updateViewportBegin',function(){if(this.$SphericalVideoPlayer1.isMuted()&&this.$SphericalVideoPlayer17){this.$SphericalVideoPlayer17=false;this.$SphericalVideoPlayer1.unmute();}this.$SphericalVideoPlayer1.logEvent(c('VideoPlayerLoggerEvent').VIEWPORT_ROTATED);}.bind(this)));this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','getCurrentViewport',function(){return this.$SphericalVideoPlayer18;}.bind(this));this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','getFieldOfView',function(){return this.$SphericalVideoPlayer19;}.bind(this));var n=['DOM/click','updateViewportBegin','updateViewportMove','updateViewportEnd','wheelScroll','viewportChange'];this.$SphericalVideoPlayer8.addSubscriptions.apply(this.$SphericalVideoPlayer8,n.map(function(o){return c('forwardEvent')(m,this.$SphericalVideoPlayer1,o);}.bind(this)));this.$SphericalVideoPlayer12=m;this.$SphericalVideoPlayer4=l;c('Arbiter').subscribe('VideoChannelView/opened',function(){this.$SphericalVideoPlayer20=true;this.$SphericalVideoPlayer12.disableKeyboard();}.bind(this));c('Arbiter').subscribe('VideoChannelView/closed',function(){this.$SphericalVideoPlayer20=false;this.$SphericalVideoPlayer12.enableKeyboard();}.bind(this));c('FullScreen').subscribe('changed',function(){if(c('FullScreen').isFullScreen()){this.$SphericalVideoPlayer12.enableKeyboard();}else if(this.$SphericalVideoPlayer20)this.$SphericalVideoPlayer12.disableKeyboard();}.bind(this));if(this.$SphericalVideoPlayer11.preventScrollDefaultAction)this.$SphericalVideoPlayer12.setPreventScrollDefaultAction(true);c('DOM').insertAfter(this.$SphericalVideoPlayer2,l);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c('DOMDimensions').getElementDimensions(l);c('SphericalVideoComponentDispatcher').explicitlyRegisterStores([c('SphericalViewportControlStore'),c('VideoPlayerControllerStore')]);c('SphericalVideoComponentActions').registerSphericalViewportControl(this.$SphericalVideoPlayer1.getVideoPlayerID(),this.$SphericalVideoPlayer12);};k.prototype.$SphericalVideoPlayer32=function(){var l={canvasAttrs:{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,className:this.$SphericalVideoPlayer11.canvasClassName,tabIndex:0},beforeCanvasLost:function(){return this.$SphericalVideoPlayer33();}.bind(this)},m=c('SphericalMediaCanvasPool').get(this.$SphericalVideoPlayer14,l,i),n=new (c('SphericalRenderer'))(this.$SphericalVideoPlayer2,m,this.$SphericalVideoPlayer10);this.$SphericalVideoPlayer9.addSubscriptions(n.addListener('renderingError',this.$SphericalVideoPlayer36),n.addListener('renderingContextLost',this.$SphericalVideoPlayer34));this.$SphericalVideoPlayer3=m;this.$SphericalVideoPlayer13=n;c('DOM').insertAfter(this.$SphericalVideoPlayer2,m);this.$SphericalVideoPlayer37(n,this.$SphericalVideoPlayer3,this.$SphericalVideoPlayer5.width,this.$SphericalVideoPlayer5.height);c('CSS').show(m);c('requestAnimationFrame')(this.$SphericalVideoPlayer38);};k.prototype.$SphericalVideoPlayer29=function(){return this.$SphericalVideoPlayer1.isState(c('VideoPlayerStates').PLAYING);};k.prototype.$SphericalVideoPlayer37=function(l,m,n,o){l.updateViewportDimensions(n,o);c('SphericalVideoComponentActions').updateViewportSize(this.$SphericalVideoPlayer1.getVideoPlayerID(),new (c('Rect'))(m));};k.prototype.$SphericalVideoPlayer21=function(){this.$SphericalVideoPlayer7=true;};k.prototype.$SphericalVideoPlayer39=function(){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.destroy();this.$SphericalVideoPlayer13=null;this.$SphericalVideoPlayer9.release();this.$SphericalVideoPlayer3.remove();}};k.prototype.$SphericalVideoPlayer23=function(){this.$SphericalVideoPlayer8.release();this.$SphericalVideoPlayer39();this.$SphericalVideoPlayer12.destroy();this.$SphericalVideoPlayer4.remove();c('SphericalVideoPerformanceTracker').get().destroy();};f.exports=k;}),null);
__d('SphericalVideoRecenterControl',['SubscriptionsHandler','easeInOutInterpolate','requestAnimationFrame'],(function a(b,c,d,e,f,g){var h=1000;function i(j,k,l){'use strict';this.$SphericalVideoRecenterControl2=j;this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl7=this.$SphericalVideoRecenterControl10.bind(this);this.$SphericalVideoRecenterControl6={yaw:k,pitch:l};this.$SphericalVideoRecenterControl5={yaw:k,pitch:l};if(j.getOption('SphericalVideoPlayer','isReady')){this.$SphericalVideoRecenterControl11();}else j.once('SphericalVideoPlayer/ready',function(){return this.$SphericalVideoRecenterControl11();}.bind(this));}i.prototype.$SphericalVideoRecenterControl11=function(){'use strict';this.$SphericalVideoRecenterControl9=new (c('SubscriptionsHandler'))();this.$SphericalVideoRecenterControl9.addSubscriptions(this.$SphericalVideoRecenterControl2.addListener('updateViewportBegin',function(){return this.$SphericalVideoRecenterControl12();}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalHeadingIndicator/click',function(){return this.$SphericalVideoRecenterControl13();}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalHeadingIndicator/click',function(){return this.$SphericalVideoRecenterControl13();}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('VideoWithSphericalGuidedTour/intervalUpdate',function(j){return this.updateTargetViewport(j.baseYaw+j.deltaYaw,j.basePitch+j.deltaPitch);}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('VideoWithSphericalGuidedTour/stateToggle',function(j){if(!j){this.$SphericalVideoRecenterControl6.yaw=this.$SphericalVideoRecenterControl5.yaw;this.$SphericalVideoRecenterControl6.pitch=this.$SphericalVideoRecenterControl5.pitch;}}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalVideoViewportTagComment/click',function(j){return this.$SphericalVideoRecenterControl13(j);}.bind(this)));};i.prototype.updateTargetViewport=function(j,k){'use strict';this.$SphericalVideoRecenterControl6.yaw=j;this.$SphericalVideoRecenterControl6.pitch=k;};i.prototype.$SphericalVideoRecenterControl13=function(j){'use strict';if(this.$SphericalVideoRecenterControl1||this.$SphericalVideoRecenterControl2.getOption('VideoWithSphericalGuidedTour','enabled')&&this.$SphericalVideoRecenterControl2.isState('playing'))return;this.$SphericalVideoRecenterControl1=true;this.$SphericalVideoRecenterControl3=Date.now();var k=this.$SphericalVideoRecenterControl2.getOption('SphericalVideoPlayer','getCurrentViewport'),l=j||this.$SphericalVideoRecenterControl6,m=l.yaw-k.yaw;if(Math.abs(m)>180)m=m>0?m-360:m+360;this.$SphericalVideoRecenterControl8={basePitch:k.pitch,deltaPitch:l.pitch-k.pitch,baseYaw:k.yaw,deltaYaw:m};this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationStart');c('requestAnimationFrame')(this.$SphericalVideoRecenterControl7);};i.prototype.$SphericalVideoRecenterControl12=function(){'use strict';this.$SphericalVideoRecenterControl1=false;};i.prototype.$SphericalVideoRecenterControl10=function(){'use strict';if(!this.$SphericalVideoRecenterControl1){this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationEnd');return;}var j=Date.now();if(j-this.$SphericalVideoRecenterControl3>h){this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationEnd');return;}c('requestAnimationFrame')(this.$SphericalVideoRecenterControl7);var k=this.$SphericalVideoRecenterControl8,l=c('easeInOutInterpolate')((j-this.$SphericalVideoRecenterControl3)/h),m=k.deltaPitch*l+k.basePitch,n=k.deltaYaw*l+k.baseYaw;this.$SphericalVideoRecenterControl2.setSphericalOrientation(n,m);};i.prototype.destroy=function(){'use strict';this.$SphericalVideoRecenterControl9.release();};f.exports=i;}),null);
__d('VideoSphericalHeadingIndicator',['cx','CSS','React','ReactDOM','SphericalVideoHeadingIndicator.react','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','destroyOnUnload'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k,l,m,n){var o,p=this,q=arguments.length<=5||arguments[5]===undefined?false:arguments[5];this.$VideoSphericalHeadingIndicator1=j;this.$VideoSphericalHeadingIndicator2=k;this.$VideoSphericalHeadingIndicator3=l;this.$VideoSphericalHeadingIndicator4=q;var r=j.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){r.remove();c('ReactDOM').unmountComponentAtNode(k);});if(j.isState('ready')||j.isState('playing')){this.$VideoSphericalHeadingIndicator5();}else (function(){var s=j.addListener('stateChange',function(){if(this.$VideoSphericalHeadingIndicator1.isState('ready')||this.$VideoSphericalHeadingIndicator1.isState('playing')){s.remove();this.$VideoSphericalHeadingIndicator5();}}.bind(p));})();c('destroyOnUnload')(function(){return c('ReactDOM').unmountComponentAtNode(k);});}i.prototype.$VideoSphericalHeadingIndicator5=function(){this.$VideoSphericalHeadingIndicator1.addListener('toggleFullscreen',this.$VideoSphericalHeadingIndicator6.bind(this));c('ReactDOM').render(c('React').createElement(c('SphericalVideoHeadingIndicator.react'),{initialYaw:this.$VideoSphericalHeadingIndicator3,onClick:this.$VideoSphericalHeadingIndicator7.bind(this),controller:this.$VideoSphericalHeadingIndicator1,isComposer:this.$VideoSphericalHeadingIndicator4}),this.$VideoSphericalHeadingIndicator2);};i.prototype.$VideoSphericalHeadingIndicator6=function(){if(this.$VideoSphericalHeadingIndicator1.isFullscreen()){c('CSS').addClass(this.$VideoSphericalHeadingIndicator2,"_4ubd");}else c('CSS').removeClass(this.$VideoSphericalHeadingIndicator2,"_4ubd");};i.prototype.$VideoSphericalHeadingIndicator7=function(){this.$VideoSphericalHeadingIndicator1.emit('SphericalHeadingIndicator/click');this.$VideoSphericalHeadingIndicator1.logEvent(c('VideoPlayerLoggerEvent').HEADING_RESET);};f.exports=i;}),null);
__d('VideoSphericalOverlay',['EventSubscription','ExposureTimers','SphericalGyroOverlay','SphericalMouseOverlay','VideoPlayerFallbackEvents','VideoPlayerUIComponentDrawer'],(function a(b,c,d,e,f,g){'use strict';var h=c('ExposureTimers').ExposureTimer,i=4000,j=2000*2,k=2000+300;function l(m,n,o){this.$VideoSphericalOverlay1=true;this.$VideoSphericalOverlay2=false;this.$VideoSphericalOverlay3=false;this.$VideoSphericalOverlay4=m;this.$VideoSphericalOverlay5=new (c('SphericalGyroOverlay'))(n,false);this.$VideoSphericalOverlay6=new (c('SphericalMouseOverlay'))(o);this.$VideoSphericalOverlay7=null;this.$VideoSphericalOverlay10=this.$VideoSphericalOverlay4.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.SphericalMouseAnimation,12+72);this.$VideoSphericalOverlay8=[this.$VideoSphericalOverlay10.addListener('reposition',function(p){return this.$VideoSphericalOverlay6.updatePosition(p);}.bind(this)),m.addListener('beginPlayback',function(){return this.$VideoSphericalOverlay11();}.bind(this)),m.addListener('pausePlayback',function(){return this.$VideoSphericalOverlay12();}.bind(this)),m.addListener('viewportChange',function(){return this.$VideoSphericalOverlay13();}.bind(this)),m.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){return this.$VideoSphericalOverlay13();}.bind(this)),m.addListener('clickVideo',function(){return this.$VideoSphericalOverlay12();}.bind(this)),m.addListener('stateChange',function(){return this.$VideoSphericalOverlay14();}.bind(this))];this.$VideoSphericalOverlay9=[this.$VideoSphericalOverlay5.addListener('animationStarted',function(){return this.$VideoSphericalOverlay15();}.bind(this)),this.$VideoSphericalOverlay5.addListener('animationFinished',function(){return this.$VideoSphericalOverlay16();}.bind(this)),this.$VideoSphericalOverlay6.addListener('animationStarted',function(){return this.$VideoSphericalOverlay15();}.bind(this)),this.$VideoSphericalOverlay6.addListener('animationFinished',function(){return this.$VideoSphericalOverlay16();}.bind(this))];}l.prototype.$VideoSphericalOverlay15=function(){this.$VideoSphericalOverlay2=true;this.$VideoSphericalOverlay4.emit('VideoSphericalOverlay/animationUpdate',true);};l.prototype.$VideoSphericalOverlay16=function(){this.$VideoSphericalOverlay2=false;this.$VideoSphericalOverlay4.emit('VideoSphericalOverlay/animationUpdate',false);if(this.$VideoSphericalOverlay3){this.$VideoSphericalOverlay9.forEach(function(m){return m.remove();});this.$VideoSphericalOverlay9=[];}};l.prototype.$VideoSphericalOverlay17=function(){this.$VideoSphericalOverlay5.startAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(k,function(){return this.$VideoSphericalOverlay18();}.bind(this),this.$VideoSphericalOverlay4);};l.prototype.$VideoSphericalOverlay18=function(){this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(i,function(){return this.$VideoSphericalOverlay19();}.bind(this),this.$VideoSphericalOverlay4);};l.prototype.$VideoSphericalOverlay19=function(){this.$VideoSphericalOverlay10.reserve();this.$VideoSphericalOverlay6.startAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(j,function(){return this.$VideoSphericalOverlay13();}.bind(this),this.$VideoSphericalOverlay4);};l.prototype.$VideoSphericalOverlay12=function(){this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay6.stopAnimation();this.$VideoSphericalOverlay10.release();};l.prototype.$VideoSphericalOverlay13=function(){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay6.cancelAnimation();this.$VideoSphericalOverlay10.release();this.$VideoSphericalOverlay20();};l.prototype.$VideoSphericalOverlay14=function(){if(this.$VideoSphericalOverlay4.isState('fallback')){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay12();}};l.prototype.$VideoSphericalOverlay11=function(){if(this.$VideoSphericalOverlay1){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay17();}};l.prototype.$VideoSphericalOverlay20=function(){this.$VideoSphericalOverlay8.forEach(function(m){return m.remove();});this.$VideoSphericalOverlay8=[];if(this.$VideoSphericalOverlay7){this.$VideoSphericalOverlay7.cancel();this.$VideoSphericalOverlay7=null;}if(!this.$VideoSphericalOverlay2){this.$VideoSphericalOverlay9.forEach(function(m){return m.remove();});this.$VideoSphericalOverlay9=[];}this.$VideoSphericalOverlay3=true;};f.exports=l;}),null);
__d('VideoWithSphericalErrorMessage',['fbt'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoWithSphericalErrorMessage1=j;this.$VideoWithSphericalErrorMessage2=j.addListener('optionsChange',function(){return this.$VideoWithSphericalErrorMessage3();}.bind(this));this.$VideoWithSphericalErrorMessage3();}i.prototype.$VideoWithSphericalErrorMessage4=function(j,k){'use strict';this.$VideoWithSphericalErrorMessage1.setOption('VideoErrorOverlay',j,k);};i.prototype.$VideoWithSphericalErrorMessage3=function(){'use strict';if(this.$VideoWithSphericalErrorMessage1.getOption('VideoErrorOverlay','available')){this.$VideoWithSphericalErrorMessage4('message',h._("360 Videos are not available on this browser."));this.$VideoWithSphericalErrorMessage4('linkURL','https://www.facebook.com/help/828417127257368');this.$VideoWithSphericalErrorMessage4('linkTitle',h._("Learn More"));this.$VideoWithSphericalErrorMessage2.remove();}};f.exports=i;}),null);