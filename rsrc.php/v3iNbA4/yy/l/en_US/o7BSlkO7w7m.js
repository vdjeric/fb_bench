if (self.CavalryLogger) { CavalryLogger.start_js(["H0a3Q"]); }

__d('PagesMessagingMercuryChatTabActionKeys',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null,SAY_HELLO:null});f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('PagesMessagingMercuryChatTabActions',['PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={requestGreetingConfig:function i(j){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG,threadID:j});},notifyGreetingConfigReceived:function i(j,k){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k});},sayHello:function i(j){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').SAY_HELLO,threadID:j});}};f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('immutable').Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,sayHelloMessage:null,userPromptMessage:null,pagesMessengerNullStateGK:false,pageResponsiveness:null,pageAbout:'',pagesMessengerNullStateV2:false,coverData:null,connectionContext:null}));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XPagesSayHelloController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/say_hello\/",{});}),null);
__d('PagesMessagingMercuryChatTabStore',['invariant','PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabActions','AsyncRequest','PagesMessagingMercuryChatTabDispatcher','FluxStore','Map','MercuryIDs','PagesMessagingMercuryChatTabState','XMercuryChatTabPagesGreetingConfigController','XPagesSayHelloController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesMessagingMercuryChatTabDispatcher'));this.$PagesMessagingMercuryChatTabStore1=new (c('Map'))();}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new (c('PagesMessagingMercuryChatTabState'))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m;};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c('PagesMessagingMercuryChatTabActionKeys').SAY_HELLO:this.$PagesMessagingMercuryChatTabStore3(o);break;case c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore4(o,this.$PagesMessagingMercuryChatTabStore5(n,p));break;}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c('XMercuryChatTabPagesGreetingConfigController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({page_id:c('MercuryIDs').getUserIDFromThreadID(l)}).setHandler(function(n){return c('PagesMessagingMercuryChatTabActions').notifyGreetingConfigReceived(l,n.payload);}).send();};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l){var m=c('XPagesSayHelloController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({page_id:c('MercuryIDs').getUserIDFromThreadID(l)}).send();var n=this.getStateByThread(l);this.$PagesMessagingMercuryChatTabStore4(l,n.set('sayHelloMessage',null));};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange();};k.prototype.$PagesMessagingMercuryChatTabStore5=function(l,m){return m.set('pagesGreetingShouldShow',l.pagesGreetingShouldShow).set('pagesGreetingContent',l.pagesGreetingContent).set('sayHelloMessage',l.sayHelloMessage).set('userPromptMessage',l.userPromptMessage).set('pagesMessengerNullStateGK',l.pagesMessengerNullStateGK).set('pageResponsiveness',l.pageResponsiveness).set('pageAbout',l.pageAbout).set('pagesMessengerNullStateV2',l.pagesMessengerNullStateV2).set('coverData',l.coverData).set('connectionContext',l.connectionContext);};f.exports=new k();}),null);
__d('MercuryChatTabPagesGreetingContainer.react',['ix','cx','fbt','Image.react','LineClamp.react','MercuryMessages','PagesMessagingMercuryChatTabActions','PagesMessagingMercuryChatTabStore','React','StoreAndPropBasedStateMixin','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'MercuryChatTabPagesGreetingContainer',propTypes:{threadID:k.string.isRequired},mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryMessages'),c('PagesMessagingMercuryChatTabStore'))],statics:{calculateState:function m(n){var o=c('MercuryMessages').get().getCurrentlyLoadedMessages(n.threadID);if(o&&o.length>0)return {message:null,sayHelloMessage:null,shouldShow:false,shouldShowSayHello:false,userPromptMessage:null,pagesMessengerNullStateGK:false,pageResponsiveness:null,pageAbout:'',pagesMessengerNullStateV2:false,connectionContext:null};var p=c('PagesMessagingMercuryChatTabStore').getStateByThread(n.threadID);return {shouldShow:p.pagesGreetingShouldShow&&p.pagesGreetingContent&&p.pagesGreetingContent.length>0,message:p.pagesGreetingContent,shouldShowSayHello:p.sayHelloMessage&&p.sayHelloMessage.length>0,sayHelloMessage:p.sayHelloMessage,userPromptMessage:p.userPromptMessage,pagesMessengerNullStateGK:p.pagesMessengerNullStateGK,pageResponsiveness:p.pageResponsiveness,pageAbout:p.pageAbout,pagesMessengerNullStateV2:p.pagesMessengerNullStateV2,connectionContext:p.connectionContext};}},componentDidMount:function m(){c('PagesMessagingMercuryChatTabActions').requestGreetingConfig(this.props.threadID);},render:function m(){if(this.state.pagesMessengerNullStateGK)return this._renderNullState();return (c('React').createElement('div',null,this._renderUserPrompt(),c('React').createElement('div',{className:(!this.state.shouldShow&&!this.state.shouldShowSayHello?"hidden_elem":'')+(' '+"_4uum")},this.state.shouldShow?this.state.message:null,this._renderSayHello())));},_renderNullState:function m(){if(this.state.pagesMessengerNullStateV2)return this._renderNullStateV2();return (c('React').createElement('div',{className:"_5-5-"},this._renderUserPrompt(),c('React').createElement('table',null,c('React').createElement('tbody',null,this._renderPageResponsiveness(),this._renderPageAbout()))));},_renderNullStateV2:function m(){return (c('React').createElement('div',{className:"_4d6c"},this._renderUserPrompt(),this.state.connectionContext));},_onSayHelloClick:function m(){c('PagesMessagingMercuryChatTabActions').sayHello(this.props.threadID);},_renderPageResponsiveness:function m(){if(!this.state.pageResponsiveness)return null;return (c('React').createElement('tr',{className:"_14bq"},c('React').createElement('td',{className:"_14bs"},c('React').createElement(c('Image.react'),{src:h("125883")})),c('React').createElement('td',{className:"_14bt"},this.state.pageResponsiveness)));},_renderPageAbout:function m(){if(this.state.pageAbout.length===0)return null;return (c('React').createElement('tr',{className:"_14bu"},c('React').createElement('td',{className:"_14bv"},c('React').createElement(c('Image.react'),{src:h("126341")})),c('React').createElement('td',null,c('React').createElement(c('LineClamp.react'),{lines:4,lineHeight:14},this.state.pageAbout))));},_renderUserPrompt:function m(){return (c('React').createElement('div',{className:"_4uun"},this.state.userPromptMessage));},_renderSayHello:function m(){if(!this.state.shouldShowSayHello)return null;var n=j._("Say '{message}'",[j.param('message',this.state.sayHelloMessage)]);return (c('React').createElement(c('XUIButton.react'),{className:this.state.shouldShow?"_3-8x":undefined,label:n,onClick:this._onSayHelloClick,size:'xlarge'}));}});f.exports=l;}),null);